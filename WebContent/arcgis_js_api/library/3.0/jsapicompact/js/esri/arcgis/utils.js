/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"dojox/charting/plot2d/Lines":function(){define("dojox/charting/plot2d/Lines",["dojo/_base/declare","./Default"],function(_1,_2){return _1("dojox.charting.plot2d.Lines",_2,{constructor:function(){this.opt.lines=true;}});});},"dojox/charting/plot2d/ClusteredBars":function(){define("dojox/charting/plot2d/ClusteredBars",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Bars","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils"],function(_3,_4,_5,_6,dc,df,_7,du){var _8=_7.lambda("item.purgeGroup()");return _5("dojox.charting.plot2d.ClusteredBars",_6,{render:function(_9,_a){if(this.zoom&&!this.isDataDirty()){return this.performZoom(_9,_a);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_8);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(_b){_b.cleanGroup(s);});}var t=this.chart.theme,f,_c,_d,_e,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_f=Math.max(0,this._hScaler.bounds.lower),_10=ht(_f),_11=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);_c=f.gap;_d=_e=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i],_12=_e*(this.series.length-i-1);if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _13=t.next("bar",[this.opt,run]),s=run.group,_14=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _15=run.data[j];if(_15!==null){var v=typeof _15=="number"?_15:_15.y,hv=ht(v),_16=hv-_10,w=Math.abs(_16),_17=typeof _15!="number"?t.addMixin(_13,"bar",_15,true):t.post(_13,"bar");if(w>=0&&_d>=1){var _18={x:_a.l+(v<_f?hv:_10),y:_9.height-_a.b-vt(j+1.5)+_c+_12,width:w,height:_d};var _19=this._plotFill(_17.series.fill,_9,_a);_19=this._shapeFill(_19,_18);var _1a=s.createRect(_18).setFill(_19).setStroke(_17.series.stroke);run.dyn.fill=_1a.getFill();run.dyn.stroke=_1a.getStroke();if(_11){var o={element:"bar",index:j,run:run,shape:_1a,x:v,y:j+1.5};this._connectEvents(o);_14[j]=o;}if(this.animate){this._animateBar(_1a,_a.l+_10,-_16);}}}}this._eventSeries[run.name]=_14;run.dirty=false;}this.dirty=false;return this;}});});},"dojox/gfx/utils":function(){define("dojox/gfx/utils",["dojo/_base/kernel","dojo/_base/lang","./_base","dojo/_base/html","dojo/_base/array","dojo/_base/window","dojo/_base/json","dojo/_base/Deferred","dojo/_base/sniff","require","dojo/_base/config"],function(_1b,_1c,g,_1d,arr,win,_1e,_1f,has,_20,_21){var gu=g.utils={};_1c.mixin(gu,{forEach:function(_22,f,o){o=o||win.global;f.call(o,_22);if(_22 instanceof g.Surface||_22 instanceof g.Group){arr.forEach(_22.children,function(_23){gu.forEach(_23,f,o);});}},serialize:function(_24){var t={},v,_25=_24 instanceof g.Surface;if(_25||_24 instanceof g.Group){t.children=arr.map(_24.children,gu.serialize);if(_25){return t.children;}}else{t.shape=_24.getShape();}if(_24.getTransform){v=_24.getTransform();if(v){t.transform=v;}}if(_24.getStroke){v=_24.getStroke();if(v){t.stroke=v;}}if(_24.getFill){v=_24.getFill();if(v){t.fill=v;}}if(_24.getFont){v=_24.getFont();if(v){t.font=v;}}return t;},toJson:function(_26,_27){return _1e.toJson(gu.serialize(_26),_27);},deserialize:function(_28,_29){if(_29 instanceof Array){return arr.map(_29,_1c.hitch(null,gu.deserialize,_28));}var _2a=("shape" in _29)?_28.createShape(_29.shape):_28.createGroup();if("transform" in _29){_2a.setTransform(_29.transform);}if("stroke" in _29){_2a.setStroke(_29.stroke);}if("fill" in _29){_2a.setFill(_29.fill);}if("font" in _29){_2a.setFont(_29.font);}if("children" in _29){arr.forEach(_29.children,_1c.hitch(null,gu.deserialize,_2a));}return _2a;},fromJson:function(_2b,_2c){return gu.deserialize(_2b,_1e.fromJson(_2c));},toSvg:function(_2d){var _2e=new _1f();if(g.renderer==="svg"){try{var svg=gu._cleanSvg(gu._innerXML(_2d.rawNode));_2e.callback(svg);}catch(e){_2e.errback(e);}}else{if(!gu._initSvgSerializerDeferred){gu._initSvgSerializer();}var _2f=gu.toJson(_2d);var _30=function(){try{var _31=_2d.getDimensions();var _32=_31.width;var _33=_31.height;var _34=gu._gfxSvgProxy.document.createElement("div");gu._gfxSvgProxy.document.body.appendChild(_34);win.withDoc(gu._gfxSvgProxy.document,function(){_1d.style(_34,"width",_32);_1d.style(_34,"height",_33);},this);var ts=gu._gfxSvgProxy[dojox._scopeName].gfx.createSurface(_34,_32,_33);var _35=function(_36){try{gu._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(_36,_2f);var svg=gu._cleanSvg(_34.innerHTML);_36.clear();_36.destroy();gu._gfxSvgProxy.document.body.removeChild(_34);_2e.callback(svg);}catch(e){_2e.errback(e);}};ts.whenLoaded(null,_35);}catch(ex){_2e.errback(ex);}};if(gu._initSvgSerializerDeferred.fired>0){_30();}else{gu._initSvgSerializerDeferred.addCallback(_30);}}return _2e;},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){gu._initSvgSerializerDeferred.callback(true);},_initSvgSerializer:function(){if(!gu._initSvgSerializerDeferred){gu._initSvgSerializerDeferred=new _1f();var f=win.doc.createElement("iframe");_1d.style(f,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var _37;if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onreadystatechange=function(){};_37=setInterval(function(){if(f.contentWindow[_1b.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_37);f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);}};}else{f.onload=function(){f.onload=function(){};_37=setInterval(function(){if(f.contentWindow[_1b.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_37);f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);};}var uri=(_21["dojoxGfxSvgProxyFrameUrl"]||_20.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html"));f.setAttribute("src",uri.toString());win.body().appendChild(f);}},_innerXML:function(_38){if(_38.innerXML){return _38.innerXML;}else{if(_38.xml){return _38.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(_38);}}}return null;},_cleanSvg:function(svg){if(svg){if(svg.indexOf("xmlns=\"http://www.w3.org/2000/svg\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns=\"http://www.w3.org/2000/svg\""+svg;}if(svg.indexOf("xmlns:xlink=\"http://www.w3.org/1999/xlink\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\""+svg;}if(svg.indexOf("xlink:href")===-1){svg=svg.replace(/href\s*=/g,"xlink:href=");}svg=svg.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/[=]([^"']+?)(\s|>)/g,"=\"$1\"$2");}return svg;}});return gu;});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/sniff","dojo/_base/unload","dojo/_base/window"],function(_39,_3a,_3b,_3c,_3d,_3e,_3f,_40,has,_41,win){var _42=_3f("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(_43){var _44=this.declaredClass,_45=this;return _3c.substitute(_43,this,function(_46,key){if(key.charAt(0)=="!"){_46=_39.getObject(key.substr(1),false,_45);}if(typeof _46=="undefined"){throw new Error(_44+" template:"+key);}if(_46==null){return "";}return key.charAt(0)=="!"?_46:_46.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_3d(this.templatePath,{sanitize:true});}var _47=_42.getCachedTemplate(this.templateString,this._skipNodeCache);var _48;if(_39.isString(_47)){_48=_40.toDom(this._stringRepl(_47));if(_48.nodeType!=1){throw new Error("Invalid template: "+_47);}}else{_48=_47.cloneNode(true);}this.domNode=_48;this.inherited(arguments);this._attachTemplateNodes(_48,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_49){var _4a=this.containerNode;if(_49&&_4a){while(_49.hasChildNodes()){_4a.appendChild(_49.firstChild);}}},_attachTemplateNodes:function(_4b,_4c){var _4d=_39.isArray(_4b)?_4b:(_4b.all||_4b.getElementsByTagName("*"));var x=_39.isArray(_4b)?0:-1;for(;x<_4d.length;x++){var _4e=(x==-1)?_4b:_4d[x];if(this.widgetsInTemplate&&(_4c(_4e,"dojoType")||_4c(_4e,"data-dojo-type"))){continue;}var _4f=_4c(_4e,"dojoAttachPoint")||_4c(_4e,"data-dojo-attach-point");if(_4f){var _50,_51=_4f.split(/\s*,\s*/);while((_50=_51.shift())){if(_39.isArray(this[_50])){this[_50].push(_4e);}else{this[_50]=_4e;}this._attachPoints.push(_50);}}var _52=_4c(_4e,"dojoAttachEvent")||_4c(_4e,"data-dojo-attach-event");if(_52){var _53,_54=_52.split(/\s*,\s*/);var _55=_39.trim;while((_53=_54.shift())){if(_53){var _56=null;if(_53.indexOf(":")!=-1){var _57=_53.split(":");_53=_55(_57[0]);_56=_55(_57[1]);}else{_53=_55(_53);}if(!_56){_56=_53;}this._attachEvents.push(this.connect(_4e,_3a[_53]||_53,_56));}}}}},destroyRendering:function(){_3e.forEach(this._attachPoints,function(_58){delete this[_58];},this);this._attachPoints=[];_3e.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_42._templateCache={};_42.getCachedTemplate=function(_59,_5a){var _5b=_42._templateCache;var key=_59;var _5c=_5b[key];if(_5c){try{if(!_5c.ownerDocument||_5c.ownerDocument==win.doc){return _5c;}}catch(e){}_40.destroy(_5c);}_59=_3c.trim(_59);if(_5a||_59.match(/\$\{([^\}]+)\}/g)){return (_5b[key]=_59);}else{var _5d=_40.toDom(_59);if(_5d.nodeType!=1){throw new Error("Invalid template: "+_59);}return (_5b[key]=_5d);}};if(has("ie")){_41.addOnWindowUnload(function(){var _5e=_42._templateCache;for(var key in _5e){var _5f=_5e[key];if(typeof _5f=="object"){_40.destroy(_5f);}delete _5e[key];}});}_39.extend(_3b,{dojoAttachEvent:"",dojoAttachPoint:""});return _42;});},"dijit/_Templated":function(){define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_60,_61,_62,_63,_64,_65,_66){_65.extend(_60,{waiRole:"",waiState:""});return _64("dijit._Templated",[_61,_62],{widgetsInTemplate:false,constructor:function(){_66.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_attachTemplateNodes:function(_67,_68){this.inherited(arguments);var _69=_65.isArray(_67)?_67:(_67.all||_67.getElementsByTagName("*"));var x=_65.isArray(_67)?0:-1;for(;x<_69.length;x++){var _6a=(x==-1)?_67:_69[x];var _6b=_68(_6a,"waiRole");if(_6b){_6a.setAttribute("role",_6b);}var _6c=_68(_6a,"waiState");if(_6c){_63.forEach(_6c.split(/\s*,\s*/),function(_6d){if(_6d.indexOf("-")!=-1){var _6e=_6d.split("-");_6a.setAttribute("aria-"+_6e[0],_6e[1]);}});}}}});});},"dojox/charting/plot2d/Areas":function(){define("dojox/charting/plot2d/Areas",["dojo/_base/declare","./Default"],function(_6f,_70){return _6f("dojox.charting.plot2d.Areas",_70,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojox/lang/functional/array":function(){define("dojox/lang/functional/array",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","./lambda"],function(_71,_72,arr,win,df){var _73={};_72.mixin(df,{filter:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t=[],v,i,n;if(_72.isArray(a)){for(i=0,n=a.length;i<n;++i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){v=a.next();if(f.call(o,v,i++,a)){t.push(v);}}}else{for(i in a){if(!(i in _73)){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}}}return t;},forEach:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_72.isArray(a)){for(i=0,n=a.length;i<n;f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();f.call(o,a.next(),i++,a)){}}else{for(i in a){if(!(i in _73)){f.call(o,a[i],i,a);}}}}return o;},map:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t,n,i;if(_72.isArray(a)){t=new Array(n=a.length);for(i=0;i<n;t[i]=f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[];for(i=0;a.hasNext();t.push(f.call(o,a.next(),i++,a))){}}else{t=[];for(i in a){if(!(i in _73)){t.push(f.call(o,a[i],i,a));}}}}return t;},every:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_72.isArray(a)){for(i=0,n=a.length;i<n;++i){if(!f.call(o,a[i],i,a)){return false;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(!f.call(o,a.next(),i++,a)){return false;}}}else{for(i in a){if(!(i in _73)){if(!f.call(o,a[i],i,a)){return false;}}}}}return true;},some:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_72.isArray(a)){for(i=0,n=a.length;i<n;++i){if(f.call(o,a[i],i,a)){return true;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(f.call(o,a.next(),i++,a)){return true;}}}else{for(i in a){if(!(i in _73)){if(f.call(o,a[i],i,a)){return true;}}}}}return false;}});return df;});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","."],function(_74,_75,_76,_77,win,_78,_79){function _7a(_7b,_7c,_7d,_7e){var _7f=_78.getBox();if(!_7b.parentNode||String(_7b.parentNode.tagName).toLowerCase()!="body"){win.body().appendChild(_7b);}var _80=null;_74.some(_7c,function(_81){var _82=_81.corner;var pos=_81.pos;var _83=0;var _84={w:{"L":_7f.l+_7f.w-pos.x,"R":pos.x-_7f.l,"M":_7f.w}[_82.charAt(1)],h:{"T":_7f.t+_7f.h-pos.y,"B":pos.y-_7f.t,"M":_7f.h}[_82.charAt(0)]};if(_7d){var res=_7d(_7b,_81.aroundCorner,_82,_84,_7e);_83=typeof res=="undefined"?0:res;}var _85=_7b.style;var _86=_85.display;var _87=_85.visibility;if(_85.display=="none"){_85.visibility="hidden";_85.display="";}var mb=_75.getMarginBox(_7b);_85.display=_86;_85.visibility=_87;var _88={"L":pos.x,"R":pos.x-mb.w,"M":Math.max(_7f.l,Math.min(_7f.l+_7f.w,pos.x+(mb.w>>1))-mb.w)}[_82.charAt(1)],_89={"T":pos.y,"B":pos.y-mb.h,"M":Math.max(_7f.t,Math.min(_7f.t+_7f.h,pos.y+(mb.h>>1))-mb.h)}[_82.charAt(0)],_8a=Math.max(_7f.l,_88),_8b=Math.max(_7f.t,_89),_8c=Math.min(_7f.l+_7f.w,_88+mb.w),_8d=Math.min(_7f.t+_7f.h,_89+mb.h),_8e=_8c-_8a,_8f=_8d-_8b;_83+=(mb.w-_8e)+(mb.h-_8f);if(_80==null||_83<_80.overflow){_80={corner:_82,aroundCorner:_81.aroundCorner,x:_8a,y:_8b,w:_8e,h:_8f,overflow:_83,spaceAvailable:_84};}return !_83;});if(_80.overflow&&_7d){_7d(_7b,_80.aroundCorner,_80.corner,_80.spaceAvailable,_7e);}var l=_75.isBodyLtr(),s=_7b.style;s.top=_80.y+"px";s[l?"left":"right"]=(l?_80.x:_7f.w-_80.x-_80.w)+"px";s[l?"right":"left"]="auto";return _80;};return (_79.place={at:function(_90,pos,_91,_92){var _93=_74.map(_91,function(_94){var c={corner:_94,pos:{x:pos.x,y:pos.y}};if(_92){c.pos.x+=_94.charAt(1)=="L"?_92.x:-_92.x;c.pos.y+=_94.charAt(0)=="T"?_92.y:-_92.y;}return c;});return _7a(_90,_93);},around:function(_95,_96,_97,_98,_99){var _9a=(typeof _96=="string"||"offsetWidth" in _96)?_75.position(_96,true):_96;if(_96.parentNode){var _9b=_96.parentNode;while(_9b&&_9b.nodeType==1&&_9b.nodeName!="BODY"){var _9c=_75.position(_9b,true);var _9d=_76.getComputedStyle(_9b).overflow;if(_9d=="hidden"||_9d=="auto"||_9d=="scroll"){var _9e=Math.min(_9a.y+_9a.h,_9c.y+_9c.h);var _9f=Math.min(_9a.x+_9a.w,_9c.x+_9c.w);_9a.x=Math.max(_9a.x,_9c.x);_9a.y=Math.max(_9a.y,_9c.y);_9a.h=_9e-_9a.y;_9a.w=_9f-_9a.x;}_9b=_9b.parentNode;}}var x=_9a.x,y=_9a.y,_a0="w" in _9a?_9a.w:(_9a.w=_9a.width),_a1="h" in _9a?_9a.h:(_77.deprecated("place.around: dijit.place.__Rectangle: { x:"+x+", y:"+y+", height:"+_9a.height+", width:"+_a0+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_9a.height+", w:"+_a0+" }","","2.0"),_9a.h=_9a.height);var _a2=[];function _a3(_a4,_a5){_a2.push({aroundCorner:_a4,corner:_a5,pos:{x:{"L":x,"R":x+_a0,"M":x+(_a0>>1)}[_a4.charAt(1)],y:{"T":y,"B":y+_a1,"M":y+(_a1>>1)}[_a4.charAt(0)]}});};_74.forEach(_97,function(pos){var ltr=_98;switch(pos){case "above-centered":_a3("TM","BM");break;case "below-centered":_a3("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":_a3(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":_a3(ltr?"TL":"TR",ltr?"TR":"TL");_a3(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":_a3(ltr?"BL":"BR",ltr?"TL":"TR");_a3(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":_a3(ltr?"TL":"TR",ltr?"BL":"BR");_a3(ltr?"TR":"TL",ltr?"BR":"BL");break;default:_a3(pos.aroundCorner,pos.corner);}});var _a6=_7a(_95,_a2,_99,{w:_a0,h:_a1});_a6.aroundNodePos=_9a;return _a6;}});});},"dojox/charting/Chart2D":function(){define("dojox/charting/Chart2D",["dojo/_base/kernel","dojox","./Chart","./axis2d/Default","./axis2d/Invisible","./plot2d/Default","./plot2d/Lines","./plot2d/Areas","./plot2d/Markers","./plot2d/MarkersOnly","./plot2d/Scatter","./plot2d/Stacked","./plot2d/StackedLines","./plot2d/StackedAreas","./plot2d/Columns","./plot2d/StackedColumns","./plot2d/ClusteredColumns","./plot2d/Bars","./plot2d/StackedBars","./plot2d/ClusteredBars","./plot2d/Grid","./plot2d/Pie","./plot2d/Bubble","./plot2d/Candlesticks","./plot2d/OHLC","./plot2d/Spider"],function(_a7,_a8,_a9){_a7.deprecated("dojox.charting.Chart2D","Use dojo.charting.Chart instead and require all other components explicitly","2.0");return _a8.charting.Chart2D=_a9;});},"esri/layers/agsimageservice":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/dynamic,esri/layers/agscommon,esri/utils"],function(_aa,_ab,_ac){_ab.provide("esri.layers.agsimageservice");_ab.require("esri.layers.dynamic");_ab.require("esri.layers.agscommon");_ab.require("esri.utils");_ab.declare("esri.layers.ArcGISImageServiceLayer",esri.layers.DynamicMapServiceLayer,{constructor:function(url,_ad){this._url=esri.urlToObject(url);var _ae=_ad&&_ad.imageServiceParameters;this.format=_ae&&_ae.format;this.interpolation=_ae?_ae.interpolation:null;this.compressionQuality=_ae?_ae.compressionQuality:null;this.bandIds=_ae?_ae.bandIds:null;this.mosaicRule=_ae?_ae.mosaicRule:null;this.renderingRule=_ae?_ae.renderingRule:null;this._params=_ab.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},_ae?_ae.toJson():{});this._initLayer=_ab.hitch(this,this._initLayer);this.useMapImage=(_ad&&_ad.useMapImage)||false;this._loadCallback=_ad&&_ad.loadCallback;var _af=_ad&&_ad.resourceInfo;if(_af){this._initLayer(_af);}else{esri.request({url:this._url.path,content:_ab.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},disableClientCaching:false,_initLayer:function(_b0,io){this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_b0&&_b0._ssl);if(ssl){this._useSSL();}_ab.mixin(this,_b0);this.initialExtent=(this.fullExtent=this.extent=(new esri.geometry.Extent(_b0.extent)));this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var i,il,_b1=this.minValues,_b2=this.maxValues,_b3=this.meanValues,_b4=this.stdvValues,bs=(this.bands=[]);for(i=0,il=this.bandCount;i<il;i++){bs[i]={min:_b1[i],max:_b2[i],mean:_b3[i],stddev:_b4[i]};}var _b5=this.timeInfo;this.timeInfo=(_b5&&_b5.timeExtent)?new esri.layers.TimeInfo(_b5):null;var _b6=this.fields=[];var _b7=_b0.fields;if(_b7){for(i=0;i<_b7.length;i++){_b6.push(new esri.layers.Field(_b7[i]));}}this.version=_b0.currentVersion;if(!this.version){var ver;if("fields" in _b0||"objectIdField" in _b0||"timeInfo" in _b0){ver=10;}else{ver=9.3;}this.version=ver;}this.loaded=true;this.onLoad(this);var _b8=this._loadCallback;if(_b8){delete this._loadCallback;_b8(this);}},getImageUrl:function(_b9,_ba,_bb,_bc){var sr=_b9.spatialReference.wkid||_ab.toJson(_b9.spatialReference.toJson());delete this._params._ts;var _bd=this._url.path+"/exportImage?";_ab.mixin(this._params,{bbox:_b9.xmin+","+_b9.ymin+","+_b9.xmax+","+_b9.ymax,imageSR:sr,bboxSR:sr,size:_ba+","+_bb},this.disableClientCaching?{_ts:new Date().getTime()}:{});var _be=(this._params.token=this._getToken()),_bf=esri._getProxiedUrl(_bd+_ab.objectToQuery(_ab.mixin(this._params,{f:"image"})));if((_bf.length>esri.config.defaults.io.postLength)||this.useMapImage){this._jsonRequest=esri.request({url:_bd,content:_ab.mixin(this._params,{f:"json"}),callbackParamName:"callback",load:function(_c0,io){var _c1=_c0.href;if(_be){_c1+=(_c1.indexOf("?")===-1?("?token="+_be):("&token="+_be));}_bc(esri._getProxiedUrl(_c1));},error:this._errorHandler});}else{_bc(_bf);}},setInterpolation:function(_c2,_c3){this.interpolation=(this._params.interpolation=_c2);if(!_c3){this.refresh(true);}},setCompressionQuality:function(_c4,_c5){this.compressionQuality=(this._params.compressionQuality=_c4);if(!_c5){this.refresh(true);}},setBandIds:function(ids,_c6){this.bandIds=ids;this._params.bandIds=ids.join(",");if(!_c6){this.refresh(true);}},setDefaultBandIds:function(_c7){this.bandIds=(this._params.bandIds=null);if(!_c7){this.refresh(true);}},setDisableClientCaching:function(_c8){this.disableClientCaching=_c8;},setMosaicRule:function(_c9,_ca){this.mosaicRule=_c9;this._params.mosaicRule=_ab.toJson(_c9.toJson());if(!_ca){this.refresh(true);}},setRenderingRule:function(_cb,_cc){this.renderingRule=_cb;this._params.renderingRule=_ab.toJson(_cb.toJson());if(!_cc){this.refresh(true);}},setImageFormat:function(_cd,_ce){this.format=(this._params.format=_cd);if(!_ce){this.refresh(true);}},refresh:function(_cf){if(_cf){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},exportMapImage:function(_d0,_d1){var m=esri.config.defaults.map,p=_ab.mixin({size:m.width+","+m.height},this._params,_d0?_d0.toJson(this.normalization):{},{f:"json"});delete p._ts;this._exportMapImage(this._url.path+"/exportImage",p,_d1);}});_ab.declare("esri.layers.ImageServiceParameters",null,{extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,noData:null,toJson:function(_d2){var ext=this.bbox||this.extent;ext=ext&&_d2&&ext._normalize(true);var _d3=ext?(ext.spatialReference.wkid||_ab.toJson(ext.spatialReference.toJson())):null,_d4=this.imageSpatialReference,_d5={bbox:ext?(ext.xmin+","+ext.ymin+","+ext.xmax+","+ext.ymax):null,bboxSR:_d3,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),imageSR:(_d4?(_d4.wkid||_ab.toJson(_d4.toJson())):_d3),format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?_ab.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?_ab.toJson(this.renderingRule.toJson()):null,noData:this.noData};var _d6=this.timeExtent;_d5.time=_d6?_d6.toJson().join(","):null;return esri.filter(_d5,function(_d7){if(_d7!==null){return true;}});}});_ab.mixin(esri.layers.ImageServiceParameters,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor"});_ab.declare("esri.layers.MosaicRule",null,{method:null,where:null,sortField:null,sortValue:null,ascending:false,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,toJson:function(){var _d8={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue?_ab.toJson(this.sortValue):null,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation};return esri.filter(_d8,function(_d9){if(_d9!==null){return true;}});}});_ab.mixin(esri.layers.MosaicRule,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND"});_ab.declare("esri.layers.RasterFunction",null,{functionName:null,"arguments":null,variableName:null,toJson:function(){var _da={rasterFunction:this.functionName,rasterFunctionArguments:this["arguments"],variableName:this.variableName};return esri.filter(_da,function(_db){if(_db!==null){return true;}});}});});},"dojox/charting/Series":function(){define("dojox/charting/Series",["dojo/_base/lang","dojo/_base/declare","./Element"],function(_dc,_dd,_de){return _dd("dojox.charting.Series",_de,{constructor:function(_df,_e0,_e1){_dc.mixin(this,_e1);if(typeof this.plot!="string"){this.plot="default";}this.update(_e0);},clear:function(){this.dyn={};},update:function(_e2){if(_dc.isArray(_e2)){this.data=_e2;}else{this.source=_e2;this.data=this.source.data;if(this.source.setSeriesObject){this.source.setSeriesObject(this);}}this.dirty=true;this.clear();}});});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","."],function(_e3,_e4,dom,_e5,_e6,_e7,_e8,on,_e9,has,_ea,_eb,win,_ec,_ed,_ee,_ef){var _f0=_e4([_ea,_e7],{curNode:null,activeStack:[],constructor:function(){var _f1=_e8.hitch(this,function(_f2){if(dom.isDescendant(this.curNode,_f2)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,_f2)){this.set("prevNode",null);}});_e3.before(_e6,"empty",_f1);_e3.before(_e6,"destroy",_f1);},registerIframe:function(_f3){return this.registerWin(_f3.contentWindow,_f3);},registerWin:function(_f4,_f5){var _f6=this;var _f7=function(evt){_f6._justMouseDowned=true;setTimeout(function(){_f6._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_f6._onTouchNode(_f5||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_f4.document.documentElement:_f4.document;if(doc){if(has("ie")){_f4.document.body.attachEvent("onmousedown",_f7);var _f8=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(_ed.isTabNavigable(evt.srcElement)){_f6._onFocusNode(_f5||evt.srcElement);}else{_f6._onTouchNode(_f5||evt.srcElement);}};doc.attachEvent("onactivate",_f8);var _f9=function(evt){_f6._onBlurNode(_f5||evt.srcElement);};doc.attachEvent("ondeactivate",_f9);return {remove:function(){_f4.document.detachEvent("onmousedown",_f7);doc.detachEvent("onactivate",_f8);doc.detachEvent("ondeactivate",_f9);doc=null;}};}else{doc.body.addEventListener("mousedown",_f7,true);doc.body.addEventListener("touchstart",_f7,true);var _fa=function(evt){_f6._onFocusNode(_f5||evt.target);};doc.addEventListener("focus",_fa,true);var _fb=function(evt){_f6._onBlurNode(_f5||evt.target);};doc.addEventListener("blur",_fb,true);return {remove:function(){doc.body.removeEventListener("mousedown",_f7,true);doc.body.removeEventListener("touchstart",_f7,true);doc.removeEventListener("focus",_fa,true);doc.removeEventListener("blur",_fb,true);doc=null;}};}}},_onBlurNode:function(){this.set("prevNode",this.curNode);this.set("curNode",null);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(_e8.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);this.prevNode=null;}),100);},_onTouchNode:function(_fc,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _fd=[];try{while(_fc){var _fe=_e5.get(_fc,"dijitPopupParent");if(_fe){_fc=_ee.byId(_fe).domNode;}else{if(_fc.tagName&&_fc.tagName.toLowerCase()=="body"){if(_fc===win.body()){break;}_fc=_ec.get(_fc.ownerDocument).frameElement;}else{var id=_fc.getAttribute&&_fc.getAttribute("widgetId"),_ff=id&&_ee.byId(id);if(_ff&&!(by=="mouse"&&_ff.get("disabled"))){_fd.unshift(id);}_fc=_fc.parentNode;}}}}catch(e){}this._setStack(_fd,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("curNode",node);},_setStack:function(_100,by){var _101=this.activeStack;this.set("activeStack",_100);for(var _102=0;_102<Math.min(_101.length,_100.length);_102++){if(_101[_102]!=_100[_102]){break;}}var _103;for(var i=_101.length-1;i>=_102;i--){_103=_ee.byId(_101[i]);if(_103){_103._hasBeenBlurred=true;_103.set("focused",false);if(_103._focusManager==this){_103._onBlur(by);}this.emit("widget-blur",_103,by);}}for(i=_102;i<_100.length;i++){_103=_ee.byId(_100[i]);if(_103){_103.set("focused",true);if(_103._focusManager==this){_103._onFocus(by);}this.emit("widget-focus",_103,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _104=new _f0();_e9(function(){var _105=_104.registerWin(win.doc.parentWindow||win.doc.defaultView);if(has("ie")){_eb.addOnWindowUnload(function(){_105.remove();_105=null;});}});_ef.focus=function(node){_104.focus(node);};for(var attr in _104){if(!/^_/.test(attr)){_ef.focus[attr]=typeof _104[attr]=="function"?_e8.hitch(_104,attr):_104[attr];}}_104.watch(function(attr,_106,_107){_ef.focus[attr]=_107;});return _104;});},"dijit/hccss":function(){define("dijit/hccss",["require","dojo/_base/config","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/ready","dojo/_base/sniff","dojo/_base/window"],function(_108,_109,_10a,_10b,_10c,_10d,has,win){if(has("ie")||has("mozilla")){_10d(90,function(){var div=_10b.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(_109.blankGif||_108.toUrl("dojo/resources/blank.gif"))+"\");"}},win.body());var cs=_10c.getComputedStyle(div);if(cs){var _10e=cs.backgroundImage;var _10f=(cs.borderTopColor==cs.borderRightColor)||(_10e!=null&&(_10e=="none"||_10e=="url(invalid-url:)"));if(_10f){_10a.add(win.body(),"dijit_a11y");}if(has("ie")){div.outerHTML="";}else{win.body().removeChild(div);}}});}});},"esri/layers/osm":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/tiled"],function(_110,dojo,_111){dojo.provide("esri.layers.osm");dojo.require("esri.layers.tiled");dojo.declare("esri.layers.OpenStreetMapLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_112){this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_112&&_112.tileServers)||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=_112?_112.displayLevels:null;this.loaded=true;this.onLoad(this);var _113=_112&&_112.loadCallback;if(_113){_113(this);}},getTileUrl:function(_114,row,col){return esri._getProxiedUrl(this.tileServers[row%this.serversLength]+"/"+_114+"/"+col+"/"+row+".png");}});});},"esri/tasks/query":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task,esri/_time"],function(_115,dojo,_116){dojo.provide("esri.tasks.query");dojo.require("esri.tasks._task");dojo.require("esri._time");dojo.declare("esri.tasks.QueryTask",esri.tasks._Task,{constructor:function(url,_117){this._handler=dojo.hitch(this,this._handler);this._relationshipQueryHandler=dojo.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=dojo.hitch(this,this._executeForIdsHandler);this._countHandler=dojo.hitch(this,this._countHandler);this.source=_117&&_117.source;this.gdbVersion=_117&&_117.gdbVersion;},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_118,_119,_11a,_11b,_11c){var _11d=_11c.assembly,_11e=this._encode(dojo.mixin({},this._url.query,{f:"json"},_118.toJson(_11d&&_11d[0]))),_11f=this._handler,_120=this._errorHandler;if(this.source){var _121={source:this.source.toJson()};_11e.layer=dojo.toJson(_121);}if(this.gdbVersion){_11e.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path+"/query",content:_11e,callbackParamName:"callback",load:function(r,i){_11f(r,i,_119,_11a,_11c.dfd);},error:function(r){_120(r,_11a,_11c.dfd);},callbackSuffix:_11b});},executeRelationshipQuery:function(_122,_123,_124){var _125=this._encode(dojo.mixin({},this._url.query,{f:"json"},_122.toJson())),_126=this._relationshipQueryHandler,_127=this._errorHandler;if(this.gdbVersion){_125.gdbVersion=this.gdbVersion;}var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/queryRelatedRecords",content:_125,callbackParamName:"callback",load:function(r,i){_126(r,i,_123,_124,dfd);},error:function(r){_127(r,_124,dfd);}});return dfd;},executeForIds:function(_128,_129,_12a,_12b){var _12c=_12b.assembly,_12d=this._encode(dojo.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_128.toJson(_12c&&_12c[0]))),_12e=this._executeForIdsHandler,_12f=this._errorHandler;if(this.source){var _130={source:this.source.toJson()};_12d.layer=dojo.toJson(_130);}if(this.gdbVersion){_12d.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path+"/query",content:_12d,callbackParamName:"callback",load:function(r,i){_12e(r,i,_129,_12a,_12b.dfd);},error:function(r){_12f(r,_12a,_12b.dfd);}});},executeForCount:function(_131,_132,_133,_134){var _135=_134.assembly,_136=this._encode(dojo.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_131.toJson(_135&&_135[0]))),_137=this._countHandler,_138=this._errorHandler;if(this.source){var _139={source:this.source.toJson()};_136.layer=dojo.toJson(_139);}if(this.gdbVersion){_136.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path+"/query",content:_136,callbackParamName:"callback",load:function(r,i){_137(r,i,_132,_133,_134.dfd);},error:function(r){_138(r,_133,_134.dfd);}});},_handler:function(_13a,io,_13b,_13c,dfd){try{var _13d=new esri.tasks.FeatureSet(_13a);this._successHandler([_13d],"onComplete",_13b,dfd);}catch(err){this._errorHandler(err,_13c,dfd);}},_relationshipQueryHandler:function(_13e,io,_13f,_140,dfd){try{var gt=_13e.geometryType,sr=_13e.spatialReference,_141={};dojo.forEach(_13e.relatedRecordGroups,function(gr){var _142={};_142.geometryType=gt;_142.spatialReference=sr;_142.features=gr.relatedRecords;var fset=new esri.tasks.FeatureSet(_142);_141[gr.objectId]=fset;});this._successHandler([_141],"onExecuteRelationshipQueryComplete",_13f,dfd);}catch(err){this._errorHandler(err,_140,dfd);}},_executeForIdsHandler:function(_143,io,_144,_145,dfd){try{this._successHandler([_143.objectIds],"onExecuteForIdsComplete",_144,dfd);}catch(err){this._errorHandler(err,_145,dfd);}},_countHandler:function(_146,io,_147,_148,dfd){try{var _149,_14a=_146.features,ids=_146.objectIds;if(ids){_149=ids.length;}else{if(_14a){throw new Error(esri.bundle.tasks.query.invalid);}else{_149=_146.count;}}this._successHandler([_149],"onExecuteForCountComplete",_147,dfd);}catch(err){this._errorHandler(err,_148,dfd);}}});esri._createWrappers("esri.tasks.QueryTask");dojo.declare("esri.tasks.Query",null,{constructor:function(){this.spatialRelationship=esri.tasks.Query.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:false,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,toJson:function(_14b){var json={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=_14b&&_14b["geometry"]||this.geometry,ids=this.objectIds,_14c=this.outFields,_14d=this.outSpatialReference,_14e=this.groupByFieldsForStatistics,_14f=this.orderByFields,_150=this.outStatistics;if(g){json.geometry=g;json.geometryType=esri.geometry.getJsonType(g);json.inSR=g.spatialReference.wkid||dojo.toJson(g.spatialReference.toJson());}if(ids){json.objectIds=ids.join(",");}if(_14c){json.outFields=_14c.join(",");}if(_14e){json.groupByFieldsForStatistics=_14e.join(",");}if(_14f){json.orderByFields=_14f.join(",");}if(_150){var _151=[];dojo.forEach(_150,function(item,idx){_151.push(item.toJson());});json.outStatistics=dojo.toJson(_151);}if(_14d!==null){json.outSR=_14d.wkid||dojo.toJson(_14d.toJson());}else{if(g){json.outSR=g.spatialReference.wkid||dojo.toJson(g.spatialReference.toJson());}}var _152=this.timeExtent;json.time=_152?_152.toJson().join(","):null;var _153=this.relationParam;if(_153&&this.spatialRelationship===esri.tasks.Query.SPATIAL_REL_RELATION){json.relationParam=_153;}json._ts=this._ts;return json;}});dojo.mixin(esri.tasks.Query,esri.tasks._SpatialRelationship);dojo.declare("esri.tasks.RelationshipQuery",null,{definitionExpression:"",relationshipId:null,returnGeometry:false,objectIds:null,outSpatialReference:null,outFields:null,toJson:function(){var json={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},_154=this.objectIds,_155=this.outFields,_156=this.outSpatialReference;if(_154){json.objectIds=_154.join(",");}if(_155){json.outFields=_155.join(",");}if(_156){json.outSR=_156.toJson();}json._ts=this._ts;return json;}});dojo.declare("esri.tasks.StatisticDefinition",null,{statisticType:null,onStatisticField:null,outStatisticFieldName:null,toJson:function(){var json={statisticType:this.statisticType,onStatisticField:this.onStatisticField};if(this.outStatisticFieldName){json.outStatisticFieldName=this.outStatisticFieldName;}return json;}});});},"esri/layers/KMLLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/layer,esri/layers/MapImageLayer,esri/layers/FeatureLayer,esri/dijit/Popup"],function(_157,dojo,_158){dojo.provide("esri.layers.KMLLayer");dojo.require("esri.utils");dojo.require("esri.layers.layer");dojo.require("esri.layers.MapImageLayer");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.dijit.Popup");dojo.declare("esri.layers.KMLLayer",[esri.layers.Layer],{serviceUrl:"http://utility.arcgis.com/sharing/kml",constructor:function(url,_159){if(!url){console.log("KMLLayer:constructor - please provide url for the KML file");}this._outSR=(_159&&_159.outSR)||new esri.SpatialReference({wkid:4326});this._options=_159;if(esri.config.defaults.kmlService){this.serviceUrl=esri.config.defaults.kmlService;}var link=(this.linkInfo=_159&&_159.linkInfo);if(link){this.visible=!!link.visibility;this._waitingForMap=!!link.viewFormat;}if(!link||(link&&link.visibility&&!this._waitingForMap)){this._parseKml();}this.refresh=dojo.hitch(this,this.refresh);},getFeature:function(_15a){if(!_15a){return;}var type=_15a.type,id=_15a.id,_15b,i,len;switch(type){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":var _15c=this["_"+type];if(_15c){_15b=dojo.getObject("_mode._featureMap."+id,false,_15c);}break;case "GroundOverlay":var _15d=this._groundLyr;if(_15d){var _15e=_15d.getImages();len=_15e.length;for(i=0;i<len;i++){if(_15e[i].id===id){_15b=_15e[i];break;}}}break;case "ScreenOverlay":break;case "NetworkLink":dojo.some(this._links,function(link){if(link.linkInfo&&link.linkInfo.id===id){_15b=link;return true;}else{return false;}});break;case "Folder":var _15f=this.folders;len=_15f?_15f.length:0;for(i=0;i<len;i++){if(_15f[i].id===id){_15b=_15f[i];break;}}break;default:console.log("KMLLayer:getFeature - unknown feature type");break;}return _15b;},getLayers:function(){var _160=[];if(this._groundLyr){_160.push(this._groundLyr);}if(this._fLayers){_160=_160.concat(this._fLayers);}if(this._links){dojo.forEach(this._links,function(link){if(link.declaredClass){_160.push(link);}});}return _160;},setFolderVisibility:function(_161,_162){if(!_161){return;}this._fireUpdateStart();_161.visible=_162;if(_162){_162=this._areLocalAncestorsVisible(_161);}this._setState(_161,_162);this._fireUpdateEnd();},onRefresh:function(){},_parseKml:function(map){var self=this;this._fireUpdateStart();this._io=esri.request({url:this.serviceUrl,content:{url:this._url.path+this._getQueryParameters(map),model:"simple",folders:"",refresh:this.loaded?true:undefined,outSR:dojo.toJson(this._outSR.toJson())},callbackParamName:"callback",load:function(_163){self._io=null;self._initLayer(_163);},error:function(err){self._io=null;err=dojo.mixin(new Error(),err);err.message="Unable to load KML: "+self.url+" "+(err.message||"");self._fireUpdateEnd(err);self.onError(err);}});},_initLayer:function(json){if(this.loaded){this._removeInternalLayers();}this.name=json.name;this.description=json.description;this.snippet=json.snippet;this.visibility=json.visibility;this.featureInfos=json.featureInfos;var i,len;var _164=(this.folders=json.folders),_165=[],fldr;if(_164){len=_164.length;for(i=0;i<len;i++){fldr=(_164[i]=new esri.layers.KMLFolder(_164[i]));if(fldr.parentFolderId===-1){_165.push(fldr);}}}var _166=(this._links=json.networkLinks),_167;len=_166?_166.length:0;for(i=0;i<len;i++){if(_166[i].viewRefreshMode&&_166[i].viewRefreshMode.toLowerCase().indexOf("onregion")!==-1){continue;}_167=dojo.mixin({},this._options);_167.linkInfo=_166[i];if(_167.id){_167.id=_167.id+"_"+i;}_166[i]=new esri.layers.KMLLayer(_166[i].href,_167);_166[i]._parentLayer=this;_166[i]._parentFolderId=this._getLinkParentId(_166[i].linkInfo.id);}var _168=json.groundOverlays;if(_168&&_168.length>0){_167=dojo.mixin({},this._options);if(_167.id){_167.id=_167.id+"_"+"mapImage";}var _169=(this._groundLyr=new esri.layers.MapImageLayer(_167));len=_168.length;for(i=0;i<len;i++){_169.addImage(new esri.layers.KMLGroundOverlay(_168[i]));}}var _16a=dojo.getObject("featureCollection.layers",false,json);if(_16a&&_16a.length>0){this._fLayers=[];dojo.forEach(_16a,function(_16b,i){var _16c=dojo.getObject("featureSet.features",false,_16b),_16d;if(_16c&&_16c.length>0){_167=dojo.mixin({outFields:["*"],infoTemplate:_16b.popupInfo?new esri.dijit.PopupTemplate(_16b.popupInfo):null,editable:false},this._options);if(_167.id){_167.id=_167.id+"_"+i;}_16b.layerDefinition.capabilities="Query,Data";_16d=new esri.layers.FeatureLayer(_16b,_167);if(_16d.geometryType){this["_"+_16d.geometryType]=_16d;}this._fLayers.push(_16d);}},this);if(this._fLayers.length===0){delete this._fLayers;}}len=_165.length;for(i=0;i<len;i++){fldr=_165[i];this._setState(fldr,fldr.visible);}this._fireUpdateEnd();if(this.loaded){this._addInternalLayers();this.onRefresh();}else{this.loaded=true;this.onLoad(this);}},_addInternalLayers:function(){var map=this._map;this._fireUpdateStart();if(this._links){dojo.forEach(this._links,function(link){if(link.declaredClass){map.addLayer(link);if(link._waitingForMap){link._waitingForMap=null;if(link.visible){link._parseKml(map);}else{link._wMap=map;}}}});}var _16e=map.spatialReference,_16f=this._outSR,_170,_171;if(_16e.wkid){_170=(_16e._isWebMercator()&&_16f._isWebMercator())||(_16e.wkid===_16f.wkid);}else{if(_16e.wkt){_170=(_16e.wkt===_16f.wkt);}else{console.log("KMLLayer:_setMap - map has invalid spatial reference");return;}}if(!_170){if(_16e._isWebMercator()&&_16f.wkid===4326){_171=esri.geometry.geographicToWebMercator;}else{if(_16f._isWebMercator()&&_16e.wkid===4326){_171=esri.geometry.webMercatorToGeographic;}else{console.log("KMLLayer:_setMap - unsupported workflow. Spatial reference of the map and kml layer do not match, and the conversion cannot be done on the client.");return;}}}if(this._groundLyr){if(_171){dojo.forEach(this._groundLyr.getImages(),function(_172){_172.extent=_171(_172.extent);});}map.addLayer(this._groundLyr);}var _173=this._fLayers;if(_173&&_173.length>0){dojo.forEach(_173,function(_174){if(_171){var _175=_174.graphics,i,geom,len=_175?_175.length:0;for(i=0;i<len;i++){geom=_175[i].geometry;if(geom){_175[i].setGeometry(_171(geom));}}}map.addLayer(_174);});}this.onVisibilityChange(this.visible);},_removeInternalLayers:function(){var map=this._map;if(this._links){dojo.forEach(this._links,function(link){if(link.declaredClass&&link._io){link._io.cancel();}});}if(map){dojo.forEach(this.getLayers(),map.removeLayer,map);}},_setState:function(_176,_177){var _178=_176.featureInfos,info,_179,i,len=_178?_178.length:0,_17a=_177?"show":"hide";for(i=0;i<len;i++){info=_178[i];_179=this.getFeature(info);if(!_179){continue;}if(info.type==="Folder"){this._setState(_179,_177&&_179.visible);}else{if(info.type==="NetworkLink"){this._setInternalVisibility(_179,_177);}else{_179[_17a]();}}}},_areLocalAncestorsVisible:function(_17b){var _17c=_17b.parentFolderId,_17d=_17b.visible;while(_17d&&_17c!==-1){var _17e=this.getFeature({type:"Folder",id:_17c});_17d=_17d&&_17e.visible;_17c=_17e.parentFolderId;}return _17d;},_setInternalVisibility:function(_17f,_180){var _181=_17f._parentLayer,_182=_17f._parentFolderId;_180=_180&&_17f.visible;while(_180&&_181){_180=_180&&_181.visible;if(_182>-1){_180=_180&&_181._areLocalAncestorsVisible(_181.getFeature({type:"Folder",id:_182}));}_182=_181._parentFolderId;_181=_181._parentLayer;}this._setIntState(_17f,_180);},_setIntState:function(link,_183){if(!link){return;}dojo.forEach(link.getLayers(),function(_184){if(_184.linkInfo){link._setIntState(_184,_183&&_184.visible&&link._areLocalAncestorsVisible(link.getFeature({type:"Folder",id:_184._parentFolderId})));}else{_184.setVisibility(_183);}});},_getLinkParentId:function(id){var _185=-1;if(this.folders){dojo.some(this.folders,function(_186){if(_186.networkLinkIds&&dojo.indexOf(_186.networkLinkIds,id)!==-1){_185=_186.id;return true;}return false;});}return _185;},_checkAutoRefresh:function(){var _187=this.linkInfo;if(_187){if(this.visible){if(this.loaded&&this._map){var _188=_187.refreshMode,_189=_187.refreshInterval,_18a=_187.viewRefreshMode,_18b=_187.viewRefreshTime;if(_188&&_188.toLowerCase().indexOf("oninterval")!==-1&&_189>0){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,_189*1000);}if(_18a&&_18a.toLowerCase().indexOf("onstop")!==-1&&_18b>0){if(!this._extChgHandle){this._extChgHandle=dojo.connect(this._map,"onExtentChange",this,this._extentChanged);}}}}else{this._stopAutoRefresh();dojo.disconnect(this._extChgHandle);delete this._extChgHandle;}}},_stopAutoRefresh:function(){clearTimeout(this._timeoutHandle);this._timeoutHandle=null;},_getQueryParameters:function(map){map=map||this._map;var _18c={},_18d=this.linkInfo,_18e=map&&map.extent;if(this._url.query){dojo.mixin(_18c,this._url.query);}if(_18d){var _18f=_18d.viewFormat,_190=_18d.httpQuery,_191=_18d.viewBoundScale;if(_18e&&_18f){var _192=_18e,_193=_18e,sr=_18e.spatialReference;if(sr){if(sr._isWebMercator()){_192=esri.geometry.webMercatorToGeographic(_18e);}else{if(sr.wkid===4326){_193=esri.geometry.geographicToWebMercator(_18e);}}}var _194=_192.getCenter(),_195=Math.max(_193.getWidth(),_193.getHeight());if(_191){_192=_192.expand(_191);}_18f=_18f.replace(/\[bboxWest\]/ig,_192.xmin).replace(/\[bboxEast\]/ig,_192.xmax).replace(/\[bboxSouth\]/ig,_192.ymin).replace(/\[bboxNorth\]/ig,_192.ymax).replace(/\[lookatLon\]/ig,_194.x).replace(/\[lookatLat\]/ig,_194.y).replace(/\[lookatRange\]/ig,_195).replace(/\[lookatTilt\]/ig,0).replace(/\[lookatHeading\]/ig,0).replace(/\[lookatTerrainLon\]/ig,_194.x).replace(/\[lookatTerrainLat\]/ig,_194.y).replace(/\[lookatTerrainAlt\]/ig,0).replace(/\[cameraLon\]/ig,_194.x).replace(/\[cameraLat\]/ig,_194.y).replace(/\[cameraAlt\]/ig,_195).replace(/\[horizFov\]/ig,60).replace(/\[vertFov\]/ig,60).replace(/\[horizPixels\]/ig,map.width).replace(/\[vertPixels\]/ig,map.height).replace(/\[terrainEnabled\]/ig,0);dojo.mixin(_18c,dojo.queryToObject(_18f));}if(_190){_190=_190.replace(/\[clientVersion\]/ig,esri.version).replace(/\[kmlVersion\]/ig,2.2).replace(/\[clientName\]/ig,"ArcGIS API for JavaScript").replace(/\[language\]/ig,dojo.locale);dojo.mixin(_18c,dojo.queryToObject(_190));}}var _196=[],_197;for(_197 in _18c){if(esri._isDefined(_18c[_197])){_196.push(_197+"="+_18c[_197]);}}_196=_196.join("&");return _196?("?"+_196):"";},_setMap:function(map,_198){this._map=map;var div=this._div=dojo.create("div",null,_198);dojo.style(div,"position","absolute");this._addInternalLayers();return div;},_unsetMap:function(map,_199){if(this._io){this._io.cancel();}this._stopAutoRefresh();dojo.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var div=this._div;if(div){_199.removeChild(div);dojo.destroy(div);}this._map=this._wMap=this._div=null;},onVisibilityChange:function(_19a){if(!this.loaded){if(this.linkInfo&&_19a){if(!this._waitingForMap){this._parseKml(this._wMap);}}return;}this._fireUpdateStart();this._setInternalVisibility(this,_19a);this._checkAutoRefresh();this._fireUpdateEnd();},refresh:function(){if(!this.loaded||!this._map||this._io){return;}this._parseKml();},_extentChanged:function(){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,this.linkInfo.viewRefreshTime*1000);}});dojo.declare("esri.layers.KMLGroundOverlay",[esri.layers.MapImage],{constructor:function(json){if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});dojo.declare("esri.layers.KMLFolder",null,{constructor:function(json){dojo.mixin(this,json);if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});});},"dojo/parser":function(){define(["./_base/kernel","./_base/lang","./_base/array","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./query","./on","./ready"],function(dojo,_19b,_19c,_19d,_19e,_19f,_1a0,_1a1,_1a2,_1a3,don){new Date("X");var _1a4={"dom-attributes-explicit":document.createElement("div").attributes.length<40};function has(_1a5){return _1a4[_1a5];};dojo.parser=new function(){var _1a6={};function _1a7(_1a8){var map={};for(var name in _1a8){if(name.charAt(0)=="_"){continue;}map[name.toLowerCase()]=name;}return map;};_1a1.after(_19b,"extend",function(){_1a6={};},true);var _1a9={};this._functionFromScript=function(_1aa,_1ab){var _1ac="";var _1ad="";var _1ae=(_1aa.getAttribute(_1ab+"args")||_1aa.getAttribute("args"));if(_1ae){_19c.forEach(_1ae.split(/\s*,\s*/),function(part,idx){_1ac+="var "+part+" = arguments["+idx+"]; ";});}var _1af=_1aa.getAttribute("with");if(_1af&&_1af.length){_19c.forEach(_1af.split(/\s*,\s*/),function(part){_1ac+="with("+part+"){";_1ad+="}";});}return new Function(_1ac+_1aa.innerHTML+_1ad);};this.instantiate=function(_1b0,_1b1,args){var _1b2=[],_1b1=_1b1||{};args=args||{};var _1b3=(args.scope||dojo._scopeName)+"Type",_1b4="data-"+(args.scope||dojo._scopeName)+"-",_1b5=_1b4+"type",_1b6=_1b4+"props",_1b7=_1b4+"attach-point",_1b8=_1b4+"attach-event",_1b9=_1b4+"id";var _1ba={};_19c.forEach([_1b6,_1b5,_1b3,_1b9,"jsId",_1b7,_1b8,"dojoAttachPoint","dojoAttachEvent","class","style"],function(name){_1ba[name.toLowerCase()]=name.replace(args.scope,"dojo");});_19c.forEach(_1b0,function(obj){if(!obj){return;}var node=obj.node||obj,type=_1b3 in _1b1?_1b1[_1b3]:obj.node?obj.type:(node.getAttribute(_1b5)||node.getAttribute(_1b3)),ctor=_1a9[type]||(_1a9[type]=_19b.getObject(type)),_1bb=ctor&&ctor.prototype;if(!ctor){throw new Error("Could not load class '"+type);}var _1bc={};if(args.defaults){_19b.mixin(_1bc,args.defaults);}if(obj.inherited){_19b.mixin(_1bc,obj.inherited);}var _1bd;if(has("dom-attributes-explicit")){_1bd=node.attributes;}else{var _1be=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),_1bf=_1be.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*/,"").replace(/>.*$/,"");_1bd=_19c.map(_1bf.split(/\s+/),function(name){var _1c0=name.toLowerCase();return {name:name,value:(node.nodeName=="LI"&&name=="value")||_1c0=="enctype"?node.getAttribute(_1c0):node.getAttributeNode(_1c0).value,specified:true};});}var i=0,item;while(item=_1bd[i++]){if(!item||!item.specified){continue;}var name=item.name,_1c1=name.toLowerCase(),_1c2=item.value;if(_1c1 in _1ba){switch(_1ba[_1c1]){case "data-dojo-props":var _1c3=_1c2;break;case "data-dojo-id":case "jsId":var _1c4=_1c2;break;case "data-dojo-attach-point":case "dojoAttachPoint":_1bc.dojoAttachPoint=_1c2;break;case "data-dojo-attach-event":case "dojoAttachEvent":_1bc.dojoAttachEvent=_1c2;break;case "class":_1bc["class"]=node.className;break;case "style":_1bc["style"]=node.style&&node.style.cssText;break;}}else{if(!(name in _1bb)){var map=(_1a6[type]||(_1a6[type]=_1a7(_1bb)));name=map[_1c1]||name;}if(name in _1bb){switch(typeof _1bb[name]){case "string":_1bc[name]=_1c2;break;case "number":_1bc[name]=_1c2.length?Number(_1c2):NaN;break;case "boolean":_1bc[name]=_1c2.toLowerCase()!="false";break;case "function":if(_1c2===""||_1c2.search(/[^\w\.]+/i)!=-1){_1bc[name]=new Function(_1c2);}else{_1bc[name]=_19b.getObject(_1c2,false)||new Function(_1c2);}break;default:var pVal=_1bb[name];_1bc[name]=(pVal&&"length" in pVal)?(_1c2?_1c2.split(/\s*,\s*/):[]):(pVal instanceof Date)?(_1c2==""?new Date(""):_1c2=="now"?new Date():_1a2.fromISOString(_1c2)):(pVal instanceof dojo._Url)?(dojo.baseUrl+_1c2):_1a0.fromJson(_1c2);}}else{_1bc[name]=_1c2;}}}if(_1c3){try{_1c3=_1a0.fromJson.call(args.propsThis,"{"+_1c3+"}");_19b.mixin(_1bc,_1c3);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_1c3+"'");}}_19b.mixin(_1bc,_1b1);var _1c5=obj.node?obj.scripts:(ctor&&(ctor._noScript||_1bb._noScript)?[]:_1a3("> script[type^='dojo/']",node));var _1c6=[],_1c7=[],_1c8=[],on=[];if(_1c5){for(i=0;i<_1c5.length;i++){var _1c9=_1c5[i];node.removeChild(_1c9);var _1ca=(_1c9.getAttribute(_1b4+"event")||_1c9.getAttribute("event")),prop=_1c9.getAttribute(_1b4+"prop"),type=_1c9.getAttribute("type"),nf=this._functionFromScript(_1c9,_1b4);if(_1ca){if(type=="dojo/connect"){_1c6.push({event:_1ca,func:nf});}else{if(type=="dojo/on"){on.push({event:_1ca,func:nf});}else{_1bc[_1ca]=nf;}}}else{if(type=="dojo/watch"){_1c8.push({prop:prop,func:nf});}else{_1c7.push(nf);}}}}var _1cb=ctor.markupFactory||_1bb.markupFactory;var _1cc=_1cb?_1cb(_1bc,node,ctor):new ctor(_1bc,node);_1b2.push(_1cc);if(_1c4){_19b.setObject(_1c4,_1cc);}for(i=0;i<_1c6.length;i++){_1a1.after(_1cc,_1c6[i].event,dojo.hitch(_1cc,_1c6[i].func),true);}for(i=0;i<_1c7.length;i++){_1c7[i].call(_1cc);}for(i=0;i<_1c8.length;i++){_1cc.watch(_1c8[i].prop,_1c8[i].func);}for(i=0;i<on.length;i++){don(_1cc,on[i].event,on[i].func);}},this);if(!_1b1._started){_19c.forEach(_1b2,function(_1cd){if(!args.noStart&&_1cd&&_19b.isFunction(_1cd.startup)&&!_1cd._started){_1cd.startup();}});}return _1b2;};this.parse=function(_1ce,args){var root;if(!args&&_1ce&&_1ce.rootNode){args=_1ce;root=args.rootNode;}else{root=_1ce;}root=root?_19d.byId(root):_19e.body();args=args||{};var _1cf=(args.scope||dojo._scopeName)+"Type",_1d0="data-"+(args.scope||dojo._scopeName)+"-",_1d1=_1d0+"type",_1d2=_1d0+"textdir";var list=[];var node=root.firstChild;var _1d3=args&&args.inherited;if(!_1d3){function _1d4(node,attr){return (node.getAttribute&&node.getAttribute(attr))||(node!==_19e.doc&&node!==_19e.doc.documentElement&&node.parentNode?_1d4(node.parentNode,attr):null);};_1d3={dir:_1d4(root,"dir"),lang:_1d4(root,"lang"),textDir:_1d4(root,_1d2)};for(var key in _1d3){if(!_1d3[key]){delete _1d3[key];}}}var _1d5={inherited:_1d3};var _1d6;var _1d7;function _1d8(_1d9){if(!_1d9.inherited){_1d9.inherited={};var node=_1d9.node,_1da=_1d8(_1d9.parent);var _1db={dir:node.getAttribute("dir")||_1da.dir,lang:node.getAttribute("lang")||_1da.lang,textDir:node.getAttribute(_1d2)||_1da.textDir};for(var key in _1db){if(_1db[key]){_1d9.inherited[key]=_1db[key];}}}return _1d9.inherited;};while(true){if(!node){if(!_1d5||!_1d5.node){break;}node=_1d5.node.nextSibling;_1d6=_1d5.scripts;_1d7=false;_1d5=_1d5.parent;continue;}if(node.nodeType!=1){node=node.nextSibling;continue;}if(_1d6&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_1d6.push(node);}node=node.nextSibling;continue;}if(_1d7){node=node.nextSibling;continue;}var type=node.getAttribute(_1d1)||node.getAttribute(_1cf);var _1dc=node.firstChild;if(!type&&(!_1dc||(_1dc.nodeType==3&&!_1dc.nextSibling))){node=node.nextSibling;continue;}var _1dd={node:node,scripts:_1d6,parent:_1d5};var ctor=type&&(_1a9[type]||(_1a9[type]=_19b.getObject(type))),_1de=ctor&&!ctor.prototype._noScript?[]:null;if(type){list.push({"type":type,node:node,scripts:_1de,inherited:_1d8(_1dd)});}node=_1dc;_1d6=_1de;_1d7=ctor&&ctor.prototype.stopParser&&!(args&&args.template);_1d5=_1dd;}var _1df=args&&args.template?{template:true}:null;return this.instantiate(list,_1df,args);};}();if(dojo.config.parseOnLoad){dojo.ready(100,dojo.parser,"parse");}return dojo.parser;});},"dojox/charting/plot2d/Spider":function(){define("dojox/charting/plot2d/Spider",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/_base/array","dojo/dom-geometry","dojo/_base/fx","dojo/fx","dojo/_base/sniff","../Element","./_PlotEvents","dojo/_base/Color","dojox/color/_base","./common","../axis2d/common","../scaler/primitive","dojox/gfx","dojox/gfx/matrix","dojox/gfx/fx","dojox/lang/functional","dojox/lang/utils","dojo/fx/easing"],function(lang,_1e0,hub,html,arr,_1e1,_1e2,_1e3,has,_1e4,_1e5,_1e6,_1e7,dc,da,_1e8,g,m,_1e9,df,du,_1ea){var _1eb=0.2;var _1ec=_1e0("dojox.charting.plot2d.Spider",[_1e4,_1e5],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:true,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:0.2,spiderOrigin:0.16,markerSize:3,spiderType:"polygon",animationType:_1ea.backOut,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",fontColor:""},constructor:function(_1ed,_1ee){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_1ee);du.updateWithPattern(this.opt,_1ee,this.optionalParams);this.series=[];this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};},clear:function(){this.dirty=true;this.dyn=[];this.series=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this;},setAxis:function(axis){return this;},addSeries:function(run){var _1ef=false;this.series.push(run);for(var key in run.data){var val=run.data[key],data=this.datas[key];if(data){data.vlist.push(val);data.min=Math.min(data.min,val);data.max=Math.max(data.max,val);}else{this.datas[key]={min:val,max:val,vlist:[val]};}}if(this.labelKey.length<=0){for(var key in run.data){this.labelKey.push(key);}}return this;},getSeriesStats:function(){return dc.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_1f0){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_1f0.hmin,_1f0.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_1e8.buildScaler(_1f0.hmin,_1f0.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_1f0.vmin,_1f0.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_1e8.buildScaler(_1f0.vmin,_1f0.vmax,dim.height);}return this;},render:function(dim,_1f1){if(!this.dirty){return this;}this.dirty=false;this.cleanGroup();var s=this.group,t=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length){return this;}var o=this.opt,ta=t.axis,rx=(dim.width-_1f1.l-_1f1.r)/2,ry=(dim.height-_1f1.t-_1f1.b)/2,r=Math.min(rx,ry),_1f2=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font)||"normal normal normal 7pt Tahoma",_1f3=o.axisFont||(ta.tick&&ta.tick.titleFont)||"normal normal normal 11pt Tahoma",_1f4=o.axisTickFontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"silver",_1f5=o.axisFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_1f6=o.axisColor||(ta.tick&&ta.tick.axisColor)||"silver",_1f7=o.spiderColor||(ta.tick&&ta.tick.spiderColor)||"silver",_1f8=o.axisWidth||(ta.stroke&&ta.stroke.width)||2,_1f9=o.spiderWidth||(ta.stroke&&ta.stroke.width)||2,_1fa=o.seriesWidth||(ta.stroke&&ta.stroke.width)||2,_1fb=g.normalizedLength(g.splitFontString(_1f3).size),_1fc=m._degToRad(o.startAngle),_1fd=_1fc,step,_1fe,_1ff,_200,_201,_202,_203,_204,_205,_206,_207,ro=o.spiderOrigin,dv=o.divisions>=3?o.divisions:3,ms=o.markerSize,spt=o.spiderType,at=o.animationType,_208=o.labelOffset<-10?o.labelOffset:-10,_209=0.2;if(o.labels){_200=arr.map(this.series,function(s){return s.name;},this);_201=df.foldl1(df.map(_200,function(_20a,i){var font=t.series.font;return g._base._getTextBox(_20a,{font:font}).w;},this),"Math.max(a, b)")/2;r=Math.min(rx-2*_201,ry-_1fb)+_208;_202=r-_208;}if("radius" in o){r=o.radius;_202=r-_208;}r/=(1+_209);var _20b={cx:_1f1.l+rx,cy:_1f1.t+ry,r:r};for(var i=this.series.length-1;i>=0;i--){var _20c=this.series[i];if(!this.dirty&&!_20c.dirty){t.skip();continue;}_20c.cleanGroup();var run=_20c.data;if(run!==null){var len=this._getObjectLength(run);if(!_203||_203.length<=0){_203=[],_204=[],_207=[];this._buildPoints(_203,len,_20b,r,_1fd,true);this._buildPoints(_204,len,_20b,r*ro,_1fd,true);this._buildPoints(_207,len,_20b,_202,_1fd);if(dv>2){_205=[],_206=[];for(var j=0;j<dv-2;j++){_205[j]=[];this._buildPoints(_205[j],len,_20b,r*(ro+(1-ro)*(j+1)/(dv-1)),_1fd,true);_206[j]=r*(ro+(1-ro)*(j+1)/(dv-1));}}}}}var _20d=s.createGroup(),_20e={color:_1f6,width:_1f8},_20f={color:_1f7,width:_1f9};for(var j=_203.length-1;j>=0;--j){var _210=_203[j],st={x:_210.x+(_210.x-_20b.cx)*_209,y:_210.y+(_210.y-_20b.cy)*_209},nd={x:_210.x+(_210.x-_20b.cx)*_209/2,y:_210.y+(_210.y-_20b.cy)*_209/2};_20d.createLine({x1:_20b.cx,y1:_20b.cy,x2:st.x,y2:st.y}).setStroke(_20e);this._drawArrow(_20d,st,nd,_20e);}var _211=s.createGroup();for(var j=_207.length-1;j>=0;--j){var _210=_207[j],_212=g._base._getTextBox(this.labelKey[j],{font:_1f3}).w||0,_213=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx",elem=da.createText[_213](this.chart,_211,(!_1e1.isBodyLtr()&&_213=="html")?(_210.x+_212-dim.width):_210.x,_210.y,"middle",this.labelKey[j],_1f3,_1f5);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}var _214=s.createGroup();if(spt=="polygon"){_214.createPolyline(_203).setStroke(_20f);_214.createPolyline(_204).setStroke(_20f);if(_205.length>0){for(var j=_205.length-1;j>=0;--j){_214.createPolyline(_205[j]).setStroke(_20f);}}}else{var _215=this._getObjectLength(this.datas);_214.createCircle({cx:_20b.cx,cy:_20b.cy,r:r}).setStroke(_20f);_214.createCircle({cx:_20b.cx,cy:_20b.cy,r:r*ro}).setStroke(_20f);if(_206.length>0){for(var j=_206.length-1;j>=0;--j){_214.createCircle({cx:_20b.cx,cy:_20b.cy,r:_206[j]}).setStroke(_20f);}}}var _216=s.createGroup(),len=this._getObjectLength(this.datas),k=0;for(var key in this.datas){var data=this.datas[key],min=data.min,max=data.max,_217=max-min,end=_1fd+2*Math.PI*k/len;for(var i=0;i<dv;i++){var text=min+_217*i/(dv-1),_210=this._getCoordinate(_20b,r*(ro+(1-ro)*i/(dv-1)),end);text=this._getLabel(text);var _212=g._base._getTextBox(text,{font:_1f2}).w||0,_213=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx";if(this.opt.htmlLabels){this.htmlElements.push(da.createText[_213](this.chart,_216,(!_1e1.isBodyLtr()&&_213=="html")?(_210.x+_212-dim.width):_210.x,_210.y,"start",text,_1f2,_1f4));}}k++;}this.chart.seriesShapes={};var _218=[];for(var i=this.series.length-1;i>=0;i--){var _20c=this.series[i],run=_20c.data;if(run!==null){var _219=[],k=0,_21a=[];for(var key in run){var data=this.datas[key],min=data.min,max=data.max,_217=max-min,_21b=run[key],end=_1fd+2*Math.PI*k/len,_210=this._getCoordinate(_20b,r*(ro+(1-ro)*(_21b-min)/_217),end);_219.push(_210);_21a.push({sname:_20c.name,key:key,data:_21b});k++;}_219[_219.length]=_219[0];_21a[_21a.length]=_21a[0];var _21c=this._getBoundary(_219),_21d=t.next("spider",[o,_20c]),ts=_20c.group,f=g.normalizeColor(_21d.series.fill),sk={color:_21d.series.fill,width:_1fa};f.a=o.seriesFillAlpha;_20c.dyn={fill:f,stroke:sk};var osps=this.oldSeriePoints[_20c.name];var cs=this._createSeriesEntry(ts,(osps||_204),_219,f,sk,r,ro,ms,at);this.chart.seriesShapes[_20c.name]=cs;this.oldSeriePoints[_20c.name]=_219;var po={element:"spider_poly",index:i,id:"spider_poly_"+_20c.name,run:_20c,plot:this,shape:cs.poly,parent:ts,brect:_21c,cx:_20b.cx,cy:_20b.cy,cr:r,f:f,s:s};this._connectEvents(po);var so={element:"spider_plot",index:i,id:"spider_plot_"+_20c.name,run:_20c,plot:this,shape:_20c.group};this._connectEvents(so);arr.forEach(cs.circles,function(c,i){var _21e=c.getShape(),co={element:"spider_circle",index:i,id:"spider_circle_"+_20c.name+i,run:_20c,plot:this,shape:c,parent:ts,tdata:_21a[i],cx:_219[i].x,cy:_219[i].y,f:f,s:s};this._connectEvents(co);},this);}}return this;},_createSeriesEntry:function(ts,osps,sps,f,sk,r,ro,ms,at){var _21f=ts.createPolyline(osps).setFill(f).setStroke(sk),_220=[];for(var j=0;j<osps.length;j++){var _221=osps[j],cr=ms;var _222=ts.createCircle({cx:_221.x,cy:_221.y,r:cr}).setFill(f).setStroke(sk);_220.push(_222);}var _223=arr.map(sps,function(np,j){var sp=osps[j],anim=new _1e2.Animation({duration:1000,easing:at,curve:[sp.y,np.y]});var spl=_21f,sc=_220[j];hub.connect(anim,"onAnimate",function(y){var _224=spl.getShape();_224.points[j].y=y;spl.setShape(_224);var _225=sc.getShape();_225.cy=y;sc.setShape(_225);});return anim;});var _226=arr.map(sps,function(np,j){var sp=osps[j],anim=new _1e2.Animation({duration:1000,easing:at,curve:[sp.x,np.x]});var spl=_21f,sc=_220[j];hub.connect(anim,"onAnimate",function(x){var _227=spl.getShape();_227.points[j].x=x;spl.setShape(_227);var _228=sc.getShape();_228.cx=x;sc.setShape(_228);});return anim;});var _229=_1e3.combine(_223.concat(_226));_229.play();return {group:ts,poly:_21f,circles:_220};},plotEvent:function(o){var _22a=o.id?o.id:"default",a;if(_22a in this.animations){a=this.animations[_22a];a.anim&&a.anim.stop(true);}else{a=this.animations[_22a]={};}if(o.element=="spider_poly"){if(!a.color){var _22b=o.shape.getFill();if(!_22b||!(_22b instanceof _1e6)){return;}a.color={start:_22b,end:_22c(_22b)};}var _22d=a.color.start,end=a.color.end;if(o.type=="onmouseout"){var t=_22d;_22d=end;end=t;}a.anim=_1e9.animateFill({shape:o.shape,duration:800,easing:_1ea.backOut,color:{start:_22d,end:end}});a.anim.play();}else{if(o.element=="spider_circle"){var init,_22e,_22f=1.5;if(o.type=="onmouseover"){init=m.identity;_22e=_22f;var _230={type:"rect"};_230.x=o.cx;_230.y=o.cy;_230.width=_230.height=1;var lt=html.coords(this.chart.node,true);_230.x+=lt.x;_230.y+=lt.y;_230.x=Math.round(_230.x);_230.y=Math.round(_230.y);_230.width=Math.ceil(_230.width);_230.height=Math.ceil(_230.height);this.aroundRect=_230;var _231=["after","before"];dc.doIfLoaded("dijit/Tooltip",dojo.hitch(this,function(_232){_232.show(o.tdata.sname+"<br/>"+o.tdata.key+"<br/>"+o.tdata.data,this.aroundRect,_231);}));}else{init=m.scaleAt(_22f,o.cx,o.cy);_22e=1/_22f;dc.doIfLoaded("dijit/Tooltip",dojo.hitch(this,function(_233){this.aroundRect&&_233.hide(this.aroundRect);}));}var cs=o.shape.getShape(),init=m.scaleAt(_22f,cs.cx,cs.cy),_234={shape:o.shape,duration:200,easing:_1ea.backOut,transform:[{name:"scaleAt",start:[1,cs.cx,cs.cy],end:[_22e,cs.cx,cs.cy]},init]};a.anim=_1e9.animateTransform(_234);a.anim.play();}else{if(o.element=="spider_plot"){if(o.type=="onmouseover"&&!has("ie")){o.shape.moveToFront();}}}}},_getBoundary:function(_235){var xmax=_235[0].x,xmin=_235[0].x,ymax=_235[0].y,ymin=_235[0].y;for(var i=0;i<_235.length;i++){var _236=_235[i];xmax=Math.max(_236.x,xmax);ymax=Math.max(_236.y,ymax);xmin=Math.min(_236.x,xmin);ymin=Math.min(_236.y,ymin);}return {x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin};},_drawArrow:function(s,_237,end,_238){var len=Math.sqrt(Math.pow(end.x-_237.x,2)+Math.pow(end.y-_237.y,2)),sin=(end.y-_237.y)/len,cos=(end.x-_237.x)/len,_239={x:end.x+(len/3)*(-sin),y:end.y+(len/3)*cos},_23a={x:end.x+(len/3)*sin,y:end.y+(len/3)*(-cos)};s.createPolyline([_237,_239,_23a]).setFill(_238.color).setStroke(_238);},_buildPoints:function(_23b,_23c,_23d,_23e,_23f,_240){for(var i=0;i<_23c;i++){var end=_23f+2*Math.PI*i/_23c;_23b.push(this._getCoordinate(_23d,_23e,end));}if(_240){_23b.push(this._getCoordinate(_23d,_23e,_23f+2*Math.PI));}},_getCoordinate:function(_241,_242,_243){return {x:_241.cx+_242*Math.cos(_243),y:_241.cy+_242*Math.sin(_243)};},_getObjectLength:function(obj){var _244=0;if(lang.isObject(obj)){for(var key in obj){_244++;}}return _244;},_getLabel:function(_245){return dc.getLabel(_245,this.opt.fixed,this.opt.precision);}});function _22c(_246){var a=new _1e7.Color(_246),x=a.toHsl();if(x.s==0){x.l=x.l<50?100:0;}else{x.s=100;if(x.l<50){x.l=75;}else{if(x.l>75){x.l=50;}else{x.l=x.l-50>75-x.l?50:75;}}}var _246=_1e7.fromHsl(x);_246.a=0.7;return _246;};return _1ec;});},"dojo/date/stamp":function(){define(["../_base/kernel","../_base/lang","../_base/array"],function(dojo,lang,_247){lang.getObject("date.stamp",true,dojo);dojo.date.stamp.fromISOString=function(_248,_249){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _24a=dojo.date.stamp._isoRegExp.exec(_248),_24b=null;if(_24a){_24a.shift();if(_24a[1]){_24a[1]--;}if(_24a[6]){_24a[6]*=1000;}if(_249){_249=new Date(_249);_247.forEach(_247.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _249["get"+prop]();}),function(_24c,_24d){_24a[_24d]=_24a[_24d]||_24c;});}_24b=new Date(_24a[0]||1970,_24a[1]||0,_24a[2]||1,_24a[3]||0,_24a[4]||0,_24a[5]||0,_24a[6]||0);if(_24a[0]<100){_24b.setFullYear(_24a[0]||1970);}var _24e=0,_24f=_24a[7]&&_24a[7].charAt(0);if(_24f!="Z"){_24e=((_24a[8]||0)*60)+(Number(_24a[9])||0);if(_24f!="-"){_24e*=-1;}}if(_24f){_24e-=_24b.getTimezoneOffset();}if(_24e){_24b.setTime(_24b.getTime()+_24e*60000);}}return _24b;};dojo.date.stamp.toISOString=function(_250,_251){var _252=function(n){return (n<10)?"0"+n:n;};_251=_251||{};var _253=[],_254=_251.zulu?"getUTC":"get",date="";if(_251.selector!="time"){var year=_250[_254+"FullYear"]();date=["0000".substr((year+"").length)+year,_252(_250[_254+"Month"]()+1),_252(_250[_254+"Date"]())].join("-");}_253.push(date);if(_251.selector!="date"){var time=[_252(_250[_254+"Hours"]()),_252(_250[_254+"Minutes"]()),_252(_250[_254+"Seconds"]())].join(":");var _255=_250[_254+"Milliseconds"]();if(_251.milliseconds){time+="."+(_255<100?"0":"")+_252(_255);}if(_251.zulu){time+="Z";}else{if(_251.selector!="time"){var _256=_250.getTimezoneOffset();var _257=Math.abs(_256);time+=(_256>0?"-":"+")+_252(Math.floor(_257/60))+":"+_252(_257%60);}}_253.push(time);}return _253.join("T");};return dojo.date.stamp;});},"dojo/Stateful":function(){define(["./_base/kernel","./_base/declare","./_base/lang","./_base/array"],function(dojo,_258,lang,_259){return dojo.declare("dojo.Stateful",null,{postscript:function(_25a){if(_25a){lang.mixin(this,_25a);}},get:function(name){return this[name];},set:function(name,_25b){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _25c=this[name];this[name]=_25b;if(this._watchCallbacks){this._watchCallbacks(name,_25c,_25b);}return this;},watch:function(name,_25d){var _25e=this._watchCallbacks;if(!_25e){var self=this;_25e=this._watchCallbacks=function(name,_25f,_260,_261){var _262=function(_263){if(_263){_263=_263.slice();for(var i=0,l=_263.length;i<l;i++){try{_263[i].call(self,name,_25f,_260);}catch(e){console.error(e);}}}};_262(_25e["_"+name]);if(!_261){_262(_25e["*"]);}};}if(!_25d&&typeof name==="function"){_25d=name;name="*";}else{name="_"+name;}var _264=_25e[name];if(typeof _264!=="object"){_264=_25e[name]=[];}_264.push(_25d);return {unwatch:function(){_264.splice(_259.indexOf(_264,_25d),1);}};}});});},"dojox/charting/Theme":function(){define("dojox/charting/Theme",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/Color","dojox/color/_base","dojox/color/Palette","dojox/lang/utils","dojox/gfx/gradutils"],function(lang,arr,_265,_266,_267,_268,dlu,dgg){var _269=_265("dojox.charting.Theme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(_26a){_26a=_26a||{};var def=_269.defaultTheme;arr.forEach(["chart","plotarea","axis","series","marker","indicator"],function(name){this[name]=lang.delegate(def[name],_26a[name]);},this);if(_26a.seriesThemes&&_26a.seriesThemes.length){this.colors=null;this.seriesThemes=_26a.seriesThemes.slice(0);}else{this.seriesThemes=null;this.colors=(_26a.colors||_269.defaultColors).slice(0);}this.markerThemes=null;if(_26a.markerThemes&&_26a.markerThemes.length){this.markerThemes=_26a.markerThemes.slice(0);}this.markers=_26a.markers?lang.clone(_26a.markers):lang.delegate(_269.defaultMarkers);this.noGradConv=_26a.noGradConv;this.noRadialConv=_26a.noRadialConv;if(_26a.reverseFills){this.reverseFills();}this._current=0;this._buildMarkerArray();},clone:function(){var _26b=new _269({chart:this.chart,plotarea:this.plotarea,axis:this.axis,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});arr.forEach(["clone","clear","next","skip","addMixin","post","getTick"],function(name){if(this.hasOwnProperty(name)){_26b[name]=this[name];}},this);return _26b;},clear:function(){this._current=0;},next:function(_26c,_26d,_26e){var _26f=dlu.merge,_270,_271;if(this.colors){_270=lang.delegate(this.series);_271=lang.delegate(this.marker);var _272=new _266(this.colors[this._current%this.colors.length]),old;if(_270.stroke&&_270.stroke.color){_270.stroke=lang.delegate(_270.stroke);old=new _266(_270.stroke.color);_270.stroke.color=new _266(_272);_270.stroke.color.a=old.a;}else{_270.stroke={color:_272};}if(_271.stroke&&_271.stroke.color){_271.stroke=lang.delegate(_271.stroke);old=new _266(_271.stroke.color);_271.stroke.color=new _266(_272);_271.stroke.color.a=old.a;}else{_271.stroke={color:_272};}if(!_270.fill||_270.fill.type){_270.fill=_272;}else{old=new _266(_270.fill);_270.fill=new _266(_272);_270.fill.a=old.a;}if(!_271.fill||_271.fill.type){_271.fill=_272;}else{old=new _266(_271.fill);_271.fill=new _266(_272);_271.fill.a=old.a;}}else{_270=this.seriesThemes?_26f(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series;_271=this.markerThemes?_26f(this.marker,this.markerThemes[this._current%this.markerThemes.length]):_270;}var _273=_271&&_271.symbol||this._markers[this._current%this._markers.length];var _274={series:_270,marker:_271,symbol:_273};++this._current;if(_26d){_274=this.addMixin(_274,_26c,_26d);}if(_26e){_274=this.post(_274,_26c);}return _274;},skip:function(){++this._current;},addMixin:function(_275,_276,_277,_278){if(lang.isArray(_277)){arr.forEach(_277,function(m){_275=this.addMixin(_275,_276,m);},this);}else{var t={};if("color" in _277){if(_276=="line"||_276=="area"){lang.setObject("series.stroke.color",_277.color,t);lang.setObject("marker.stroke.color",_277.color,t);}else{lang.setObject("series.fill",_277.color,t);}}arr.forEach(["stroke","outline","shadow","fill","font","fontColor","labelWiring"],function(name){var _279="marker"+name.charAt(0).toUpperCase()+name.substr(1),b=_279 in _277;if(name in _277){lang.setObject("series."+name,_277[name],t);if(!b){lang.setObject("marker."+name,_277[name],t);}}if(b){lang.setObject("marker."+name,_277[_279],t);}});if("marker" in _277){t.symbol=_277.marker;}_275=dlu.merge(_275,t);}if(_278){_275=this.post(_275,_276);}return _275;},post:function(_27a,_27b){var fill=_27a.series.fill,t;if(!this.noGradConv&&this.shapeSpaces[fill.space]&&fill.type=="linear"){if(_27b=="bar"){t={x1:fill.y1,y1:fill.x1,x2:fill.y2,y2:fill.x2};}else{if(!this.noRadialConv&&fill.space=="shape"&&(_27b=="slice"||_27b=="circle")){t={type:"radial",cx:0,cy:0,r:100};}}if(t){return dlu.merge(_27a,{series:{fill:t}});}}return _27a;},getTick:function(name,_27c){var tick=this.axis.tick,_27d=name+"Tick",_27e=dlu.merge;if(tick){if(this.axis[_27d]){tick=_27e(tick,this.axis[_27d]);}}else{tick=this.axis[_27d];}if(_27c){if(tick){if(_27c[_27d]){tick=_27e(tick,_27c[_27d]);}}else{tick=_27c[_27d];}}return tick;},inspectObjects:function(f){arr.forEach(["chart","plotarea","axis","series","marker","indicator"],function(name){f(this[name]);},this);if(this.seriesThemes){arr.forEach(this.seriesThemes,f);}if(this.markerThemes){arr.forEach(this.markerThemes,f);}},reverseFills:function(){this.inspectObjects(function(o){if(o&&o.fill){o.fill=dgg.reverse(o.fill);}});},addMarker:function(name,_27f){this.markers[name]=_27f;this._buildMarkerArray();},setMarkers:function(obj){this.markers=obj;this._buildMarkerArray();},_buildMarkerArray:function(){this._markers=[];for(var p in this.markers){this._markers.push(this.markers[p]);}}});lang.mixin(_269,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",titleGap:15,titleFont:"normal normal normal 11pt Tahoma",titleFontColor:"#333",titleOrientation:"axis"},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}},defineColors:function(_280){_280=_280||{};var l,c=[],n=_280.num||5;if(_280.colors){l=_280.colors.length;for(var i=0;i<n;i++){c.push(_280.colors[i%l]);}return c;}if(_280.hue){var s=_280.saturation||100,st=_280.low||30,end=_280.high||90;l=(end+st)/2;return _267.Palette.generate(_267.fromHsv(_280.hue,s,l),"monochromatic").colors;}if(_280.generator){return _267.Palette.generate(_280.base,_280.generator).colors;}return c;},generateGradient:function(_281,_282,_283){var fill=lang.delegate(_281);fill.colors=[{offset:0,color:_282},{offset:1,color:_283}];return fill;},generateHslColor:function(_284,_285){_284=new _266(_284);var hsl=_284.toHsl(),_286=_267.fromHsl(hsl.h,hsl.s,_285);_286.a=_284.a;return _286;},generateHslGradient:function(_287,_288,_289,_28a){_287=new _266(_287);var hsl=_287.toHsl(),_28b=_267.fromHsl(hsl.h,hsl.s,_289),_28c=_267.fromHsl(hsl.h,hsl.s,_28a);_28b.a=_28c.a=_287.a;return _269.generateGradient(_288,_28b,_28c);}});return _269;});},"dojox/charting/axis2d/Invisible":function(){define("dojox/charting/axis2d/Invisible",["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/gfx","dojox/lang/utils","dojox/lang/functional","dojo/string"],function(lang,_28d,Base,lin,g,du,df,_28e){var _28f=du.merge,_290=4,_291=45;return _28d("dojox.charting.axis2d.Invisible",Base,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null},constructor:function(_292,_293){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_293);du.updateWithPattern(this.opt,_293,this.optionalParams);},dependOnData:function(){return !("min" in this.opt)||!("max" in this.opt);},clear:function(){delete this.scaler;delete this.ticks;this.dirty=true;return this;},initialized:function(){return "scaler" in this&&!(this.dirty&&this.dependOnData());},setWindow:function(_294,_295){this.scale=_294;this.offset=_295;return this.clear();},getWindowScale:function(){return "scale" in this?this.scale:1;},getWindowOffset:function(){return "offset" in this?this.offset:0;},_groupLabelWidth:function(_296,font,_297){if(!_296.length){return 0;}if(lang.isObject(_296[0])){_296=df.map(_296,function(_298){return _298.text;});}if(_297){_296=df.map(_296,function(_299){return lang.trim(_299).length==0?"":_299.substring(0,_297)+this.trailingSymbol;},this);}var s=_296.join("<br>");return g._base._getTextBox(s,{font:font}).w||0;},calculate:function(min,max,span,_29a){if(this.initialized()){return this;}var o=this.opt;this.labels="labels" in o?o.labels:_29a;this.scaler=lin.buildScaler(min,max,span,o);var tsb=this.scaler.bounds;if("scale" in this){o.from=tsb.lower+this.offset;o.to=(tsb.upper-tsb.lower)/this.scale+o.from;if(!isFinite(o.from)||isNaN(o.from)||!isFinite(o.to)||isNaN(o.to)||o.to-o.from>=tsb.upper-tsb.lower){delete o.from;delete o.to;delete this.scale;delete this.offset;}else{if(o.from<tsb.lower){o.to+=tsb.lower-o.from;o.from=tsb.lower;}else{if(o.to>tsb.upper){o.from+=tsb.upper-o.to;o.to=tsb.upper;}}this.offset=o.from-tsb.lower;}this.scaler=lin.buildScaler(min,max,span,o);tsb=this.scaler.bounds;if(this.scale==1&&this.offset==0){delete this.scale;delete this.offset;}}var ta=this.chart.theme.axis,_29b=0,_29c=o.rotation%360,_29d=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),size=_29d?g.normalizedLength(g.splitFontString(_29d).size):0,cosr=Math.abs(Math.cos(_29c*Math.PI/180)),sinr=Math.abs(Math.sin(_29c*Math.PI/180));if(_29c<0){_29c+=360;}if(size){if(this.vertical?_29c!=0&&_29c!=180:_29c!=90&&_29c!=270){if(this.labels){_29b=this._groupLabelWidth(this.labels,_29d,o.maxLabelCharCount);}else{var _29e=Math.ceil(Math.log(Math.max(Math.abs(tsb.from),Math.abs(tsb.to)))/Math.LN10),t=[];if(tsb.from<0||tsb.to<0){t.push("-");}t.push(_28e.rep("9",_29e));var _29f=Math.floor(Math.log(tsb.to-tsb.from)/Math.LN10);if(_29f>0){t.push(".");t.push(_28e.rep("9",_29f));}_29b=g._base._getTextBox(t.join(""),{font:_29d}).w;}_29b=o.maxLabelSize?Math.min(o.maxLabelSize,_29b):_29b;}else{_29b=size;}switch(_29c){case 0:case 90:case 180:case 270:break;default:var gap1=Math.sqrt(_29b*_29b+size*size),gap2=this.vertical?size*cosr+_29b*sinr:_29b*cosr+size*sinr;_29b=Math.min(gap1,gap2);break;}}this.scaler.minMinorStep=_29b+_290;this.ticks=lin.buildTicks(this.scaler,o);return this;},getScaler:function(){return this.scaler;},getTicks:function(){return this.ticks;}});});},"esri/layers/MapImageLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/layer,esri/geometry"],function(_2a0,dojo,_2a1){dojo.provide("esri.layers.MapImageLayer");dojo.require("esri.utils");dojo.require("esri.layers.layer");dojo.require("esri.geometry");dojo.declare("esri.layers.MapImageLayer",[esri.layers.Layer],{"-chains-":{constructor:"manual"},constructor:function(_2a2){this.inherited(arguments,[null,_2a2]);this._mapImages=[];var _2a3=dojo.hitch;this._panStart=_2a3(this,this._panStart);this._pan=_2a3(this,this._pan);this._extentChange=_2a3(this,this._extentChange);this._zoom=_2a3(this,this._zoom);this._zoomStart=_2a3(this,this._zoomStart);this._scale=_2a3(this,this._scale);this._resize=_2a3(this,this._resize);this.loaded=true;this.onLoad(this);},opacity:1,_transform:esri._getDOMAccessor("transform"),addImage:function(_2a4){var _2a5=this._mapImages.push(_2a4);_2a5=_2a5-1;_2a4._idx=_2a5;_2a4._layer=this;if(this._div){this._createImage(_2a4,_2a5);}},removeImage:function(_2a6){if(_2a6){var idx=_2a6._idx,_2a7=this._mapImages;if(_2a7[idx]===_2a6){delete _2a7[idx];var node=_2a6._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;if(node.parentNode){node.parentNode.removeChild(node);dojo.destroy(node);}}_2a6._node=_2a6._idx=_2a6._layer=null;}}},removeAllImages:function(){var _2a8=this._mapImages,i,len=_2a8.length;for(i=0;i<len;i++){var _2a9=_2a8[i];if(_2a9){this.removeImage(_2a9);}}this._mapImages=[];},getImages:function(){var _2aa=this._mapImages,_2ab=[],i,len=_2aa.length;for(i=0;i<len;i++){if(_2aa[i]){_2ab.push(_2aa[i]);}}return _2ab;},setOpacity:function(_2ac){if(this.opacity!=_2ac){this.onOpacityChange(this.opacity=_2ac);}},onOpacityChange:function(_2ad){var div=this._div,i,len,_2ae;if(div){if(!dojo.isIE||dojo.isIE>8){dojo.style(div,"opacity",_2ad);}else{_2ae=div.childNodes;len=_2ae.length;for(i=0;i<len;i++){dojo.style(_2ae[i],"opacity",_2ad);}}}},_createImage:function(_2af,idx){var node=dojo.create("img");dojo.style(node,{position:"absolute"});if(dojo.isIE<=8){dojo.style(node,"opacity",this.opacity);}if(_2af.rotation){var _2b0="rotate("+(360-_2af.rotation)+"deg)";if(dojo.isIE<9){}else{dojo.style(node,this._transform,_2b0);dojo.style(node,"transform",_2b0);}}_2af._node=node;node.e_idx=idx;node.e_layer=this;node.e_load=dojo.connect(node,"onload",esri.layers.MapImageLayer.prototype._imageLoaded);node.e_error=dojo.connect(node,"onerror",esri.layers.MapImageLayer.prototype._imageError);node.e_abort=dojo.connect(node,"onabort",esri.layers.MapImageLayer.prototype._imageError);node.src=_2af.href;},_imageLoaded:function(evt,img){var node=img||evt.target||evt.currentTarget,self=node.e_layer,_2b1=self._mapImages[node.e_idx];if(self._map&&(self._map.__zooming||self._map.__panning)){self._standby.push(node);return;}self._clearEvents(node);if(!_2b1||_2b1._node!==node){return;}if(self._map){self._attach(_2b1);}},_imageError:function(evt){var node=evt.target||evt.currentTarget,self=node.e_layer,_2b2=self._mapImages[node.e_idx];self._clearEvents(node);if(_2b2){_2b2._node=null;}},_clearEvents:function(node){var _2b3=dojo.disconnect;_2b3(node.e_load);_2b3(node.e_error);_2b3(node.e_abort);node.e_load=node.e_error=node.e_abort=node.e_layer=null;},_attach:function(_2b4){var _2b5=_2b4.extent,_2b6,_2b7=_2b5.spatialReference,_2b8=this._sr,div=this._div,node=_2b4._node,_2b9=new esri.geometry.Point({x:_2b5.xmin,y:_2b5.ymin}),_2ba=new esri.geometry.Point({x:_2b5.xmax,y:_2b5.ymax});if(_2b8.wkid){_2b6=(_2b8._isWebMercator()&&_2b7._isWebMercator())||(_2b8.wkid===_2b7.wkid);}else{if(_2b8.wkt){_2b6=(_2b8.wkt===_2b7.wkt);}}if(!_2b6){if(_2b8._isWebMercator()&&_2b7.wkid===4326){_2b9=esri.geometry.geographicToWebMercator(_2b9);_2ba=esri.geometry.geographicToWebMercator(_2ba);}else{if(_2b7._isWebMercator()&&_2b8.wkid===4326){_2b9=esri.geometry.webMercatorToGeographic(_2b9);_2ba=esri.geometry.webMercatorToGeographic(_2ba);}}}node.e_bl=_2b9;node.e_tr=_2ba;if(_2b4.visible){this._setPos(node,div._left,div._top);(this._active||div).appendChild(node);}},_setPos:function(node,_2bb,_2bc){var _2bd=node.e_bl,_2be=node.e_tr,map=this._map;_2bd=map.toScreen(_2bd);_2be=map.toScreen(_2be);var left=_2bd.x-_2bb,top=_2be.y-_2bc,_2bf=Math.abs(_2be.x-_2bd.x),_2c0=Math.abs(_2bd.y-_2be.y),css={width:_2bf+"px",height:_2c0+"px"},_2c1=this._mapImages[node.e_idx];if(map.navigationMode==="css-transforms"){css[esri._css.names.transform]=esri._css.translate(left,top)+(_2c1.rotation?(" "+esri._css.rotate(360-_2c1.rotation)):"");}else{css.left=left+"px";css.top=top+"px";}dojo.style(node,css);node.e_l=left;node.e_t=top;node.e_w=_2bf;node.e_h=_2c0;},_setMap:function(map,_2c2){this._map=map;this._sr=map.spatialReference;var div=this._div=dojo.create("div",null,_2c2),_2c3=esri._css.names,css={position:"absolute"},vd=map.__visibleDelta;if(!dojo.isIE||dojo.isIE>8){css.opacity=this.opacity;}if(map.navigationMode==="css-transforms"){css[_2c3.transform]=esri._css.translate(vd.x,vd.y);dojo.style(div,css);div._left=vd.x;div._top=vd.y;css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};this._active=dojo.create("div",null,div);dojo.style(this._active,css);this._passive=dojo.create("div",null,div);dojo.style(this._passive,css);}else{div._left=0;div._top=0;dojo.style(div,css);}this._standby=[];var _2c4=this._mapImages,i,len=_2c4.length;for(i=0;i<len;i++){var _2c5=_2c4[i],node=_2c5._node;if(!node){this._createImage(_2c5,_2c5._idx);}}this.onVisibilityChange(this.visible);return div;},_unsetMap:function(map,_2c6){this._disconnect();var div=this._div;if(div){var _2c7=this._mapImages,i,len=_2c7.length;for(i=0;i<len;i++){var _2c8=_2c7[i];if(_2c8){var node=_2c8._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;}_2c8._node=null;}}_2c6.removeChild(div);dojo.destroy(div);}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;},onVisibilityChange:function(_2c9){var div=this._div;if(div){if(_2c9){this._redraw();this._connect(this._map);esri.show(div);}else{this._disconnect();esri.hide(div);}}},_connect:function(map){if(!this._connections){var _2ca=dojo.connect,_2cb=(map.navigationMode==="css-transforms");this._connections=[_2ca(map,"onPanStart",this._panStart),_2ca(map,"onPan",this._pan),_2ca(map,"onExtentChange",this._extentChange),_2cb&&_2ca(map,"onZoomStart",this._zoomStart),_2cb?_2ca(map,"onScale",this._scale):_2ca(map,"onZoom",this._zoom),_2cb&&_2ca(map,"onResize",this._resize)];}},_disconnect:function(){if(this._connections){dojo.forEach(this._connections,dojo.disconnect);this._connections=null;}},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top;},_pan:function(_2cc,_2cd){var div=this._div;div._left=this._panL+_2cd.x;div._top=this._panT+_2cd.y;if(this._map.navigationMode==="css-transforms"){dojo.style(div,esri._css.names.transform,esri._css.translate(div._left,div._top));}else{dojo.style(div,{left:div._left+"px",top:div._top+"px"});}},_extentChange:function(_2ce,_2cf,_2d0){if(_2d0){this._redraw(this._map.navigationMode==="css-transforms");}else{if(_2cf){this._pan(_2ce,_2cf);}}var i,_2d1=this._standby;if(_2d1&&_2d1.length){for(i=_2d1.length-1;i>=0;i--){this._imageLoaded(null,_2d1[i]);_2d1.splice(i,1);}}},_redraw:function(_2d2){if(_2d2){var _2d3=this._passive,_2d4=esri._css.names;dojo.style(_2d3,_2d4.transition,"none");this._moveImages(_2d3,this._active);dojo.style(_2d3,_2d4.transform,"none");}var div=this._active||this._div,_2d5=this._div._left,_2d6=this._div._top,i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];this._setPos(node,_2d5,_2d6);}},_zoom:function(_2d7,_2d8,_2d9){var div=this._div,_2da=div._left,_2db=div._top,i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];var _2dc=node.e_w*_2d8,_2dd=node.e_h*_2d8,_2de=(_2d9.x-_2da-node.e_l)*(_2dc-node.e_w)/node.e_w,_2df=(_2d9.y-_2db-node.e_t)*(_2dd-node.e_h)/node.e_h;_2de=isNaN(_2de)?0:_2de;_2df=isNaN(_2df)?0:_2df;dojo.style(node,{left:(node.e_l-_2de)+"px",top:(node.e_t-_2df)+"px",width:_2dc+"px",height:_2dd+"px"});}},_zoomStart:function(){this._moveImages(this._active,this._passive);},_moveImages:function(_2e0,dest){var _2e1=_2e0.childNodes,i,len=_2e1.length;if(len>0){for(i=len-1;i>=0;i--){dest.appendChild(_2e1[i]);}}},_scale:function(mtx,_2e2){var css={},_2e3=esri._css.names,_2e4=this._passive;dojo.style(_2e4,_2e3.transition,_2e2?"none":(_2e3.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease"));css[_2e3.transform]=esri._css.matrix(mtx);dojo.style(_2e4,_2e3.transform,esri._css.matrix(mtx));},_resize:function(_2e5,_2e6,_2e7){dojo.style(this._active,{width:_2e6+"px",height:_2e7+"px"});dojo.style(this._passive,{width:_2e6+"px",height:_2e7+"px"});}});dojo.extend(esri.layers.MapImage,{visible:true,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=true;var node=this._node,_2e8=this._layer,div;if(node){div=_2e8&&_2e8._div;if(div){_2e8._setPos(node,div._left,div._top);(_2e8._active||div).appendChild(node);}esri.show(node);}}},hide:function(){if(this.visible){this.visible=false;var node=this._node;if(node){esri.hide(node);if(node.parentNode){node.parentNode.removeChild(node);}}}}});});},"dojox/charting/plot2d/common":function(){define("dojox/charting/plot2d/common",["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(lang,arr,_2e9,g,df,sc){var _2ea=lang.getObject("dojox.charting.plot2d.common",true);return lang.mixin(_2ea,{doIfLoaded:sc.doIfLoaded,makeStroke:function(_2eb){if(!_2eb){return _2eb;}if(typeof _2eb=="string"||_2eb instanceof _2e9){_2eb={color:_2eb};}return g.makeParameters(g.defaultStroke,_2eb);},augmentColor:function(_2ec,_2ed){var t=new _2e9(_2ec),c=new _2e9(_2ed);c.a=t.a;return c;},augmentStroke:function(_2ee,_2ef){var s=_2ea.makeStroke(_2ee);if(s){s.color=_2ea.augmentColor(s.color,_2ef);}return s;},augmentFill:function(fill,_2f0){var fc,c=new _2e9(_2f0);if(typeof fill=="string"||fill instanceof _2e9){return _2ea.augmentColor(fill,_2f0);}return fill;},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(_2f1){var _2f2=lang.delegate(_2ea.defaultStats);for(var i=0;i<_2f1.length;++i){var run=_2f1[i];for(var j=0;j<run.data.length;j++){if(run.data[j]!==null){if(typeof run.data[j]=="number"){var _2f3=_2f2.vmin,_2f4=_2f2.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x=i+1,y=val;if(isNaN(y)){y=0;}_2f2.hmin=Math.min(_2f2.hmin,x);_2f2.hmax=Math.max(_2f2.hmax,x);_2f2.vmin=Math.min(_2f2.vmin,y);_2f2.vmax=Math.max(_2f2.vmax,y);}});}if("ymin" in run){_2f2.vmin=Math.min(_2f3,run.ymin);}if("ymax" in run){_2f2.vmax=Math.max(_2f4,run.ymax);}}else{var _2f5=_2f2.hmin,_2f6=_2f2.hmax,_2f3=_2f2.vmin,_2f4=_2f2.vmax;if(!("xmin" in run)||!("xmax" in run)||!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x="x" in val?val.x:i+1,y=val.y;if(isNaN(x)){x=0;}if(isNaN(y)){y=0;}_2f2.hmin=Math.min(_2f2.hmin,x);_2f2.hmax=Math.max(_2f2.hmax,x);_2f2.vmin=Math.min(_2f2.vmin,y);_2f2.vmax=Math.max(_2f2.vmax,y);}});}if("xmin" in run){_2f2.hmin=Math.min(_2f5,run.xmin);}if("xmax" in run){_2f2.hmax=Math.max(_2f6,run.xmax);}if("ymin" in run){_2f2.vmin=Math.min(_2f3,run.ymin);}if("ymax" in run){_2f2.vmax=Math.max(_2f4,run.ymax);}}break;}}}return _2f2;},calculateBarSize:function(_2f7,opt,_2f8){if(!_2f8){_2f8=1;}var gap=opt.gap,size=(_2f7-2*gap)/_2f8;if("minBarSize" in opt){size=Math.max(size,opt.minBarSize);}if("maxBarSize" in opt){size=Math.min(size,opt.maxBarSize);}size=Math.max(size,1);gap=(_2f7-size*_2f8)/2;return {size:size,gap:gap};},collectStackedStats:function(_2f9){var _2fa=lang.clone(_2ea.defaultStats);if(_2f9.length){_2fa.hmin=Math.min(_2fa.hmin,1);_2fa.hmax=df.foldl(_2f9,"seed, run -> Math.max(seed, run.data.length)",_2fa.hmax);for(var i=0;i<_2fa.hmax;++i){var v=_2f9[0].data[i];v=v&&(typeof v=="number"?v:v.y);if(isNaN(v)){v=0;}_2fa.vmin=Math.min(_2fa.vmin,v);for(var j=1;j<_2f9.length;++j){var t=_2f9[j].data[i];t=t&&(typeof t=="number"?t:t.y);if(isNaN(t)){t=0;}v+=t;}_2fa.vmax=Math.max(_2fa.vmax,v);}}return _2fa;},curve:function(a,_2fb){var _2fc=a.slice(0);if(_2fb=="x"){_2fc[_2fc.length]=arr[0];}var p=arr.map(_2fc,function(item,i){if(i==0){return "M"+item.x+","+item.y;}if(!isNaN(_2fb)){var dx=item.x-_2fc[i-1].x,dy=_2fc[i-1].y;return "C"+(item.x-(_2fb-1)*(dx/_2fb))+","+dy+" "+(item.x-(dx/_2fb))+","+item.y+" "+item.x+","+item.y;}else{if(_2fb=="X"||_2fb=="x"||_2fb=="S"){var p0,p1=_2fc[i-1],p2=_2fc[i],p3;var bz1x,bz1y,bz2x,bz2y;var f=1/6;if(i==1){if(_2fb=="x"){p0=_2fc[_2fc.length-2];}else{p0=p1;}f=1/3;}else{p0=_2fc[i-2];}if(i==(_2fc.length-1)){if(_2fb=="x"){p3=_2fc[1];}else{p3=p2;}f=1/3;}else{p3=_2fc[i+1];}var p1p2=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));var p0p2=Math.sqrt((p2.x-p0.x)*(p2.x-p0.x)+(p2.y-p0.y)*(p2.y-p0.y));var p1p3=Math.sqrt((p3.x-p1.x)*(p3.x-p1.x)+(p3.y-p1.y)*(p3.y-p1.y));var _2fd=p0p2*f;var _2fe=p1p3*f;if(_2fd>p1p2/2&&_2fe>p1p2/2){_2fd=p1p2/2;_2fe=p1p2/2;}else{if(_2fd>p1p2/2){_2fd=p1p2/2;_2fe=p1p2/2*p1p3/p0p2;}else{if(_2fe>p1p2/2){_2fe=p1p2/2;_2fd=p1p2/2*p0p2/p1p3;}}}if(_2fb=="S"){if(p0==p1){_2fd=0;}if(p2==p3){_2fe=0;}}bz1x=p1.x+_2fd*(p2.x-p0.x)/p0p2;bz1y=p1.y+_2fd*(p2.y-p0.y)/p0p2;bz2x=p2.x-_2fe*(p3.x-p1.x)/p1p3;bz2y=p2.y-_2fe*(p3.y-p1.y)/p1p3;}}return "C"+(bz1x+","+bz1y+" "+bz2x+","+bz2y+" "+p2.x+","+p2.y);});return p.join(" ");},getLabel:function(_2ff,_300,_301){return sc.doIfLoaded("dojo/number",function(_302){return (_300?_302.format(_2ff,{places:_301}):_302.format(_2ff))||"";},function(){return _300?_2ff.toFixed(_301):_2ff.toString();});}});});},"dojox/gfx/shape":function(){define("dojox/gfx/shape",["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/window","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(g,lang,_303,win,has,_304,arr,_305,_306,_307){var _308=g.shape={};var _309={};var _30a={};_308.register=function(_30b){var t=_30b.declaredClass.split(".").pop();var i=t in _309?++_309[t]:((_309[t]=0));var uid=t+i;_30a[uid]=_30b;return uid;};_308.byId=function(id){return _30a[id];};_308.dispose=function(_30c){delete _30a[_30c.getUID()];};_303("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;var uid=_308.register(this);this.getUID=function(){return uid;};},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix(),gm=_307;return [gm.multiplyPoint(m,b.x,b.y),gm.multiplyPoint(m,b.x+b.width,b.y),gm.multiplyPoint(m,b.x+b.width,b.y+b.height),gm.multiplyPoint(m,b.x,b.y+b.height)];},getEventSource:function(){return this.rawNode;},setShape:function(_30d){this.shape=g.makeParameters(this.shape,_30d);this.bbox=null;return this;},setFill:function(fill){if(!fill){this.fillStyle=null;return this;}var f=null;if(typeof (fill)=="object"&&"type" in fill){switch(fill.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,fill);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,fill);break;case "pattern":f=g.makeParameters(g.defaultPattern,fill);break;}}else{f=g.normalizeColor(fill);}this.fillStyle=f;return this;},setStroke:function(_30e){if(!_30e){this.strokeStyle=null;return this;}if(typeof _30e=="string"||lang.isArray(_30e)||_30e instanceof _306){_30e={color:_30e};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_30e);s.color=g.normalizeColor(s.color);return this;},setTransform:function(_30f){this.matrix=_307.clone(_30f?_307.normalize(_30f):_307.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_310){return _310?this.setTransform([this.matrix,_310]):this;},applyLeftTransform:function(_311){return _311?this.setTransform([_311,this.matrix]):this;},applyTransform:function(_312){return _312?this.setTransform([this.matrix,_312]):this;},removeShape:function(_313){if(this.parent){this.parent.remove(this,_313);}return this;},_setParent:function(_314,_315){this.parent=_314;return this._updateParentMatrix(_315);},_updateParentMatrix:function(_316){this.parentMatrix=_316?_307.clone(_316):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=_307.multiply(p.matrix,m);}p=p.parent;}return m;}});_308._eventsProcessing={connect:function(name,_317,_318){return _304.connect(this.getEventSource(),name,_308.fixCallback(this,g.fixTarget,_317,_318));},disconnect:function(_319){_304.disconnect(_319);}};_308.fixCallback=function(_31a,_31b,_31c,_31d){if(!_31d){_31d=_31c;_31c=null;}if(lang.isString(_31d)){_31c=_31c||win.global;if(!_31c[_31d]){throw (["dojox.gfx.shape.fixCallback: scope[\"",_31d,"\"] is null (scope=\"",_31c,"\")"].join(""));}return function(e){return _31b(e,_31a)?_31c[_31d].apply(_31c,arguments||[]):undefined;};}return !_31c?function(e){return _31b(e,_31a)?_31d.apply(_31c,arguments):undefined;}:function(e){return _31b(e,_31a)?_31d.apply(_31c,arguments||[]):undefined;};};lang.extend(_308.Shape,_308._eventsProcessing);_308.Container={_init:function(){this.children=[];},openBatch:function(){},closeBatch:function(){},add:function(_31e){var _31f=_31e.getParent();if(_31f){_31f.remove(_31e,true);}this.children.push(_31e);return _31e._setParent(this,this._getRealMatrix());},remove:function(_320,_321){for(var i=0;i<this.children.length;++i){if(this.children[i]==_320){if(_321){}else{_320.parent=null;_320.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){var _322;for(var i=0;i<this.children.length;++i){_322=this.children[i];_322.parent=null;_322.parentMatrix=null;}this.children=[];return this;},_moveChildToFront:function(_323){for(var i=0;i<this.children.length;++i){if(this.children[i]==_323){this.children.splice(i,1);this.children.push(_323);break;}}return this;},_moveChildToBack:function(_324){for(var i=0;i<this.children.length;++i){if(this.children[i]==_324){this.children.splice(i,1);this.children.unshift(_324);break;}}return this;}};_303("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){arr.forEach(this._nodes,_305.destroy);this._nodes=[];arr.forEach(this._events,_304.disconnect);this._events=[];this.rawNode=null;if(has("ie")){while(this._parent.lastChild){_305.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_325){},whenLoaded:function(_326,_327){var f=lang.hitch(_326,_327);if(this.isLoaded){f(this);}else{var h=_304.connect(this,"onLoad",function(_328){_304.disconnect(h);f(_328);});}}});lang.extend(_308.Surface,_308._eventsProcessing);_303("dojox.gfx.Point",null,{});_303("dojox.gfx.Rectangle",null,{});_303("dojox.gfx.shape.Rect",_308.Shape,{constructor:function(_329){this.shape=g.getDefault("Rect");this.rawNode=_329;},getBoundingBox:function(){return this.shape;}});_303("dojox.gfx.shape.Ellipse",_308.Shape,{constructor:function(_32a){this.shape=g.getDefault("Ellipse");this.rawNode=_32a;},getBoundingBox:function(){if(!this.bbox){var _32b=this.shape;this.bbox={x:_32b.cx-_32b.rx,y:_32b.cy-_32b.ry,width:2*_32b.rx,height:2*_32b.ry};}return this.bbox;}});_303("dojox.gfx.shape.Circle",_308.Shape,{constructor:function(_32c){this.shape=g.getDefault("Circle");this.rawNode=_32c;},getBoundingBox:function(){if(!this.bbox){var _32d=this.shape;this.bbox={x:_32d.cx-_32d.r,y:_32d.cy-_32d.r,width:2*_32d.r,height:2*_32d.r};}return this.bbox;}});_303("dojox.gfx.shape.Line",_308.Shape,{constructor:function(_32e){this.shape=g.getDefault("Line");this.rawNode=_32e;},getBoundingBox:function(){if(!this.bbox){var _32f=this.shape;this.bbox={x:Math.min(_32f.x1,_32f.x2),y:Math.min(_32f.y1,_32f.y2),width:Math.abs(_32f.x2-_32f.x1),height:Math.abs(_32f.y2-_32f.y1)};}return this.bbox;}});_303("dojox.gfx.shape.Polyline",_308.Shape,{constructor:function(_330){this.shape=g.getDefault("Polyline");this.rawNode=_330;},setShape:function(_331,_332){if(_331&&_331 instanceof Array){this.inherited(arguments,[{points:_331}]);if(_332&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.inherited(arguments,[_331]);}return this;},_normalizePoints:function(){var p=this.shape.points,l=p&&p.length;if(l&&typeof p[0]=="number"){var _333=[];for(var i=0;i<l;i+=2){_333.push({x:p[i],y:p[i+1]});}this.shape.points=_333;}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var bbox={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(bbox.l>t.x){bbox.l=t.x;}if(bbox.r<t.x){bbox.r=t.x;}if(bbox.t>t.y){bbox.t=t.y;}if(bbox.b<t.y){bbox.b=t.y;}}this.bbox={x:bbox.l,y:bbox.t,width:bbox.r-bbox.l,height:bbox.b-bbox.t};}return this.bbox;}});_303("dojox.gfx.shape.Image",_308.Shape,{constructor:function(_334){this.shape=g.getDefault("Image");this.rawNode=_334;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});_303("dojox.gfx.shape.Text",_308.Shape,{constructor:function(_335){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=_335;},getFont:function(){return this.fontStyle;},setFont:function(_336){this.fontStyle=typeof _336=="string"?g.splitFontString(_336):g.makeParameters(g.defaultFont,_336);this._setFont();return this;}});_308.Creator={createShape:function(_337){switch(_337.type){case g.defaultPath.type:return this.createPath(_337);case g.defaultRect.type:return this.createRect(_337);case g.defaultCircle.type:return this.createCircle(_337);case g.defaultEllipse.type:return this.createEllipse(_337);case g.defaultLine.type:return this.createLine(_337);case g.defaultPolyline.type:return this.createPolyline(_337);case g.defaultImage.type:return this.createImage(_337);case g.defaultText.type:return this.createText(_337);case g.defaultTextPath.type:return this.createTextPath(_337);}return null;},createGroup:function(){return this.createObject(g.Group);},createRect:function(rect){return this.createObject(g.Rect,rect);},createEllipse:function(_338){return this.createObject(g.Ellipse,_338);},createCircle:function(_339){return this.createObject(g.Circle,_339);},createLine:function(line){return this.createObject(g.Line,line);},createPolyline:function(_33a){return this.createObject(g.Polyline,_33a);},createImage:function(_33b){return this.createObject(g.Image,_33b);},createText:function(text){return this.createObject(g.Text,text);},createPath:function(path){return this.createObject(g.Path,path);},createTextPath:function(text){return this.createObject(g.TextPath,{}).setText(text);},createObject:function(_33c,_33d){return null;}};return _308;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/sniff","dojo/_base/unload","dojo/_base/window"],function(on,_33e,keys,_33f,has,_340,win){var _341=null;if(has("ie")){(function(){var _342=function(evt){_341=evt.srcElement;};win.doc.attachEvent("onkeydown",_342);_340.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_342);});})();}else{win.doc.addEventListener("keydown",function(evt){_341=evt.target;},true);}var _343=function(node,_344){if(/input|button/i.test(node.nodeName)){return on(node,"click",_344);}else{function _345(e){return (e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};var _346=[on(node,"keypress",function(e){if(_345(e)){_341=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_345(e)&&e.target==_341){_341=null;_344.call(this,e);}}),on(node,"click",function(e){_344.call(this,e);})];return {remove:function(){_33e.forEach(_346,function(h){h.remove();});}};}};return _33f("dijit._OnDijitClickMixin",null,{connect:function(obj,_347,_348){return this.inherited(arguments,[obj,_347=="ondijitclick"?_343:_347,_348]);}});});},"esri/tasks/_task":function(){define(["dijit","dojo","dojox","dojo/require!esri/graphic,esri/utils"],function(_349,dojo,_34a){dojo.provide("esri.tasks._task");dojo.require("esri.graphic");dojo.require("esri.utils");dojo.declare("esri.tasks._Task",null,{constructor:function(url){if(url&&dojo.isString(url)){this._url=esri.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=dojo.hitch(this,this._errorHandler);},_useSSL:function(){var _34b=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_34b&&_34b.path){_34b.path=_34b.path.replace(re,rep);}},_encode:function(_34c,_34d,_34e){var _34f,type,_350={},i,p,pl;for(i in _34c){if(i==="declaredClass"){continue;}_34f=_34c[i];type=typeof (_34f);if(_34f!==null&&_34f!==undefined&&type!=="function"){if(dojo.isArray(_34f)){_350[i]=[];pl=_34f.length;for(p=0;p<pl;p++){_350[i][p]=this._encode(_34f[p]);}}else{if(type==="object"){if(_34f.toJson){var json=_34f.toJson(_34e&&_34e[i]);if(_34f instanceof esri.tasks.FeatureSet){if(json.spatialReference){json.sr=json.spatialReference;delete json.spatialReference;}}_350[i]=_34d?json:dojo.toJson(json);}}else{_350[i]=_34f;}}}}return _350;},_successHandler:function(args,_351,_352,dfd){if(_351){this[_351].apply(this,args);}if(_352){_352.apply(null,args);}if(dfd){esri._resDfd(dfd,args);}},_errorHandler:function(err,_353,dfd){this.onError(err);if(_353){_353(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_354){this.normalization=_354;},onError:function(){}});dojo.declare("esri.tasks.FeatureSet",null,{constructor:function(json){if(json){dojo.mixin(this,json);var _355=this.features,sr=json.spatialReference,_356=esri.Graphic,_357=esri.geometry.getGeometryType(json.geometryType);sr=(this.spatialReference=new esri.SpatialReference(sr));this.geometryType=json.geometryType;if(json.fields){this.fields=json.fields;}dojo.forEach(_355,function(_358,i){var _359=_358.geometry&&_358.geometry.spatialReference;_355[i]=new _356((_357&&_358.geometry)?new _357(_358.geometry):null,_358.symbol&&esri.symbol.fromJson(_358.symbol),_358.attributes);if(_355[i].geometry&&!_359){_355[i].geometry.setSpatialReference(sr);}});}else{this.features=[];this.fields=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(_35a){var json={};if(this.displayFieldName){json.displayFieldName=this.displayFieldName;}if(this.fields){json.fields=this.fields;}if(this.spatialReference){json.spatialReference=this.spatialReference.toJson();}else{if(this.features[0]&&this.features[0].geometry){json.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){json.geometryType=esri.geometry.getJsonType(this.features[0].geometry);}json.features=esri._encodeGraphics(this.features,_35a);}json.exceededTransferLimit=this.exceededTransferLimit;return esri._sanitize(json);}});esri.tasks._SpatialRelationship={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};});},"dojox/charting/action2d/Tooltip":function(){define("dojox/charting/action2d/Tooltip",["dojo/_base/kernel","dijit/Tooltip","dojo/_base/lang","dojo/_base/html","dojo/_base/declare","./PlotAction","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/functional/scan","dojox/lang/functional/fold"],function(dojo,_35b,lang,html,_35c,_35d,m,df,dfs,dff){var _35e=function(o){var t=o.run&&o.run.data&&o.run.data[o.index];if(t&&typeof t!="number"&&(t.tooltip||t.text)){return t.tooltip||t.text;}if(o.element=="candlestick"){return "<table cellpadding=\"1\" cellspacing=\"0\" border=\"0\" style=\"font-size:0.9em;\">"+"<tr><td>Open:</td><td align=\"right\"><strong>"+o.data.open+"</strong></td></tr>"+"<tr><td>High:</td><td align=\"right\"><strong>"+o.data.high+"</strong></td></tr>"+"<tr><td>Low:</td><td align=\"right\"><strong>"+o.data.low+"</strong></td></tr>"+"<tr><td>Close:</td><td align=\"right\"><strong>"+o.data.close+"</strong></td></tr>"+(o.data.mid!==undefined?"<tr><td>Mid:</td><td align=\"right\"><strong>"+o.data.mid+"</strong></td></tr>":"")+"</table>";}return o.element=="bar"?o.x:o.y;};var pi4=Math.PI/4,pi2=Math.PI/2;return _35c("dojox.charting.action2d.Tooltip",_35d,{defaultParams:{text:_35e},optionalParams:{},constructor:function(_35f,plot,_360){this.text=_360&&_360.text?_360.text:_35e;this.connect();},process:function(o){if(o.type==="onplotreset"||o.type==="onmouseout"){_35b.hide(this.aroundRect);this.aroundRect=null;if(o.type==="onplotreset"){delete this.angles;}return;}if(!o.shape||o.type!=="onmouseover"){return;}var _361={type:"rect"},_362=["after","before"];switch(o.element){case "marker":_361.x=o.cx;_361.y=o.cy;_361.w=_361.h=1;break;case "circle":_361.x=o.cx-o.cr;_361.y=o.cy-o.cr;_361.w=_361.h=2*o.cr;break;case "column":_362=["above","below"];case "bar":_361=lang.clone(o.shape.getShape());_361.w=_361.width;_361.h=_361.height;break;case "candlestick":_361.x=o.x;_361.y=o.y;_361.w=o.width;_361.h=o.height;break;default:if(!this.angles){if(typeof o.run.data[0]=="number"){this.angles=df.map(df.scanl(o.run.data,"+",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"+",0));}else{this.angles=df.map(df.scanl(o.run.data,"a + b.y",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"a + b.y",0));}}var _363=m._degToRad(o.plot.opt.startAngle),_364=(this.angles[o.index]+this.angles[o.index+1])/2+_363;_361.x=o.cx+o.cr*Math.cos(_364);_361.y=o.cy+o.cr*Math.sin(_364);_361.w=_361.h=1;if(_364<pi4){}else{if(_364<pi2+pi4){_362=["below","above"];}else{if(_364<Math.PI+pi4){_362=["before","after"];}else{if(_364<2*Math.PI-pi4){_362=["above","below"];}}}}break;}var lt=this.chart.getCoords();_361.x+=lt.x;_361.y+=lt.y;_361.x=Math.round(_361.x);_361.y=Math.round(_361.y);_361.w=Math.ceil(_361.w);_361.h=Math.ceil(_361.h);this.aroundRect=_361;var _365=this.text(o);if(this.chart.getTextDir){var _366=(html.style(this.chart.node,"direction")=="rtl");var _367=(this.chart.getTextDir(_365)=="rtl");}if(_365){if(_367&&!_366){_35b.show("<span dir = 'rtl'>"+_365+"</span>",this.aroundRect,_362);}else{if(!_367&&_366){_35b.show("<span dir = 'ltr'>"+_365+"</span>",this.aroundRect,_362);}else{_35b.show(_365,this.aroundRect,_362);}}}}});});},"dojox/charting/plot2d/Grid":function(){define("dojox/charting/plot2d/Grid",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","../Element","./common","dojox/lang/utils","dojox/gfx/fx"],function(lang,_368,hub,arr,_369,dc,du,fx){return _368("dojox.charting.plot2d.Grid",_369,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:true,hMinorLines:false,vMajorLines:true,vMinorLines:false,hStripes:"none",vStripes:"none",animate:null,enableCache:false},optionalParams:{},constructor:function(_36a,_36b){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_36b);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.dirty=true;this.animate=this.opt.animate;this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};if(this.opt.enableCache){this._lineFreePool=[];this._lineUsePool=[];}},clear:function(){this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},initializeScalers:function(){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},performZoom:function(dim,_36c){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_36d=dim.height-_36c.b,_36e=this._hAxis.getScaler().bounds,_36f=(_36e.from-_36e.lower)*_36e.scale,_370=this._vAxis.getScaler().bounds,_371=(_370.from-_370.lower)*_370.scale,_372=vs/this.lastWindow.vscale,_373=hs/this.lastWindow.hscale,_374=(this.lastWindow.xoffset-_36f)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),_375=(_371-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),_376=this.group,anim=fx.animateTransform(lang.delegate({shape:_376,duration:1200,transform:[{name:"translate",start:[0,0],end:[_36c.l*(1-_373),_36d*(1-_372)]},{name:"scale",start:[1,1],end:[_373,_372]},{name:"original"},{name:"translate",start:[0,0],end:[_374,_375]}]},this.zoom));lang.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_36f,yoffset:_371});this.zoomQueue.push(anim);hub.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},getRequiredColors:function(){return 0;},cleanGroup:function(){this.inherited(arguments);if(this.opt.enableCache){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];}},createLine:function(_377,_378){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_378);_377.add(line);}else{line=_377.createLine(_378);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_379){if(this.zoom){return this.performZoom(dim,_379);}this.dirty=this.isDirty();if(!this.dirty){return this;}this.cleanGroup();var s=this.group,ta=this.chart.theme.axis;try{var _37a=this._vAxis.getScaler(),vt=_37a.scaler.getTransformerFromModel(_37a),_37b=this._vAxis.getTicks();if(_37b!=null){if(this.opt.hMinorLines){arr.forEach(_37b.minor,function(tick){var y=dim.height-_379.b-vt(tick.value);var _37c=this.createLine(s,{x1:_379.l,y1:y,x2:dim.width-_379.r,y2:y}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_37c,"h",_379.l,_379.r+_379.l-dim.width);}},this);}if(this.opt.hMajorLines){arr.forEach(_37b.major,function(tick){var y=dim.height-_379.b-vt(tick.value);var _37d=this.createLine(s,{x1:_379.l,y1:y,x2:dim.width-_379.r,y2:y}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_37d,"h",_379.l,_379.r+_379.l-dim.width);}},this);}}}catch(e){}try{var _37e=this._hAxis.getScaler(),ht=_37e.scaler.getTransformerFromModel(_37e),_37b=this._hAxis.getTicks();if(this!=null){if(_37b&&this.opt.vMinorLines){arr.forEach(_37b.minor,function(tick){var x=_379.l+ht(tick.value);var _37f=this.createLine(s,{x1:x,y1:_379.t,x2:x,y2:dim.height-_379.b}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_37f,"v",dim.height-_379.b,dim.height-_379.b-_379.t);}},this);}if(_37b&&this.opt.vMajorLines){arr.forEach(_37b.major,function(tick){var x=_379.l+ht(tick.value);var _380=this.createLine(s,{x1:x,y1:_379.t,x2:x,y2:dim.height-_379.b}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_380,"v",dim.height-_379.b,dim.height-_379.b-_379.t);}},this);}}}catch(e){}this.dirty=false;return this;},_animateGrid:function(_381,type,_382,size){var _383=type=="h"?[_382,0]:[0,_382];var _384=type=="h"?[1/size,1]:[1,1/size];fx.animateTransform(lang.delegate({shape:_381,duration:1200,transform:[{name:"translate",start:_383,end:[0,0]},{name:"scale",start:_384,end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/plot2d/Markers":function(){define("dojox/charting/plot2d/Markers",["dojo/_base/declare","./Default"],function(_385,_386){return _385("dojox.charting.plot2d.Markers",_386,{constructor:function(){this.opt.markers=true;}});});},"dojox/lang/functional/sequence":function(){define("dojox/lang/functional/sequence",["dojo/_base/lang","./lambda"],function(lang,df){lang.mixin(df,{repeat:function(n,f,z,o){o=o||dojo.global;f=df.lambda(f);var t=new Array(n),i=1;t[0]=z;for(;i<n;t[i]=z=f.call(o,z),++i){}return t;},until:function(pr,f,z,o){o=o||dojo.global;f=df.lambda(f);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(z),z=f.call(o,z)){}return t;}});return df;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo,text){return dojo.cache;});},"dojox/lang/utils":function(){define("dojox/lang/utils",["..","dojo/_base/lang"],function(_387,lang){var du=lang.getObject("lang.utils",true,_387);var _388={},opts=Object.prototype.toString;var _389=function(o){if(o){switch(opts.call(o)){case "[object Array]":return o.slice(0);case "[object Object]":return lang.delegate(o);}}return o;};lang.mixin(du,{coerceType:function(_38a,_38b){switch(typeof _38a){case "number":return Number(eval("("+_38b+")"));case "string":return String(_38b);case "boolean":return Boolean(eval("("+_38b+")"));}return eval("("+_38b+")");},updateWithObject:function(_38c,_38d,conv){if(!_38d){return _38c;}for(var x in _38c){if(x in _38d&&!(x in _388)){var t=_38c[x];if(t&&typeof t=="object"){du.updateWithObject(t,_38d[x],conv);}else{_38c[x]=conv?du.coerceType(t,_38d[x]):_389(_38d[x]);}}}return _38c;},updateWithPattern:function(_38e,_38f,_390,conv){if(!_38f||!_390){return _38e;}for(var x in _390){if(x in _38f&&!(x in _388)){_38e[x]=conv?du.coerceType(_390[x],_38f[x]):_389(_38f[x]);}}return _38e;},merge:function(_391,_392){if(_392){var _393=opts.call(_391),_394=opts.call(_392),t,i,l,m;switch(_394){case "[object Array]":if(_394==_393){t=new Array(Math.max(_391.length,_392.length));for(i=0,l=t.length;i<l;++i){t[i]=du.merge(_391[i],_392[i]);}return t;}return _392.slice(0);case "[object Object]":if(_394==_393&&_391){t=lang.delegate(_391);for(i in _392){if(i in _391){l=_391[i];m=_392[i];if(m!==l){t[i]=du.merge(l,m);}}else{t[i]=lang.clone(_392[i]);}}return t;}return lang.clone(_392);}}return _392;}});return du;});},"dojox/charting/plot2d/Columns":function(){define("dojox/charting/plot2d/Columns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_395,Base,dc,df,dfr,du,fx){var _396=dfr.lambda("item.purgeGroup()");return _395("dojox.charting.plot2d.Columns",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_397,_398){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_398);du.updateWithPattern(this.opt,_398,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _399=dc.collectSimpleStats(this.series);_399.hmin-=0.5;_399.hmax+=0.5;return _399;},createRect:function(run,_39a,_39b){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_39b);_39a.add(rect);}else{rect=_39a.createRect(_39b);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_39c){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_39c);}var t=this.getSeriesStats();this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_396);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_39d,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_39e=Math.max(0,this._vScaler.bounds.lower),_39f=vt(_39e),min=Math.max(0,Math.floor(this._hScaler.bounds.from-1)),max=Math.ceil(this._hScaler.bounds.to),_3a0=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_39d=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var _3a1=t.next("column",[this.opt,run]),s=run.group,_3a2=new Array(run.data.length);var l=Math.min(run.data.length,max);for(var j=min;j<l;++j){var _3a3=run.data[j];if(_3a3!==null){var v=typeof _3a3=="number"?_3a3:_3a3.y,vv=vt(v),_3a4=vv-_39f,h=Math.abs(_3a4),_3a5=typeof _3a3!="number"?t.addMixin(_3a1,"column",_3a3,true):t.post(_3a1,"column");if(_39d>=1&&h>=0){var rect={x:_39c.l+ht(j+0.5)+gap,y:dim.height-_39c.b-(v>_39e?vv:_39f),width:_39d,height:h};var _3a6=this._plotFill(_3a5.series.fill,dim,_39c);_3a6=this._shapeFill(_3a6,rect);var _3a7=this.createRect(run,s,rect).setFill(_3a6).setStroke(_3a5.series.stroke);run.dyn.fill=_3a7.getFill();run.dyn.stroke=_3a7.getStroke();if(_3a0){var o={element:"column",index:j,run:run,shape:_3a7,x:j+0.5,y:v};this._connectEvents(o);_3a2[j]=o;}if(this.animate){this._animateColumn(_3a7,dim.height-_39c.b-_39f,h);}}}}this._eventSeries[run.name]=_3a2;run.dirty=false;}this.dirty=false;return this;},_animateColumn:function(_3a8,_3a9,_3aa){fx.animateTransform(lang.delegate({shape:_3a8,duration:1200,transform:[{name:"translate",start:[0,_3a9-(_3a9/_3aa)],end:[0,0]},{name:"scale",start:[1,1/_3aa],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/lang/functional":function(){define("dojox/lang/functional",["./functional/lambda","./functional/array","./functional/object"],function(df){return df;});},"dojox/charting/plot2d/StackedBars":function(){define("dojox/charting/plot2d/StackedBars",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Bars","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,arr,_3ab,Bars,dc,df,dfr,dfs){var _3ac=dfr.lambda("item.purgeGroup()");return _3ab("dojox.charting.plot2d.StackedBars",Bars,{getSeriesStats:function(){var _3ad=dc.collectStackedStats(this.series),t;this._maxRunLength=_3ad.hmax;_3ad.hmin-=0.5;_3ad.hmax+=0.5;t=_3ad.hmin,_3ad.hmin=_3ad.vmin,_3ad.vmin=t;t=_3ad.hmax,_3ad.hmax=_3ad.vmax,_3ad.vmax=t;return _3ad;},render:function(dim,_3ae){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _3af=run.data[j];if(_3af!==null){var v=typeof _3af=="number"?_3af:_3af.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_3ae);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_3ac);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_3b0,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_3b1=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_3b0=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _3b2=t.next("bar",[this.opt,run]),s=run.group,_3b3=new Array(acc.length);for(var j=0;j<acc.length;++j){var _3af=run.data[j];if(_3af!==null){var v=acc[j],_3b4=ht(v),_3b5=typeof _3af!="number"?t.addMixin(_3b2,"bar",_3af,true):t.post(_3b2,"bar");if(_3b4>=0&&_3b0>=1){var rect={x:_3ae.l,y:dim.height-_3ae.b-vt(j+1.5)+gap,width:_3b4,height:_3b0};var _3b6=this._plotFill(_3b5.series.fill,dim,_3ae);_3b6=this._shapeFill(_3b6,rect);var _3b7=s.createRect(rect).setFill(_3b6).setStroke(_3b5.series.stroke);run.dyn.fill=_3b7.getFill();run.dyn.stroke=_3b7.getStroke();if(_3b1){var o={element:"bar",index:j,run:run,shape:_3b7,x:v,y:j+1.5};this._connectEvents(o);_3b3[j]=o;}if(this.animate){this._animateBar(_3b7,_3ae.l,-_3b4);}}}}this._eventSeries[run.name]=_3b3;run.dirty=false;for(var j=0;j<run.data.length;++j){var _3af=run.data[j];if(_3af!==null){var v=typeof _3af=="number"?_3af:_3af.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojo/cldr/nls/gregorian":function(){define({root:{"months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, y-M-d","dateFormatItem-MMMEd":"E MMM d","eraNarrow":["BCE","CE"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d","months-format-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, y MMMM dd","dateFormatItem-Md":"M-d","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","field-era":"Era","dateFormatItem-yM":"y-M","months-standAlone-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour","months-format-abbr":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","dateFormatItem-H":"HH","months-standAlone-abbr":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-M":"L","days-standAlone-wide":["1","2","3","4","5","6","7"],"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"eraAbbr":["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":["1","2","3","4","5","6","7"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"Yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M-d","dateTimeFormat-full":"{1} {0}","field-day":"Day","days-format-wide":["1","2","3","4","5","6","7"],"field-zone":"Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":["1","2","3","4","5","6","7"],"eraNames":["BCE","CE"],"days-format-narrow":["1","2","3","4","5","6","7"],"days-standAlone-narrow":["1","2","3","4","5","6","7"],"dateFormatItem-MMM":"LLL","field-month":"Month","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormat-short":"yyyy-MM-dd","field-second":"Second","dateFormatItem-yMMMEd":"EEE, y MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"y MMM d","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"},"ar":true,"ca":true,"cs":true,"da":true,"de":true,"el":true,"en":true,"en-au":true,"en-ca":true,"en-gb":true,"es":true,"fi":true,"fr":true,"fr-ch":true,"he":true,"hu":true,"it":true,"ja":true,"ko":true,"nb":true,"nl":true,"pl":true,"pt":true,"pt-pt":true,"ro":true,"ru":true,"sk":true,"sl":true,"sv":true,"th":true,"tr":true,"zh":true,"zh-hant":true,"zh-hk":true,"zh-tw":true});},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./_base/sniff","./_base/window"],function(_3b8,lang,_3b9,has,_3ba){var html=_3ba.doc.documentElement,ie=has("ie"),_3bb=has("opera"),maj=Math.floor,ff=has("ff"),_3bc=_3b8.boxModel.replace(/-/,""),_3bd={"dj_ie":ie,"dj_ie6":maj(ie)==6,"dj_ie7":maj(ie)==7,"dj_ie8":maj(ie)==8,"dj_ie9":maj(ie)==9,"dj_quirks":has("quirks"),"dj_iequirks":ie&&has("quirks"),"dj_opera":_3bb,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla"),"dj_ff3":maj(ff)==3};_3bd["dj_"+_3bc]=true;var _3be="";for(var clz in _3bd){if(_3bd[clz]){_3be+=clz+" ";}}html.className=lang.trim(html.className+" "+_3be);_3b9(90,function(){if(!_3b8.isBodyLtr()){var _3bf="dj_rtl dijitRtl "+_3be.replace(/ /g,"-rtl ");html.className=lang.trim(html.className+" "+_3bf+"dj_rtl dijitRtl "+_3be.replace(/ /g,"-rtl "));}});return has;});},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){lang.getObject("string",true,dojo);dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_3c0,map,_3c1,_3c2){_3c2=_3c2||dojo.global;_3c1=_3c1?lang.hitch(_3c2,_3c1):function(v){return v;};return _3c0.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_3c3,key,_3c4){var _3c5=lang.getObject(key,false,map);if(_3c4){_3c5=lang.getObject(_3c4,false,_3c2).call(_3c2,_3c5,key);}return _3c1(_3c5,key).toString();});};dojo.string.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return dojo.string;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n></div>\r\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","."],function(_3c6,_3c7,fx,dom,_3c8,_3c9,_3ca,lang,has,win,_3cb,_3cc,_3cd,_3ce,_3cf,_3d0,_3d1){var _3d2=_3c7("dijit._MasterTooltip",[_3cd,_3ce],{duration:_3cb.defaultDuration,templateString:_3d0,postCreate:function(){win.body().appendChild(this.domNode);this.bgIframe=new _3cf(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_3d3,_3d4,_3d5,rtl,_3d6){if(this.aroundNode&&this.aroundNode===_3d4&&this.containerNode.innerHTML==_3d3){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_3d3;this.set("textDir",_3d6);this.containerNode.align=rtl?"right":"left";var pos=_3cc.around(this.domNode,_3d4,_3d5&&_3d5.length?_3d5:_3d7.defaultPosition,!rtl,lang.hitch(this,"orient"));var _3d8=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_3d8.y+((_3d8.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_3d8.x+((_3d8.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}}_3ca.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_3d4;},orient:function(node,_3d9,_3da,_3db,_3dc){this.connectorNode.style.top="";var _3dd=_3db.w-this.connectorNode.offsetWidth;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_3d9+"-"+_3da];this.domNode.style.width="auto";var size=_3c9.getContentBox(this.domNode);var _3de=Math.min((Math.max(_3dd,1)),size.w);var _3df=_3de<size.w;this.domNode.style.width=_3de+"px";if(_3df){this.containerNode.style.overflow="auto";var _3e0=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(_3e0>_3de){_3e0=_3e0+_3ca.get(this.domNode,"paddingLeft")+_3ca.get(this.domNode,"paddingRight");this.domNode.style.width=_3e0+"px";}}if(_3da.charAt(0)=="B"&&_3d9.charAt(0)=="B"){var mb=_3c9.getMarginBox(node);var _3e1=this.connectorNode.offsetHeight;if(mb.h>_3db.h){var _3e2=_3db.h-((_3dc.h+_3e1)>>1);this.connectorNode.style.top=_3e2+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_3dc.h/2-_3e1/2,0),mb.h-_3e1)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_3dd);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_3e3){if(this._onDeck&&this._onDeck[1]==_3e3){this._onDeck=null;}else{if(this.aroundNode===_3e3){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_3c6.forEach(node.children,function(_3e4){this._setAutoTextDir(_3e4);},this);},_setTextDirAttr:function(_3e5){this._set("textDir",typeof _3e5!="undefined"?_3e5:"");if(_3e5=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_3d1.showTooltip=function(_3e6,_3e7,_3e8,rtl,_3e9){if(_3e8){_3e8=_3c6.map(_3e8,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_3d7._masterTT){_3d1._masterTT=_3d7._masterTT=new _3d2();}return _3d7._masterTT.show(_3e6,_3e7,_3e8,rtl,_3e9);};_3d1.hideTooltip=function(_3ea){return _3d7._masterTT&&_3d7._masterTT.hide(_3ea);};var _3d7=_3c7("dijit.Tooltip",_3cd,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(_3eb){_3c6.forEach(this._connections||[],function(_3ec){_3c6.forEach(_3ec,lang.hitch(this,"disconnect"));},this);this._connectIds=_3c6.filter(lang.isArrayLike(_3eb)?_3eb:(_3eb?[_3eb]:[]),function(id){return dom.byId(id);});this._connections=_3c6.map(this._connectIds,function(id){var node=dom.byId(id);return [this.connect(node,"onmouseenter","_onHover"),this.connect(node,"onmouseleave","_onUnHover"),this.connect(node,"onfocus","_onHover"),this.connect(node,"onblur","_onUnHover")];},this);this._set("connectId",_3eb);},addTarget:function(node){var id=node.id||node;if(_3c6.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_3c6.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_3c8.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_3c6.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onHover:function(e){if(!this._showTimer){var _3ed=e.target;this._showTimer=setTimeout(lang.hitch(this,function(){this.open(_3ed);}),this.showDelay);}},_onUnHover:function(){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_3ee){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}_3d7.show(this.label||this.domNode.innerHTML,_3ee,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_3ee;this.onShow(_3ee,this.position);},close:function(){if(this._connectNode){_3d7.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});_3d7._MasterTooltip=_3d2;_3d7.show=_3d1.showTooltip;_3d7.hide=_3d1.hideTooltip;_3d7.defaultPosition=["after-centered","before-centered"];return _3d7;});},"dojox/charting/action2d/Base":function(){define("dojox/charting/action2d/Base",["dojo/_base/lang","dojo/_base/declare"],function(lang,_3ef){return _3ef("dojox.charting.action2d.Base",null,{constructor:function(_3f0,plot){this.chart=_3f0;this.plot=plot?(lang.isString(plot)?this.chart.getPlot(plot):plot):this.chart.getPlot("default");},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect();}});});},"dojox/charting/plot2d/Stacked":function(){define("dojox/charting/plot2d/Stacked",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Default","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,_3f1,arr,_3f2,dc,df,dfr,dfs){var _3f3=dfr.lambda("item.purgeGroup()");return _3f1("dojox.charting.plot2d.Stacked",_3f2,{getSeriesStats:function(){var _3f4=dc.collectStackedStats(this.series);this._maxRunLength=_3f4.hmax;return _3f4;},render:function(dim,_3f5){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_3f5);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_3f3);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_3f6=this.events(),ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _3f7=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_3f8,_3f9=arr.map(acc,function(v,i){return {x:ht(i+1)+_3f5.l,y:dim.height-_3f5.b-vt(v)};},this);var _3fa=this.opt.tension?dc.curve(_3f9,this.opt.tension):"";if(this.opt.areas){var _3fb=lang.clone(_3f9);if(this.opt.tension){var p=dc.curve(_3fb,this.opt.tension);p+=" L"+_3f9[_3f9.length-1].x+","+(dim.height-_3f5.b)+" L"+_3f9[0].x+","+(dim.height-_3f5.b)+" L"+_3f9[0].x+","+_3f9[0].y;run.dyn.fill=s.createPath(p).setFill(_3f7.series.fill).getFill();}else{_3fb.push({x:_3f9[_3f9.length-1].x,y:dim.height-_3f5.b});_3fb.push({x:_3f9[0].x,y:dim.height-_3f5.b});_3fb.push(_3f9[0]);run.dyn.fill=s.createPolyline(_3fb).setFill(_3f7.series.fill).getFill();}}if(this.opt.lines||this.opt.markers){if(_3f7.series.outline){_3f8=dc.makeStroke(_3f7.series.outline);_3f8.width=2*_3f8.width+_3f7.series.stroke.width;}}if(this.opt.markers){run.dyn.marker=_3f7.symbol;}var _3fc,_3fd,_3fe;if(_3f7.series.shadow&&_3f7.series.stroke){var _3ff=_3f7.series.shadow,_400=arr.map(_3f9,function(c){return {x:c.x+_3ff.dx,y:c.y+_3ff.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_400,this.opt.tension)).setStroke(_3ff).getStroke();}else{run.dyn.shadow=s.createPolyline(_400).setStroke(_3ff).getStroke();}}if(this.opt.markers){_3ff=_3f7.marker.shadow;_3fe=arr.map(_400,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_3f7.symbol).setStroke(_3ff).setFill(_3ff.color);},this);}}if(this.opt.lines){if(_3f8){if(this.opt.tension){run.dyn.outline=s.createPath(_3fa).setStroke(_3f8).getStroke();}else{run.dyn.outline=s.createPolyline(_3f9).setStroke(_3f8).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_3fa).setStroke(_3f7.series.stroke).getStroke();}else{run.dyn.stroke=s.createPolyline(_3f9).setStroke(_3f7.series.stroke).getStroke();}}if(this.opt.markers){_3fc=new Array(_3f9.length);_3fd=new Array(_3f9.length);_3f8=null;if(_3f7.marker.outline){_3f8=dc.makeStroke(_3f7.marker.outline);_3f8.width=2*_3f8.width+(_3f7.marker.stroke?_3f7.marker.stroke.width:0);}arr.forEach(_3f9,function(c,i){var path="M"+c.x+" "+c.y+" "+_3f7.symbol;if(_3f8){_3fd[i]=s.createPath(path).setStroke(_3f8);}_3fc[i]=s.createPath(path).setStroke(_3f7.marker.stroke).setFill(_3f7.marker.fill);},this);if(_3f6){var _401=new Array(_3fc.length);arr.forEach(_3fc,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_3fd[i]||null,shadow:_3fe&&_3fe[i]||null,cx:_3f9[i].x,cy:_3f9[i].y,x:i+1,y:run.data[i]};this._connectEvents(o);_401[i]=o;},this);this._eventSeries[run.name]=_401;}else{delete this._eventSeries[run.name];}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojo/cldr/nls/number":function(){define({root:{"scientificFormat":"#E0","currencySpacing-afterCurrency-currencyMatch":"[:letter:]","infinity":"","list":";","percentSign":"%","minusSign":"-","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","decimalFormat-short":"000T","currencySpacing-afterCurrency-insertBetween":"","nan":"NaN","nativeZeroDigit":"0","plusSign":"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","currencySpacing-beforeCurrency-currencyMatch":"[:letter:]","currencyFormat":"#,##0.00","perMille":"","group":",","percentFormat":"#,##0%","decimalFormat":"#,##0.###","decimal":".","patternDigit":"#","currencySpacing-beforeCurrency-insertBetween":"","exponential":"E"},"ar":true,"ca":true,"cs":true,"da":true,"de":true,"el":true,"en":true,"en-au":true,"en-gb":true,"es":true,"fi":true,"fr":true,"fr-ch":true,"he":true,"hu":true,"it":true,"ja":true,"ko":true,"nb":true,"nl":true,"pl":true,"pt":true,"pt-pt":true,"ro":true,"ru":true,"sk":true,"sl":true,"sv":true,"th":true,"tr":true,"zh":true,"zh-hant":true,"zh-hk":true});},"dojox/charting/plot2d/Pie":function(){define("dojox/charting/plot2d/Pie",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","../Element","./_PlotEvents","./common","../axis2d/common","dojox/gfx","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/utils"],function(lang,arr,_402,_403,_404,dc,da,g,m,df,du){var _405=0.2;return _402("dojox.charting.plot2d.Pie",[_403,_404],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:true,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",labelWiring:{}},constructor:function(_406,_407){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_407);du.updateWithPattern(this.opt,_407,this.optionalParams);this.run=null;this.dyn=[];},clear:function(){this.dirty=true;this.dyn=[];this.run=null;return this;},setAxis:function(axis){return this;},addSeries:function(run){this.run=run;return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},initializeScalers:function(){return this;},getRequiredColors:function(){return this.run?this.run.data.length:0;},render:function(dim,_408){if(!this.dirty){return this;}this.resetEvents();this.dirty=false;this._eventSeries={};this.cleanGroup();var s=this.group,t=this.chart.theme;if(!this.run||!this.run.data.length){return this;}var rx=(dim.width-_408.l-_408.r)/2,ry=(dim.height-_408.t-_408.b)/2,r=Math.min(rx,ry),_409="font" in this.opt?this.opt.font:t.axis.font,size=_409?g.normalizedLength(g.splitFontString(_409).size):0,_40a="fontColor" in this.opt?this.opt.fontColor:t.axis.fontColor,_40b=m._degToRad(this.opt.startAngle),_40c=_40b,step,_40d,_40e,_40f,_410,_411,run=this.run.data,_412=this.events();if(typeof run[0]=="number"){_40d=df.map(run,"x ? Math.max(x, 0) : 0");if(df.every(_40d,"<= 0")){return this;}_40e=df.map(_40d,"/this",df.foldl(_40d,"+",0));if(this.opt.labels){_40f=arr.map(_40e,function(x){return x>0?this._getLabel(x*100)+"%":"";},this);}}else{_40d=df.map(run,"x ? Math.max(x.y, 0) : 0");if(df.every(_40d,"<= 0")){return this;}_40e=df.map(_40d,"/this",df.foldl(_40d,"+",0));if(this.opt.labels){_40f=arr.map(_40e,function(x,i){if(x<=0){return "";}var v=run[i];return "text" in v?v.text:this._getLabel(x*100)+"%";},this);}}var _413=df.map(run,function(v,i){if(v===null||typeof v=="number"){return t.next("slice",[this.opt,this.run],true);}return t.next("slice",[this.opt,this.run,v],true);},this);if(this.opt.labels){_410=df.foldl1(df.map(_40f,function(_414,i){var font=_413[i].series.font;return g._base._getTextBox(_414,{font:font}).w;},this),"Math.max(a, b)")/2;if(this.opt.labelOffset<0){r=Math.min(rx-2*_410,ry-size)+this.opt.labelOffset;}_411=r-this.opt.labelOffset;}if("radius" in this.opt){r=this.opt.radius;_411=r-this.opt.labelOffset;}var _415={cx:_408.l+rx,cy:_408.t+ry,r:r};this.dyn=[];var _416=new Array(_40e.length);arr.some(_40e,function(_417,i){if(_417<0){return false;}if(_417==0){this.dyn.push({fill:null,stroke:null});return false;}var v=run[i],_418=_413[i],_419;if(_417>=1){_419=this._plotFill(_418.series.fill,dim,_408);_419=this._shapeFill(_419,{x:_415.cx-_415.r,y:_415.cy-_415.r,width:2*_415.r,height:2*_415.r});_419=this._pseudoRadialFill(_419,{x:_415.cx,y:_415.cy},_415.r);var _41a=s.createCircle(_415).setFill(_419).setStroke(_418.series.stroke);this.dyn.push({fill:_419,stroke:_418.series.stroke});if(_412){var o={element:"slice",index:i,run:this.run,shape:_41a,x:i,y:typeof v=="number"?v:v.y,cx:_415.cx,cy:_415.cy,cr:r};this._connectEvents(o);_416[i]=o;}return true;}var end=_40c+_417*2*Math.PI;if(i+1==_40e.length){end=_40b+2*Math.PI;}var step=end-_40c,x1=_415.cx+r*Math.cos(_40c),y1=_415.cy+r*Math.sin(_40c),x2=_415.cx+r*Math.cos(end),y2=_415.cy+r*Math.sin(end);var _41b=m._degToRad(this.opt.fanSize);if(_418.series.fill&&_418.series.fill.type==="radial"&&this.opt.radGrad==="fan"&&step>_41b){var _41c=s.createGroup(),_41d=Math.ceil(step/_41b),_41e=step/_41d;_419=this._shapeFill(_418.series.fill,{x:_415.cx-_415.r,y:_415.cy-_415.r,width:2*_415.r,height:2*_415.r});for(var j=0;j<_41d;++j){var _41f=j==0?x1:_415.cx+r*Math.cos(_40c+(j-_405)*_41e),_420=j==0?y1:_415.cy+r*Math.sin(_40c+(j-_405)*_41e),_421=j==_41d-1?x2:_415.cx+r*Math.cos(_40c+(j+1+_405)*_41e),_422=j==_41d-1?y2:_415.cy+r*Math.sin(_40c+(j+1+_405)*_41e),fan=_41c.createPath().moveTo(_415.cx,_415.cy).lineTo(_41f,_420).arcTo(r,r,0,_41e>Math.PI,true,_421,_422).lineTo(_415.cx,_415.cy).closePath().setFill(this._pseudoRadialFill(_419,{x:_415.cx,y:_415.cy},r,_40c+(j+0.5)*_41e,_40c+(j+0.5)*_41e));}_41c.createPath().moveTo(_415.cx,_415.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_415.cx,_415.cy).closePath().setStroke(_418.series.stroke);_41a=_41c;}else{_41a=s.createPath().moveTo(_415.cx,_415.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_415.cx,_415.cy).closePath().setStroke(_418.series.stroke);var _419=_418.series.fill;if(_419&&_419.type==="radial"){_419=this._shapeFill(_419,{x:_415.cx-_415.r,y:_415.cy-_415.r,width:2*_415.r,height:2*_415.r});if(this.opt.radGrad==="linear"){_419=this._pseudoRadialFill(_419,{x:_415.cx,y:_415.cy},r,_40c,end);}}else{if(_419&&_419.type==="linear"){_419=this._plotFill(_419,dim,_408);_419=this._shapeFill(_419,_41a.getBoundingBox());}}_41a.setFill(_419);}this.dyn.push({fill:_419,stroke:_418.series.stroke});if(_412){var o={element:"slice",index:i,run:this.run,shape:_41a,x:i,y:typeof v=="number"?v:v.y,cx:_415.cx,cy:_415.cy,cr:r};this._connectEvents(o);_416[i]=o;}_40c=end;return false;},this);if(this.opt.labels){if(this.opt.labelStyle=="default"){_40c=_40b;arr.some(_40e,function(_423,i){if(_423<=0){return false;}var _424=_413[i];if(_423>=1){var v=run[i],elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_415.cx,_415.cy+size/2,"middle",_40f[i],_424.series.font,_424.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}return true;}var end=_40c+_423*2*Math.PI,v=run[i];if(i+1==_40e.length){end=_40b+2*Math.PI;}var _425=(_40c+end)/2,x=_415.cx+_411*Math.cos(_425),y=_415.cy+_411*Math.sin(_425)+size/2;var elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,x,y,"middle",_40f[i],_424.series.font,_424.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}_40c=end;return false;},this);}else{if(this.opt.labelStyle=="columns"){_40c=_40b;var _426=[];arr.forEach(_40e,function(_427,i){var end=_40c+_427*2*Math.PI;if(i+1==_40e.length){end=_40b+2*Math.PI;}var _428=(_40c+end)/2;_426.push({angle:_428,left:Math.cos(_428)<0,theme:_413[i],index:i,omit:end-_40c<0.001});_40c=end;});var _429=g._base._getTextBox("a",{font:_409}).h;this._getProperLabelRadius(_426,_429,_415.r*1.1);arr.forEach(_426,function(_42a,i){if(!_42a.omit){var _42b=_415.cx-_415.r*2,_42c=_415.cx+_415.r*2,_42d=g._base._getTextBox(_40f[i],{font:_409}).w,x=_415.cx+_42a.labelR*Math.cos(_42a.angle),y=_415.cy+_42a.labelR*Math.sin(_42a.angle),_42e=(_42a.left)?(_42b+_42d):(_42c-_42d),_42f=(_42a.left)?_42b:_42e;var _430=s.createPath().moveTo(_415.cx+_415.r*Math.cos(_42a.angle),_415.cy+_415.r*Math.sin(_42a.angle));if(Math.abs(_42a.labelR*Math.cos(_42a.angle))<_415.r*2-_42d){_430.lineTo(x,y);}_430.lineTo(_42e,y).setStroke(_42a.theme.series.labelWiring);var elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_42f,y,"left",_40f[i],_42a.theme.series.font,_42a.theme.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}},this);}}}var esi=0;this._eventSeries[this.run.name]=df.map(run,function(v){return v<=0?null:_416[esi++];});return this;},_getProperLabelRadius:function(_431,_432,_433){var _434={},_435={},_436=1,_437=1;if(_431.length==1){_431[0].labelR=_433;return;}for(var i=0;i<_431.length;i++){var _438=Math.abs(Math.sin(_431[i].angle));if(_431[i].left){if(_436>=_438){_436=_438;_434=_431[i];}}else{if(_437>=_438){_437=_438;_435=_431[i];}}}_434.labelR=_435.labelR=_433;this._calculateLabelR(_434,_431,_432);this._calculateLabelR(_435,_431,_432);},_calculateLabelR:function(_439,_43a,_43b){var i=_439.index,_43c=_43a.length,_43d=_439.labelR;while(!(_43a[i%_43c].left^_43a[(i+1)%_43c].left)){if(!_43a[(i+1)%_43c].omit){var _43e=(Math.sin(_43a[i%_43c].angle)*_43d+((_43a[i%_43c].left)?(-_43b):_43b))/Math.sin(_43a[(i+1)%_43c].angle);_43d=(_43e<_439.labelR)?_439.labelR:_43e;_43a[(i+1)%_43c].labelR=_43d;}i++;}i=_439.index;var j=(i==0)?_43c-1:i-1;while(!(_43a[i].left^_43a[j].left)){if(!_43a[j].omit){var _43e=(Math.sin(_43a[i].angle)*_43d+((_43a[i].left)?_43b:(-_43b)))/Math.sin(_43a[j].angle);_43d=(_43e<_439.labelR)?_439.labelR:_43e;_43a[j].labelR=_43d;}i--;j--;i=(i<0)?i+_43a.length:i;j=(j<0)?j+_43a.length:j;}},_getLabel:function(_43f){return dc.getLabel(_43f,this.opt.fixed,this.opt.precision);}});});},"dojox/color/_base":function(){define("dojox/color/_base",["dojo/_base/kernel","../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(dojo,_440,lang,_441,_442){var cx=lang.getObject("dojox.color",true);cx.Color=_441;cx.blend=_441.blendColors;cx.fromRgb=_441.fromRgb;cx.fromHex=_441.fromHex;cx.fromArray=_441.fromArray;cx.fromString=_441.fromString;cx.greyscale=_442.makeGrey;lang.mixin(cx,{fromCmy:function(cyan,_443,_444){if(lang.isArray(cyan)){_443=cyan[1],_444=cyan[2],cyan=cyan[0];}else{if(lang.isObject(cyan)){_443=cyan.m,_444=cyan.y,cyan=cyan.c;}}cyan/=100,_443/=100,_444/=100;var r=1-cyan,g=1-_443,b=1-_444;return new _441({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_445,_446,_447){if(lang.isArray(cyan)){_445=cyan[1],_446=cyan[2],_447=cyan[3],cyan=cyan[0];}else{if(lang.isObject(cyan)){_445=cyan.m,_446=cyan.y,_447=cyan.b,cyan=cyan.c;}}cyan/=100,_445/=100,_446/=100,_447/=100;var r,g,b;r=1-Math.min(1,cyan*(1-_447)+_447);g=1-Math.min(1,_445*(1-_447)+_447);b=1-Math.min(1,_446*(1-_447)+_447);return new _441({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_448,_449){if(lang.isArray(hue)){_448=hue[1],_449=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_448=hue.s,_449=hue.l,hue=hue.h;}}_448/=100;_449/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_448*Math.min(r,1)+(1-_448);g=2*_448*Math.min(g,1)+(1-_448);b=2*_448*Math.min(b,1)+(1-_448);if(_449<0.5){r*=_449,g*=_449,b*=_449;}else{r=(1-_449)*r+2*_449-1;g=(1-_449)*g+2*_449-1;b=(1-_449)*b+2*_449-1;}return new _441({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});cx.fromHsv=function(hue,_44a,_44b){if(lang.isArray(hue)){_44a=hue[1],_44b=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_44a=hue.s,_44b=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_44a/=100;_44b/=100;var r,g,b;if(_44a==0){r=_44b,b=_44b,g=_44b;}else{var _44c=hue/60,i=Math.floor(_44c),f=_44c-i;var p=_44b*(1-_44a);var q=_44b*(1-(_44a*f));var t=_44b*(1-(_44a*(1-f)));switch(i){case 0:r=_44b,g=t,b=p;break;case 1:r=q,g=_44b,b=p;break;case 2:r=p,g=_44b,b=t;break;case 3:r=p,g=q,b=_44b;break;case 4:r=t,g=p,b=_44b;break;case 5:r=_44b,g=p,b=q;break;}}return new _441({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});};lang.extend(_441,{toCmy:function(){var cyan=1-(this.r/255),_44d=1-(this.g/255),_44e=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_44d*100),y:Math.round(_44e*100)};},toCmyk:function(){var cyan,_44f,_450,_451;var r=this.r/255,g=this.g/255,b=this.b/255;_451=Math.min(1-r,1-g,1-b);cyan=(1-r-_451)/(1-_451);_44f=(1-g-_451)/(1-_451);_450=(1-b-_451)/(1-_451);return {c:Math.round(cyan*100),m:Math.round(_44f*100),y:Math.round(_450*100),b:Math.round(_451*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _452=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=_452/((l<0.5)?(2*l):(2-2*l));}if(_452>0){if(max==r&&max!=g){h+=(g-b)/_452;}if(max==g&&max!=b){h+=(2+(b-r)/_452);}if(max==b&&max!=r){h+=(4+(r-g)/_452);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _453=max-min;var h=null,s=(max==0)?0:(_453/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/_453;}else{if(g==max){h=120+60*(b-r)/_453;}else{h=240+60*(r-g)/_453;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});return cx;});},"dojox/charting/action2d/PlotAction":function(){define("dojox/charting/action2d/PlotAction",["dojo/_base/connect","dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional","dojox/lang/functional/object"],function(hub,_454,Base,dfe,df,dlfo){var _455=400,_456=dfe.backOut;return _454("dojox.charting.action2d.PlotAction",Base,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(_457,plot,_458){this.anim={};if(!_458){_458={};}this.duration=_458.duration?_458.duration:_455;this.easing=_458.easing?_458.easing:_456;},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process");},disconnect:function(){if(this.handle){hub.disconnect(this.handle);this.handle=null;}},reset:function(){},destroy:function(){this.inherited(arguments);df.forIn(this.anim,function(o){df.forIn(o,function(anim){anim.action.stop(true);});});this.anim={};}});});},"dojox/lang/functional/fold":function(){define("dojox/lang/functional/fold",["dojo/_base/lang","dojo/_base/array","dojo/_base/window","./lambda"],function(lang,arr,win,df){var _459={};lang.mixin(df,{foldl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(lang.isArray(a)){for(i=0,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}else{for(i in a){if(!(i in _459)){z=f.call(o,z,a[i],i,a);}}}}return z;},foldl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var z,i,n;if(lang.isArray(a)){z=a[0];for(i=1,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){z=a.next();for(i=1;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}}else{var _45a=true;for(i in a){if(!(i in _459)){if(_45a){z=a[i];_45a=false;}else{z=f.call(o,z,a[i],i,a);}}}}}return z;},foldr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},foldr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var n=a.length,z=a[n-1],i=n-1;for(;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},reduce:function(a,f,z){return arguments.length<3?df.foldl1(a,f):df.foldl(a,f,z);},reduceRight:function(a,f,z){return arguments.length<3?df.foldr1(a,f):df.foldr(a,f,z);},unfold:function(pr,f,g,z,o){o=o||win.global;f=df.lambda(f);g=df.lambda(g);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(f.call(o,z)),z=g.call(o,z)){}return t;}});});},"dojox/charting/plot2d/Bars":function(){define("dojox/charting/plot2d/Bars",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/gfx/fx","dojox/lang/utils","dojox/lang/functional","dojox/lang/functional/reversed"],function(dojo,lang,arr,_45b,Base,dc,fx,du,df,dfr){var _45c=dfr.lambda("item.purgeGroup()");return _45b("dojox.charting.plot2d.Bars",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_45d,_45e){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_45e);du.updateWithPattern(this.opt,_45e,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _45f=dc.collectSimpleStats(this.series),t;_45f.hmin-=0.5;_45f.hmax+=0.5;t=_45f.hmin,_45f.hmin=_45f.vmin,_45f.vmin=t;t=_45f.hmax,_45f.hmax=_45f.vmax,_45f.vmax=t;return _45f;},createRect:function(run,_460,_461){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_461);_460.add(rect);}else{rect=_460.createRect(_461);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_462){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_462);}this.dirty=this.isDirty();this.resetEvents();if(this.dirty){arr.forEach(this.series,_45c);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_463,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_464=Math.max(0,this._hScaler.bounds.lower),_465=ht(_464),_466=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_463=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var _467=t.next("bar",[this.opt,run]),s=run.group,_468=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _469=run.data[j];if(_469!==null){var v=typeof _469=="number"?_469:_469.y,hv=ht(v),_46a=hv-_465,w=Math.abs(_46a),_46b=typeof _469!="number"?t.addMixin(_467,"bar",_469,true):t.post(_467,"bar");if(w>=0&&_463>=1){var rect={x:_462.l+(v<_464?hv:_465),y:dim.height-_462.b-vt(j+1.5)+gap,width:w,height:_463};var _46c=this._plotFill(_46b.series.fill,dim,_462);_46c=this._shapeFill(_46c,rect);var _46d=this.createRect(run,s,rect).setFill(_46c).setStroke(_46b.series.stroke);run.dyn.fill=_46d.getFill();run.dyn.stroke=_46d.getStroke();if(_466){var o={element:"bar",index:j,run:run,shape:_46d,x:v,y:j+1.5};this._connectEvents(o);_468[j]=o;}if(this.animate){this._animateBar(_46d,_462.l+_465,-w);}}}}this._eventSeries[run.name]=_468;run.dirty=false;}this.dirty=false;return this;},_animateBar:function(_46e,_46f,_470){fx.animateTransform(lang.delegate({shape:_46e,duration:1200,transform:[{name:"translate",start:[_46f-(_46f/_470),0],end:[0,0]},{name:"scale",start:[1/_470,1],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojo/cldr/supplemental":function(){define(["../_base/kernel","../_base/lang","../i18n"],function(dojo,lang){lang.getObject("cldr.supplemental",true,dojo);dojo.cldr.supplemental.getFirstDayOfWeek=function(_471){var _472={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var _473=dojo.cldr.supplemental._region(_471);var dow=_472[_473];return (dow===undefined)?1:dow;};dojo.cldr.supplemental._region=function(_474){_474=dojo.i18n.normalizeLocale(_474);var tags=_474.split("-");var _475=tags[1];if(!_475){_475={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_475.length==4){_475=tags[2];}}return _475;};dojo.cldr.supplemental.getWeekend=function(_476){var _477={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var _478={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var _479=dojo.cldr.supplemental._region(_476);var _47a=_477[_479];var end=_478[_479];if(_47a===undefined){_47a=6;}if(end===undefined){end=0;}return {start:_47a,end:end};};return dojo.cldr.supplemental;});},"dojox/lang/functional/object":function(){define("dojox/lang/functional/object",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/window","./lambda"],function(dojo,lang,win,df){var _47b={};lang.mixin(df,{keys:function(obj){var t=[];for(var i in obj){if(!(i in _47b)){t.push(i);}}return t;},values:function(obj){var t=[];for(var i in obj){if(!(i in _47b)){t.push(obj[i]);}}return t;},filterIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);var t={},v,i;for(i in obj){if(!(i in _47b)){v=obj[i];if(f.call(o,v,i,obj)){t[i]=v;}}}return t;},forIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);for(var i in obj){if(!(i in _47b)){f.call(o,obj[i],i,obj);}}return o;},mapIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);var t={},i;for(i in obj){if(!(i in _47b)){t[i]=f.call(o,obj[i],i,obj);}}return t;}});return df;});},"esri/arcgis/csv":function(){define(["dijit","dojo","dojox","dojo/require!dojox/data/CsvStore"],function(_47c,dojo,_47d){dojo.provide("esri.arcgis.csv");dojo.require("dojox.data.CsvStore");(function(){var EAC=esri.arcgis.csv;EAC.latFieldStrings=["lat","latitude","y","ycenter","latitude83","latdecdeg","POINT-Y"];EAC.longFieldStrings=["lon","lng","long","longitude","x","xcenter","longitude83","longdecdeg","POINT-X"];EAC.buildCSVFeatureCollection=function(_47e){var _47f=new dojo.Deferred();var _480=function(_481){_47f.callback(_481);};var _482=esri.request({url:_47e.url,handleAs:"text",load:function(_483){EAC._processCsvData(_483,_47e,dojo.hitch(this,_480));},error:function(_484){console.error("error: "+_484);}},{usePost:false});return _47f;};EAC.projectFeatureCollection=function(_485,_486){var _487=new dojo.Deferred();var _488=function(_489){_487.callback(_489);};EAC._projectFeatureSet(_485,new esri.SpatialReference({wkid:4326}),_486,dojo.hitch(this,_488));return _487;};EAC.generateDefaultPopupInfo=function(_48a){var _48b=_48a.layerDefinition.fields;var _48c={"esriFieldTypeDouble":1,"esriFieldTypeSingle":1};var _48d={"esriFieldTypeInteger":1,"esriFieldTypeSmallInteger":1};var dt={"esriFieldTypeDate":1};var _48e=null;var _48f=dojo.map(_48b,dojo.hitch(this,function(item){if(item.name.toUpperCase()==="NAME"){_48e=item.name;}var _490=(item.type!=="esriFieldTypeOID"&&item.type!=="esriFieldTypeGlobalID"&&item.type!=="esriFieldTypeGeometry");var _491=null;if(_490){var f=item.name.toLowerCase();var _492=",stretched value,fnode_,tnode_,lpoly_,rpoly_,poly_,subclass,subclass_,rings_ok,rings_nok,";if(_492.indexOf(","+f+",")>-1||f.indexOf("area")>-1||f.indexOf("length")>-1||f.indexOf("shape")>-1||f.indexOf("perimeter")>-1||f.indexOf("objectid")>-1||f.indexOf("_")===f.length-1||(f.indexOf("_i")===f.length-2&&f.length>1)){_490=false;}if(item.type in _48d){_491={places:0,digitSeparator:true};}else{if(item.type in _48c){_491={places:2,digitSeparator:true};}else{if(item.type in dt){_491={dateFormat:"shortDateShortTime"};}}}}return dojo.mixin({},{fieldName:item.name,label:item.alias,isEditable:true,tooltip:"",visible:_490,format:_491,stringFieldOption:"textbox"});}));var _493={title:_48e?"{"+_48e+"}":"",fieldInfos:_48f,description:null,showAttachments:false,mediaInfos:[]};return _493;};EAC._processCsvData=function(data,_494,_495){var _496=data.indexOf("\n");var _497=dojo.trim(data.substr(0,_496));var _498=_494.columnDelimiter;if(!_498){_498=EAC._getSeparator(_497);}var _499=new _47d.data.CsvStore({data:data,separator:_498});var _49a=(dojo.isIE<9)?750:1001;_499.fetch({start:0,count:_49a,onComplete:function(_49b,_49c){var _49d=0;var _49e={"layerDefinition":_494.layerDefinition,"featureSet":{"features":[],"geometryType":"esriGeometryPoint"}};var _49f=_49e.layerDefinition.objectIdField;if(!_49f){if(!dojo.some(_49e.layerDefinition.fields,function(_4a0){if(_4a0.type=="esriFieldTypeOID"){_49f=_4a0.name;return true;}return false;})){_49e.layerDefinition.fields.push({"name":"__OBJECTID","alias":"__OBJECTID","type":"esriFieldTypeOID","editable":false,"domain":null});_49f="__OBJECTID";}}var _4a1,_4a2;var _4a3=_499._attributes;var _4a4=[];var _4a5=[];dojo.forEach(_49e.layerDefinition.fields,function(_4a6,_4a7){if(_4a6.type==="esriFieldTypeDate"){_4a4.push(_4a6.name);}else{if(_4a6.type==="esriFieldTypeDouble"||_4a6.type==="esriFieldTypeInteger"){_4a5.push(_4a6.name);}}});if(_494.locationInfo&&_494.locationInfo.locationType==="coordinates"){_4a1=_494.locationInfo.latitudeFieldName;_4a2=_494.locationInfo.longitudeFieldName;}else{dojo.forEach(_4a3,function(_4a8){var _4a9;_4a9=dojo.indexOf(EAC.latFieldStrings,_4a8.toLowerCase());if(_4a9!==-1){_4a1=_4a8;}_4a9=dojo.indexOf(EAC.longFieldStrings,_4a8.toLowerCase());if(_4a9!==-1){_4a2=_4a8;}},this);}if(!_4a1||!_4a2){setTimeout(function(){console.error("File does not seem to contain fields with point coordinates.");},1);return;}var i=0,il=_49b.length;for(i;i<il;i++){if(_49e.featureSet.features.length>=1000){setTimeout(function(){console.error("1000 feature limit reached. Unable to load any more data.");},1);break;}var item=_49b[i];var _4aa=_499.getAttributes(item),_4ab={};dojo.forEach(_4aa,function(attr,_4ac){if(attr){var _4ad=attr;if(attr.length===0){dojo.forEach(_49e.layerDefinition.fields,function(_4ae,idx){if(_4ae.name==="attribute_"+(idx-1)){attr="attribute_"+(idx-1);}});}if(dojo.some(_4a4,function(a){return a===attr;})){var val=_499.getValue(item,_4ad),date=new Date(val);_4ab[attr]=EAC._isValidDate(date,val)?date.getTime():null;}else{if(dojo.some(_4a5,function(a){return a===attr;})){var _4af=dojo.number.parse(_499.getValue(item,_4ad));if((attr==_4a1||attr==_4a2)&&(isNaN(_4af)||Math.abs(_4af)>181)){_4af=parseFloat(_499.getValue(item,_4ad));if(isNaN(_4af)){_4ab[attr]=null;}else{_4ab[attr]=_4af;}}else{if(isNaN(_4af)){_4ab[attr]=null;}else{_4ab[attr]=_4af;}}}else{_4ab[attr]=_499.getValue(item,_4ad);}}}});_4ab[_49f]=_49d;_49d++;var _4b0=_4ab[_4a1];var _4b1=_4ab[_4a2];if(_4b1==null||_4b0==null||isNaN(_4b0)||isNaN(_4b1)){continue;}var _4b2=new esri.geometry.Point(_4b1,_4b0,new esri.SpatialReference({wkid:4326}));var _4b3={"geometry":_4b2.toJson(),"attributes":_4ab};_49e.featureSet.features.push(_4b3);}_49e.layerDefinition.name="csv";if(_495){_495(_49e);}},onError:function(_4b4){console.error("Error fetching items from CSV store: ",_4b4);}});return true;};EAC._getSeparator=function(_4b5){var _4b6=[","," ",";","|","\t"];var _4b7=0;var _4b8="";dojo.forEach(_4b6,function(_4b9){var _4ba=_4b5.split(_4b9).length;if(_4ba>_4b7){_4b7=_4ba;_4b8=_4b9;}});return _4b8;};EAC._isValidDate=function(d,_4bb){if(!d||Object.prototype.toString.call(d)!=="[object Date]"||isNaN(d.getTime())){return false;}var _4bc=true;if(dojo.isChrome&&/\d+\W*$/.test(_4bb)){var _4bd=_4bb.match(/[a-zA-Z]{2,}/);if(_4bd){var _4be=false,i=0,len=_4bd.length,_4bf=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i;while(!_4be&&(i<=len)&&!(_4be=!_4bf.test(_4bd[i]))){i++;}_4bc=!_4be;}}return _4bc;};EAC._projectFeatureSet=function(_4c0,_4c1,_4c2,_4c3){if(!_4c0.featureSet||_4c0.featureSet.length===0){return;}if(EAC._sameSpatialReference(_4c2,_4c1)){_4c3(_4c0);return;}var _4c4=function(_4c5){var _4c6=[];dojo.forEach(_4c0.featureSet.features,function(_4c7,i){if(_4c5[i]){_4c7.geometry=_4c5[i];_4c6.push(_4c7);}},this);_4c3(_4c0);};var _4c8=function(_4c9,args){console.error("error projecting featureSet ("+_4c0.layerDefinition.name+"). Try one more time.");EAC._projectGeometries(_4ca,_4c0.featureSet.geometryType,_4c1,_4c2,dojo.hitch(this,_4c4),dojo.hitch(this,_4cb));};var _4cb=function(_4cc,args){console.error("error projecting featureSet ("+_4c0.layerDefinition.name+"). Final try.");_4c3(_4c0);};if(_4c0.featureSet.features&&_4c0.featureSet.features.length>0){var _4ca=[];dojo.forEach(_4c0.featureSet.features,function(_4cd){_4ca.push(_4cd.geometry);});EAC._projectGeometries(_4ca,_4c0.featureSet.geometryType,_4c1,_4c2,dojo.hitch(this,_4c4),dojo.hitch(this,_4c8));}else{_4c3(_4c0);}};EAC._projectGeometries=function(_4ce,_4cf,inSR,_4d0,_4d1,_4d2){if(_4ce.length===0){_4d1(null);}var _4d3=esri.geometry.getGeometryType(_4cf);var _4d4=[];dojo.forEach(_4ce,function(_4d5){var _4d6=new _4d3(_4d5);_4d6.spatialReference=inSR;_4d4.push(_4d6);},this);var _4d7=[102113,102100,3857];if(inSR.wkid&&inSR.wkid===4326&&_4d0.wkid&&dojo.indexOf(_4d7,_4d0.wkid)>-1){dojo.forEach(_4d4,function(_4d8){if(_4d8.xmin){_4d8.xmin=Math.max(_4d8.xmin,-180);_4d8.xmax=Math.min(_4d8.xmax,180);_4d8.ymin=Math.max(_4d8.ymin,-89.99);_4d8.ymax=Math.min(_4d8.ymax,89.99);}else{if(_4d8.rings){dojo.forEach(_4d8.rings,function(ring){dojo.forEach(ring,function(_4d9){_4d9[0]=Math.min(Math.max(_4d9[0],-180),180);_4d9[1]=Math.min(Math.max(_4d9[1],-89.99),89.99);},this);},this);}else{if(_4d8.paths){dojo.forEach(_4d8.paths,function(path){dojo.forEach(path,function(_4da){_4da[0]=Math.min(Math.max(_4da[0],-180),180);_4da[1]=Math.min(Math.max(_4da[1],-89.99),89.99);},this);},this);}else{if(_4d8.x){_4d8.x=Math.min(Math.max(_4d8.x,-180),180);_4d8.y=Math.min(Math.max(_4d8.y,-89.99),89.99);}}}}},this);_4ce=[];dojo.forEach(_4d4,function(_4db){var _4dc=esri.geometry.geographicToWebMercator(_4db);if(_4d0.wkid!==102100){_4dc.spatialReference=_4d0;}_4ce.push(_4dc.toJson());},this);_4d1(_4ce);}else{if(inSR.wkid!==null&&dojo.indexOf(_4d7,inSR.wkid)>-1&&_4d0.wkid!==null&&_4d0.wkid===4326){_4ce=[];dojo.forEach(_4d4,function(_4dd){_4ce.push(esri.geometry.webMercatorToGeographic(_4dd).toJson());},this);_4d1(_4ce);}else{var _4de=function(_4df,args){if(_4df&&_4df.length===_4ce.length){_4ce=[];dojo.forEach(_4df,function(_4e0){if(_4e0&&((_4e0.rings&&_4e0.rings.length>0&&_4e0.rings[0].length>0&&_4e0.rings[0][0].length>0&&!isNaN(_4e0.rings[0][0][0])&&!isNaN(_4e0.rings[0][0][1]))||(_4e0.paths&&_4e0.paths.length>0&&_4e0.paths[0].length>0&&_4e0.paths[0][0].length>0&&!isNaN(_4e0.paths[0][0][0])&&!isNaN(_4e0.paths[0][0][1]))||(_4e0.xmin&&!isNaN(_4e0.xmin)&&_4e0.ymin&&!isNaN(_4e0.ymin))||(_4e0.x&&!isNaN(_4e0.x)&&_4e0.y&&!isNaN(_4e0.y)))){_4ce.push(_4e0.toJson());}else{_4ce.push(null);}},this);_4d1(_4ce);}else{_4d2(_4df,args);}};if(esri.config.defaults.geometryService){esri.config.defaults.geometryService.project(_4d4,_4d0,dojo.hitch(this,_4de),_4d2);}else{_4d1(null);}}}};EAC._sameSpatialReference=function(sp1,sp2){var _4e1=[102113,102100,3857];if(sp1&&sp2&&sp1.wkid===sp2.wkid&&sp1.wkt===sp2.wkt){return true;}else{if(sp1&&sp2&&sp1.wkid&&sp2.wkid&&dojo.indexOf(_4e1,sp1.wkid)>-1&&dojo.indexOf(_4e1,sp2.wkid)>-1){return true;}}return false;};}());});},"dojox/charting/scaler/linear":function(){define("dojox/charting/scaler/linear",["dojo/_base/lang","./common"],function(lang,_4e2){var _4e3=lang.getObject("dojox.charting.scaler.linear",true);var _4e4=3,_4e5=_4e2.findString,_4e6=_4e2.getNumericLabel;var _4e7=function(min,max,_4e8,_4e9,_4ea,_4eb,span){_4e8=lang.delegate(_4e8);if(!_4e9){if(_4e8.fixUpper=="major"){_4e8.fixUpper="minor";}if(_4e8.fixLower=="major"){_4e8.fixLower="minor";}}if(!_4ea){if(_4e8.fixUpper=="minor"){_4e8.fixUpper="micro";}if(_4e8.fixLower=="minor"){_4e8.fixLower="micro";}}if(!_4eb){if(_4e8.fixUpper=="micro"){_4e8.fixUpper="none";}if(_4e8.fixLower=="micro"){_4e8.fixLower="none";}}var _4ec=_4e5(_4e8.fixLower,["major"])?Math.floor(_4e8.min/_4e9)*_4e9:_4e5(_4e8.fixLower,["minor"])?Math.floor(_4e8.min/_4ea)*_4ea:_4e5(_4e8.fixLower,["micro"])?Math.floor(_4e8.min/_4eb)*_4eb:_4e8.min,_4ed=_4e5(_4e8.fixUpper,["major"])?Math.ceil(_4e8.max/_4e9)*_4e9:_4e5(_4e8.fixUpper,["minor"])?Math.ceil(_4e8.max/_4ea)*_4ea:_4e5(_4e8.fixUpper,["micro"])?Math.ceil(_4e8.max/_4eb)*_4eb:_4e8.max;if(_4e8.useMin){min=_4ec;}if(_4e8.useMax){max=_4ed;}var _4ee=(!_4e9||_4e8.useMin&&_4e5(_4e8.fixLower,["major"]))?min:Math.ceil(min/_4e9)*_4e9,_4ef=(!_4ea||_4e8.useMin&&_4e5(_4e8.fixLower,["major","minor"]))?min:Math.ceil(min/_4ea)*_4ea,_4f0=(!_4eb||_4e8.useMin&&_4e5(_4e8.fixLower,["major","minor","micro"]))?min:Math.ceil(min/_4eb)*_4eb,_4f1=!_4e9?0:(_4e8.useMax&&_4e5(_4e8.fixUpper,["major"])?Math.round((max-_4ee)/_4e9):Math.floor((max-_4ee)/_4e9))+1,_4f2=!_4ea?0:(_4e8.useMax&&_4e5(_4e8.fixUpper,["major","minor"])?Math.round((max-_4ef)/_4ea):Math.floor((max-_4ef)/_4ea))+1,_4f3=!_4eb?0:(_4e8.useMax&&_4e5(_4e8.fixUpper,["major","minor","micro"])?Math.round((max-_4f0)/_4eb):Math.floor((max-_4f0)/_4eb))+1,_4f4=_4ea?Math.round(_4e9/_4ea):0,_4f5=_4eb?Math.round(_4ea/_4eb):0,_4f6=_4e9?Math.floor(Math.log(_4e9)/Math.LN10):0,_4f7=_4ea?Math.floor(Math.log(_4ea)/Math.LN10):0,_4f8=span/(max-min);if(!isFinite(_4f8)){_4f8=1;}return {bounds:{lower:_4ec,upper:_4ed,from:min,to:max,scale:_4f8,span:span},major:{tick:_4e9,start:_4ee,count:_4f1,prec:_4f6},minor:{tick:_4ea,start:_4ef,count:_4f2,prec:_4f7},micro:{tick:_4eb,start:_4f0,count:_4f3,prec:0},minorPerMajor:_4f4,microPerMinor:_4f5,scaler:_4e3};};return lang.mixin(_4e3,{buildScaler:function(min,max,span,_4f9){var h={fixUpper:"none",fixLower:"none",natural:false};if(_4f9){if("fixUpper" in _4f9){h.fixUpper=String(_4f9.fixUpper);}if("fixLower" in _4f9){h.fixLower=String(_4f9.fixLower);}if("natural" in _4f9){h.natural=Boolean(_4f9.natural);}}if("min" in _4f9){min=_4f9.min;}if("max" in _4f9){max=_4f9.max;}if(_4f9.includeZero){if(min>0){min=0;}if(max<0){max=0;}}h.min=min;h.useMin=true;h.max=max;h.useMax=true;if("from" in _4f9){min=_4f9.from;h.useMin=false;}if("to" in _4f9){max=_4f9.to;h.useMax=false;}if(max<=min){return _4e7(min,max,h,0,0,0,span);}var mag=Math.floor(Math.log(max-min)/Math.LN10),_4fa=_4f9&&("majorTickStep" in _4f9)?_4f9.majorTickStep:Math.pow(10,mag),_4fb=0,_4fc=0,_4fd;if(_4f9&&("minorTickStep" in _4f9)){_4fb=_4f9.minorTickStep;}else{do{_4fb=_4fa/10;if(!h.natural||_4fb>0.9){_4fd=_4e7(min,max,h,_4fa,_4fb,0,span);if(_4fd.bounds.scale*_4fd.minor.tick>_4e4){break;}}_4fb=_4fa/5;if(!h.natural||_4fb>0.9){_4fd=_4e7(min,max,h,_4fa,_4fb,0,span);if(_4fd.bounds.scale*_4fd.minor.tick>_4e4){break;}}_4fb=_4fa/2;if(!h.natural||_4fb>0.9){_4fd=_4e7(min,max,h,_4fa,_4fb,0,span);if(_4fd.bounds.scale*_4fd.minor.tick>_4e4){break;}}return _4e7(min,max,h,_4fa,0,0,span);}while(false);}if(_4f9&&("microTickStep" in _4f9)){_4fc=_4f9.microTickStep;_4fd=_4e7(min,max,h,_4fa,_4fb,_4fc,span);}else{do{_4fc=_4fb/10;if(!h.natural||_4fc>0.9){_4fd=_4e7(min,max,h,_4fa,_4fb,_4fc,span);if(_4fd.bounds.scale*_4fd.micro.tick>_4e4){break;}}_4fc=_4fb/5;if(!h.natural||_4fc>0.9){_4fd=_4e7(min,max,h,_4fa,_4fb,_4fc,span);if(_4fd.bounds.scale*_4fd.micro.tick>_4e4){break;}}_4fc=_4fb/2;if(!h.natural||_4fc>0.9){_4fd=_4e7(min,max,h,_4fa,_4fb,_4fc,span);if(_4fd.bounds.scale*_4fd.micro.tick>_4e4){break;}}_4fc=0;}while(false);}return _4fc?_4fd:_4e7(min,max,h,_4fa,_4fb,0,span);},buildTicks:function(_4fe,_4ff){var step,next,tick,_500=_4fe.major.start,_501=_4fe.minor.start,_502=_4fe.micro.start;if(_4ff.microTicks&&_4fe.micro.tick){step=_4fe.micro.tick,next=_502;}else{if(_4ff.minorTicks&&_4fe.minor.tick){step=_4fe.minor.tick,next=_501;}else{if(_4fe.major.tick){step=_4fe.major.tick,next=_500;}else{return null;}}}var _503=1/_4fe.bounds.scale;if(_4fe.bounds.to<=_4fe.bounds.from||isNaN(_503)||!isFinite(_503)||step<=0||isNaN(step)||!isFinite(step)){return null;}var _504=[],_505=[],_506=[];while(next<=_4fe.bounds.to+_503){if(Math.abs(_500-next)<step/2){tick={value:_500};if(_4ff.majorLabels){tick.label=_4e6(_500,_4fe.major.prec,_4ff);}_504.push(tick);_500+=_4fe.major.tick;_501+=_4fe.minor.tick;_502+=_4fe.micro.tick;}else{if(Math.abs(_501-next)<step/2){if(_4ff.minorTicks){tick={value:_501};if(_4ff.minorLabels&&(_4fe.minMinorStep<=_4fe.minor.tick*_4fe.bounds.scale)){tick.label=_4e6(_501,_4fe.minor.prec,_4ff);}_505.push(tick);}_501+=_4fe.minor.tick;_502+=_4fe.micro.tick;}else{if(_4ff.microTicks){_506.push({value:_502});}_502+=_4fe.micro.tick;}}next+=step;}return {major:_504,minor:_505,micro:_506};},getTransformerFromModel:function(_507){var _508=_507.bounds.from,_509=_507.bounds.scale;return function(x){return (x-_508)*_509;};},getTransformerFromPlot:function(_50a){var _50b=_50a.bounds.from,_50c=_50a.bounds.scale;return function(x){return x/_50c+_50b;};}});});},"dojox/gfx/gradutils":function(){define("dojox/gfx/gradutils",["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(g,lang,m,_50d){var _50e=g.gradutils={};function _50f(o,c){if(o<=0){return c[0].color;}var len=c.length;if(o>=1){return c[len-1].color;}for(var i=0;i<len;++i){var stop=c[i];if(stop.offset>=o){if(i){var prev=c[i-1];return _50d.blendColors(new _50d(prev.color),new _50d(stop.color),(o-prev.offset)/(stop.offset-prev.offset));}return stop.color;}}return c[len-1].color;};_50e.getColor=function(fill,pt){var o;if(fill){switch(fill.type){case "linear":var _510=Math.atan2(fill.y2-fill.y1,fill.x2-fill.x1),_511=m.rotate(-_510),_512=m.project(fill.x2-fill.x1,fill.y2-fill.y1),p=m.multiplyPoint(_512,pt),pf1=m.multiplyPoint(_512,fill.x1,fill.y1),pf2=m.multiplyPoint(_512,fill.x2,fill.y2),_513=m.multiplyPoint(_511,pf2.x-pf1.x,pf2.y-pf1.y).x;o=m.multiplyPoint(_511,p.x-pf1.x,p.y-pf1.y).x/_513;break;case "radial":var dx=pt.x-fill.cx,dy=pt.y-fill.cy;o=Math.sqrt(dx*dx+dy*dy)/fill.r;break;}return _50f(o,fill.colors);}return new _50d(fill||[0,0,0,0]);};_50e.reverse=function(fill){if(fill){switch(fill.type){case "linear":case "radial":fill=lang.delegate(fill);if(fill.colors){var c=fill.colors,l=c.length,i=0,stop,n=fill.colors=new Array(c.length);for(;i<l;++i){stop=c[i];n[i]={offset:1-stop.offset,color:stop.color};}n.sort(function(a,b){return a.offset-b.offset;});}break;}}return fill;};return _50e;});},"dojox/charting/plot2d/Base":function(){define("dojox/charting/plot2d/Base",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","../Element","./_PlotEvents","dojo/_base/array","../scaler/primitive","./common","dojox/gfx/fx"],function(lang,_514,hub,_515,_516,arr,_517,_518,fx){return _514("dojox.charting.plot2d.Base",[_515,_516],{constructor:function(_519,_51a){this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};},clear:function(){this.series=[];this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},toPage:function(_51b){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromModel(sh),tv=sv.scaler.getTransformerFromModel(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(_51c){var r={};r.x=th(_51c[ah.name])+c.x+o.l;r.y=c.y+dim.height-o.b-tv(_51c[av.name]);return r;};return _51b?t(_51b):t;},toData:function(_51d){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromPlot(sh),tv=sv.scaler.getTransformerFromPlot(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(_51e){var r={};r[ah.name]=th(_51e.x-c.x-o.l);r[av.name]=tv(c.y+dim.height-_51e.y-o.b);return r;};return _51d?t(_51d):t;},addSeries:function(run){this.series.push(run);return this;},getSeriesStats:function(){return _518.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},isDataDirty:function(){return arr.some(this.series,function(item){return item.dirty;});},performZoom:function(dim,_51f){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_520=dim.height-_51f.b,_521=this._hScaler.bounds,_522=(_521.from-_521.lower)*_521.scale,_523=this._vScaler.bounds,_524=(_523.from-_523.lower)*_523.scale,_525=vs/this.lastWindow.vscale,_526=hs/this.lastWindow.hscale,_527=(this.lastWindow.xoffset-_522)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),_528=(_524-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),_529=this.group,anim=fx.animateTransform(lang.delegate({shape:_529,duration:1200,transform:[{name:"translate",start:[0,0],end:[_51f.l*(1-_526),_520*(1-_525)]},{name:"scale",start:[1,1],end:[_526,_525]},{name:"original"},{name:"translate",start:[0,0],end:[_527,_528]}]},this.zoom));lang.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_522,yoffset:_524});this.zoomQueue.push(anim);hub.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},render:function(dim,_52a){return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_52b){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_52b.hmin,_52b.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_517.buildScaler(_52b.hmin,_52b.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_52b.vmin,_52b.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_517.buildScaler(_52b.vmin,_52b.vmax,dim.height);}return this;}});});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require",".","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/_base/sniff","dojo/_base/window"],function(_52c,_52d,_52e,_52f,_530,lang,on,has,win){var _531=new function(){var _532=[];this.pop=function(){var _533;if(_532.length){_533=_532.pop();_533.style.display="";}else{if(has("ie")<9){var burl=_52e["dojoBlankHtmlUrl"]||_52c.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_533=win.doc.createElement(html);}else{_533=_52f.create("iframe");_533.src="javascript:\"\"";_533.className="dijitBackgroundIframe";_533.setAttribute("role","presentation");_530.set(_533,"opacity",0.1);}_533.tabIndex=-1;}return _533;};this.push=function(_534){_534.style.display="none";_532.push(_534);};}();_52d.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _535=(this.iframe=_531.pop());node.appendChild(_535);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_530.set(_535,{width:"100%",height:"100%"});}}};lang.extend(_52d.BackgroundIframe,{resize:function(node){if(this.iframe){_530.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_531.push(this.iframe);delete this.iframe;}}});return _52d.BackgroundIframe;});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./registry"],function(_536,_537,_538,_539,_53a,_53b,dom,_53c,_53d,_53e,_53f,_540,_541,lang,on,_542,_543,_544,win,_545){if(!_541.isAsync){_542(0,function(){var _546=["dijit/_base/manager"];_536(_546);});}var _547={};function _548(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _549(attr){return function(val){_53c[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _53b("dijit._WidgetBase",_543,{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_549("lang"),dir:"",_setDirAttr:_549("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{},_blankGif:_539.blankGif||_536.toUrl("dojo/resources/blank.gif"),postscript:function(_54a,_54b){this.create(_54a,_54b);},create:function(_54c,_54d){this.srcNodeRef=dom.byId(_54d);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_54c){this.params=_54c;lang.mixin(this,_54c);}this.postMixInProperties();if(!this.id){this.id=_545.getUniqueId(this.declaredClass.replace(/\./g,"_"));}_545.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _54e=this.srcNodeRef;if(_54e&&_54e.parentNode&&this.domNode!==_54e){_54e.parentNode.replaceChild(this.domNode,_54e);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _54f=ctor.prototype;for(var _550 in _54f){if(_550 in this.attributeMap){continue;}var _551="_set"+_550.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_551 in _54f){list.push(_550);}}}_537.forEach(list,function(attr){if(this.params&&attr in this.params){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(var _552 in this.params){this.set(_552,this[_552]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||_53e.create("div");}if(this.baseClass){var _553=this.baseClass.split(" ");if(!this.isLeftToRight()){_553=_553.concat(_537.map(_553,function(name){return name+"Rtl";}));}_53d.add(this.domNode,_553);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_537.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_554){this._beingDestroyed=true;this.destroyDescendants(_554);this.destroy(_554);},destroy:function(_555){this._beingDestroyed=true;this.uninitialize();var c;while((c=this._connects.pop())){c.remove();}var w;while((w=this._supportingWidgets.pop())){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}}this.destroyRendering(_555);_545.remove(this.id);this._destroyed=true;},destroyRendering:function(_556){if(this.bgIframe){this.bgIframe.destroy(_556);delete this.bgIframe;}if(this.domNode){if(_556){_53c.remove(this.domNode,"widgetId");}else{_53e.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_556){_53e.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_557){_537.forEach(this.getChildren(),function(_558){if(_558.destroyRecursive){_558.destroyRecursive(_557);}});},uninitialize:function(){return false;},_setStyleAttr:function(_559){var _55a=this.domNode;if(lang.isObject(_559)){_540.set(_55a,_559);}else{if(_55a.style.cssText){_55a.style.cssText+="; "+_559;}else{_55a.style.cssText=_559;}}this._set("style",_559);},_attrToDom:function(attr,_55b,_55c){_55c=arguments.length>=3?_55c:this.attributeMap[attr];_537.forEach(lang.isArray(_55c)?_55c:[_55c],function(_55d){var _55e=this[_55d.node||_55d||"domNode"];var type=_55d.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_55b)){_55b=lang.hitch(this,_55b);}var _55f=_55d.attribute?_55d.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);_53c.set(_55e,_55f,_55b);break;case "innerText":_55e.innerHTML="";_55e.appendChild(win.doc.createTextNode(_55b));break;case "innerHTML":_55e.innerHTML=_55b;break;case "class":_53d.replace(_55e,_55b,this[attr]);break;}},this);},get:function(name){var _560=this._getAttrNames(name);return this[_560.g]?this[_560.g]():this[name];},set:function(name,_561){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _562=this._getAttrNames(name),_563=this[_562.s];if(lang.isFunction(_563)){var _564=_563.apply(this,Array.prototype.slice.call(arguments,1));}else{var _565=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[_565].tagName,_566=_547[tag]||(_547[tag]=_548(this[_565])),map=name in this.attributeMap?this.attributeMap[name]:_562.s in this?this[_562.s]:((_562.l in _566&&typeof _561!="function")||/^aria-|^data-|^role$/.test(name))?_565:null;if(map!=null){this._attrToDom(name,_561,map);}this._set(name,_561);}return _564||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_567){var _568=this[name];this[name]=_567;if(this._watchCallbacks&&this._created&&_567!==_568){this._watchCallbacks(name,_568,_567);}},on:function(type,func){return _538.after(this,this._onMap(type),func,true);},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_545.findWidgets(this.containerNode):[];},getParent:function(){return _545.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_569,_56a){var _56b=_53a.connect(obj,_569,this,_56a);this._connects.push(_56b);return _56b;},disconnect:function(_56c){var i=_537.indexOf(this._connects,_56c);if(i!=-1){_56c.remove();this._connects.splice(i,1);}},subscribe:function(t,_56d){var _56e=_544.subscribe(t,lang.hitch(this,_56d));this._connects.push(_56e);return _56e;},unsubscribe:function(_56f){this.disconnect(_56f);},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_53f.isBodyLtr();},isFocusable:function(){return this.focus&&(_540.get(this.domNode,"display")!="none");},placeAt:function(_570,_571){if(_570.declaredClass&&_570.addChild){_570.addChild(this,_571);}else{_53e.place(this.domNode,_570,_571);}return this;},getTextDir:function(text,_572){return _572;},applyTextDir:function(){},defer:function(fcn,_573){var _574=setTimeout(lang.hitch(this,function(){_574=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_573||0);return {remove:function(){if(_574){clearTimeout(_574);_574=null;}return null;}};}});});},"dojox/charting/plot2d/Default":function(){define("dojox/charting/plot2d/Default",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_575,arr,Base,dc,df,dfr,du,fx){var _576=dfr.lambda("item.purgeGroup()");var _577=1200;return _575("dojox.charting.plot2d.Default",Base,{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,tension:"",animate:false,enableCache:false},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_578,_579){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_579);du.updateWithPattern(this.opt,_579,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},createPath:function(run,_57a,_57b){var path;if(this.opt.enableCache&&run._pathFreePool.length>0){path=run._pathFreePool.pop();path.setShape(_57b);_57a.add(path);}else{path=_57a.createPath(_57b);}if(this.opt.enableCache){run._pathUsePool.push(path);}return path;},render:function(dim,_57c){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_57c);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_576);this._eventSeries={};this.cleanGroup();this.group.setTransform(null);var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_57d,_57e,_57f,_580=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._pathFreePool=(run._pathFreePool?run._pathFreePool:[]).concat(run._pathUsePool?run._pathUsePool:[]);run._pathUsePool=[];}if(!run.data.length){run.dirty=false;t.skip();continue;}var _581=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_582=[],_583=[],rseg=null,_584,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_585=this._eventSeries[run.name]=new Array(run.data.length);var _586=typeof run.data[0]=="number";var min=_586?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,max=_586?Math.min(run.data.length,Math.ceil(this._hScaler.bounds.to)):run.data.length;for(var j=min;j<max;j++){if(run.data[j]!=null){if(!rseg){rseg=[];_583.push(j);_582.push(rseg);}rseg.push(run.data[j]);}else{rseg=null;}}for(var seg=0;seg<_582.length;seg++){if(typeof _582[seg][0]=="number"){_584=arr.map(_582[seg],function(v,i){return {x:ht(i+_583[seg]+1)+_57c.l,y:dim.height-_57c.b-vt(v)};},this);}else{_584=arr.map(_582[seg],function(v,i){return {x:ht(v.x)+_57c.l,y:dim.height-_57c.b-vt(v.y)};},this);}var _587=this.opt.tension?dc.curve(_584,this.opt.tension):"";if(this.opt.areas&&_584.length>1){var fill=_581.series.fill;var _588=lang.clone(_584);if(this.opt.tension){var _589="L"+_588[_588.length-1].x+","+(dim.height-_57c.b)+" L"+_588[0].x+","+(dim.height-_57c.b)+" L"+_588[0].x+","+_588[0].y;run.dyn.fill=s.createPath(_587+" "+_589).setFill(fill).getFill();}else{_588.push({x:_584[_584.length-1].x,y:dim.height-_57c.b});_588.push({x:_584[0].x,y:dim.height-_57c.b});_588.push(_584[0]);run.dyn.fill=s.createPolyline(_588).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_57d=_581.series.stroke;if(_581.series.outline){_57e=run.dyn.outline=dc.makeStroke(_581.series.outline);_57e.width=2*_57e.width+_57d.width;}}if(this.opt.markers){run.dyn.marker=_581.symbol;}var _58a=null,_58b=null,_58c=null;if(_57d&&_581.series.shadow&&_584.length>1){var _58d=_581.series.shadow,_58e=arr.map(_584,function(c){return {x:c.x+_58d.dx,y:c.y+_58d.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_58e,this.opt.tension)).setStroke(_58d).getStroke();}else{run.dyn.shadow=s.createPolyline(_58e).setStroke(_58d).getStroke();}}if(this.opt.markers&&_581.marker.shadow){_58d=_581.marker.shadow;_58c=arr.map(_58e,function(c){return this.createPath(run,s,"M"+c.x+" "+c.y+" "+_581.symbol).setStroke(_58d).setFill(_58d.color);},this);}}if(this.opt.lines&&_584.length>1){if(_57e){if(this.opt.tension){run.dyn.outline=s.createPath(_587).setStroke(_57e).getStroke();}else{run.dyn.outline=s.createPolyline(_584).setStroke(_57e).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_587).setStroke(_57d).getStroke();}else{run.dyn.stroke=s.createPolyline(_584).setStroke(_57d).getStroke();}}if(this.opt.markers){_58a=new Array(_584.length);_58b=new Array(_584.length);_57e=null;if(_581.marker.outline){_57e=dc.makeStroke(_581.marker.outline);_57e.width=2*_57e.width+(_581.marker.stroke?_581.marker.stroke.width:0);}arr.forEach(_584,function(c,i){var path="M"+c.x+" "+c.y+" "+_581.symbol;if(_57e){_58b[i]=this.createPath(run,s,path).setStroke(_57e);}_58a[i]=this.createPath(run,s,path).setStroke(_581.marker.stroke).setFill(_581.marker.fill);},this);run.dyn.markerFill=_581.marker.fill;run.dyn.markerStroke=_581.marker.stroke;if(_580){arr.forEach(_58a,function(s,i){var o={element:"marker",index:i+_583[seg],run:run,shape:s,outline:_58b[i]||null,shadow:_58c&&_58c[i]||null,cx:_584[i].x,cy:_584[i].y};if(typeof _582[seg][0]=="number"){o.x=i+_583[seg]+1;o.y=_582[seg][i];}else{o.x=_582[seg][i].x;o.y=_582[seg][i].y;}this._connectEvents(o);_585[i+_583[seg]]=o;},this);}else{delete this._eventSeries[run.name];}}}run.dirty=false;}if(this.animate){var _58f=this.group;fx.animateTransform(lang.delegate({shape:_58f,duration:_577,transform:[{name:"translate",start:[0,dim.height-_57c.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play();}this.dirty=false;return this;}});});},"dojox/charting/plot2d/StackedLines":function(){define("dojox/charting/plot2d/StackedLines",["dojo/_base/declare","./Stacked"],function(_590,_591){return _590("dojox.charting.plot2d.StackedLines",_591,{constructor:function(){this.opt.lines=true;}});});},"dojox/color/Palette":function(){define("dojox/color/Palette",["dojo/_base/kernel","../main","dojo/_base/lang","dojo/_base/array","./_base"],function(dojo,_592,lang,arr,dxc){dxc.Palette=function(base){this.colors=[];if(base instanceof dxc.Palette){this.colors=base.colors.slice(0);}else{if(base instanceof dxc.Color){this.colors=[null,null,base,null,null];}else{if(lang.isArray(base)){this.colors=arr.map(base.slice(0),function(item){if(lang.isString(item)){return new dxc.Color(item);}return item;});}else{if(lang.isString(base)){this.colors=[null,null,new dxc.Color(base),null,null];}}}}};function _593(p,_594,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var r=(_594=="dr")?item.r+val:item.r,g=(_594=="dg")?item.g+val:item.g,b=(_594=="db")?item.b+val:item.b,a=(_594=="da")?item.a+val:item.a;ret.colors.push(new dxc.Color({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,b)),a:Math.min(1,Math.max(0,a))}));});return ret;};function tCMY(p,_595,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmy(),c=(_595=="dc")?o.c+val:o.c,m=(_595=="dm")?o.m+val:o.m,y=(_595=="dy")?o.y+val:o.y;ret.colors.push(dxc.fromCmy(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y))));});return ret;};function _596(p,_597,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmyk(),c=(_597=="dc")?o.c+val:o.c,m=(_597=="dm")?o.m+val:o.m,y=(_597=="dy")?o.y+val:o.y,k=(_597=="dk")?o.b+val:o.b;ret.colors.push(dxc.fromCmyk(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y)),Math.min(100,Math.max(0,k))));});return ret;};function tHSL(p,_598,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsl(),h=(_598=="dh")?o.h+val:o.h,s=(_598=="ds")?o.s+val:o.s,l=(_598=="dl")?o.l+val:o.l;ret.colors.push(dxc.fromHsl(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,l))));});return ret;};function tHSV(p,_599,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsv(),h=(_599=="dh")?o.h+val:o.h,s=(_599=="ds")?o.s+val:o.s,v=(_599=="dv")?o.v+val:o.v;ret.colors.push(dxc.fromHsv(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,v))));});return ret;};function _59a(val,low,high){return high-((high-val)*((high-low)/high));};lang.extend(dxc.Palette,{transform:function(_59b){var fn=_593;if(_59b.use){var use=_59b.use.toLowerCase();if(use.indexOf("hs")==0){if(use.charAt(2)=="l"){fn=tHSL;}else{fn=tHSV;}}else{if(use.indexOf("cmy")==0){if(use.charAt(3)=="k"){fn=_596;}else{fn=tCMY;}}}}else{if("dc" in _59b||"dm" in _59b||"dy" in _59b){if("dk" in _59b){fn=_596;}else{fn=tCMY;}}else{if("dh" in _59b||"ds" in _59b){if("dv" in _59b){fn=tHSV;}else{fn=tHSL;}}}}var _59c=this;for(var p in _59b){if(p=="use"){continue;}_59c=fn(_59c,p,_59b[p]);}return _59c;},clone:function(){return new dxc.Palette(this);}});lang.mixin(dxc.Palette,{generators:{analogous:function(args){var high=args.high||60,low=args.low||18,base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h=[(hsv.h+low+360)%360,(hsv.h+Math.round(low/2)+360)%360,hsv.h,(hsv.h-Math.round(high/2)+360)%360,(hsv.h-high+360)%360];var s1=Math.max(10,(hsv.s<=95)?hsv.s+5:(100-(hsv.s-95))),s2=(hsv.s>1)?hsv.s-1:21-hsv.s,v1=(hsv.v>=92)?hsv.v-9:Math.max(hsv.v+9,20),v2=(hsv.v<=90)?Math.max(hsv.v+5,20):(95+Math.ceil((hsv.v-90)/2)),s=[s1,s2,hsv.s,s1,s1],v=[v1,v2,hsv.v,v1,v2];return new dxc.Palette(arr.map(h,function(hue,i){return dxc.fromHsv(hue,s[i],v[i]);}));},monochromatic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s1=(hsv.s-30>9)?hsv.s-30:hsv.s+30,s2=hsv.s,v1=_59a(hsv.v,20,100),v2=(hsv.v-20>20)?hsv.v-20:hsv.v+60,v3=(hsv.v-50>20)?hsv.v-50:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v3),base,dxc.fromHsv(hsv.h,s1,v3),dxc.fromHsv(hsv.h,s2,v2)]);},triadic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=(hsv.h+57+360)%360,h2=(hsv.h-157+360)%360,s1=(hsv.s>20)?hsv.s-10:hsv.s+10,s2=(hsv.s>90)?hsv.s-10:hsv.s+10,s3=(hsv.s>95)?hsv.s-5:hsv.s+5,v1=(hsv.v-20>20)?hsv.v-20:hsv.v+20,v2=(hsv.v-30>20)?hsv.v-30:hsv.v+30,v3=(hsv.v-30>70)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,hsv.v),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h2,s2,v1),dxc.fromHsv(h2,s3,v3)]);},complementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,s1=Math.max(hsv.s-10,0),s2=_59a(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h1,s3,v2),dxc.fromHsv(h1,hsv.s,hsv.v)]);},splitComplementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,_59d=args.da||30,hsv=base.toHsv();var _59e=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,h1=(_59e-_59d+360)%360,h2=(_59e+_59d)%360,s1=Math.max(hsv.s-10,0),s2=_59a(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v2),dxc.fromHsv(h2,hsv.s,hsv.v)]);},compound:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+18<360)?(hsv.h*2)+18:Math.floor(hsv.h/2)-18,h2=((hsv.h*2)+120<360)?(hsv.h*2)+120:Math.floor(hsv.h/2)-120,h3=((hsv.h*2)+99<360)?(hsv.h*2)+99:Math.floor(hsv.h/2)-99,s1=(hsv.s-40>10)?hsv.s-40:hsv.s+40,s2=(hsv.s-10>80)?hsv.s-10:hsv.s+10,s3=(hsv.s-25>10)?hsv.s-25:hsv.s+25,v1=(hsv.v-40>10)?hsv.v-40:hsv.v+40,v2=(hsv.v-20>80)?hsv.v-20:hsv.v+20,v3=Math.max(hsv.v,20);return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v3),dxc.fromHsv(h3,s2,v2)]);},shades:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s=(hsv.s==100&&hsv.v==0)?0:hsv.s,v1=(hsv.v-50>20)?hsv.v-50:hsv.v+30,v2=(hsv.v-25>=20)?hsv.v-25:hsv.v+55,v3=(hsv.v-75>=20)?hsv.v-75:hsv.v+5,v4=Math.max(hsv.v-10,20);return new dxc.Palette([new dxc.fromHsv(hsv.h,s,v1),new dxc.fromHsv(hsv.h,s,v2),base,new dxc.fromHsv(hsv.h,s,v3),new dxc.fromHsv(hsv.h,s,v4)]);}},generate:function(base,type){if(lang.isFunction(type)){return type({base:base});}else{if(dxc.Palette.generators[type]){return dxc.Palette.generators[type]({base:base});}}throw new Error("dojox.color.Palette.generate: the specified generator ('"+type+"') does not exist.");}});return dxc.Palette;});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n></div>\r\n","dojox/charting/axis2d/common":function(){define("dojox/charting/axis2d/common",["dojo/_base/lang","dojo/_base/html","dojo/_base/window","dojo/dom-geometry","dojox/gfx"],function(lang,html,win,_59f,g){var _5a0=lang.getObject("dojox.charting.axis2d.common",true);var _5a1=function(s){s.marginLeft="0px";s.marginTop="0px";s.marginRight="0px";s.marginBottom="0px";s.paddingLeft="0px";s.paddingTop="0px";s.paddingRight="0px";s.paddingBottom="0px";s.borderLeftWidth="0px";s.borderTopWidth="0px";s.borderRightWidth="0px";s.borderBottomWidth="0px";};var _5a2=function(n){if(n["getBoundingClientRect"]){var bcr=n.getBoundingClientRect();return bcr.width||(bcr.right-bcr.left);}else{return _59f.getMarginBox(n).w;}};return lang.mixin(_5a0,{createText:{gfx:function(_5a3,_5a4,x,y,_5a5,text,font,_5a6){return _5a4.createText({x:x,y:y,text:text,align:_5a5}).setFont(font).setFill(_5a6);},html:function(_5a7,_5a8,x,y,_5a9,text,font,_5aa,_5ab){var p=win.doc.createElement("div"),s=p.style,_5ac;if(_5a7.getTextDir){p.dir=_5a7.getTextDir(text);}_5a1(s);s.font=font;p.innerHTML=String(text).replace(/\s/g,"&nbsp;");s.color=_5aa;s.position="absolute";s.left="-10000px";win.body().appendChild(p);var size=g.normalizedLength(g.splitFontString(font).size);if(!_5ab){_5ac=_5a2(p);}if(p.dir=="rtl"){x+=_5ab?_5ab:_5ac;}win.body().removeChild(p);s.position="relative";if(_5ab){s.width=_5ab+"px";switch(_5a9){case "middle":s.textAlign="center";s.left=(x-_5ab/2)+"px";break;case "end":s.textAlign="right";s.left=(x-_5ab)+"px";break;default:s.left=x+"px";s.textAlign="left";break;}}else{switch(_5a9){case "middle":s.left=Math.floor(x-_5ac/2)+"px";break;case "end":s.left=Math.floor(x-_5ac)+"px";break;default:s.left=Math.floor(x)+"px";break;}}s.top=Math.floor(y-size)+"px";s.whiteSpace="nowrap";var wrap=win.doc.createElement("div"),w=wrap.style;_5a1(w);w.width="0px";w.height="0px";wrap.appendChild(p);_5a7.node.insertBefore(wrap,_5a7.node.firstChild);return wrap;}}});});},"dojo/fx/easing":function(){define(["../_base/lang"],function(lang){var _5ad={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-_5ad.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return _5ad.bounceIn(n*2)/2;}return (_5ad.bounceOut(n*2-1)/2)+0.5;}};lang.setObject("dojo.fx.easing",_5ad);return _5ad;});},"dojox/charting/plot2d/StackedAreas":function(){define("dojox/charting/plot2d/StackedAreas",["dojo/_base/declare","./Stacked"],function(_5ae,_5af){return _5ae("dojox.charting.plot2d.StackedAreas",_5af,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){lang.getObject("regexp",true,dojo);dojo.regexp.escapeString=function(str,_5b0){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_5b0&&_5b0.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_5b1){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_5b1);};dojo.regexp.group=function(_5b2,_5b3){return "("+(_5b3?"?:":"")+_5b2+")";};return dojo.regexp;});},"dojox/charting/themes/PlotKit/base":function(){define("dojox/charting/themes/PlotKit/base",["dojo/_base/kernel","dojo/_base/lang","../../Theme","../common"],function(dojo,lang,_5b4,_5b5){var pk=lang.getObject("PlotKit",true,_5b5);pk.base=new _5b4({chart:{stroke:null,fill:"yellow"},plotarea:{stroke:null,fill:"yellow"},axis:{stroke:{color:"#fff",width:1},line:{color:"#fff",width:0.5},majorTick:{color:"#fff",width:0.5,length:6},minorTick:{color:"#fff",width:0.5,length:3},tick:{font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#999"}},series:{stroke:{width:2.5,color:"#fff"},fill:"#666",font:"normal normal normal 7.5pt Helvetica,Arial,sans-serif",fontColor:"#666"},marker:{stroke:{width:2},fill:"#333",font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#666"},colors:["red","green","blue"]});pk.base.next=function(_5b6,_5b7,_5b8){var _5b9=_5b4.prototype.next.apply(this,arguments);if(_5b6=="line"){_5b9.marker.outline={width:2,color:"#fff"};_5b9.series.stroke.width=3.5;_5b9.marker.stroke.width=2;}else{if(_5b6=="candlestick"){_5b9.series.stroke.width=1;}else{_5b9.series.stroke.color="#fff";}}return _5b9;};return pk;});},"dojo/data/util/simpleFetch":function(){define(["dojo/_base/lang","dojo/_base/window","./sorter"],function(lang,_5ba,_5bb){var _5bc=lang.getObject("dojo.data.util.simpleFetch",true);_5bc.fetch=function(_5bd){_5bd=_5bd||{};if(!_5bd.store){_5bd.store=this;}var self=this;var _5be=function(_5bf,_5c0){if(_5c0.onError){var _5c1=_5c0.scope||_5ba.global;_5c0.onError.call(_5c1,_5bf,_5c0);}};var _5c2=function(_5c3,_5c4){var _5c5=_5c4.abort||null;var _5c6=false;var _5c7=_5c4.start?_5c4.start:0;var _5c8=(_5c4.count&&(_5c4.count!==Infinity))?(_5c7+_5c4.count):_5c3.length;_5c4.abort=function(){_5c6=true;if(_5c5){_5c5.call(_5c4);}};var _5c9=_5c4.scope||_5ba.global;if(!_5c4.store){_5c4.store=self;}if(_5c4.onBegin){_5c4.onBegin.call(_5c9,_5c3.length,_5c4);}if(_5c4.sort){_5c3.sort(_5bb.createSortFunction(_5c4.sort,self));}if(_5c4.onItem){for(var i=_5c7;(i<_5c3.length)&&(i<_5c8);++i){var item=_5c3[i];if(!_5c6){_5c4.onItem.call(_5c9,item,_5c4);}}}if(_5c4.onComplete&&!_5c6){var _5ca=null;if(!_5c4.onItem){_5ca=_5c3.slice(_5c7,_5c8);}_5c4.onComplete.call(_5c9,_5ca,_5c4);}};this._fetchItems(_5bd,_5c2,_5be);return _5bd;};return _5bc;});},"dojox/charting/plot2d/_PlotEvents":function(){define("dojox/charting/plot2d/_PlotEvents",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(lang,arr,_5cb,hub){return _5cb("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={};},destroy:function(){this.resetEvents();this.inherited(arguments);},plotEvent:function(o){},raiseEvent:function(o){this.plotEvent(o);var t=lang.delegate(o);t.originalEvent=o.type;t.originalPlot=o.plot;t.type="onindirect";arr.forEach(this.chart.stack,function(plot){if(plot!==this&&plot.plotEvent){t.plot=plot;plot.plotEvent(t);}},this);},connect:function(_5cc,_5cd){this.dirty=true;return hub.connect(this,"plotEvent",_5cc,_5cd);},events:function(){return !!this.plotEvent.after;},resetEvents:function(){if(this._shapeEvents.length){arr.forEach(this._shapeEvents,function(item){item.shape.disconnect(item.handle);});this._shapeEvents=[];}this.raiseEvent({type:"onplotreset",plot:this});},_connectSingleEvent:function(o,_5ce){this._shapeEvents.push({shape:o.eventMask,handle:o.eventMask.connect(_5ce,this,function(e){o.type=_5ce;o.event=e;this.raiseEvent(o);o.event=null;})});},_connectEvents:function(o){if(o){o.chart=this.chart;o.plot=this;o.hAxis=this.hAxis||null;o.vAxis=this.vAxis||null;o.eventMask=o.eventMask||o.shape;this._connectSingleEvent(o,"onmouseover");this._connectSingleEvent(o,"onmouseout");this._connectSingleEvent(o,"onclick");}},_reconnectEvents:function(_5cf){var a=this._eventSeries[_5cf];if(a){arr.forEach(a,this._connectEvents,this);}},fireEvent:function(_5d0,_5d1,_5d2,_5d3){var s=this._eventSeries[_5d0];if(s&&s.length&&_5d2<s.length){var o=s[_5d2];o.type=_5d1;o.event=_5d3||null;this.raiseEvent(o);o.event=null;}}});});},"dojox/charting/Element":function(){define("dojox/charting/Element",["dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/utils","dojox/gfx/shape"],function(lang,arr,_5d4,_5d5,gfx,_5d6,_5d7){return _5d5("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:true,constructor:function(_5d8){this.chart=_5d8;this.group=null;this.htmlElements=[];this.dirty=true;this.trailingSymbol="...";this._events=[];},createGroup:function(_5d9){if(!_5d9){_5d9=this.chart.surface;}if(!this.group){this.group=_5d9.createGroup();}return this;},purgeGroup:function(){this.destroyHtmlElements();if(this.group){_5d6.forEach(this.group,function(_5da){_5d7.dispose(_5da);});this.group.clear();this.group.removeShape();this.group=null;}this.dirty=true;if(this._events.length){arr.forEach(this._events,function(item){item.shape.disconnect(item.handle);});this._events=[];}return this;},cleanGroup:function(_5db){this.destroyHtmlElements();if(!_5db){_5db=this.chart.surface;}if(this.group){this.group.clear();}else{this.group=_5db.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){arr.forEach(this.htmlElements,_5d4.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();},getTextWidth:function(s,font){return gfx._base._getTextBox(s,{font:font}).w||0;},getTextWithLimitLength:function(s,font,_5dc,_5dd){if(!s||s.length<=0){return {text:"",truncated:_5dd||false};}if(!_5dc||_5dc<=0){return {text:s,truncated:_5dd||false};}var _5de=2,_5df=0.618,_5e0=s.substring(0,1)+this.trailingSymbol,_5e1=this.getTextWidth(_5e0,font);if(_5dc<=_5e1){return {text:_5e0,truncated:true};}var _5e2=this.getTextWidth(s,font);if(_5e2<=_5dc){return {text:s,truncated:_5dd||false};}else{var _5e3=0,end=s.length;while(_5e3<end){if(end-_5e3<=_5de){while(this.getTextWidth(s.substring(0,_5e3)+this.trailingSymbol,font)>_5dc){_5e3-=1;}return {text:(s.substring(0,_5e3)+this.trailingSymbol),truncated:true};}var _5e4=_5e3+Math.round((end-_5e3)*_5df),_5e5=this.getTextWidth(s.substring(0,_5e4),font);if(_5e5<_5dc){_5e3=_5e4;end=end;}else{_5e3=_5e3;end=_5e4;}}}},getTextWithLimitCharCount:function(s,font,_5e6,_5e7){if(!s||s.length<=0){return {text:"",truncated:_5e7||false};}if(!_5e6||_5e6<=0||s.length<=_5e6){return {text:s,truncated:_5e7||false};}return {text:s.substring(0,_5e6)+this.trailingSymbol,truncated:true};},_plotFill:function(fill,dim,_5e8){if(!fill||!fill.type||!fill.space){return fill;}var _5e9=fill.space;switch(fill.type){case "linear":if(_5e9==="plot"||_5e9==="shapeX"||_5e9==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_5e9;if(_5e9==="plot"||_5e9==="shapeX"){var span=dim.height-_5e8.t-_5e8.b;fill.y1=_5e8.t+span*fill.y1/100;fill.y2=_5e8.t+span*fill.y2/100;}if(_5e9==="plot"||_5e9==="shapeY"){var span=dim.width-_5e8.l-_5e8.r;fill.x1=_5e8.l+span*fill.x1/100;fill.x2=_5e8.l+span*fill.x2/100;}}break;case "radial":if(_5e9==="plot"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_5e9;var _5ea=dim.width-_5e8.l-_5e8.r,_5eb=dim.height-_5e8.t-_5e8.b;fill.cx=_5e8.l+_5ea*fill.cx/100;fill.cy=_5e8.t+_5eb*fill.cy/100;fill.r=fill.r*Math.sqrt(_5ea*_5ea+_5eb*_5eb)/200;}break;case "pattern":if(_5e9==="plot"||_5e9==="shapeX"||_5e9==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_5e9;if(_5e9==="plot"||_5e9==="shapeX"){var span=dim.height-_5e8.t-_5e8.b;fill.y=_5e8.t+span*fill.y/100;fill.height=span*fill.height/100;}if(_5e9==="plot"||_5e9==="shapeY"){var span=dim.width-_5e8.l-_5e8.r;fill.x=_5e8.l+span*fill.x/100;fill.width=span*fill.width/100;}}break;}return fill;},_shapeFill:function(fill,bbox){if(!fill||!fill.space){return fill;}var _5ec=fill.space;switch(fill.type){case "linear":if(_5ec==="shape"||_5ec==="shapeX"||_5ec==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_5ec;if(_5ec==="shape"||_5ec==="shapeX"){var span=bbox.width;fill.x1=bbox.x+span*fill.x1/100;fill.x2=bbox.x+span*fill.x2/100;}if(_5ec==="shape"||_5ec==="shapeY"){var span=bbox.height;fill.y1=bbox.y+span*fill.y1/100;fill.y2=bbox.y+span*fill.y2/100;}}break;case "radial":if(_5ec==="shape"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_5ec;fill.cx=bbox.x+bbox.width/2;fill.cy=bbox.y+bbox.height/2;fill.r=fill.r*bbox.width/200;}break;case "pattern":if(_5ec==="shape"||_5ec==="shapeX"||_5ec==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_5ec;if(_5ec==="shape"||_5ec==="shapeX"){var span=bbox.width;fill.x=bbox.x+span*fill.x/100;fill.width=span*fill.width/100;}if(_5ec==="shape"||_5ec==="shapeY"){var span=bbox.height;fill.y=bbox.y+span*fill.y/100;fill.height=span*fill.height/100;}}break;}return fill;},_pseudoRadialFill:function(fill,_5ed,_5ee,_5ef,end){if(!fill||fill.type!=="radial"||fill.space!=="shape"){return fill;}var _5f0=fill.space;fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_5f0;if(arguments.length<4){fill.cx=_5ed.x;fill.cy=_5ed.y;fill.r=fill.r*_5ee/100;return fill;}var _5f1=arguments.length<5?_5ef:(end+_5ef)/2;return {type:"linear",x1:_5ed.x,y1:_5ed.y,x2:_5ed.x+fill.r*_5ee*Math.cos(_5f1)/100,y2:_5ed.y+fill.r*_5ee*Math.sin(_5f1)/100,colors:fill.colors};return fill;}});});},"esri/PopupBase":function(){define(["dijit","dojo","dojox"],function(_5f2,dojo,_5f3){dojo.provide("esri.PopupBase");dojo.declare("esri.PopupBase",null,{onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){var _5f4=this._marked;if(_5f4){this._marked=null;this.showClosestFirst(_5f4);}},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _5f5,_5f6;if(arg[0] instanceof dojo.Deferred){_5f6=arg;}else{_5f5=arg;}if(_5f5){this._updateFeatures(null,_5f5);}else{this.deferreds=_5f6;_5f6=_5f6.slice(0);dojo.forEach(_5f6,function(dfd){dfd.addBoth(dojo.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=0;var _5f7=this.selectedIndex;this.selectedIndex=-1;if(_5f7>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _5f8=this.features;if(_5f8){return _5f8[this.selectedIndex];}},select:function(_5f9){if(_5f9<0||_5f9>=this.count){return;}this.selectedIndex=_5f9;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new esri.Graphic(new esri.geometry.Point(0,0,map.spatialReference)));this._highlighted.hide();var ESYM=esri.symbol;if(!this.markerSymbol){var _5fa=(this.markerSymbol=new ESYM.SimpleMarkerSymbol());_5fa.setStyle(ESYM.SimpleMarkerSymbol.STYLE_TARGET);_5fa._setDim(16,16,7);_5fa.setOutline(new ESYM.CartographicLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2,ESYM.CartographicLineSymbol.CAP_ROUND,ESYM.CartographicLineSymbol.JOIN_ROUND));_5fa.setColor(new dojo.Color([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new ESYM.SimpleFillSymbol(ESYM.SimpleFillSymbol.STYLE_NULL,new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2),new dojo.Color([0,0,0,0]));}},disableHighlight:function(map){var _5fb=this._highlighted;if(_5fb){_5fb.hide();map.graphics.remove(_5fb);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){if(this._highlighted&&this.features&&this.features[this.selectedIndex]){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_5fc){var _5fd=_5fc.geometry,_5fe=this._highlighted;if(!_5fd||!_5fe){return;}_5fe.hide();if(!_5fe.getLayer()&&map){map.graphics.add(_5fe);}_5fe.setGeometry(esri.geometry.fromJson(_5fd.toJson()));var _5ff;switch(_5fd.type){case "point":case "multipoint":_5ff=this.markerSymbol;_5ff.setOffset(0,0);_5ff.setAngle(0);var lyr=_5fc.getLayer();if(lyr){var _600=lyr._getSymbol(_5fc),_601,_602,xoff=0,yoff=0,_603=0;if(_600){switch(_600.type){case "simplemarkersymbol":_601=_602=(_600.size||0);break;case "picturemarkersymbol":_601=(_600.width||0);_602=(_600.height||0);break;}xoff=_600.xoffset||0;yoff=_600.yoffset||0;_603=_600.angle||0;}if(_601&&_602){_5ff._setDim(_601+1,_602+1,7);}_5ff.setOffset(xoff,yoff);_5ff.setAngle(_603);}break;case "polyline":_5ff=this.lineSymbol;break;case "polygon":_5ff=this.fillSymbol;break;}_5fe.setSymbol(_5ff);},showClosestFirst:function(_604){var _605=this.features;if(_605&&_605.length){if(_605.length>1){var i,_606=Infinity,_607=-1,geom,_608=esri.geometry.getLength,_609;for(i=_605.length-1;i>=0;i--){geom=_605[i].geometry;_609=0;try{_609=(geom.type==="point")?_608(_604,geom):_608(_604,geom.getExtent().getCenter());}catch(e){}if(_609>0&&_609<_606){_606=_609;_607=i;}}if(_607>0){_605.splice(0,0,_605.splice(_607,1)[0]);this.select(0);}}}else{if(this.deferreds){this._marked=_604;}}},_unbind:function(dfd){var _60a=dojo.indexOf(this.deferreds,dfd);if(_60a===-1){return;}this.deferreds.splice(_60a,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_updateFeatures:function(dfd,_60b){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_60b&&_60b instanceof Error){this.onDfdComplete(_60b);if(res===2){this.onSetFeatures();}return;}if(_60b&&_60b.length){if(!this.features){this.features=_60b;this.count=_60b.length;this.selectedIndex=0;this.onDfdComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _60c=dojo.filter(_60b,function(_60d){return dojo.indexOf(this.features,_60d)===-1;},this);this.features=this.features.concat(_60c);this.count=this.features.length;this.onDfdComplete();if(res===2){this.onSetFeatures();}}}else{this.onDfdComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_60b;this.count=_60b.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});dojo.declare("esri.PopupInfoTemplate",[esri.InfoTemplate],{"-chains-":{constructor:"manual"},initialize:function(json){if(!json){return;}this.info=json;this.title=this.getTitle;this.content=this.getContent;var _60e=(this._fieldLabels={}),_60f=(this._fieldsMap={});if(json.fieldInfos){dojo.forEach(json.fieldInfos,function(_610){_60e[_610.fieldName]=_610.label;_60f[_610.fieldName]=_610;});}},toJson:function(){return dojo.fromJson(dojo.toJson(this.info));},getTitle:function(){},getContent:function(){},getComponents:function(_611){var _612=this.info,_613=_611.getLayer(),_614=dojo.clone(_611.attributes)||{},_615=dojo.clone(_614),_616=_612.fieldInfos,_617="",_618="",_619,_61a,_61b,_61c=_613&&_613._getDateOpts&&_613._getDateOpts().properties,_61d={dateFormat:{properties:_61c,formatter:"DateFormat"+this._dateFormats["shortDateShortTime"]}};if(_616){dojo.forEach(_616,function(_61e){var _61f=_61e.fieldName,val=_615[_61f];_615[_61f]=this._formatValue(val,_61f,_61d);if(_61c&&_61e.format&&_61e.format.dateFormat){var pos=dojo.indexOf(_61c,_61f);if(pos>-1){_61c.splice(pos,1);}}},this);}if(_613){var _620=_613.types,_621=_613.typeIdField,_622=_621&&_614[_621];for(_61a in _614){_61b=_614[_61a];if(esri._isDefined(_61b)){var _623=this._getDomainName(_613,_620,_622,_61a,_61b);if(esri._isDefined(_623)){_615[_61a]=_623;}else{if(_61a===_621){var _624=this._getTypeName(_613,_61b);if(esri._isDefined(_624)){_615[_61a]=_624;}}}}}}if(_612.title){_617=dojo.trim(esri.substitute(_615,this._fixTokens(_612.title),_61d)||"");}if(_612.description){_618=dojo.trim(esri.substitute(_615,this._fixTokens(_612.description),_61d)||"");}if(_616){_619=[];dojo.forEach(_616,function(_625){_61a=_625.fieldName;if(_61a&&_625.visible){_619.push([_625.label||_61a,esri.substitute(_615,"${"+_61a+"}",_61d)||""]);}});}var _626,_627;if(_612.mediaInfos){_626=[];dojo.forEach(_612.mediaInfos,function(_628){_627=0;_61b=_628.value;switch(_628.type){case "image":var url=_61b.sourceURL;url=url&&dojo.trim(esri.substitute(_614,this._fixTokens(url)));_627=!!url;break;case "piechart":case "linechart":case "columnchart":case "barchart":_627=dojo.some(_61b.fields,function(_629){return esri._isDefined(_614[_629]);});break;default:return;}if(_627){_628=dojo.clone(_628);_61b=_628.value;_628.title=_628.title?dojo.trim(esri.substitute(_615,this._fixTokens(_628.title),_61d)||""):"";_628.caption=_628.caption?dojo.trim(esri.substitute(_615,this._fixTokens(_628.caption),_61d)||""):"";if(_628.type==="image"){_61b.sourceURL=esri.substitute(_614,this._fixTokens(_61b.sourceURL));if(_61b.linkURL){_61b.linkURL=dojo.trim(esri.substitute(_614,this._fixTokens(_61b.linkURL))||"");}}else{var _62a=_614[_61b.normalizeField]||0;_61b.fields=dojo.map(_61b.fields,function(_62b){var data=_614[_62b];data=(data===undefined)?null:data;if(data&&_62a){data=data/_62a;}return {y:data,tooltip:(this._fieldLabels[_62b]||_62b)+":<br/>"+this._formatValue(data,_62b,_61d)};},this);}_626.push(_628);}},this);}return {title:_617,description:_618,fields:(_619&&_619.length)?_619:null,mediaInfos:(_626&&_626.length)?_626:null,formatted:_615,editSummary:(_613&&_613.getEditSummary)?_613.getEditSummary(_611):""};},getAttachments:function(_62c){var _62d=_62c.getLayer(),_62e=_62c.attributes;if(this.info.showAttachments&&_62d&&_62d.hasAttachments&&_62d.objectIdField){var oid=_62e&&_62e[_62d.objectIdField];if(oid){return _62d.queryAttachmentInfos(oid);}}},_dateFormats:{"shortDate":"(datePattern: 'M/d/y', selector: 'date')","longMonthDayYear":"(datePattern: 'MMMM d, y', selector: 'date')","dayShortMonthYear":"(datePattern: 'd MMM y', selector: 'date')","longDate":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","shortDateShortTime":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","shortDateShortTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","longMonthYear":"(datePattern: 'MMMM y', selector: 'date')","shortMonthYear":"(datePattern: 'MMM y', selector: 'date')","year":"(datePattern: 'y', selector: 'date')"},_fixTokens:function(_62f){return _62f.replace(/(\{[^\{\r\n]+\})/g,"$$$1");},_formatValue:function(val,_630,_631){var _632=this._fieldsMap[_630],fmt=_632&&_632.format;if(!esri._isDefined(val)||!_632||!esri._isDefined(fmt)){return val;}var _633="",_634=[],_635=fmt.hasOwnProperty("places")||fmt.hasOwnProperty("digitSeparator"),_636=fmt.hasOwnProperty("digitSeparator")?fmt.digitSeparator:true;if(_635){_633="NumberFormat";_634.push("places: "+(esri._isDefined(fmt.places)?Number(fmt.places):"Infinity"));if(_634.length){_633+=("("+_634.join(",")+")");}}else{if(fmt.dateFormat){_633="DateFormat"+(this._dateFormats[fmt.dateFormat]||this._dateFormats["shortDateShortTime"]);}else{return val;}}var _637=esri.substitute({"myKey":val},"${myKey:"+_633+"}",_631)||"";if(_635&&!_636){var _638=dojo.i18n.getLocalization("dojo.cldr","number");if(_638.group){_637=_637.replace(new RegExp("\\"+_638.group,"g"),"");}}return _637;},_getDomainName:function(_639,_63a,_63b,_63c,_63d){var _63e,stop;if(_63a&&esri._isDefined(_63b)){dojo.some(_63a,function(_63f){if(_63f.id==_63b){_63e=_63f.domains&&_63f.domains[_63c];if(_63e&&_63e.type==="inherited"){_63e=this._getLayerDomain(_639,_63c);stop=true;}return true;}return false;},this);}if(!stop&&!_63e){_63e=this._getLayerDomain(_639,_63c);}if(_63e&&_63e.codedValues){var _640;dojo.some(_63e.codedValues,function(_641){if(_641.code==_63d){_640=_641.name;return true;}return false;});return _640;}},_getLayerDomain:function(_642,_643){var _644=_642.fields;if(_644){var _645;dojo.some(_644,function(_646){if(_646.name===_643){_645=_646.domain;return true;}return false;});return _645;}},_getTypeName:function(_647,id){var _648=_647.types;if(_648){var _649;dojo.some(_648,function(_64a){if(_64a.id==id){_649=_64a.name;return true;}return false;});return _649;}}});});},"dojox/charting/axis2d/Base":function(){define("dojox/charting/axis2d/Base",["dojo/_base/declare","../Element"],function(_64b,_64c){return _64b("dojox.charting.axis2d.Base",_64c,{constructor:function(_64d,_64e){this.vertical=_64e&&_64e.vertical;},clear:function(){return this;},initialized:function(){return false;},calculate:function(min,max,span){return this;},getScaler:function(){return null;},getTicks:function(){return null;},getOffsets:function(){return {l:0,r:0,t:0,b:0};},render:function(dim,_64f){this.dirty=false;return this;}});});},"dojox/lang/functional/scan":function(){define("dojox/lang/functional/scan",["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(d,_650,df){var _651={};d.mixin(df,{scanl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array((n=a.length)+1);t[0]=z;for(i=0;i<n;z=f.call(o,z,a[i],i,a),t[++i]=z){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[z];for(i=0;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}else{t=[z];for(i in a){if(!(i in _651)){t.push(z=f.call(o,z,a[i],i,a));}}}}return t;},scanl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,z,_652=true;if(d.isArray(a)){t=new Array(n=a.length);t[0]=z=a[0];for(var i=1;i<n;t[i]=z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){t=[z=a.next()];for(i=1;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}}else{for(i in a){if(!(i in _651)){if(_652){t=[z=a[i]];_652=false;}else{t.push(z=f.call(o,z,a[i],i,a));}}}}}return t;},scanr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n+1),i=n;t[n]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;},scanr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),z=a[n-1],i=n-1;t[i]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;}});});},"esri/layers/wms":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/dynamic,esri/layers/agscommon"],function(_653,dojo,_654){dojo.provide("esri.layers.wms");dojo.require("esri.layers.dynamic");dojo.require("esri.layers.agscommon");dojo.declare("esri.layers.WMSLayer",[esri.layers.DynamicMapServiceLayer],{_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],constructor:function(url,_655){url=this._stripParameters(url,["version","service","request","bbox","format","height","width","layers","srs","crs","styles","transparent","bgcolor","exceptions","time","elevation","sld","wfs"]);this.url=url;this._url=esri.urlToObject(url);this._getCapabilitiesURL=url;this._initLayer=dojo.hitch(this,this._initLayer);this._parseCapabilities=dojo.hitch(this,this._parseCapabilities);this._getCapabilitiesError=dojo.hitch(this,this._getCapabilitiesError);if(_655){this.imageFormat=this._getImageFormat(_655.format);this.imageTransparency=(_655.transparent===false)?false:true;this.visibleLayers=_655.visibleLayers?_655.visibleLayers:[];if(_655.resourceInfo){this._readResourceInfo(_655.resourceInfo);}else{this._getCapabilities();}}else{this.imageFormat="image/png";this.imageTransparency=true;this.visibleLayers=[];this._getCapabilities();}this._blankImageURL=require.toUrl("esri/layers")+"/../../../images/pixel.png";},setVisibleLayers:function(_656){_656=this._checkVisibleLayersList(_656);this.visibleLayers=(_656)?_656:[];this.refresh(true);},setImageFormat:function(_657){this.imageFormat=this._getImageFormat(_657);this.refresh(true);},setImageTransparency:function(_658){this.imageTransparency=_658;this.refresh(true);},getImageUrl:function(_659,_65a,_65b,_65c){if(!this.visibleLayers||this.visibleLayers.length===0){_65c(this._blankImageURL);return;}var wkid=_659.spatialReference.wkid;if(dojo.some(this._WEB_MERCATOR,function(el){return el==wkid;})){var _65d=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WEB_MERCATOR,function(el2){return el2==el;}));},this);if(_65d.length==0){_65d=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WORLD_MERCATOR,function(el2){return el2==el;}));},this);}if(_65d.length>0){wkid=_65d[0];}else{wkid=this._WEB_MERCATOR[0];}}var list=dojo.filter(this.spatialReferences,function(el){return el!==wkid;});this.spatialReferences=list;this.spatialReferences.unshift(wkid);var xmin=_659.xmin;var xmax=_659.xmax;var ymin=_659.ymin;var ymax=_659.ymax;var _65e={};_65e.SERVICE="WMS";_65e.REQUEST="GetMap";_65e.FORMAT=this.imageFormat;_65e.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";_65e.STYLES="";_65e.VERSION=this.version;_65e.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;_65e.WIDTH=_65a;_65e.HEIGHT=_65b;if(this.maxWidth<_65a){_65e.WIDTH=this.maxWidth;}if(this.maxHeight<_65b){_65e.HEIGHT=this.maxHeight;}var _65f=wkid?wkid:NaN;if(!isNaN(_65f)){if(this.version=="1.3.0"){_65e.CRS="EPSG:"+_65f;}else{_65e.SRS="EPSG:"+_65f;}}if(this.version=="1.3.0"&&this._useLatLong(_65f)){_65e.BBOX=ymin+","+xmin+","+ymax+","+xmax;}else{_65e.BBOX=xmin+","+ymin+","+xmax+","+ymax;}var _660=this.getMapURL;_660+=(_660.indexOf("?")==-1)?"?":"";for(var key in _65e){_660+=(_660.substring(_660.length-1,_660.length)=="?")?"":"&";_660+=key+"="+_65e[key];}_65c(_660);},_initLayer:function(_661,io){this.spatialReference=new esri.SpatialReference(this.extent.spatialReference);this.initialExtent=new esri.geometry.Extent(this.extent);this.fullExtent=new esri.geometry.Extent(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);this.loaded=true;this.onLoad(this);var _662=this._loadCallback;if(_662){delete this._loadCallback;_662(this);}},_readResourceInfo:function(_663){if(!_663.extent){console.error("esri.layers.WMSLayer: unable to find the 'extent' property in resourceInfo");return;}if(!_663.layerInfos){console.error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo");return;}this.extent=_663.extent;this.allExtents[0]=_663.extent;this.layerInfos=_663.layerInfos;this.description=_663.description?_663.description:"";this.copyright=_663.copyright?_663.copyright:"";this.title=_663.title?_663.title:"";this.getMapURL=_663.getMapURL?_663.getMapURL:this._getCapabilitiesURL;this.version=_663.version?_663.version:"1.3.0";this.maxWidth=_663.maxWidth?_663.maxWidth:5000;this.maxHeight=_663.maxHeight?_663.maxHeight:5000;this.spatialReferences=_663.spatialReferences?_663.spatialReferences:[];this.imageFormat=this._getImageFormat(_663.format);this._initLayer();},_getCapabilities:function(){var _664=this._url.query?this._url.query:{};_664.SERVICE="WMS";_664.REQUEST="GetCapabilities";var uri=this._url.path+"?";for(var key in _664){uri+=(uri.substring(uri.length-1,uri.length)=="?")?"":"&";uri+=key+"="+_664[key];}var _665=esri.request({url:uri,handleAs:"xml",load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:false});},_parseCapabilities:function(xml){if(!xml){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)");return;}this.version=this._getAttributeValue("WMS_Capabilities","version",xml,null);if(!this.version){this.version=this._getAttributeValue("WMT_MS_Capabilities","version",xml,"1.3.0");}var _666=this._getTag("Service",xml);this.title=this._getTagValue("Title",_666,"");if(!this.title||this.title.length==0){this.title=this._getTagValue("Name",_666,"");}this.copyright=this._getTagValue("AccessConstraints",_666,"");this.description=this._getTagValue("Abstract",_666,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",_666,5000));this.maxHeight=parseInt(this._getTagValue("MaxHeight",_666,5000));var _667=this._getTag("Layer",xml);if(!_667){this._getCapabilitiesError({"error":{"message":"Response does not contain any layers."}});return;}var _668=this._getLayerInfo(_667);if(_668){this.layerInfos=_668.subLayers;if(!this.layerInfos||this.layerInfos.length==0){this.layerInfos=[_668];}this.extent=_668.extent;this.allExtents=_668.allExtents;this.spatialReferences=_668.spatialReferences;if(this.spatialReferences.length==0&&this.layerInfos.length>0){this.spatialReferences=this.layerInfos[0].spatialReferences;}}this.getMapURL=this._getCapabilitiesURL;var _669=dojo.query("DCPType",this._getTag("GetMap",xml));if(_669&&_669.length>0){var _66a=dojo.query("HTTP",_669[0]);if(_66a&&_66a.length>0){var _66b=dojo.query("Get",_66a[0]);if(_66b&&_66b.length>0){var _66c=this._getAttributeValue("OnlineResource","xlink:href",_66b[0],null);if(_66c){if(_66c.indexOf("&")==(_66c.length-1)){_66c=_66c.substring(0,_66c.length-1);}this.getMapURL=_66c;}}}}this.getMapFormats=[];if(dojo.query("Operation",xml).length==0){dojo.forEach(dojo.query("Format",this._getTag("GetMap",xml)),function(_66d){this.getMapFormats.push(_66d.text?_66d.text:_66d.textContent);},this);}else{dojo.forEach(dojo.query("Operation",xml),function(_66e){if(_66e.getAttribute("name")=="GetMap"){dojo.forEach(dojo.query("Format",_66e),function(_66f){this.getMapFormats.push(_66f.text?_66f.text:_66f.textContent);},this);}},this);}if(!dojo.some(this.getMapFormats,function(el){return el.indexOf(this.imageFormat)>-1;},this)){this.imageFormat=this.getMapFormats[0];}this._initLayer();},_getCapabilitiesError:function(_670,io){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+dojo.toJson(_670)+")");},_getLayerInfo:function(_671){if(!_671){return null;}var _672=new esri.layers.WMSLayerInfo();_672.name="";_672.title="";_672.description="";_672.allExtents=[];_672.spatialReferences=[];_672.subLayers=[];var _673=this._getTag("LatLonBoundingBox",_671);if(_673){_672.allExtents[0]=this._getExtent(_673,4326);}var _674=this._getTag("EX_GeographicBoundingBox",_671);if(_674){var _675=new esri.geometry.Extent(0,0,0,0,new esri.SpatialReference({wkid:4326}));_675.xmin=parseFloat(this._getTagValue("westBoundLongitude",_674,0));_675.ymin=parseFloat(this._getTagValue("southBoundLatitude",_674,0));_675.xmax=parseFloat(this._getTagValue("eastBoundLongitude",_674,0));_675.ymax=parseFloat(this._getTagValue("northBoundLatitude",_674,0));_672.allExtents[0]=_675;}_672.extent=_672.allExtents[0];var _676=(dojo.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)>-1)?"SRS":"CRS";dojo.forEach(_671.childNodes,function(_677){if(_677.nodeName=="Name"){_672.name=(_677.text?_677.text:_677.textContent)||"";}else{if(_677.nodeName=="Title"){_672.title=(_677.text?_677.text:_677.textContent)||"";}else{if(_677.nodeName=="Abstract"){_672.description=(_677.text?_677.text:_677.textContent)||"";}else{if(_677.nodeName=="BoundingBox"){srAttr=_677.getAttribute(_676);if(srAttr&&srAttr.indexOf("EPSG:")===0){wkid=parseInt(srAttr.substring(5));if(wkid!==0&&!isNaN(wkid)){var _678;if(this.version=="1.3.0"){_678=this._getExtent(_677,wkid,this._useLatLong(wkid));}else{_678=this._getExtent(_677,wkid);}_672.allExtents[wkid]=_678;if(!_672.extent){_672.extent=_678;}}}else{if(srAttr&&srAttr.indexOf("CRS:")===0){wkid=parseInt(srAttr.substring(4));if(wkid!==0&&!isNaN(wkid)){if(this._CRS_TO_EPSG[wkid]){wkid=this._CRS_TO_EPSG[wkid];}_672.allExtents[wkid]=this._getExtent(_677,wkid);}}else{wkid=parseInt(srAttr);if(wkid!==0&&!isNaN(wkid)){_672.allExtents[wkid]=this._getExtent(_677,wkid);}}}}else{if(_677.nodeName==_676){var _679=_677.text?_677.text:_677.textContent;var arr=_679.split(" ");dojo.forEach(arr,function(val){if(val.indexOf(":")>-1){val=parseInt(val.split(":")[1]);}else{val=parseInt(val);}if(val!==84&&val!==0&&!isNaN(val)){if(!dojo.some(_672.spatialReferences,function(el){return (el==val);})){_672.spatialReferences.push(val);}}},this);}else{if(_677.nodeName=="Style"){var _67a=this._getTag("LegendURL",_677);if(_67a){var _67b=this._getTag("OnlineResource",_67a);if(_67b){_672.legendURL=_67b.getAttribute("xlink:href");}}}else{if(_677.nodeName==="Layer"){_672.subLayers.push(this._getLayerInfo(_677));}}}}}}}},this);return _672;},_getImageFormat:function(_67c){var _67d=_67c?_67c.toLowerCase():"";switch(_67d){case "jpg":return "image/jpeg";case "bmp":return "image/bmp";case "gif":return "image/gif";case "svg":return "image/svg+xml";default:return "image/png";}},getImageFormat:function(){var _67e=this.imageFormat?this.imageFormat.toLowerCase():"";switch(_67e){case "image/jpeg":return "jpg";case "image/bmp":return "bmp";case "image/gif":return "gif";case "image/svg+xml":return "svg";default:return "png";}},_getExtent:function(_67f,wkid,_680){var _681;if(_67f){_681=new esri.geometry.Extent();var minx=parseFloat(_67f.getAttribute("minx"));var miny=parseFloat(_67f.getAttribute("miny"));var maxx=parseFloat(_67f.getAttribute("maxx"));var maxy=parseFloat(_67f.getAttribute("maxy"));if(_680){_681.xmin=isNaN(miny)?((-1)*Number.MAX_VALUE):miny;_681.ymin=isNaN(minx)?((-1)*Number.MAX_VALUE):minx;_681.xmax=isNaN(maxy)?Number.MAX_VALUE:maxy;_681.ymax=isNaN(maxx)?Number.MAX_VALUE:maxx;}else{_681.xmin=isNaN(minx)?((-1)*Number.MAX_VALUE):minx;_681.ymin=isNaN(miny)?((-1)*Number.MAX_VALUE):miny;_681.xmax=isNaN(maxx)?Number.MAX_VALUE:maxx;_681.ymax=isNaN(maxy)?Number.MAX_VALUE:maxy;}_681.spatialReference=new esri.SpatialReference({wkid:wkid});}return _681;},_useLatLong:function(wkid){var _682;for(var i=0;i<this._REVERSED_LAT_LONG_RANGES.length;i++){var _683=this._REVERSED_LAT_LONG_RANGES[i];if(wkid>=_683[0]&&wkid<=_683[1]){_682=true;break;}}return _682;},_getTag:function(_684,xml){var tags=dojo.query(_684,xml);if(tags&&tags.length>0){return tags[0];}else{return null;}},_getTagValue:function(_685,xml,_686){var _687=dojo.query(_685,xml);if(_687&&_687.length>0){if(_687[0].text){return _687[0].text;}else{return _687[0].textContent;}}else{return _686;}},_getAttributeValue:function(_688,_689,xml,_68a){var _68b=dojo.query(_688,xml);if(_68b&&_68b.length>0){return _68b[0].getAttribute(_689);}else{return _68a;}},_checkVisibleLayersList:function(_68c){if(_68c&&_68c.length>0&&this.layerInfos&&this.layerInfos.length>0){if((typeof _68c[0])=="number"){var list=[];dojo.forEach(_68c,function(pos){if(pos<this.layerInfos.length){list.push(this.layerInfos[pos].name);}},this);_68c=list;}}return _68c;},_stripParameters:function(url,_68d){var obj=esri.urlToObject(url);qs=[];for(var prop in obj.query){if(dojo.indexOf(_68d,prop.toLowerCase())===-1){qs.push(prop+"="+obj.query[prop]);}}return obj.path+(qs.length?("?"+qs.join("&")):"");}});dojo.declare("esri.layers.WMSLayerInfo",null,{name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],constructor:function(_68e){if(_68e){this.name=_68e.name;this.title=_68e.title;this.description=_68e.description;this.extent=_68e.extent;this.legendURL=_68e.legendURL;this.subLayers=_68e.subLayers?_68e.subLayers:[];this.allExtents=_68e.allExtents?_68e.allExtents:[];this.spatialReferences=_68e.spatialReferences?_68e.spatialReferences:[];}},clone:function(){var info={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL};if(this.extent){info.extent=this.extent.getExtent();}info.subLayers=[];dojo.forEach(this.subLayers,function(_68f){info.subLayers.push(_68f.clone());});info.allExtents=[];for(var wkid in this.allExtents){wkid=parseInt(wkid);if(!isNaN(wkid)){info.allExtents[wkid]=this.allExtents[wkid].getExtent();}}info.spatialReferences=[];dojo.forEach(this.spatialReferences,function(wkid){info.spatialReferences.push(wkid);});return info;}});});},"dojox/charting/scaler/primitive":function(){define("dojox/charting/scaler/primitive",["dojo/_base/lang"],function(lang){var _690=lang.getObject("dojox.charting.scaler.primitive",true);return lang.mixin(_690,{buildScaler:function(min,max,span,_691){if(min==max){min-=0.5;max+=0.5;}return {bounds:{lower:min,upper:max,from:min,to:max,scale:span/(max-min),span:span},scaler:_690};},buildTicks:function(_692,_693){return {major:[],minor:[],micro:[]};},getTransformerFromModel:function(_694){var _695=_694.bounds.from,_696=_694.bounds.scale;return function(x){return (x-_695)*_696;};},getTransformerFromPlot:function(_697){var _698=_697.bounds.from,_699=_697.bounds.scale;return function(x){return x/_699+_698;};}});});},"dojo/window":function(){define(["./_base/lang","./_base/sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(lang,has,_69a,dom,geom,_69b){var _69c=lang.getObject("dojo.window",true);_69c.getBox=function(){var _69d=(_69a.doc.compatMode=="BackCompat")?_69a.body():_69a.doc.documentElement,_69e=geom.docScroll(),w,h;if(has("touch")){var _69f=_69a.doc.parentWindow||_69a.doc.defaultView;w=_69f.innerWidth||_69d.clientWidth;h=_69f.innerHeight||_69d.clientHeight;}else{w=_69d.clientWidth;h=_69d.clientHeight;}return {l:_69e.x,t:_69e.y,w:w,h:h};};_69c.get=function(doc){if(has("ie")&&_69c!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};_69c.scrollIntoView=function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_69a.doc,body=doc.body||_69a.body(),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if((!(has("mozilla")||isIE||isWK||has("opera"))||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _6a0=doc.compatMode=="BackCompat",_6a1=(isIE>=9&&node.ownerDocument.parentWindow.frameElement)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_6a0?body:html),_6a2=isWK?body:_6a1,_6a3=_6a1.clientWidth,_6a4=_6a1.clientHeight,rtl=!geom.isBodyLtr(),_6a5=pos||geom.position(node),el=node.parentNode,_6a6=function(el){return ((isIE<=6||(isIE&&_6a0))?false:(_69b.get(el,"position").toLowerCase()=="fixed"));};if(_6a6(node)){return;}while(el){if(el==body){el=_6a2;}var _6a7=geom.position(el),_6a8=_6a6(el);if(el==_6a2){_6a7.w=_6a3;_6a7.h=_6a4;if(_6a2==html&&isIE&&rtl){_6a7.x+=_6a2.offsetWidth-_6a7.w;}if(_6a7.x<0||!isIE){_6a7.x=0;}if(_6a7.y<0||!isIE){_6a7.y=0;}}else{var pb=geom.getPadBorderExtents(el);_6a7.w-=pb.w;_6a7.h-=pb.h;_6a7.x+=pb.l;_6a7.y+=pb.t;var _6a9=el.clientWidth,_6aa=_6a7.w-_6a9;if(_6a9>0&&_6aa>0){_6a7.w=_6a9;_6a7.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_6aa:0;}_6a9=el.clientHeight;_6aa=_6a7.h-_6a9;if(_6a9>0&&_6aa>0){_6a7.h=_6a9;}}if(_6a8){if(_6a7.y<0){_6a7.h+=_6a7.y;_6a7.y=0;}if(_6a7.x<0){_6a7.w+=_6a7.x;_6a7.x=0;}if(_6a7.y+_6a7.h>_6a4){_6a7.h=_6a4-_6a7.y;}if(_6a7.x+_6a7.w>_6a3){_6a7.w=_6a3-_6a7.x;}}var l=_6a5.x-_6a7.x,t=_6a5.y-Math.max(_6a7.y,0),r=l+_6a5.w-_6a7.w,bot=t+_6a5.h-_6a7.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_6a0)||isIE>=9)){s=-s;}_6a5.x+=el.scrollLeft;el.scrollLeft+=s;_6a5.x-=el.scrollLeft;}if(bot*t>0){_6a5.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_6a5.y-=el.scrollTop;}el=(el!=_6a2)&&!_6a8&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}};return _69c;});},"dojo/number":function(){define(["./_base/kernel","./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(dojo,lang,i18n,_6ab,_6ac,_6ad){lang.getObject("number",true,dojo);dojo.number.format=function(_6ae,_6af){_6af=lang.mixin({},_6af||{});var _6b0=i18n.normalizeLocale(_6af.locale),_6b1=i18n.getLocalization("dojo.cldr","number",_6b0);_6af.customs=_6b1;var _6b2=_6af.pattern||_6b1[(_6af.type||"decimal")+"Format"];if(isNaN(_6ae)||Math.abs(_6ae)==Infinity){return null;}return dojo.number._applyPattern(_6ae,_6b2,_6af);};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(_6b3,_6b4,_6b5){_6b5=_6b5||{};var _6b6=_6b5.customs.group,_6b7=_6b5.customs.decimal,_6b8=_6b4.split(";"),_6b9=_6b8[0];_6b4=_6b8[(_6b3<0)?1:0]||("-"+_6b9);if(_6b4.indexOf("%")!=-1){_6b3*=100;}else{if(_6b4.indexOf("")!=-1){_6b3*=1000;}else{if(_6b4.indexOf("")!=-1){_6b6=_6b5.customs.currencyGroup||_6b6;_6b7=_6b5.customs.currencyDecimal||_6b7;_6b4=_6b4.replace(/\u00a4{1,3}/,function(_6ba){var prop=["symbol","currency","displayName"][_6ba.length-1];return _6b5[prop]||_6b5.currency||"";});}else{if(_6b4.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _6bb=dojo.number._numberPatternRE;var _6bc=_6b9.match(_6bb);if(!_6bc){throw new Error("unable to find a number expression in pattern: "+_6b4);}if(_6b5.fractional===false){_6b5.places=0;}return _6b4.replace(_6bb,dojo.number._formatAbsolute(_6b3,_6bc[0],{decimal:_6b7,group:_6b6,places:_6b5.places,round:_6b5.round}));};dojo.number.round=function(_6bd,_6be,_6bf){var _6c0=10/(_6bf||10);return (_6c0*+_6bd).toFixed(_6be)/_6c0;};if((0.9).toFixed()==0){var _6c1=dojo.number.round;dojo.number.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d||a*Math.pow(10,p+1)<5){d=0;}return _6c1(v,p,m)+(v>0?d:-d);};}dojo.number._formatAbsolute=function(_6c2,_6c3,_6c4){_6c4=_6c4||{};if(_6c4.places===true){_6c4.places=0;}if(_6c4.places===Infinity){_6c4.places=6;}var _6c5=_6c3.split("."),_6c6=typeof _6c4.places=="string"&&_6c4.places.indexOf(","),_6c7=_6c4.places;if(_6c6){_6c7=_6c4.places.substring(_6c6+1);}else{if(!(_6c7>=0)){_6c7=(_6c5[1]||[]).length;}}if(!(_6c4.round<0)){_6c2=dojo.number.round(_6c2,_6c7,_6c4.round);}var _6c8=String(Math.abs(_6c2)).split("."),_6c9=_6c8[1]||"";if(_6c5[1]||_6c4.places){if(_6c6){_6c4.places=_6c4.places.substring(0,_6c6);}var pad=_6c4.places!==undefined?_6c4.places:(_6c5[1]&&_6c5[1].lastIndexOf("0")+1);if(pad>_6c9.length){_6c8[1]=_6ac.pad(_6c9,pad,"0",true);}if(_6c7<_6c9.length){_6c8[1]=_6c9.substr(0,_6c7);}}else{if(_6c8[1]){_6c8.pop();}}var _6ca=_6c5[0].replace(",","");pad=_6ca.indexOf("0");if(pad!=-1){pad=_6ca.length-pad;if(pad>_6c8[0].length){_6c8[0]=_6ac.pad(_6c8[0],pad);}if(_6ca.indexOf("#")==-1){_6c8[0]=_6c8[0].substr(_6c8[0].length-pad);}}var _6cb=_6c5[0].lastIndexOf(","),_6cc,_6cd;if(_6cb!=-1){_6cc=_6c5[0].length-_6cb-1;var _6ce=_6c5[0].substr(0,_6cb);_6cb=_6ce.lastIndexOf(",");if(_6cb!=-1){_6cd=_6ce.length-_6cb-1;}}var _6cf=[];for(var _6d0=_6c8[0];_6d0;){var off=_6d0.length-_6cc;_6cf.push((off>0)?_6d0.substr(off):_6d0);_6d0=(off>0)?_6d0.slice(0,off):"";if(_6cd){_6cc=_6cd;delete _6cd;}}_6c8[0]=_6cf.reverse().join(_6c4.group||",");return _6c8.join(_6c4.decimal||".");};dojo.number.regexp=function(_6d1){return dojo.number._parseInfo(_6d1).regexp;};dojo.number._parseInfo=function(_6d2){_6d2=_6d2||{};var _6d3=i18n.normalizeLocale(_6d2.locale),_6d4=i18n.getLocalization("dojo.cldr","number",_6d3),_6d5=_6d2.pattern||_6d4[(_6d2.type||"decimal")+"Format"],_6d6=_6d4.group,_6d7=_6d4.decimal,_6d8=1;if(_6d5.indexOf("%")!=-1){_6d8/=100;}else{if(_6d5.indexOf("")!=-1){_6d8/=1000;}else{var _6d9=_6d5.indexOf("")!=-1;if(_6d9){_6d6=_6d4.currencyGroup||_6d6;_6d7=_6d4.currencyDecimal||_6d7;}}}var _6da=_6d5.split(";");if(_6da.length==1){_6da.push("-"+_6da[0]);}var re=_6ad.buildGroupRE(_6da,function(_6db){_6db="(?:"+_6ad.escapeString(_6db,".")+")";return _6db.replace(dojo.number._numberPatternRE,function(_6dc){var _6dd={signed:false,separator:_6d2.strict?_6d6:[_6d6,""],fractional:_6d2.fractional,decimal:_6d7,exponent:false},_6de=_6dc.split("."),_6df=_6d2.places;if(_6de.length==1&&_6d8!=1){_6de[1]="###";}if(_6de.length==1||_6df===0){_6dd.fractional=false;}else{if(_6df===undefined){_6df=_6d2.pattern?_6de[1].lastIndexOf("0")+1:Infinity;}if(_6df&&_6d2.fractional==undefined){_6dd.fractional=true;}if(!_6d2.places&&(_6df<_6de[1].length)){_6df+=","+_6de[1].length;}_6dd.places=_6df;}var _6e0=_6de[0].split(",");if(_6e0.length>1){_6dd.groupSize=_6e0.pop().length;if(_6e0.length>1){_6dd.groupSize2=_6e0.pop().length;}}return "("+dojo.number._realNumberRegexp(_6dd)+")";});},true);if(_6d9){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_6e1,_6e2,_6e3,_6e4){var prop=["symbol","currency","displayName"][_6e3.length-1],_6e5=_6ad.escapeString(_6d2[prop]||_6d2.currency||"");_6e2=_6e2?"[\\s\\xa0]":"";_6e4=_6e4?"[\\s\\xa0]":"";if(!_6d2.strict){if(_6e2){_6e2+="*";}if(_6e4){_6e4+="*";}return "(?:"+_6e2+_6e5+_6e4+")?";}return _6e2+_6e5+_6e4;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_6d6,decimal:_6d7,factor:_6d8};};dojo.number.parse=function(_6e6,_6e7){var info=dojo.number._parseInfo(_6e7),_6e8=(new RegExp("^"+info.regexp+"$")).exec(_6e6);if(!_6e8){return NaN;}var _6e9=_6e8[1];if(!_6e8[1]){if(!_6e8[2]){return NaN;}_6e9=_6e8[2];info.factor*=-1;}_6e9=_6e9.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _6e9*info.factor;};dojo.number._realNumberRegexp=function(_6ea){_6ea=_6ea||{};if(!("places" in _6ea)){_6ea.places=Infinity;}if(typeof _6ea.decimal!="string"){_6ea.decimal=".";}if(!("fractional" in _6ea)||/^0/.test(_6ea.places)){_6ea.fractional=[true,false];}if(!("exponent" in _6ea)){_6ea.exponent=[true,false];}if(!("eSigned" in _6ea)){_6ea.eSigned=[true,false];}var _6eb=dojo.number._integerRegexp(_6ea),_6ec=_6ad.buildGroupRE(_6ea.fractional,function(q){var re="";if(q&&(_6ea.places!==0)){re="\\"+_6ea.decimal;if(_6ea.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_6ea.places+"}";}}return re;},true);var _6ed=_6ad.buildGroupRE(_6ea.exponent,function(q){if(q){return "([eE]"+dojo.number._integerRegexp({signed:_6ea.eSigned})+")";}return "";});var _6ee=_6eb+_6ec;if(_6ec){_6ee="(?:(?:"+_6ee+")|(?:"+_6ec+"))";}return _6ee+_6ed;};dojo.number._integerRegexp=function(_6ef){_6ef=_6ef||{};if(!("signed" in _6ef)){_6ef.signed=[true,false];}if(!("separator" in _6ef)){_6ef.separator="";}else{if(!("groupSize" in _6ef)){_6ef.groupSize=3;}}var _6f0=_6ad.buildGroupRE(_6ef.signed,function(q){return q?"[-+]":"";},true);var _6f1=_6ad.buildGroupRE(_6ef.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=_6ad.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==""){sep="\\s\\xa0";}}var grp=_6ef.groupSize,grp2=_6ef.groupSize2;if(grp2){var _6f2="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_6f2+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_6f2;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _6f0+_6f1;};return dojo.number;});},"dojox/gfx/fx":function(){define("dojox/gfx/fx",["dojo/_base/lang","./_base","./matrix","dojo/_base/Color","dojo/_base/array","dojo/_base/fx","dojo/_base/connect"],function(lang,g,m,_6f3,arr,fx,Hub){var fxg=g.fx={};function _6f4(_6f5,end){this.start=_6f5,this.end=end;};_6f4.prototype.getValue=function(r){return (this.end-this.start)*r+this.start;};function _6f6(_6f7,end,_6f8){this.start=_6f7,this.end=end;this.units=_6f8;};_6f6.prototype.getValue=function(r){return (this.end-this.start)*r+this.start+this.units;};function _6f9(_6fa,end){this.start=_6fa,this.end=end;this.temp=new _6f3();};_6f9.prototype.getValue=function(r){return _6f3.blendColors(this.start,this.end,r,this.temp);};function _6fb(_6fc){this.values=_6fc;this.length=_6fc.length;};_6fb.prototype.getValue=function(r){return this.values[Math.min(Math.floor(r*this.length),this.length-1)];};function _6fd(_6fe,def){this.values=_6fe;this.def=def?def:{};};_6fd.prototype.getValue=function(r){var ret=lang.clone(this.def);for(var i in this.values){ret[i]=this.values[i].getValue(r);}return ret;};function _6ff(_700,_701){this.stack=_700;this.original=_701;};_6ff.prototype.getValue=function(r){var ret=[];arr.forEach(this.stack,function(t){if(t instanceof m.Matrix2D){ret.push(t);return;}if(t.name=="original"&&this.original){ret.push(this.original);return;}if(!(t.name in m)){return;}var f=m[t.name];if(typeof f!="function"){ret.push(f);return;}var val=arr.map(t.start,function(v,i){return (t.end[i]-v)*r+v;}),_702=f.apply(m,val);if(_702 instanceof m.Matrix2D){ret.push(_702);}},this);return ret;};var _703=new _6f3(0,0,0,0);function _704(prop,obj,name,def){if(prop.values){return new _6fb(prop.values);}var _705,_706,end;if(prop.start){_706=g.normalizeColor(prop.start);}else{_706=_705=obj?(name?obj[name]:obj):def;}if(prop.end){end=g.normalizeColor(prop.end);}else{if(!_705){_705=obj?(name?obj[name]:obj):def;}end=_705;}return new _6f9(_706,end);};function _707(prop,obj,name,def){if(prop.values){return new _6fb(prop.values);}var _708,_709,end;if(prop.start){_709=prop.start;}else{_709=_708=obj?obj[name]:def;}if(prop.end){end=prop.end;}else{if(typeof _708!="number"){_708=obj?obj[name]:def;}end=_708;}return new _6f4(_709,end);};fxg.animateStroke=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_70a=args.shape,_70b;Hub.connect(anim,"beforeBegin",anim,function(){_70b=_70a.getStroke();var prop=args.color,_70c={},_70d,_70e,end;if(prop){_70c.color=_704(prop,_70b,"color",_703);}prop=args.style;if(prop&&prop.values){_70c.style=new _6fb(prop.values);}prop=args.width;if(prop){_70c.width=_707(prop,_70b,"width",1);}prop=args.cap;if(prop&&prop.values){_70c.cap=new _6fb(prop.values);}prop=args.join;if(prop){if(prop.values){_70c.join=new _6fb(prop.values);}else{_70e=prop.start?prop.start:(_70b&&_70b.join||0);end=prop.end?prop.end:(_70b&&_70b.join||0);if(typeof _70e=="number"&&typeof end=="number"){_70c.join=new _6f4(_70e,end);}}}this.curve=new _6fd(_70c,_70b);});Hub.connect(anim,"onAnimate",_70a,"setStroke");return anim;};fxg.animateFill=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_70f=args.shape,fill;Hub.connect(anim,"beforeBegin",anim,function(){fill=_70f.getFill();var prop=args.color,_710={};if(prop){this.curve=_704(prop,fill,"",_703);}});Hub.connect(anim,"onAnimate",_70f,"setFill");return anim;};fxg.animateFont=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_711=args.shape,font;Hub.connect(anim,"beforeBegin",anim,function(){font=_711.getFont();var prop=args.style,_712={},_713,_714,end;if(prop&&prop.values){_712.style=new _6fb(prop.values);}prop=args.variant;if(prop&&prop.values){_712.variant=new _6fb(prop.values);}prop=args.weight;if(prop&&prop.values){_712.weight=new _6fb(prop.values);}prop=args.family;if(prop&&prop.values){_712.family=new _6fb(prop.values);}prop=args.size;if(prop&&prop.units){_714=parseFloat(prop.start?prop.start:(_711.font&&_711.font.size||"0"));end=parseFloat(prop.end?prop.end:(_711.font&&_711.font.size||"0"));_712.size=new _6f6(_714,end,prop.units);}this.curve=new _6fd(_712,font);});Hub.connect(anim,"onAnimate",_711,"setFont");return anim;};fxg.animateTransform=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_715=args.shape,_716;Hub.connect(anim,"beforeBegin",anim,function(){_716=_715.getTransform();this.curve=new _6ff(args.transform,_716);});Hub.connect(anim,"onAnimate",_715,"setTransform");return anim;};return fxg;});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_717,_718,_719,lang){lang.extend(_718,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _719("dijit._FocusMixin",null,{_focusManager:_717});});},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser","dijit/registry"],function(_71a,_71b,_71c,_71d){return _71b("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;var cw=(this._startupWidgets=_71c.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"}));this._supportingWidgets=_71d.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}},startup:function(){_71a.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"dojox/charting/plot2d/StackedColumns":function(){define("dojox/charting/plot2d/StackedColumns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Columns","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,arr,_71e,_71f,dc,df,dfr,dfs){var _720=dfr.lambda("item.purgeGroup()");return _71e("dojox.charting.plot2d.StackedColumns",_71f,{getSeriesStats:function(){var _721=dc.collectStackedStats(this.series);this._maxRunLength=_721.hmax;_721.hmin-=0.5;_721.hmax+=0.5;return _721;},render:function(dim,_722){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _723=run.data[j];if(_723!==null){var v=typeof _723=="number"?_723:_723.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_722);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_720);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_724,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_725=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_724=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _726=t.next("column",[this.opt,run]),s=run.group,_727=new Array(acc.length);for(var j=0;j<acc.length;++j){var _723=run.data[j];if(_723!==null){var v=acc[j],_728=vt(v),_729=typeof _723!="number"?t.addMixin(_726,"column",_723,true):t.post(_726,"column");if(_724>=1&&_728>=0){var rect={x:_722.l+ht(j+0.5)+gap,y:dim.height-_722.b-vt(v),width:_724,height:_728};var _72a=this._plotFill(_729.series.fill,dim,_722);_72a=this._shapeFill(_72a,rect);var _72b=s.createRect(rect).setFill(_72a).setStroke(_729.series.stroke);run.dyn.fill=_72b.getFill();run.dyn.stroke=_72b.getStroke();if(_725){var o={element:"column",index:j,run:run,shape:_72b,x:j+0.5,y:v};this._connectEvents(o);_727[j]=o;}if(this.animate){this._animateColumn(_72b,dim.height-_722.b,_728);}}}}this._eventSeries[run.name]=_727;run.dirty=false;for(var j=0;j<run.data.length;++j){var _723=run.data[j];if(_723!==null){var v=typeof _723=="number"?_723:_723.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojo/data/util/filter":function(){define(["dojo/_base/lang"],function(lang){var _72c=lang.getObject("dojo.data.util.filter",true);_72c.patternToRegExp=function(_72d,_72e){var rxp="^";var c=null;for(var i=0;i<_72d.length;i++){c=_72d.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_72d.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_72e){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _72c;});},"dojox/charting/plot2d/OHLC":function(){define("dojox/charting/plot2d/OHLC",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_72f,Base,dc,df,dfr,du,fx){var _730=dfr.lambda("item.purgeGroup()");return _72f("dojox.charting.plot2d.OHLC",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_731,_732){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_732);du.updateWithPattern(this.opt,_732,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_733){var _734=lang.delegate(dc.defaultStats);for(var i=0;i<_733.length;i++){var run=_733[i];if(!run.data.length){continue;}var _735=_734.vmin,_736=_734.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_734.hmin=Math.min(_734.hmin,x);_734.hmax=Math.max(_734.hmax,x);_734.vmin=Math.min(_734.vmin,val.open,val.close,val.high,val.low);_734.vmax=Math.max(_734.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_734.vmin=Math.min(_735,run.ymin);}if("ymax" in run){_734.vmax=Math.max(_736,run.ymax);}}return _734;},getSeriesStats:function(){var _737=this.collectStats(this.series);_737.hmin-=0.5;_737.hmax+=0.5;return _737;},render:function(dim,_738){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_738);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_730);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_739,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_73a=Math.max(0,this._vScaler.bounds.lower),_73b=vt(_73a),_73c=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_739=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _73d=t.next("candlestick",[this.opt,run]),s=run.group,_73e=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _73f=t.addMixin(_73d,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_738.l+gap,y=dim.height-_738.b,open=vt(v.open),_740=vt(v.close),high=vt(v.high),low=vt(v.low);if(low>high){var tmp=high;high=low;low=tmp;}if(_739>=1){var hl={x1:_739/2,x2:_739/2,y1:y-high,y2:y-low},op={x1:0,x2:((_739/2)+((_73f.series.stroke.width||1)/2)),y1:y-open,y2:y-open},cl={x1:((_739/2)-((_73f.series.stroke.width||1)/2)),x2:_739,y1:y-_740,y2:y-_740};var _741=s.createGroup();_741.setTransform({dx:x,dy:0});var _742=_741.createGroup();_742.createLine(hl).setStroke(_73f.series.stroke);_742.createLine(op).setStroke(_73f.series.stroke);_742.createLine(cl).setStroke(_73f.series.stroke);run.dyn.stroke=_73f.series.stroke;if(_73c){var o={element:"candlestick",index:j,run:run,shape:_742,x:x,y:y-Math.max(open,_740),cx:_739/2,cy:(y-Math.max(open,_740))+(Math.max(open>_740?open-_740:_740-open,1)/2),width:_739,height:Math.max(open>_740?open-_740:_740-open,1),data:v};this._connectEvents(o);_73e[j]=o;}}if(this.animate){this._animateOHLC(_741,y-low,high-low);}}}this._eventSeries[run.name]=_73e;run.dirty=false;}this.dirty=false;return this;},_animateOHLC:function(_743,_744,_745){fx.animateTransform(lang.delegate({shape:_743,duration:1200,transform:[{name:"translate",start:[0,_744-(_744/_745)],end:[0,0]},{name:"scale",start:[1,1/_745],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojo/data/util/sorter":function(){define(["dojo/_base/lang"],function(lang){var _746=lang.getObject("dojo.data.util.sorter",true);_746.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_746.createSortFunction=function(_747,_748){var _749=[];function _74a(attr,dir,comp,s){return function(_74b,_74c){var a=s.getValue(_74b,attr);var b=s.getValue(_74c,attr);return dir*comp(a,b);};};var _74d;var map=_748.comparatorMap;var bc=_746.basicComparator;for(var i=0;i<_747.length;i++){_74d=_747[i];var attr=_74d.attribute;if(attr){var dir=(_74d.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_749.push(_74a(attr,dir,comp,_748));}}return function(rowA,rowB){var i=0;while(i<_749.length){var ret=_749[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _746;});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_74e,_74f){var _750=lang.getObject("dojo.colors",true);var _751=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_74e.fromRgb=function(_752,obj){var m=_752.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_74f.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _74e.fromArray(a,obj);}return _74e.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_751(m1,m2,H+1/3)*256,_751(m1,m2,H)*256,_751(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _74e.fromArray(a,obj);}}return null;};var _753=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_74e.prototype.sanitize=function(){var t=this;t.r=Math.round(_753(t.r,0,255));t.g=Math.round(_753(t.g,0,255));t.b=Math.round(_753(t.b,0,255));t.a=_753(t.a,0,1);return this;};_750.makeGrey=_74e.makeGrey=function(g,a){return _74e.fromArray([g,g,g,a]);};lang.mixin(_74e.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _74e;});},"dojox/lang/functional/reversed":function(){define("dojox/lang/functional/reversed",["dojo/_base/lang","dojo/_base/window","./lambda"],function(lang,win,df){lang.mixin(df,{filterRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t=[],v,i=a.length-1;for(;i>=0;--i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}return t;},forEachRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;f.call(o,a[i],i,a),--i){}},mapRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var n=a.length,t=new Array(n),i=n-1,j=0;for(;i>=0;t[j++]=f.call(o,a[i],i,a),--i){}return t;},everyRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(!f.call(o,a[i],i,a)){return false;}}return true;},someRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(f.call(o,a[i],i,a)){return true;}}return false;}});return df;});},"dojo/date/locale":function(){define(["../_base/kernel","../_base/lang","../_base/array","../date","../cldr/supplemental","../regexp","../string","../i18n!../cldr/nls/gregorian"],function(dojo,lang,_754,date,cldr,_755,_756,_757){lang.getObject("date.locale",true,dojo);function _758(_759,_75a,_75b,_75c){return _75c.replace(/([a-z])\1*/ig,function(_75d){var s,pad,c=_75d.charAt(0),l=_75d.length,_75e=["abbr","wide","narrow"];switch(c){case "G":s=_75a[(l<4)?"eraAbbr":"eraNames"][_759.getFullYear()<0?0:1];break;case "y":s=_759.getFullYear();switch(l){case 1:break;case 2:if(!_75b.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_759.getMonth()+1)/3);pad=true;break;case "M":var m=_759.getMonth();if(l<3){s=m+1;pad=true;}else{var _75f=["months","format",_75e[l-3]].join("-");s=_75a[_75f][m];}break;case "w":var _760=0;s=dojo.date.locale._getWeekOfYear(_759,_760);pad=true;break;case "d":s=_759.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(_759);pad=true;break;case "E":var d=_759.getDay();if(l<3){s=d+1;pad=true;}else{var _761=["days","format",_75e[l-3]].join("-");s=_75a[_761][d];}break;case "a":var _762=(_759.getHours()<12)?"am":"pm";s=_75b[_762]||_75a["dayPeriods-format-wide-"+_762];break;case "h":case "H":case "K":case "k":var h=_759.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_759.getMinutes();pad=true;break;case "s":s=_759.getSeconds();pad=true;break;case "S":s=Math.round(_759.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=dojo.date.locale._getZone(_759,true,_75b);if(s){break;}l=4;case "Z":var _763=dojo.date.locale._getZone(_759,false,_75b);var tz=[(_763<=0?"+":"-"),_756.pad(Math.floor(Math.abs(_763)/60),2),_756.pad(Math.abs(_763)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_75c);}if(pad){s=_756.pad(s,l);}return s;});};dojo.date.locale._getZone=function(_764,_765,_766){if(_765){return date.getTimezoneName(_764);}else{return _764.getTimezoneOffset();}};dojo.date.locale.format=function(_767,_768){_768=_768||{};var _769=dojo.i18n.normalizeLocale(_768.locale),_76a=_768.formatLength||"short",_76b=dojo.date.locale._getGregorianBundle(_769),str=[],_76c=lang.hitch(this,_758,_767,_76b,_768);if(_768.selector=="year"){return _76d(_76b["dateFormatItem-yyyy"]||"yyyy",_76c);}var _76e;if(_768.selector!="date"){_76e=_768.timePattern||_76b["timeFormat-"+_76a];if(_76e){str.push(_76d(_76e,_76c));}}if(_768.selector!="time"){_76e=_768.datePattern||_76b["dateFormat-"+_76a];if(_76e){str.push(_76d(_76e,_76c));}}return str.length==1?str[0]:_76b["dateTimeFormat-"+_76a].replace(/\{(\d+)\}/g,function(_76f,key){return str[key];});};dojo.date.locale.regexp=function(_770){return dojo.date.locale._parseInfo(_770).regexp;};dojo.date.locale._parseInfo=function(_771){_771=_771||{};var _772=dojo.i18n.normalizeLocale(_771.locale),_773=dojo.date.locale._getGregorianBundle(_772),_774=_771.formatLength||"short",_775=_771.datePattern||_773["dateFormat-"+_774],_776=_771.timePattern||_773["timeFormat-"+_774],_777;if(_771.selector=="date"){_777=_775;}else{if(_771.selector=="time"){_777=_776;}else{_777=_773["dateTimeFormat-"+_774].replace(/\{(\d+)\}/g,function(_778,key){return [_776,_775][key];});}}var _779=[],re=_76d(_777,lang.hitch(this,_77a,_779,_773,_771));return {regexp:re,tokens:_779,bundle:_773};};dojo.date.locale.parse=function(_77b,_77c){var _77d=/[\u200E\u200F\u202A\u202E]/g,info=dojo.date.locale._parseInfo(_77c),_77e=info.tokens,_77f=info.bundle,re=new RegExp("^"+info.regexp.replace(_77d,"")+"$",info.strict?"":"i"),_780=re.exec(_77b&&_77b.replace(_77d,""));if(!_780){return null;}var _781=["abbr","wide","narrow"],_782=[1970,0,1,0,0,0,0],amPm="",_783=dojo.every(_780,function(v,i){if(!i){return true;}var _784=_77e[i-1];var l=_784.length;switch(_784.charAt(0)){case "y":if(l!=2&&_77c.strict){_782[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_785=year.substring(0,2)*100,_786=Math.min(Number(year.substring(2,4))+20,99);_782[0]=(v<_786)?_785+v:_785-100+v;}else{if(_77c.strict){return false;}_782[0]=v;}}break;case "M":if(l>2){var _787=_77f["months-format-"+_781[l-3]].concat();if(!_77c.strict){v=v.replace(".","").toLowerCase();_787=dojo.map(_787,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_787,v);if(v==-1){return false;}}else{v--;}_782[1]=v;break;case "E":case "e":var days=_77f["days-format-"+_781[l-3]].concat();if(!_77c.strict){v=v.toLowerCase();days=dojo.map(days,function(d){return d.toLowerCase();});}v=dojo.indexOf(days,v);if(v==-1){return false;}break;case "D":_782[1]=0;case "d":_782[2]=v;break;case "a":var am=_77c.am||_77f["dayPeriods-format-wide-am"],pm=_77c.pm||_77f["dayPeriods-format-wide-pm"];if(!_77c.strict){var _788=/\./g;v=v.replace(_788,"").toLowerCase();am=am.replace(_788,"").toLowerCase();pm=pm.replace(_788,"").toLowerCase();}if(_77c.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_782[3]=v;break;case "m":_782[4]=v;break;case "s":_782[5]=v;break;case "S":_782[6]=v;}return true;});var _789=+_782[3];if(amPm==="p"&&_789<12){_782[3]=_789+12;}else{if(amPm==="a"&&_789==12){_782[3]=0;}}var _78a=new Date(_782[0],_782[1],_782[2],_782[3],_782[4],_782[5],_782[6]);if(_77c.strict){_78a.setFullYear(_782[0]);}var _78b=_77e.join(""),_78c=_78b.indexOf("d")!=-1,_78d=_78b.indexOf("M")!=-1;if(!_783||(_78d&&_78a.getMonth()>_782[1])||(_78c&&_78a.getDate()>_782[2])){return null;}if((_78d&&_78a.getMonth()<_782[1])||(_78c&&_78a.getDate()<_782[2])){_78a=date.add(_78a,"hour",1);}return _78a;};function _76d(_78e,_78f,_790,_791){var _792=function(x){return x;};_78f=_78f||_792;_790=_790||_792;_791=_791||_792;var _793=_78e.match(/(''|[^'])+/g),_794=_78e.charAt(0)=="'";dojo.forEach(_793,function(_795,i){if(!_795){_793[i]="";}else{_793[i]=(_794?_790:_78f)(_795.replace(/''/g,"'"));_794=!_794;}});return _791(_793.join(""));};function _77a(_796,_797,_798,_799){_799=_755.escapeString(_799);if(!_798.strict){_799=_799.replace(" a"," ?a");}return _799.replace(/([a-z])\1*/ig,function(_79a){var s,c=_79a.charAt(0),l=_79a.length,p2="",p3="";if(_798.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_798.am||_797["dayPeriods-format-wide-am"],pm=_798.pm||_797["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_798.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_796){_796.push(_79a);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _79b=[];dojo.date.locale.addCustomFormats=function(_79c,_79d){_79b.push({pkg:_79c,name:_79d});};dojo.date.locale._getGregorianBundle=function(_79e){var _79f={};dojo.forEach(_79b,function(desc){var _7a0=dojo.i18n.getLocalization(desc.pkg,desc.name,_79e);_79f=lang.mixin(_79f,_7a0);},this);return _79f;};dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(item,type,_7a1,_7a2){var _7a3,_7a4=dojo.date.locale._getGregorianBundle(_7a2),_7a5=[item,_7a1,type];if(_7a1=="standAlone"){var key=_7a5.join("-");_7a3=_7a4[key];if(_7a3[0]==1){_7a3=undefined;}}_7a5[1]="format";return (_7a3||_7a4[_7a5.join("-")]).concat();};dojo.date.locale.isWeekend=function(_7a6,_7a7){var _7a8=cldr.getWeekend(_7a7),day=(_7a6||new Date()).getDay();if(_7a8.end<_7a8.start){_7a8.end+=7;if(day<_7a8.start){day+=7;}}return day>=_7a8.start&&day<=_7a8.end;};dojo.date.locale._getDayOfYear=function(_7a9){return date.difference(new Date(_7a9.getFullYear(),0,1,_7a9.getHours()),_7a9)+1;};dojo.date.locale._getWeekOfYear=function(_7aa,_7ab){if(arguments.length==1){_7ab=0;}var _7ac=new Date(_7aa.getFullYear(),0,1).getDay(),adj=(_7ac-_7ab+7)%7,week=Math.floor((dojo.date.locale._getDayOfYear(_7aa)+adj-1)/7);if(_7ac==_7ab){week++;}return week;};return dojo.date.locale;});},"dojox/charting/Chart":function(){define("dojox/charting/Chart",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/html","dojo/dom","dojo/dom-geometry","dojo/dom-construct","dojo/_base/Color","dojo/_base/sniff","./Element","./Theme","./Series","./axis2d/common","dojox/gfx","dojox/lang/functional","dojox/lang/functional/fold","dojox/lang/functional/reversed"],function(lang,arr,_7ad,html,dom,_7ae,_7af,_7b0,has,_7b1,_7b2,_7b3,_7b4,g,func,_7b5,_7b6){var dc=dojox.charting,_7b7=func.lambda("item.clear()"),_7b8=func.lambda("item.purgeGroup()"),_7b9=func.lambda("item.destroy()"),_7ba=func.lambda("item.dirty = false"),_7bb=func.lambda("item.dirty = true"),_7bc=func.lambda("item.name");_7ad("dojox.charting.Chart",null,{constructor:function(node,_7bd){if(!_7bd){_7bd={};}this.margins=_7bd.margins?_7bd.margins:{l:10,t:10,r:10,b:10};this.stroke=_7bd.stroke;this.fill=_7bd.fill;this.delayInMs=_7bd.delayInMs||200;this.title=_7bd.title;this.titleGap=_7bd.titleGap;this.titlePos=_7bd.titlePos;this.titleFont=_7bd.titleFont;this.titleFontColor=_7bd.titleFontColor;this.chartTitle=null;this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=true;this.coords=null;this.node=dom.byId(node);var box=_7ae.getMarginBox(node);this.surface=g.createSurface(this.node,box.w||400,box.h||300);},destroy:function(){arr.forEach(this.series,_7b9);arr.forEach(this.stack,_7b9);func.forIn(this.axes,_7b9);if(this.chartTitle&&this.chartTitle.tagName){_7af.destroy(this.chartTitle);}this.surface.destroy();},getCoords:function(){return html.coords(this.node,true);},setTheme:function(_7be){this.theme=_7be.clone();this.dirty=true;return this;},addAxis:function(name,_7bf){var axis,_7c0=_7bf&&_7bf.type||"Default";if(typeof _7c0=="string"){if(!dc.axis2d||!dc.axis2d[_7c0]){throw Error("Can't find axis: "+_7c0+" - Check "+"require() dependencies.");}axis=new dc.axis2d[_7c0](this,_7bf);}else{axis=new _7c0(this,_7bf);}axis.name=name;axis.dirty=true;if(name in this.axes){this.axes[name].destroy();}this.axes[name]=axis;this.dirty=true;return this;},getAxis:function(name){return this.axes[name];},removeAxis:function(name){if(name in this.axes){this.axes[name].destroy();delete this.axes[name];this.dirty=true;}return this;},addPlot:function(name,_7c1){var plot,_7c2=_7c1&&_7c1.type||"Default";if(typeof _7c2=="string"){if(!dc.plot2d||!dc.plot2d[_7c2]){throw Error("Can't find plot: "+_7c2+" - didn't you forget to dojo"+".require() it?");}plot=new dc.plot2d[_7c2](this,_7c1);}else{plot=new _7c2(this,_7c1);}plot.name=name;plot.dirty=true;if(name in this.plots){this.stack[this.plots[name]].destroy();this.stack[this.plots[name]]=plot;}else{this.plots[name]=this.stack.length;this.stack.push(plot);}this.dirty=true;return this;},getPlot:function(name){return this.stack[this.plots[name]];},removePlot:function(name){if(name in this.plots){var _7c3=this.plots[name];delete this.plots[name];this.stack[_7c3].destroy();this.stack.splice(_7c3,1);func.forIn(this.plots,function(idx,name,_7c4){if(idx>_7c3){_7c4[name]=idx-1;}});var ns=arr.filter(this.series,function(run){return run.plot!=name;});if(ns.length<this.series.length){arr.forEach(this.series,function(run){if(run.plot==name){run.destroy();}});this.runs={};arr.forEach(ns,function(run,_7c5){this.runs[run.plot]=_7c5;},this);this.series=ns;}this.dirty=true;}return this;},getPlotOrder:function(){return func.map(this.stack,_7bc);},setPlotOrder:function(_7c6){var _7c7={},_7c8=func.filter(_7c6,function(name){if(!(name in this.plots)||(name in _7c7)){return false;}_7c7[name]=1;return true;},this);if(_7c8.length<this.stack.length){func.forEach(this.stack,function(plot){var name=plot.name;if(!(name in _7c7)){_7c8.push(name);}});}var _7c9=func.map(_7c8,function(name){return this.stack[this.plots[name]];},this);func.forEach(_7c9,function(plot,i){this.plots[plot.name]=i;},this);this.stack=_7c9;this.dirty=true;return this;},movePlotToFront:function(name){if(name in this.plots){var _7ca=this.plots[name];if(_7ca){var _7cb=this.getPlotOrder();_7cb.splice(_7ca,1);_7cb.unshift(name);return this.setPlotOrder(_7cb);}}return this;},movePlotToBack:function(name){if(name in this.plots){var _7cc=this.plots[name];if(_7cc<this.stack.length-1){var _7cd=this.getPlotOrder();_7cd.splice(_7cc,1);_7cd.push(name);return this.setPlotOrder(_7cd);}}return this;},addSeries:function(name,data,_7ce){var run=new _7b3(this,data,_7ce);run.name=name;if(name in this.runs){this.series[this.runs[name]].destroy();this.series[this.runs[name]]=run;}else{this.runs[name]=this.series.length;this.series.push(run);}this.dirty=true;if(!("ymin" in run)&&"min" in run){run.ymin=run.min;}if(!("ymax" in run)&&"max" in run){run.ymax=run.max;}return this;},getSeries:function(name){return this.series[this.runs[name]];},removeSeries:function(name){if(name in this.runs){var _7cf=this.runs[name];delete this.runs[name];this.series[_7cf].destroy();this.series.splice(_7cf,1);func.forIn(this.runs,function(idx,name,runs){if(idx>_7cf){runs[name]=idx-1;}});this.dirty=true;}return this;},updateSeries:function(name,data){if(name in this.runs){var run=this.series[this.runs[name]];run.update(data);this._invalidateDependentPlots(run.plot,false);this._invalidateDependentPlots(run.plot,true);}return this;},getSeriesOrder:function(_7d0){return func.map(func.filter(this.series,function(run){return run.plot==_7d0;}),_7bc);},setSeriesOrder:function(_7d1){var _7d2,_7d3={},_7d4=func.filter(_7d1,function(name){if(!(name in this.runs)||(name in _7d3)){return false;}var run=this.series[this.runs[name]];if(_7d2){if(run.plot!=_7d2){return false;}}else{_7d2=run.plot;}_7d3[name]=1;return true;},this);func.forEach(this.series,function(run){var name=run.name;if(!(name in _7d3)&&run.plot==_7d2){_7d4.push(name);}});var _7d5=func.map(_7d4,function(name){return this.series[this.runs[name]];},this);this.series=_7d5.concat(func.filter(this.series,function(run){return run.plot!=_7d2;}));func.forEach(this.series,function(run,i){this.runs[run.name]=i;},this);this.dirty=true;return this;},moveSeriesToFront:function(name){if(name in this.runs){var _7d6=this.runs[name],_7d7=this.getSeriesOrder(this.series[_7d6].plot);if(name!=_7d7[0]){_7d7.splice(_7d6,1);_7d7.unshift(name);return this.setSeriesOrder(_7d7);}}return this;},moveSeriesToBack:function(name){if(name in this.runs){var _7d8=this.runs[name],_7d9=this.getSeriesOrder(this.series[_7d8].plot);if(name!=_7d9[_7d9.length-1]){_7d9.splice(_7d8,1);_7d9.push(name);return this.setSeriesOrder(_7d9);}}return this;},resize:function(_7da,_7db){var box;switch(arguments.length){case 1:box=lang.mixin({},_7da);_7ae.setMarginBox(this.node,box);break;case 2:box={w:_7da,h:_7db};_7ae.setMarginBox(this.node,box);break;}box=_7ae.getMarginBox(this.node);var d=this.surface.getDimensions();if(d.width!=box.w||d.height!=box.h){this.surface.setDimensions(box.w,box.h);this.dirty=true;return this.render();}else{return this;}},getGeometry:function(){var ret={};func.forIn(this.axes,function(axis){if(axis.initialized()){ret[axis.name]={name:axis.name,vertical:axis.vertical,scaler:axis.scaler,ticks:axis.ticks};}});return ret;},setAxisWindow:function(name,_7dc,_7dd,zoom){var axis=this.axes[name];if(axis){axis.setWindow(_7dc,_7dd);arr.forEach(this.stack,function(plot){if(plot.hAxis==name||plot.vAxis==name){plot.zoom=zoom;}});}return this;},setWindow:function(sx,sy,dx,dy,zoom){if(!("plotArea" in this)){this.calculateGeometry();}func.forIn(this.axes,function(axis){var _7de,_7df,_7e0=axis.getScaler().bounds,s=_7e0.span/(_7e0.upper-_7e0.lower);if(axis.vertical){_7de=sy;_7df=dy/s/_7de;}else{_7de=sx;_7df=dx/s/_7de;}axis.setWindow(_7de,_7df);});arr.forEach(this.stack,function(plot){plot.zoom=zoom;});return this;},zoomIn:function(name,_7e1){var axis=this.axes[name];if(axis){var _7e2,_7e3,_7e4=axis.getScaler().bounds;var _7e5=Math.min(_7e1[0],_7e1[1]);var _7e6=Math.max(_7e1[0],_7e1[1]);_7e5=_7e1[0]<_7e4.lower?_7e4.lower:_7e5;_7e6=_7e1[1]>_7e4.upper?_7e4.upper:_7e6;_7e2=(_7e4.upper-_7e4.lower)/(_7e6-_7e5);_7e3=_7e5-_7e4.lower;this.setAxisWindow(name,_7e2,_7e3);this.render();}},calculateGeometry:function(){if(this.dirty){return this.fullGeometry();}var _7e7=arr.filter(this.stack,function(plot){return plot.dirty||(plot.hAxis&&this.axes[plot.hAxis].dirty)||(plot.vAxis&&this.axes[plot.vAxis].dirty);},this);_7e8(_7e7,this.plotArea);return this;},fullGeometry:function(){this._makeDirty();arr.forEach(this.stack,_7b7);if(!this.theme){this.setTheme(new _7b2(dojox.charting._def));}arr.forEach(this.series,function(run){if(!(run.plot in this.plots)){if(!dc.plot2d||!dc.plot2d.Default){throw Error("Can't find plot: Default - didn't you forget to dojo"+".require() it?");}var plot=new dc.plot2d.Default(this,{});plot.name=run.plot;this.plots[run.plot]=this.stack.length;this.stack.push(plot);}this.stack[this.plots[run.plot]].addSeries(run);},this);arr.forEach(this.stack,function(plot){if(plot.hAxis){plot.setAxis(this.axes[plot.hAxis]);}if(plot.vAxis){plot.setAxis(this.axes[plot.vAxis]);}},this);var dim=this.dim=this.surface.getDimensions();dim.width=g.normalizedLength(dim.width);dim.height=g.normalizedLength(dim.height);func.forIn(this.axes,_7b7);_7e8(this.stack,dim);var _7e9=this.offsets={l:0,r:0,t:0,b:0};func.forIn(this.axes,function(axis){func.forIn(axis.getOffsets(),function(o,i){_7e9[i]+=o;});});if(this.title){this.titleGap=(this.titleGap==0)?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var _7ea=g.normalizedLength(g.splitFontString(this.titleFont).size);_7e9[this.titlePos=="top"?"t":"b"]+=(_7ea+this.titleGap);}func.forIn(this.margins,function(o,i){_7e9[i]+=o;});this.plotArea={width:dim.width-_7e9.l-_7e9.r,height:dim.height-_7e9.t-_7e9.b};func.forIn(this.axes,_7b7);_7e8(this.stack,this.plotArea);return this;},render:function(){if(this.theme){this.theme.clear();}if(this.dirty){return this.fullRender();}this.calculateGeometry();func.forEachRev(this.stack,function(plot){plot.render(this.dim,this.offsets);},this);func.forIn(this.axes,function(axis){axis.render(this.dim,this.offsets);},this);this._makeClean();if(this.surface.render){this.surface.render();}return this;},fullRender:function(){this.fullGeometry();var _7eb=this.offsets,dim=this.dim,rect;arr.forEach(this.series,_7b8);func.forIn(this.axes,_7b8);arr.forEach(this.stack,_7b8);if(this.chartTitle&&this.chartTitle.tagName){_7af.destroy(this.chartTitle);}this.surface.clear();this.chartTitle=null;var t=this.theme,fill=t.plotarea&&t.plotarea.fill,_7ec=t.plotarea&&t.plotarea.stroke,w=Math.max(0,dim.width-_7eb.l-_7eb.r),h=Math.max(0,dim.height-_7eb.t-_7eb.b),rect={x:_7eb.l-1,y:_7eb.t-1,width:w+2,height:h+2};if(fill){fill=_7b1.prototype._shapeFill(_7b1.prototype._plotFill(fill,dim,_7eb),rect);this.surface.createRect(rect).setFill(fill);}if(_7ec){this.surface.createRect({x:_7eb.l,y:_7eb.t,width:w+1,height:h+1}).setStroke(_7ec);}func.foldr(this.stack,function(z,plot){return plot.render(dim,_7eb),0;},0);fill=this.fill!==undefined?this.fill:(t.chart&&t.chart.fill);_7ec=this.stroke!==undefined?this.stroke:(t.chart&&t.chart.stroke);if(fill=="inherit"){var node=this.node,fill=new _7b0(html.style(node,"backgroundColor"));while(fill.a==0&&node!=document.documentElement){fill=new _7b0(html.style(node,"backgroundColor"));node=node.parentNode;}}if(fill){fill=_7b1.prototype._plotFill(fill,dim,_7eb);if(_7eb.l){rect={width:_7eb.l,height:dim.height+1};this.surface.createRect(rect).setFill(_7b1.prototype._shapeFill(fill,rect));}if(_7eb.r){rect={x:dim.width-_7eb.r,width:_7eb.r+1,height:dim.height+2};this.surface.createRect(rect).setFill(_7b1.prototype._shapeFill(fill,rect));}if(_7eb.t){rect={width:dim.width+1,height:_7eb.t};this.surface.createRect(rect).setFill(_7b1.prototype._shapeFill(fill,rect));}if(_7eb.b){rect={y:dim.height-_7eb.b,width:dim.width+1,height:_7eb.b+2};this.surface.createRect(rect).setFill(_7b1.prototype._shapeFill(fill,rect));}}if(_7ec){this.surface.createRect({width:dim.width-1,height:dim.height-1}).setStroke(_7ec);}if(this.title){var _7ed=(g.renderer=="canvas"),_7ee=_7ed||!has("ie")&&!has("opera")?"html":"gfx",_7ef=g.normalizedLength(g.splitFontString(this.titleFont).size);this.chartTitle=_7b4.createText[_7ee](this,this.surface,dim.width/2,this.titlePos=="top"?_7ef+this.margins.t:dim.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);}func.forIn(this.axes,function(axis){axis.render(dim,_7eb);});this._makeClean();if(this.surface.render){this.surface.render();}return this;},delayedRender:function(){if(!this._delayedRenderHandle){this._delayedRenderHandle=setTimeout(lang.hitch(this,function(){clearTimeout(this._delayedRenderHandle);this._delayedRenderHandle=null;this.render();}),this.delayInMs);}return this;},connectToPlot:function(name,_7f0,_7f1){return name in this.plots?this.stack[this.plots[name]].connect(_7f0,_7f1):null;},fireEvent:function(_7f2,_7f3,_7f4){if(_7f2 in this.runs){var _7f5=this.series[this.runs[_7f2]].plot;if(_7f5 in this.plots){var plot=this.stack[this.plots[_7f5]];if(plot){plot.fireEvent(_7f2,_7f3,_7f4);}}}return this;},_makeClean:function(){arr.forEach(this.axes,_7ba);arr.forEach(this.stack,_7ba);arr.forEach(this.series,_7ba);this.dirty=false;},_makeDirty:function(){arr.forEach(this.axes,_7bb);arr.forEach(this.stack,_7bb);arr.forEach(this.series,_7bb);this.dirty=true;},_invalidateDependentPlots:function(_7f6,_7f7){if(_7f6 in this.plots){var plot=this.stack[this.plots[_7f6]],axis,_7f8=_7f7?"vAxis":"hAxis";if(plot[_7f8]){axis=this.axes[plot[_7f8]];if(axis&&axis.dependOnData()){axis.dirty=true;arr.forEach(this.stack,function(p){if(p[_7f8]&&p[_7f8]==plot[_7f8]){p.dirty=true;}});}}else{plot.dirty=true;}}}});function _7f9(_7fa){return {min:_7fa.hmin,max:_7fa.hmax};};function _7fb(_7fc){return {min:_7fc.vmin,max:_7fc.vmax};};function _7fd(_7fe,h){_7fe.hmin=h.min;_7fe.hmax=h.max;};function _7ff(_800,v){_800.vmin=v.min;_800.vmax=v.max;};function _801(_802,_803){if(_802&&_803){_802.min=Math.min(_802.min,_803.min);_802.max=Math.max(_802.max,_803.max);}return _802||_803;};function _7e8(_804,_805){var _806={},axes={};arr.forEach(_804,function(plot){var _807=_806[plot.name]=plot.getSeriesStats();if(plot.hAxis){axes[plot.hAxis]=_801(axes[plot.hAxis],_7f9(_807));}if(plot.vAxis){axes[plot.vAxis]=_801(axes[plot.vAxis],_7fb(_807));}});arr.forEach(_804,function(plot){var _808=_806[plot.name];if(plot.hAxis){_7fd(_808,axes[plot.hAxis]);}if(plot.vAxis){_7ff(_808,axes[plot.vAxis]);}plot.initializeScalers(_805,_808);});};return dojox.charting.Chart;});},"dojox/charting/plot2d/Candlesticks":function(){define("dojox/charting/plot2d/Candlesticks",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_809,arr,Base,dc,df,dfr,du,fx){var _80a=dfr.lambda("item.purgeGroup()");return _809("dojox.charting.plot2d.Candlesticks",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_80b,_80c){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_80c);du.updateWithPattern(this.opt,_80c,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_80d){var _80e=lang.delegate(dc.defaultStats);for(var i=0;i<_80d.length;i++){var run=_80d[i];if(!run.data.length){continue;}var _80f=_80e.vmin,_810=_80e.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_80e.hmin=Math.min(_80e.hmin,x);_80e.hmax=Math.max(_80e.hmax,x);_80e.vmin=Math.min(_80e.vmin,val.open,val.close,val.high,val.low);_80e.vmax=Math.max(_80e.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_80e.vmin=Math.min(_80f,run.ymin);}if("ymax" in run){_80e.vmax=Math.max(_810,run.ymax);}}return _80e;},getSeriesStats:function(){var _811=this.collectStats(this.series);_811.hmin-=0.5;_811.hmax+=0.5;return _811;},render:function(dim,_812){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_812);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_80a);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_813,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_814=Math.max(0,this._vScaler.bounds.lower),_815=vt(_814),_816=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_813=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _817=t.next("candlestick",[this.opt,run]),s=run.group,_818=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _819=t.addMixin(_817,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_812.l+gap,y=dim.height-_812.b,open=vt(v.open),_81a=vt(v.close),high=vt(v.high),low=vt(v.low);if("mid" in v){var mid=vt(v.mid);}if(low>high){var tmp=high;high=low;low=tmp;}if(_813>=1){var _81b=open>_81a;var line={x1:_813/2,x2:_813/2,y1:y-high,y2:y-low},rect={x:0,y:y-Math.max(open,_81a),width:_813,height:Math.max(_81b?open-_81a:_81a-open,1)};var _81c=s.createGroup();_81c.setTransform({dx:x,dy:0});var _81d=_81c.createGroup();_81d.createLine(line).setStroke(_819.series.stroke);_81d.createRect(rect).setStroke(_819.series.stroke).setFill(_81b?_819.series.fill:"white");if("mid" in v){_81d.createLine({x1:(_819.series.stroke.width||1),x2:_813-(_819.series.stroke.width||1),y1:y-mid,y2:y-mid}).setStroke(_81b?"white":_819.series.stroke);}run.dyn.fill=_819.series.fill;run.dyn.stroke=_819.series.stroke;if(_816){var o={element:"candlestick",index:j,run:run,shape:_81d,x:x,y:y-Math.max(open,_81a),cx:_813/2,cy:(y-Math.max(open,_81a))+(Math.max(_81b?open-_81a:_81a-open,1)/2),width:_813,height:Math.max(_81b?open-_81a:_81a-open,1),data:v};this._connectEvents(o);_818[j]=o;}}if(this.animate){this._animateCandlesticks(_81c,y-low,high-low);}}}this._eventSeries[run.name]=_818;run.dirty=false;}this.dirty=false;return this;},_animateCandlesticks:function(_81e,_81f,_820){fx.animateTransform(lang.delegate({shape:_81e,duration:1200,transform:[{name:"translate",start:[0,_81f-(_81f/_820)],end:[0,0]},{name:"scale",start:[1,1/_820],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/axis2d/Default":function(){define("dojox/charting/axis2d/Default",["dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/dom-geometry","./Invisible","../scaler/common","../scaler/linear","./common","dojox/gfx","dojox/lang/utils"],function(lang,arr,has,_821,_822,html,_823,_824,_825,lin,_826,g,du){var _827=4,_828=45;return _821("dojox.charting.axis2d.Default",_824,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0,htmlLabels:true,enableCache:false},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(_829,_82a){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_82a);du.updateWithPattern(this.opt,_82a,this.optionalParams);if(this.opt.enableCache){this._textFreePool=[];this._lineFreePool=[];this._textUsePool=[];this._lineUsePool=[];}},getOffsets:function(){var s=this.scaler,_82b={l:0,r:0,t:0,b:0};if(!s){return _82b;}var o=this.opt,_82c=0,a,b,c,d,gl=_825.getNumericLabel,_82d=0,ma=s.major,mi=s.minor,ta=this.chart.theme.axis,_82e=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_82f=o.titleFont||(ta.tick&&ta.tick.titleFont),_830=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_831=this.chart.theme.getTick("major",o),_832=this.chart.theme.getTick("minor",o),size=_82e?g.normalizedLength(g.splitFontString(_82e).size):0,_833=_82f?g.normalizedLength(g.splitFontString(_82f).size):0,_834=o.rotation%360,_835=o.leftBottom,cosr=Math.abs(Math.cos(_834*Math.PI/180)),sinr=Math.abs(Math.sin(_834*Math.PI/180));this.trailingSymbol=(o.trailingSymbol===undefined||o.trailingSymbol===null)?this.trailingSymbol:o.trailingSymbol;if(_834<0){_834+=360;}if(size){if(this.labels){_82c=this._groupLabelWidth(this.labels,_82e,o.maxLabelCharCount);}else{_82c=this._groupLabelWidth([gl(ma.start,ma.prec,o),gl(ma.start+ma.count*ma.tick,ma.prec,o),gl(mi.start,mi.prec,o),gl(mi.start+mi.count*mi.tick,mi.prec,o)],_82e,o.maxLabelCharCount);}_82c=o.maxLabelSize?Math.min(o.maxLabelSize,_82c):_82c;if(this.vertical){var side=_835?"l":"r";switch(_834){case 0:case 180:_82b[side]=_82c;_82b.t=_82b.b=size/2;break;case 90:case 270:_82b[side]=size;_82b.t=_82b.b=_82c/2;break;default:if(_834<=_828||(180<_834&&_834<=(180+_828))){_82b[side]=size*sinr/2+_82c*cosr;_82b[_835?"t":"b"]=size*cosr/2+_82c*sinr;_82b[_835?"b":"t"]=size*cosr/2;}else{if(_834>(360-_828)||(180>_834&&_834>(180-_828))){_82b[side]=size*sinr/2+_82c*cosr;_82b[_835?"b":"t"]=size*cosr/2+_82c*sinr;_82b[_835?"t":"b"]=size*cosr/2;}else{if(_834<90||(180<_834&&_834<270)){_82b[side]=size*sinr+_82c*cosr;_82b[_835?"t":"b"]=size*cosr+_82c*sinr;}else{_82b[side]=size*sinr+_82c*cosr;_82b[_835?"b":"t"]=size*cosr+_82c*sinr;}}}break;}_82b[side]+=_827+Math.max(_831.length,_832.length)+(o.title?(_833+_830):0);}else{var side=_835?"b":"t";switch(_834){case 0:case 180:_82b[side]=size;_82b.l=_82b.r=_82c/2;break;case 90:case 270:_82b[side]=_82c;_82b.l=_82b.r=size/2;break;default:if((90-_828)<=_834&&_834<=90||(270-_828)<=_834&&_834<=270){_82b[side]=size*sinr/2+_82c*cosr;_82b[_835?"r":"l"]=size*cosr/2+_82c*sinr;_82b[_835?"l":"r"]=size*cosr/2;}else{if(90<=_834&&_834<=(90+_828)||270<=_834&&_834<=(270+_828)){_82b[side]=size*sinr/2+_82c*cosr;_82b[_835?"l":"r"]=size*cosr/2+_82c*sinr;_82b[_835?"r":"l"]=size*cosr/2;}else{if(_834<_828||(180<_834&&_834<(180-_828))){_82b[side]=size*sinr+_82c*cosr;_82b[_835?"r":"l"]=size*cosr+_82c*sinr;}else{_82b[side]=size*sinr+_82c*cosr;_82b[_835?"l":"r"]=size*cosr+_82c*sinr;}}}break;}_82b[side]+=_827+Math.max(_831.length,_832.length)+(o.title?(_833+_830):0);}}if(_82c){this._cachedLabelWidth=_82c;}return _82b;},cleanGroup:function(_836){if(this.opt.enableCache&&this.group){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];this._textFreePool=this._textFreePool.concat(this._textUsePool);this._textUsePool=[];}this.inherited(arguments);},createText:function(_837,_838,x,y,_839,_83a,font,_83b,_83c){if(!this.opt.enableCache||_837=="html"){return _826.createText[_837](this.chart,_838,x,y,_839,_83a,font,_83b,_83c);}var text;if(this._textFreePool.length>0){text=this._textFreePool.pop();text.setShape({x:x,y:y,text:_83a,align:_839});_838.add(text);}else{text=_826.createText[_837](this.chart,_838,x,y,_839,_83a,font,_83b,_83c);}this._textUsePool.push(text);return text;},createLine:function(_83d,_83e){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_83e);_83d.add(line);}else{line=_83d.createLine(_83e);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_83f){if(!this.dirty){return this;}var o=this.opt,ta=this.chart.theme.axis,_840=o.leftBottom,_841=o.rotation%360,_842,stop,_843,_844=0,_845,_846,_847,_848,_849,_84a,_84b=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_84c=o.titleFont||(ta.tick&&ta.tick.titleFont),_84d=o.fontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"black",_84e=o.titleFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_84f=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_850=o.titleOrientation||(ta.tick&&ta.tick.titleOrientation)||"axis",_851=this.chart.theme.getTick("major",o),_852=this.chart.theme.getTick("minor",o),_853=this.chart.theme.getTick("micro",o),_854=Math.max(_851.length,_852.length,_853.length),_855="stroke" in o?o.stroke:ta.stroke,size=_84b?g.normalizedLength(g.splitFontString(_84b).size):0,cosr=Math.abs(Math.cos(_841*Math.PI/180)),sinr=Math.abs(Math.sin(_841*Math.PI/180)),_856=_84c?g.normalizedLength(g.splitFontString(_84c).size):0;if(_841<0){_841+=360;}if(this.vertical){_842={y:dim.height-_83f.b};stop={y:_83f.t};_843={y:(dim.height-_83f.b+_83f.t)/2};_845=size*sinr+(this._cachedLabelWidth||0)*cosr+_827+Math.max(_851.length,_852.length)+_856+_84f;_846={x:0,y:-1};_849={x:0,y:0};_847={x:1,y:0};_848={x:_827,y:0};switch(_841){case 0:_84a="end";_849.y=size*0.4;break;case 90:_84a="middle";_849.x=-size;break;case 180:_84a="start";_849.y=-size*0.4;break;case 270:_84a="middle";break;default:if(_841<_828){_84a="end";_849.y=size*0.4;}else{if(_841<90){_84a="end";_849.y=size*0.4;}else{if(_841<(180-_828)){_84a="start";}else{if(_841<(180+_828)){_84a="start";_849.y=-size*0.4;}else{if(_841<270){_84a="start";_849.x=_840?0:size*0.4;}else{if(_841<(360-_828)){_84a="end";_849.x=_840?0:size*0.4;}else{_84a="end";_849.y=size*0.4;}}}}}}}if(_840){_842.x=stop.x=_83f.l;_844=(_850&&_850=="away")?90:270;_843.x=_83f.l-_845+(_844==270?_856:0);_847.x=-1;_848.x=-_848.x;}else{_842.x=stop.x=dim.width-_83f.r;_844=(_850&&_850=="axis")?90:270;_843.x=dim.width-_83f.r+_845-(_844==270?0:_856);switch(_84a){case "start":_84a="end";break;case "end":_84a="start";break;case "middle":_849.x+=size;break;}}}else{_842={x:_83f.l};stop={x:dim.width-_83f.r};_843={x:(dim.width-_83f.r+_83f.l)/2};_845=size*cosr+(this._cachedLabelWidth||0)*sinr+_827+Math.max(_851.length,_852.length)+_856+_84f;_846={x:1,y:0};_849={x:0,y:0};_847={x:0,y:1};_848={x:0,y:_827};switch(_841){case 0:_84a="middle";_849.y=size;break;case 90:_84a="start";_849.x=-size*0.4;break;case 180:_84a="middle";break;case 270:_84a="end";_849.x=size*0.4;break;default:if(_841<(90-_828)){_84a="start";_849.y=_840?size:0;}else{if(_841<(90+_828)){_84a="start";_849.x=-size*0.4;}else{if(_841<180){_84a="start";_849.y=_840?0:-size;}else{if(_841<(270-_828)){_84a="end";_849.y=_840?0:-size;}else{if(_841<(270+_828)){_84a="end";_849.y=_840?size*0.4:0;}else{_84a="end";_849.y=_840?size:0;}}}}}}if(_840){_842.y=stop.y=dim.height-_83f.b;_844=(_850&&_850=="axis")?180:0;_843.y=dim.height-_83f.b+_845-(_844?_856:0);}else{_842.y=stop.y=_83f.t;_844=(_850&&_850=="away")?180:0;_843.y=_83f.t-_845+(_844?0:_856);_847.y=-1;_848.y=-_848.y;switch(_84a){case "start":_84a="end";break;case "end":_84a="start";break;case "middle":_849.y-=size;break;}}}this.cleanGroup();try{var s=this.group,c=this.scaler,t=this.ticks,_857,f=lin.getTransformerFromModel(this.scaler),_858=(!o.title||!_844)&&!_841&&this.opt.htmlLabels&&!has("ie")&&!has("opera")?"html":"gfx",dx=_847.x*_851.length,dy=_847.y*_851.length;s.createLine({x1:_842.x,y1:_842.y,x2:stop.x,y2:stop.y}).setStroke(_855);if(o.title){var _859=_826.createText[_858](this.chart,s,_843.x,_843.y,"middle",o.title,_84c,_84e);if(_858=="html"){this.htmlElements.push(_859);}else{_859.setTransform(g.matrix.rotategAt(_844,_843.x,_843.y));}}if(t==null){this.dirty=false;return this;}arr.forEach(t.major,function(tick){var _85a=f(tick.value),elem,x=_842.x+_846.x*_85a,y=_842.y+_846.y*_85a;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_851);if(tick.label){var _85b=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_84b,o.maxLabelCharCount):{text:tick.label,truncated:false};_85b=o.maxLabelSize?this.getTextWithLimitLength(_85b.text,_84b,o.maxLabelSize,_85b.truncated):_85b;elem=this.createText(_858,s,x+dx+_848.x+(_841?0:_849.x),y+dy+_848.y+(_841?0:_849.y),_84a,_85b.text,_84b,_84d);if(this.chart.truncateBidi&&_85b.truncated){this.chart.truncateBidi(elem,tick.label,_858);}_85b.truncated&&this.labelTooltip(elem,this.chart,tick.label,_85b.text,_84b,_858);if(_858=="html"){this.htmlElements.push(elem);}else{if(_841){elem.setTransform([{dx:_849.x,dy:_849.y},g.matrix.rotategAt(_841,x+dx+_848.x,y+dy+_848.y)]);}}}},this);dx=_847.x*_852.length;dy=_847.y*_852.length;_857=c.minMinorStep<=c.minor.tick*c.bounds.scale;arr.forEach(t.minor,function(tick){var _85c=f(tick.value),elem,x=_842.x+_846.x*_85c,y=_842.y+_846.y*_85c;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_852);if(_857&&tick.label){var _85d=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_84b,o.maxLabelCharCount):{text:tick.label,truncated:false};_85d=o.maxLabelSize?this.getTextWithLimitLength(_85d.text,_84b,o.maxLabelSize,_85d.truncated):_85d;elem=this.createText(_858,s,x+dx+_848.x+(_841?0:_849.x),y+dy+_848.y+(_841?0:_849.y),_84a,_85d.text,_84b,_84d);if(this.chart.getTextDir&&_85d.truncated){this.chart.truncateBidi(elem,tick.label,_858);}_85d.truncated&&this.labelTooltip(elem,this.chart,tick.label,_85d.text,_84b,_858);if(_858=="html"){this.htmlElements.push(elem);}else{if(_841){elem.setTransform([{dx:_849.x,dy:_849.y},g.matrix.rotategAt(_841,x+dx+_848.x,y+dy+_848.y)]);}}}},this);dx=_847.x*_853.length;dy=_847.y*_853.length;arr.forEach(t.micro,function(tick){var _85e=f(tick.value),elem,x=_842.x+_846.x*_85e,y=_842.y+_846.y*_85e;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_853);},this);}catch(e){}this.dirty=false;return this;},labelTooltip:function(elem,_85f,_860,_861,font,_862){var _863=["dijit/Tooltip"];var _864={type:"rect"},_865=["above","below"],_866=g._base._getTextBox(_861,{font:font}).w||0,_867=font?g.normalizedLength(g.splitFontString(font).size):0;if(_862=="html"){lang.mixin(_864,html.coords(elem.firstChild,true));_864.width=Math.ceil(_866);_864.height=Math.ceil(_867);this._events.push({shape:dojo,handle:_822.connect(elem.firstChild,"onmouseover",this,function(e){require(_863,function(_868){_868.show(_860,_864,_865);});})});this._events.push({shape:dojo,handle:_822.connect(elem.firstChild,"onmouseout",this,function(e){require(_863,function(_869){_869.hide(_864);});})});}else{var shp=elem.getShape(),lt=html.coords(_85f.node,true);_864=lang.mixin(_864,{x:shp.x-_866/2,y:shp.y});_864.x+=lt.x;_864.y+=lt.y;_864.x=Math.round(_864.x);_864.y=Math.round(_864.y);_864.width=Math.ceil(_866);_864.height=Math.ceil(_867);this._events.push({shape:elem,handle:elem.connect("onmouseenter",this,function(e){require(_863,function(_86a){_86a.show(_860,_864,_865);});})});this._events.push({shape:elem,handle:elem.connect("onmouseleave",this,function(e){require(_863,function(_86b){_86b.hide(_864);});})});}}});});},"dojox/charting/plot2d/Scatter":function(){define("dojox/charting/plot2d/Scatter",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(lang,arr,_86c,Base,dc,df,dfr,du,fx,_86d){var _86e=dfr.lambda("item.purgeGroup()");return _86c("dojox.charting.plot2d.Scatter",Base,{defaultParams:{hAxis:"x",vAxis:"y",shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_86f,_870){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_870);du.updateWithPattern(this.opt,_870,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_871){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_871);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_86e);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_872=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}var _873=t.next("marker",[this.opt,run]),s=run.group,_874,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){_874=arr.map(run.data,function(v,i){return {x:ht(i+1)+_871.l,y:dim.height-_871.b-vt(v)};},this);}else{_874=arr.map(run.data,function(v,i){return {x:ht(v.x)+_871.l,y:dim.height-_871.b-vt(v.y)};},this);}var _875=new Array(_874.length),_876=new Array(_874.length),_877=new Array(_874.length);arr.forEach(_874,function(c,i){var _878=typeof run.data[i]=="number"?t.post(_873,"marker"):t.addMixin(_873,"marker",run.data[i],true),path="M"+c.x+" "+c.y+" "+_878.symbol;if(_878.marker.shadow){_875[i]=s.createPath("M"+(c.x+_878.marker.shadow.dx)+" "+(c.y+_878.marker.shadow.dy)+" "+_878.symbol).setStroke(_878.marker.shadow).setFill(_878.marker.shadow.color);if(this.animate){this._animateScatter(_875[i],dim.height-_871.b);}}if(_878.marker.outline){var _879=dc.makeStroke(_878.marker.outline);_879.width=2*_879.width+_878.marker.stroke.width;_877[i]=s.createPath(path).setStroke(_879);if(this.animate){this._animateScatter(_877[i],dim.height-_871.b);}}var _87a=dc.makeStroke(_878.marker.stroke),fill=this._plotFill(_878.marker.fill,dim,_871);if(fill&&(fill.type==="linear"||fill.type=="radial")){var _87b=_86d.getColor(fill,{x:c.x,y:c.y});if(_87a){_87a.color=_87b;}_876[i]=s.createPath(path).setStroke(_87a).setFill(_87b);}else{_876[i]=s.createPath(path).setStroke(_87a).setFill(fill);}if(this.animate){this._animateScatter(_876[i],dim.height-_871.b);}},this);if(_876.length){run.dyn.stroke=_876[_876.length-1].getStroke();run.dyn.fill=_876[_876.length-1].getFill();}if(_872){var _87c=new Array(_876.length);arr.forEach(_876,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_877&&_877[i]||null,shadow:_875&&_875[i]||null,cx:_874[i].x,cy:_874[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(o);_87c[i]=o;},this);this._eventSeries[run.name]=_87c;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateScatter:function(_87d,_87e){fx.animateTransform(lang.delegate({shape:_87d,duration:1200,transform:[{name:"translate",start:[0,_87e],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/data/CsvStore":function(){define("dojox/data/CsvStore",["dojo/_base/lang","dojo/_base/declare","dojo/_base/xhr","dojo/_base/window","dojo/data/util/filter","dojo/data/util/simpleFetch"],function(lang,_87f,xhr,_880,_881,_882){var _883=_87f("dojox.data.CsvStore",null,{constructor:function(_884){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=[];this._loadFinished=false;if(_884.url){this.url=_884.url;}this._csvData=_884.data;if(_884.label){this.label=_884.label;}else{if(this.label===""){this.label=undefined;}}this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._loadInProgress=false;this._queuedFetches=[];this.identifier=_884.identifier;if(this.identifier===""){delete this.identifier;}else{this._idMap={};}if("separator" in _884){this.separator=_884.separator;}if("urlPreventCache" in _884){this.urlPreventCache=_884.urlPreventCache?true:false;}},url:"",label:"",identifier:"",separator:",",urlPreventCache:false,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": a function was passed an item argument that was not an item");}},_getIndex:function(item){var idx=this.getIdentity(item);if(this.identifier){idx=this._idMap[idx];}return idx;},getValue:function(item,_885,_886){this._assertIsItem(item);var _887=_886;if(typeof _885==="string"){var ai=this._attributeIndexes[_885];if(ai!=null){var _888=this._dataArray[this._getIndex(item)];_887=_888[ai]||_886;}}else{throw new Error(this.declaredClass+": a function was passed an attribute argument that was not a string");}return _887;},getValues:function(item,_889){var _88a=this.getValue(item,_889);return (_88a?[_88a]:[]);},getAttributes:function(item){this._assertIsItem(item);var _88b=[];var _88c=this._dataArray[this._getIndex(item)];for(var i=0;i<_88c.length;i++){if(_88c[i]!==""){_88b.push(this._attributes[i]);}}return _88b;},hasAttribute:function(item,_88d){this._assertIsItem(item);if(typeof _88d==="string"){var _88e=this._attributeIndexes[_88d];var _88f=this._dataArray[this._getIndex(item)];return (typeof _88e!=="undefined"&&_88e<_88f.length&&_88f[_88e]!=="");}else{throw new Error(this.declaredClass+": a function was passed an attribute argument that was not a string");}},containsValue:function(item,_890,_891){var _892=undefined;if(typeof _891==="string"){_892=_881.patternToRegExp(_891,false);}return this._containsValue(item,_890,_891,_892);},_containsValue:function(item,_893,_894,_895){var _896=this.getValues(item,_893);for(var i=0;i<_896.length;++i){var _897=_896[i];if(typeof _897==="string"&&_895){return (_897.match(_895)!==null);}else{if(_894===_897){return true;}}}return false;},isItem:function(_898){if(_898&&_898[this._storeProp]===this){var _899=_898[this._idProp];if(this.identifier){var data=this._dataArray[this._idMap[_899]];if(data){return true;}}else{if(_899>=0&&_899<this._dataArray.length){return true;}}}return false;},isItemLoaded:function(_89a){return this.isItem(_89a);},loadItem:function(item){},getFeatures:function(){return this._features;},getLabel:function(item){if(this.label&&this.isItem(item)){return this.getValue(item,this.label);}return undefined;},getLabelAttributes:function(item){if(this.label){return [this.label];}return null;},_fetchItems:function(_89b,_89c,_89d){var self=this;var _89e=function(_89f,_8a0){var _8a1=null;if(_89f.query){var key,_8a2;_8a1=[];var _8a3=_89f.queryOptions?_89f.queryOptions.ignoreCase:false;var _8a4={};for(key in _89f.query){_8a2=_89f.query[key];if(typeof _8a2==="string"){_8a4[key]=_881.patternToRegExp(_8a2,_8a3);}}for(var i=0;i<_8a0.length;++i){var _8a5=true;var _8a6=_8a0[i];for(key in _89f.query){_8a2=_89f.query[key];if(!self._containsValue(_8a6,key,_8a2,_8a4[key])){_8a5=false;}}if(_8a5){_8a1.push(_8a6);}}}else{_8a1=_8a0.slice(0,_8a0.length);}_89c(_8a1,_89f);};if(this._loadFinished){_89e(_89b,this._arrayOfAllItems);}else{if(this.url!==""){if(this._loadInProgress){this._queuedFetches.push({args:_89b,filter:_89e});}else{this._loadInProgress=true;var _8a7={url:self.url,handleAs:"text",preventCache:self.urlPreventCache};var _8a8=xhr.get(_8a7);_8a8.addCallback(function(data){try{self._processData(data);_89e(_89b,self._arrayOfAllItems);self._handleQueuedFetches();}catch(e){_89d(e,_89b);}});_8a8.addErrback(function(_8a9){self._loadInProgress=false;if(_89d){_89d(_8a9,_89b);}else{throw _8a9;}});var _8aa=null;if(_89b.abort){_8aa=_89b.abort;}_89b.abort=function(){var df=_8a8;if(df&&df.fired===-1){df.cancel();df=null;}if(_8aa){_8aa.call(_89b);}};}}else{if(this._csvData){try{this._processData(this._csvData);this._csvData=null;_89e(_89b,this._arrayOfAllItems);}catch(e){_89d(e,_89b);}}else{var _8ab=new Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");if(_89d){_89d(_8ab,_89b);}else{throw _8ab;}}}}},close:function(_8ac){},_getArrayOfArraysFromCsvFileContents:function(_8ad){if(lang.isString(_8ad)){var _8ae=new RegExp("^\\s+","g");var _8af=new RegExp("\\s+$","g");var _8b0=new RegExp("\"\"","g");var _8b1=[];var i;var _8b2=this._splitLines(_8ad);for(i=0;i<_8b2.length;++i){var _8b3=_8b2[i];if(_8b3.length>0){var _8b4=_8b3.split(this.separator);var j=0;while(j<_8b4.length){var _8b5=_8b4[j];var _8b6=_8b5.replace(_8ae,"");var _8b7=_8b6.replace(_8af,"");var _8b8=_8b7.charAt(0);var _8b9=_8b7.charAt(_8b7.length-1);var _8ba=_8b7.charAt(_8b7.length-2);var _8bb=_8b7.charAt(_8b7.length-3);if(_8b7.length===2&&_8b7=="\"\""){_8b4[j]="";}else{if((_8b8=="\"")&&((_8b9!="\"")||((_8b9=="\"")&&(_8ba=="\"")&&(_8bb!="\"")))){if(j+1===_8b4.length){return;}var _8bc=_8b4[j+1];_8b4[j]=_8b6+this.separator+_8bc;_8b4.splice(j+1,1);}else{if((_8b8=="\"")&&(_8b9=="\"")){_8b7=_8b7.slice(1,(_8b7.length-1));_8b7=_8b7.replace(_8b0,"\"");}_8b4[j]=_8b7;j+=1;}}}_8b1.push(_8b4);}}this._attributes=_8b1.shift();for(i=0;i<this._attributes.length;i++){this._attributeIndexes[this._attributes[i]]=i;}this._dataArray=_8b1;}},_splitLines:function(_8bd){var _8be=[];var i;var line="";var _8bf=false;for(i=0;i<_8bd.length;i++){var c=_8bd.charAt(i);switch(c){case "\"":_8bf=!_8bf;line+=c;break;case "\r":if(_8bf){line+=c;}else{_8be.push(line);line="";if(i<(_8bd.length-1)&&_8bd.charAt(i+1)=="\n"){i++;}}break;case "\n":if(_8bf){line+=c;}else{_8be.push(line);line="";}break;default:line+=c;}}if(line!==""){_8be.push(line);}return _8be;},_processData:function(data){this._getArrayOfArraysFromCsvFileContents(data);this._arrayOfAllItems=[];if(this.identifier){if(this._attributeIndexes[this.identifier]===undefined){throw new Error(this.declaredClass+": Identity specified is not a column header in the data set.");}}for(var i=0;i<this._dataArray.length;i++){var id=i;if(this.identifier){var _8c0=this._dataArray[i];id=_8c0[this._attributeIndexes[this.identifier]];this._idMap[id]=i;}this._arrayOfAllItems.push(this._createItemFromIdentity(id));}this._loadFinished=true;this._loadInProgress=false;},_createItemFromIdentity:function(_8c1){var item={};item[this._storeProp]=this;item[this._idProp]=_8c1;return item;},getIdentity:function(item){if(this.isItem(item)){return item[this._idProp];}return null;},fetchItemByIdentity:function(_8c2){var item;var _8c3=_8c2.scope?_8c2.scope:_880.global;if(!this._loadFinished){var self=this;if(this.url!==""){if(this._loadInProgress){this._queuedFetches.push({args:_8c2});}else{this._loadInProgress=true;var _8c4={url:self.url,handleAs:"text"};var _8c5=xhr.get(_8c4);_8c5.addCallback(function(data){try{self._processData(data);var item=self._createItemFromIdentity(_8c2.identity);if(!self.isItem(item)){item=null;}if(_8c2.onItem){_8c2.onItem.call(_8c3,item);}self._handleQueuedFetches();}catch(error){if(_8c2.onError){_8c2.onError.call(_8c3,error);}}});_8c5.addErrback(function(_8c6){this._loadInProgress=false;if(_8c2.onError){_8c2.onError.call(_8c3,_8c6);}});}}else{if(this._csvData){try{self._processData(self._csvData);self._csvData=null;item=self._createItemFromIdentity(_8c2.identity);if(!self.isItem(item)){item=null;}if(_8c2.onItem){_8c2.onItem.call(_8c3,item);}}catch(e){if(_8c2.onError){_8c2.onError.call(_8c3,e);}}}}}else{item=this._createItemFromIdentity(_8c2.identity);if(!this.isItem(item)){item=null;}if(_8c2.onItem){_8c2.onItem.call(_8c3,item);}}},getIdentityAttributes:function(item){if(this.identifier){return [this.identifier];}else{return null;}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _8c7=this._queuedFetches[i];var _8c8=_8c7.filter;var _8c9=_8c7.args;if(_8c8){_8c8(_8c9,this._arrayOfAllItems);}else{this.fetchItemByIdentity(_8c7.args);}}this._queuedFetches=[];}}});lang.extend(_883,_882);return _883;});},"dojox/charting/plot2d/ClusteredColumns":function(){define("dojox/charting/plot2d/ClusteredColumns",["dojo/_base/array","dojo/_base/declare","./Columns","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils"],function(arr,_8ca,_8cb,dc,df,dfr,du){var _8cc=dfr.lambda("item.purgeGroup()");return _8ca("dojox.charting.plot2d.ClusteredColumns",_8cb,{render:function(dim,_8cd){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_8cd);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_8cc);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_8ce,_8cf,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_8d0=Math.max(0,this._vScaler.bounds.lower),_8d1=vt(_8d0),_8d2=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_8ce=_8cf=f.size;for(var i=0;i<this.series.length;++i){var run=this.series[i],_8d3=_8cf*i;if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _8d4=t.next("column",[this.opt,run]),s=run.group,_8d5=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _8d6=run.data[j];if(_8d6!==null){var v=typeof _8d6=="number"?_8d6:_8d6.y,vv=vt(v),_8d7=vv-_8d1,h=Math.abs(_8d7),_8d8=typeof _8d6!="number"?t.addMixin(_8d4,"column",_8d6,true):t.post(_8d4,"column");if(_8ce>=1&&h>=0){var rect={x:_8cd.l+ht(j+0.5)+gap+_8d3,y:dim.height-_8cd.b-(v>_8d0?vv:_8d1),width:_8ce,height:h};var _8d9=this._plotFill(_8d8.series.fill,dim,_8cd);_8d9=this._shapeFill(_8d9,rect);var _8da=s.createRect(rect).setFill(_8d9).setStroke(_8d8.series.stroke);run.dyn.fill=_8da.getFill();run.dyn.stroke=_8da.getStroke();if(_8d2){var o={element:"column",index:j,run:run,shape:_8da,x:j+0.5,y:v};this._connectEvents(o);_8d5[j]=o;}if(this.animate){this._animateColumn(_8da,dim.height-_8cd.b-_8d1,h);}}}}this._eventSeries[run.name]=_8d5;run.dirty=false;}this.dirty=false;return this;}});});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_8db,_8dc){dojo.DeferredList=function(list,_8dd,_8de,_8df,_8e0){var _8e1=[];_8db.call(this);var self=this;if(list.length===0&&!_8dd){this.resolve([0,[]]);}var _8e2=0;_8dc.forEach(list,function(item,i){item.then(function(_8e3){if(_8dd){self.resolve([i,_8e3]);}else{_8e4(true,_8e3);}},function(_8e5){if(_8de){self.reject(_8e5);}else{_8e4(false,_8e5);}if(_8df){return null;}throw _8e5;});function _8e4(_8e6,_8e7){_8e1[i]=[_8e6,_8e7];_8e2++;if(_8e2===list.length){self.resolve(_8e1);}};});};dojo.DeferredList.prototype=new _8db();dojo.DeferredList.prototype.gatherResults=function(_8e8){var d=new dojo.DeferredList(_8e8,false,true,false);d.addCallback(function(_8e9){var ret=[];_8dc.forEach(_8e9,function(_8ea){ret.push(_8ea[1]);});return ret;});return d;};return dojo.DeferredList;});},"esri/tasks/geometry":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task"],function(_8eb,dojo,_8ec){dojo.provide("esri.tasks.geometry");dojo.require("esri.tasks._task");dojo.declare("esri.tasks.GeometryService",esri.tasks._Task,{constructor:function(url){var _8ed=dojo.hitch;this._projectHandler=_8ed(this,this._projectHandler);this._simplifyHandler=_8ed(this,this._simplifyHandler);this._bufferHandler=_8ed(this,this._bufferHandler);this._areasAndLengthsHandler=_8ed(this,this._areasAndLengthsHandler);this._lengthsHandler=_8ed(this,this._lengthsHandler);this._labelPointsHandler=_8ed(this,this._labelPointsHandler);this._relationHandler=_8ed(this,this._relationHandler);this._convexHullHandler=_8ed(this,this._convexHullHandler);this._unionHandler=_8ed(this,this._unionHandler);this._autoCompleteHandler=_8ed(this,this._autoCompleteHandler);this._reshapeHandler=_8ed(this,this._reshapeHandler);this._cutHandler=_8ed(this,this._cutHandler);this._intersectHandler=_8ed(this,this._intersectHandler);this._differenceHandler=_8ed(this,this._differenceHandler);this._trimExtendHandler=_8ed(this,this._trimExtendHandler);this._densifyHandler=_8ed(this,this._densifyHandler);this._generalizeHandler=_8ed(this,this._densifyHandler);this._offsetHandler=_8ed(this,this._offsetHandler);this._distanceHandler=_8ed(this,this._distanceHandler);},_encodeGeometries:function(_8ee){var gs=[];for(var i=0,il=_8ee.length;i<il;i++){gs.push(_8ee[i].toJson());}return {geometryType:esri.geometry.getJsonType(_8ee[0]),geometries:gs};},_decodeGeometries:function(_8ef,_8f0,sr){var _8f1=esri.geometry.getGeometryType(_8f0),_8f2=_8ef.geometries,fs=[],_8f3={spatialReference:sr.toJson()},_8f4=dojo.mixin;dojo.forEach(_8f2,function(g,i){fs[i]=new _8f1(_8f4(g,_8f3));});return fs;},_toProjectGeometry:function(_8f5){var sr=_8f5.spatialReference.toJson();if(_8f5 instanceof esri.geometry.Extent){return new esri.geometry.Polygon({rings:[[[_8f5.xmin,_8f5.ymin],[_8f5.xmin,_8f5.ymax],[_8f5.xmax,_8f5.ymax],[_8f5.xmax,_8f5.ymin],[_8f5.xmin,_8f5.ymin]]],spatialReference:sr});}else{return new esri.geometry.Polyline({paths:[[].concat(_8f5.points)],spatialReference:sr});}},_fromProjectedGeometry:function(_8f6,_8f7,_8f8){if(_8f7==="esriGeometryEnvelope"){var ring=_8f6.rings[0];return new esri.geometry.Extent(ring[0][0],ring[0][1],ring[2][0],ring[2][1],_8f8);}else{return new esri.geometry.Multipoint({points:_8f6.paths[0],spatialReference:_8f8.toJson()});}},project:function(_8f9,_8fa,_8fb,_8fc){var _8fd=dojo.mixin({},this._url.query,{f:"json"}),_8fe;if(!_8f9.geometries){_8fe=_8f9[0];_8fd=dojo.mixin(_8fd,{outSR:_8fa.wkid||dojo.toJson(_8fa.toJson()),inSR:_8fe.spatialReference.wkid||dojo.toJson(_8fe.spatialReference.toJson()),geometries:dojo.toJson(this._encodeGeometries(_8f9))});}else{_8fc=_8fb;_8fb=_8fa;_8fa=_8f9.outSR;_8fe=_8f9.geometries[0];_8fd=dojo.mixin(_8fd,_8f9.toJson());}var _8ff=esri.geometry.getJsonType(_8fe),_900=this._projectHandler,_901=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/project",content:_8fd,callbackParamName:"callback",load:(function(r,i){_900(r,i,_8ff,_8fa,_8fb,_8fc,dfd);}),error:(function(r){_901(r,_8fc,dfd);})});return dfd;},_projectHandler:function(_902,io,_903,_904,_905,_906,dfd){try{var fs=this._decodeGeometries(_902,_903,_904);this._successHandler([fs],"onProjectComplete",_905,dfd);}catch(err){this._errorHandler(err,_906,dfd);}},onProjectComplete:function(){},simplify:function(_907,_908,_909){var _90a=_907[0].spatialReference;var _90b=dojo.mixin({},this._url.query,{f:"json",sr:_90a.wkid?_90a.wkid:dojo.toJson(_90a.toJson()),geometries:dojo.toJson(this._encodeGeometries(_907))}),_90c=esri.geometry.getJsonType(_907[0]),_90d=this._simplifyHandler,_90e=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/simplify",content:_90b,callbackParamName:"callback",load:(function(r,i){_90d(r,i,_90c,_90a,_908,_909,dfd);}),error:(function(r){_90e(r,_909,dfd);})});return dfd;},_simplifyHandler:function(_90f,io,_910,sr,_911,_912,dfd){try{var fs=this._decodeGeometries(_90f,_910,sr);this._successHandler([fs],"onSimplifyComplete",_911,dfd);}catch(err){this._errorHandler(err,_912,dfd);}},onSimplifyComplete:function(){},convexHull:function(_913,_914,_915){var _916=_913[0].spatialReference;var _917=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_916.toJson()),geometries:dojo.toJson(this._encodeGeometries(_913))}),_918=this._convexHullHandler,_919=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/convexHull",content:_917,callbackParamName:"callback",load:(function(r,i){_918(r,i,_916,_914,_915,dfd);}),error:(function(r){_919(r,_915,dfd);})});return dfd;},_convexHullHandler:function(_91a,io,_91b,_91c,_91d,dfd){try{var geom=esri.geometry.fromJson(_91a.geometry).setSpatialReference(_91b);this._successHandler([geom],"onConvexHullComplete",_91c,dfd);}catch(err){this._errorHandler(err,_91d,dfd);}},onConvexHullComplete:function(){},union:function(_91e,_91f,_920){var _921=_91e[0].spatialReference;var _922=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_921.toJson()),geometries:dojo.toJson(this._encodeGeometries(_91e))}),_923=this._unionHandler,_924=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/union",content:_922,callbackParamName:"callback",load:(function(r,i){_923(r,i,_921,_91f,_920,dfd);}),error:(function(r){_924(r,_920,dfd);})});return dfd;},_unionHandler:function(_925,io,_926,_927,_928,dfd){try{var geom=esri.geometry.fromJson(_925.geometry).setSpatialReference(_926);this._successHandler([geom],"onUnionComplete",_927,dfd);}catch(err){this._errorHandler(err,_928,dfd);}},onUnionComplete:function(){},autoComplete:function(_929,_92a,_92b,_92c){var _92d=_929[0].spatialReference;var _92e=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_92d.toJson()),polygons:dojo.toJson(this._encodeGeometries(_929).geometries),polylines:dojo.toJson(this._encodeGeometries(_92a).geometries)}),_92f=this._autoCompleteHandler,_930=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/autoComplete",content:_92e,callbackParamName:"callback",load:(function(r,i){_92f(r,i,_92d,_92b,_92c,dfd);}),error:(function(r){_930(r,_92c,dfd);})});return dfd;},_autoCompleteHandler:function(_931,io,_932,_933,_934,dfd){try{var Pgon=esri.geometry.Polygon,_935=_931.geometries,_936=[];for(var i=0,il=_935.length;i<il;i++){_936[i]=new Pgon({spatialReference:_932,rings:_935[i].rings});}this._successHandler([_936],"onAutoCompleteComplete",_933,dfd);}catch(err){this._errorHandler(err,_934,dfd);}},onAutoCompleteComplete:function(){},reshape:function(_937,_938,_939,_93a){var _93b=_937.spatialReference;var _93c=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_93b.toJson()),target:dojo.toJson({geometryType:esri.geometry.getJsonType(_937),geometry:_937.toJson()}),reshaper:dojo.toJson(_938.toJson())}),_93d=this._reshapeHandler,_93e=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/reshape",content:_93c,callbackParamName:"callback",load:(function(r,i){_93d(r,i,_93b,_939,_93a,dfd);}),error:(function(r){_93e(r,_93a,dfd);})});return dfd;},_reshapeHandler:function(_93f,io,_940,_941,_942,dfd){try{var geom=esri.geometry.fromJson(_93f.geometry).setSpatialReference(_940);this._successHandler([geom],"onReshapeComplete",_941,dfd);}catch(err){this._errorHandler(err,_942,dfd);}},onReshapeComplete:function(){},cut:function(_943,_944,_945,_946){var _947=_943[0].spatialReference;var _948=dojo.map(_943,function(_949){return _949.toJson();});var _94a=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_947.toJson()),target:dojo.toJson({geometryType:esri.geometry.getJsonType(_943[0]),geometries:_948}),cutter:dojo.toJson(_944.toJson())}),_94b=this._cutHandler,_94c=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/cut",content:_94a,callbackParamName:"callback",load:(function(r,i){_94b(r,i,_947,_945,_946,dfd);}),error:(function(r){_94c(r,_946,dfd);})});return dfd;},_cutHandler:function(_94d,io,_94e,_94f,_950,dfd){try{var _951=_94d.geometries;var _952={};_952.cutIndexes=_94d.cutIndexes;_952.geometries=[];dojo.forEach(_951,function(geom){_952.geometries.push(esri.geometry.fromJson(geom).setSpatialReference(_94e));});this._successHandler([_952],"onCutComplete",_94f,dfd);}catch(err){this._errorHandler(err,_950,dfd);}},onCutComplete:function(){},intersect:function(_953,_954,_955,_956){var _957=_953[0].spatialReference;var _958=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_957.toJson()),geometries:dojo.toJson(this._encodeGeometries(_953)),geometry:dojo.toJson({geometryType:esri.geometry.getJsonType(_954),geometry:_954.toJson()})}),_959=this._intersectHandler,_95a=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/intersect",content:_958,callbackParamName:"callback",load:(function(r,i){_959(r,i,_957,_955,_956,dfd);}),error:(function(r){_95a(r,_956,dfd);})});return dfd;},_intersectHandler:function(_95b,io,_95c,_95d,_95e,dfd){try{var _95f=_95b.geometries,_960=[];dojo.forEach(_95f,function(geom){_960.push(esri.geometry.fromJson(geom).setSpatialReference(_95c));});this._successHandler([_960],"onIntersectComplete",_95d,dfd);}catch(err){this._errorHandler(err,_95e,dfd);}},onIntersectComplete:function(){},difference:function(_961,_962,_963,_964){var _965=_961[0].spatialReference;var _966=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_965.toJson()),geometries:dojo.toJson(this._encodeGeometries(_961)),geometry:dojo.toJson({geometryType:esri.geometry.getJsonType(_962),geometry:_962.toJson()})}),_967=this._differenceHandler,_968=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/difference",content:_966,callbackParamName:"callback",load:(function(r,i){_967(r,i,_965,_963,_964,dfd);}),error:(function(r){_968(r,_964,dfd);})});return dfd;},_differenceHandler:function(_969,io,_96a,_96b,_96c,dfd){try{var _96d=_969.geometries,_96e=[];dojo.forEach(_96d,function(geom){_96e.push(esri.geometry.fromJson(geom).setSpatialReference(_96a));});this._successHandler([_96e],"onDifferenceComplete",_96b,dfd);}catch(err){this._errorHandler(err,_96c,dfd);}},onDifferenceComplete:function(){},buffer:function(_96f,_970,_971){var _972=dojo.mixin({},this._url.query,{f:"json"},_96f.toJson()),sr=_96f.outSpatialReference||_96f.geometries[0].spatialReference,_973=this._bufferHandler,_974=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/buffer",content:_972,callbackParamName:"callback",load:(function(r,i){_973(r,i,sr,_970,_971,dfd);}),error:(function(r){_974(r,_971,dfd);})});return dfd;},_bufferHandler:function(_975,io,sr,_976,_977,dfd){try{var Pgon=esri.geometry.Polygon,_978=_975.geometries,_979=[];for(var i=0,il=_978.length;i<il;i++){_979[i]=new Pgon({spatialReference:sr,rings:_978[i].rings});}this._successHandler([_979],"onBufferComplete",_976,dfd);}catch(err){this._errorHandler(err,_977,dfd);}},onBufferComplete:function(){},areasAndLengths:function(_97a,_97b,_97c){var _97d=dojo.mixin({},this._url.query,{f:"json"},_97a.toJson()),_97e=this._areasAndLengthsHandler,_97f=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/areasAndLengths",content:_97d,callbackParamName:"callback",load:(function(r,i){_97e(r,i,_97b,_97c,dfd);}),error:(function(r){_97f(r,_97c,dfd);})});return dfd;},_areasAndLengthsHandler:function(_980,io,_981,_982,dfd){try{this._successHandler([_980],"onAreasAndLengthsComplete",_981,dfd);}catch(err){this._errorHandler(err,_982,dfd);}},onAreasAndLengthsComplete:function(){},lengths:function(_983,_984,_985){var _986=dojo.mixin({},this._url.query,{f:"json"},_983.toJson()),_987=this._lengthsHandler,_988=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/lengths",content:_986,callbackParamName:"callback",load:(function(r,i){_987(r,i,_984,_985,dfd);}),error:(function(r){_988(r,_985,dfd);})});return dfd;},_lengthsHandler:function(_989,io,_98a,_98b,dfd){try{this._successHandler([_989],"onLengthsComplete",_98a,dfd);}catch(err){this._errorHandler(err,_98b,dfd);}},onLengthsComplete:function(){},labelPoints:function(_98c,_98d,_98e){var _98f=dojo.map(_98c,function(geom){return geom.toJson();});var sr=_98c[0].spatialReference,_990=dojo.mixin({},this._url.query,{f:"json",sr:sr.wkid?sr.wkid:dojo.toJson(sr.toJson()),polygons:dojo.toJson(_98f)}),_991=this._labelPointsHandler,_992=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/labelPoints",content:_990,callbackParamName:"callback",load:(function(r,i){_991(r,i,_98c,sr,_98d,_98e,dfd);}),error:(function(r){_992(r,_98e,dfd);})});return dfd;},_labelPointsHandler:function(_993,io,_994,sr,_995,_996,dfd){try{var _997=_993.labelPoints,_998=[];dojo.forEach(_997,function(geom){_998.push(esri.geometry.fromJson(geom).setSpatialReference(sr));});this._successHandler([_998],"onLabelPointsComplete",_995,dfd);}catch(err){this._errorHandler(err,_996,dfd);}},onLabelPointsComplete:function(){},relation:function(_999,_99a,_99b){var _99c=dojo.mixin({},this._url.query,{f:"json"},_999.toJson()),_99d=this._relationHandler,_99e=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/relation",content:_99c,callbackParamName:"callback",load:(function(r,i){_99d(r,i,_99a,_99b,dfd);}),error:(function(r){_99e(r,_99b,dfd);})});return dfd;},_relationHandler:function(_99f,io,_9a0,_9a1,dfd){try{var _9a2=_99f.relations;this._successHandler([_9a2],"onRelationComplete",_9a0,dfd);}catch(err){this._errorHandler(err,_9a1,dfd);}},onRelationComplete:function(){},trimExtend:function(_9a3,_9a4,_9a5){var _9a6=dojo.mixin({},this._url.query,{f:"json"},_9a3.toJson()),_9a7=_9a3.sr,_9a8=this._trimExtendHandler,_9a9=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/trimExtend",content:_9a6,callbackParamName:"callback",load:(function(r,i){_9a8(r,i,_9a7,_9a4,_9a5,dfd);}),error:(function(r){_9a9(r,_9a5,dfd);})});return dfd;},_trimExtendHandler:function(_9aa,io,_9ab,_9ac,_9ad,dfd){try{var _9ae=esri.geometry.Polyline,_9af=_9aa.geometries,_9b0=[];for(var i=0,il=_9af.length;i<il;i++){_9b0[i]=new _9ae({spatialReference:_9ab,paths:_9af[i].paths});}this._successHandler([_9b0],"onTrimExtendComplete",_9ac,dfd);}catch(err){this._errorHandler(err,_9ad,dfd);}},onTrimExtendComplete:function(){},densify:function(_9b1,_9b2,_9b3){var _9b4=dojo.mixin({},this._url.query,{f:"json"},_9b1.toJson()),_9b5=_9b1.geometries[0].spatialReference,_9b6=this._densifyHandler,_9b7=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/densify",content:_9b4,callbackParamName:"callback",load:(function(r,i){_9b6(r,i,_9b5,_9b2,_9b3,dfd);}),error:(function(r){_9b7(r,_9b3,dfd);})});return dfd;},_densifyHandler:function(_9b8,io,_9b9,_9ba,_9bb,dfd){try{var _9bc=_9b8.geometries,_9bd=[];dojo.forEach(_9bc,function(geom){_9bd.push(esri.geometry.fromJson(geom).setSpatialReference(_9b9));});this._successHandler([_9bd],"onDensifyComplete",_9ba,dfd);}catch(err){this._errorHandler(err,_9bb,dfd);}},onDensifyComplete:function(){},generalize:function(_9be,_9bf,_9c0){var _9c1=dojo.mixin({},this._url.query,{f:"json"},_9be.toJson()),_9c2=_9be.geometries[0].spatialReference,_9c3=this._generalizeHandler,_9c4=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/generalize",content:_9c1,callbackParamName:"callback",load:(function(r,i){_9c3(r,i,_9c2,_9bf,_9c0,dfd);}),error:(function(r){_9c4(r,_9c0,dfd);})});return dfd;},_generalizeHandler:function(_9c5,io,_9c6,_9c7,_9c8,dfd){try{var _9c9=_9c5.geometries,_9ca=[];dojo.forEach(_9c9,function(geom){_9ca.push(esri.geometry.fromJson(geom).setSpatialReference(_9c6));});this._successHandler([_9ca],"onGeneralizeComplete",_9c7,dfd);}catch(err){this._errorHandler(err,_9c8,dfd);}},onGeneralizeComplete:function(){},offset:function(_9cb,_9cc,_9cd){var _9ce=dojo.mixin({},this._url.query,{f:"json"},_9cb.toJson()),_9cf=_9cb.geometries[0].spatialReference,_9d0=this._offsetHandler,_9d1=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/offset",content:_9ce,callbackParamName:"callback",load:(function(r,i){_9d0(r,i,_9cf,_9cc,_9cd,dfd);}),error:(function(r){_9d1(r,_9cd,dfd);})});return dfd;},_offsetHandler:function(_9d2,io,_9d3,_9d4,_9d5,dfd){try{var _9d6=_9d2.geometries,_9d7=[];dojo.forEach(_9d6,function(geom){_9d7.push(esri.geometry.fromJson(geom).setSpatialReference(_9d3));});this._successHandler([_9d7],"onOffsetComplete",_9d4,dfd);}catch(err){this._errorHandler(err,_9d5,dfd);}},onOffsetComplete:function(){},distance:function(_9d8,_9d9,_9da){var _9db=dojo.mixin({},this._url.query,{f:"json"},_9d8.toJson()),_9dc=_9d8.geometry1.spatialReference,_9dd=this._distanceHandler,_9de=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/distance",content:_9db,callbackParamName:"callback",load:(function(r,i){_9dd(r,i,_9dc,_9d9,_9da,dfd);}),error:(function(r){_9de(r,_9da,dfd);})});return dfd;},_distanceHandler:function(_9df,io,_9e0,_9e1,_9e2,dfd){try{_9df=_9df&&_9df.distance;this._successHandler([_9df],"onDistanceComplete",_9e1,dfd);}catch(err){this._errorHandler(err,_9e2,dfd);}},onDistanceComplete:function(){}});dojo.declare("esri.tasks.TrimExtendParameters",null,{polylines:null,trimExtendTo:null,extendHow:null,toJson:function(){var _9e3=dojo.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=dojo.toJson(_9e3);json.trimExtendTo=dojo.toJson(this.trimExtendTo.toJson());json.sr=dojo.toJson(this.polylines[0].spatialReference.toJson());json.extendHow=this.extendHow||0;return json;}});dojo.mixin(esri.tasks.TrimExtendParameters,{DEFAULT_CURVE_EXTENSION:0,RELOCATE_ENDS:1,KEEP_END_ATTRIBUTES:2,NO_END_ATTRIBUTES:4,NO_EXTEND_AT_FROM:8,NO_EXTEND_AT_TO:16});dojo.declare("esri.tasks.BufferParameters",null,{geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:false,geodesic:false,toJson:function(){var json={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},dt=this.distances,_9e4=this.outSpatialReference,_9e5=this.bufferSpatialReference;var _9e6=dojo.map(this.geometries,function(geom){geom=(geom.type==="extent")?this._extentToPolygon(geom):geom;return geom.toJson();},this);var _9e7=this.geometries;if(_9e7&&_9e7.length>0){var _9e8=_9e7[0].type==="extent"?"esriGeometryPolygon":esri.geometry.getJsonType(_9e7[0]);json.geometries=dojo.toJson({geometryType:_9e8,geometries:_9e6});json.inSR=_9e7[0].spatialReference.wkid?_9e7[0].spatialReference.wkid:dojo.toJson(_9e7[0].spatialReference.toJson());}if(dt){json.distances=dt.join(",");}if(_9e4){json.outSR=_9e4.wkid?_9e4.wkid:dojo.toJson(_9e4.toJson());}if(_9e5){json.bufferSR=_9e5.wkid?_9e5.wkid:dojo.toJson(_9e5.toJson());}return json;},_extentToPolygon:function(_9e9){var xmin=_9e9.xmin,ymin=_9e9.ymin,xmax=_9e9.xmax,ymax=_9e9.ymax;return new esri.geometry.Polygon({"rings":[[[xmin,ymin],[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]]],"spatialReference":_9e9.spatialReference.toJson()});}});dojo.mixin(esri.tasks.GeometryService,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});dojo.declare("esri.tasks.AreasAndLengthsParameters",null,{polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var _9ea=dojo.map(this.polygons,function(geom){return geom.toJson();});var json={};json.polygons=dojo.toJson(_9ea);var _9eb=this.polygons[0].spatialReference;json.sr=_9eb.wkid?_9eb.wkid:dojo.toJson(_9eb.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.areaUnit){if(dojo.isString(this.areaUnit)){json.areaUnit=dojo.toJson({"areaUnit":this.areaUnit});}else{json.areaUnit=this.areaUnit;}}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});dojo.declare("esri.tasks.LengthsParameters",null,{polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var _9ec=dojo.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=dojo.toJson(_9ec);var _9ed=this.polylines[0].spatialReference;json.sr=_9ed.wkid?_9ed.wkid:dojo.toJson(_9ed.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.geodesic){json.geodesic=this.geodesic;}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});dojo.declare("esri.tasks.RelationParameters",null,{geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var _9ee=dojo.map(this.geometries1,function(geom){return geom.toJson();});var _9ef=dojo.map(this.geometries2,function(geom){return geom.toJson();});var json={};var _9f0=this.geometries1;if(_9f0&&_9f0.length>0){json.geometries1=dojo.toJson({geometryType:esri.geometry.getJsonType(_9f0[0]),geometries:_9ee});var _9f1=this.geometries1[0].spatialReference;json.sr=_9f1.wkid?_9f1.wkid:dojo.toJson(_9f1.toJson());}var _9f2=this.geometries2;if(_9f2&&_9f2.length>0){json.geometries2=dojo.toJson({geometryType:esri.geometry.getJsonType(_9f2[0]),geometries:_9ef});}if(this.relation){json.relation=this.relation;}if(this.relationParam){json.relationParam=dojo.toJson(this.relationParam);}return json;}});dojo.mixin(esri.tasks.RelationParameters,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});dojo.declare("esri.tasks.DensifyParameters",null,{geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,toJson:function(){var _9f3=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_9f3});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.geodesic){json.geodesic=this.geodesic;}if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.maxSegmentLength){json.maxSegmentLength=this.maxSegmentLength;}return json;}});dojo.declare("esri.tasks.GeneralizeParameters",null,{geometries:null,deviationUnit:null,maxDeviation:null,toJson:function(){var _9f4=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_9f4});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.deviationUnit){json.deviationUnit=this.deviationUnit;}if(this.maxDeviation){json.maxDeviation=this.maxDeviation;}return json;}});dojo.declare("esri.tasks.OffsetParameters",null,{geometries:null,bevelRatio:null,offsetDistance:null,offsetHow:null,offsetUnit:null,toJson:function(){var _9f5=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_9f5});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.bevelRatio){json.bevelRatio=this.bevelRatio;}if(this.offsetDistance){json.offsetDistance=this.offsetDistance;}if(this.offsetHow){json.offsetHow=this.offsetHow;}if(this.offsetUnit){json.offsetUnit=this.offsetUnit;}return json;}});dojo.mixin(esri.tasks.OffsetParameters,{OFFSET_BEVELLED:"esriGeometryOffsetBevelled",OFFSET_MITERED:"esriGeometryOffsetMitered",OFFSET_ROUNDED:"esriGeometryOffsetRounded"});dojo.declare("esri.tasks.DistanceParameters",null,{geometry1:null,geometry2:null,distanceUnit:null,geodesic:null,toJson:function(){var json={};var _9f6=this.geometry1;if(_9f6){json.geometry1=dojo.toJson({geometryType:esri.geometry.getJsonType(_9f6),geometry:_9f6});}var _9f7=this.geometry2;if(_9f7){json.geometry2=dojo.toJson({geometryType:esri.geometry.getJsonType(_9f7),geometry:_9f7});}json.sr=dojo.toJson(this.geometry1.spatialReference.toJson());if(this.distanceUnit){json.distanceUnit=this.distanceUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});dojo.declare("esri.tasks.ProjectParameters",null,{geometries:null,outSR:null,transformation:null,transformationForward:null,toJson:function(){var _9f8=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};json.outSR=this.outSR.wkid||dojo.toJson(this.outSR.toJson());json.inSR=this.geometries[0].spatialReference.wkid||dojo.toJson(this.geometries[0].spatialReference.toJson());json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_9f8});if(this.transformation){json.transformation=this.transformation.wkid||dojo.toJson(this.transformation);}if(this.tranformationForward){json.transformationForward=this.transformationForward;}return json;}});});},"dojo/io/iframe":function(){define(["../main","require"],function(dojo,_9f9){dojo.getObject("io",true,dojo);dojo.io.iframe={create:function(_9fa,_9fb,uri){if(window[_9fa]){return window[_9fa];}if(window.frames[_9fa]){return window.frames[_9fa];}var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||_9f9.toUrl("../resources/blank.html"));}var _9fc=dojo.place("<iframe id=\""+_9fa+"\" name=\""+_9fa+"\" src=\""+turi+"\" onload=\""+_9fb+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",dojo.body());window[_9fa]=_9fc;return _9fc;},setSrc:function(_9fd,src,_9fe){try{if(!_9fe){if(dojo.isWebKit){_9fd.location=src;}else{frames[_9fd.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit){idoc=_9fd.contentWindow.document;}else{idoc=_9fd.contentWindow;}if(!idoc){_9fd.location=src;}else{idoc.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_9ff){return _9ff.contentDocument||(((_9ff.name)&&(_9ff.document)&&(dojo.doc.getElementsByTagName("iframe")[_9ff.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_9ff.name].contentWindow.document)))||((_9ff.name)&&(dojo.doc.frames[_9ff.name])&&(dojo.doc.frames[_9ff.name].document))||null;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _a00=null;try{var _a01=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _a02=_a01.handleAs;_a00=ifd;if(_a02!="html"){if(_a02=="xml"){if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _a03=(dii._frame.contentWindow.document).documentElement.innerText;_a03=_a03.replace(/>\s+</g,"><");_a03=dojo.trim(_a03);var _a04={responseText:_a03};_a00=dojo._contentHandlers["xml"](_a04);}}else{_a00=ifd.getElementsByTagName("textarea")[0].value;if(_a02=="json"){_a00=dojo.fromJson(_a00);}else{if(_a02=="javascript"){_a00=dojo.eval(_a00);}}}}}catch(e){_a00=e;}finally{_a01._callNext();}return _a00;},function(_a05,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _a05;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _a06=dfd.ioArgs;var args=_a06.args;_a06._contentToClean=[];var fn=dojo.byId(args["form"]);var _a07=args["content"]||{};if(fn){if(_a07){var _a08=function(name,_a09){dojo.create("input",{type:"hidden",name:name,value:_a09},fn);_a06._contentToClean.push(name);};for(var x in _a07){var val=_a07[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_a08(x,val[i]);}}else{if(!fn[x]){_a08(x,val);}else{fn[x].value=val;}}}}var _a0a=fn.getAttributeNode("action");var _a0b=fn.getAttributeNode("method");var _a0c=fn.getAttributeNode("target");if(args["url"]){_a06._originalAction=_a0a?_a0a.value:null;if(_a0a){_a0a.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_a0b||!_a0b.value){if(_a0b){_a0b.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_a06._originalTarget=_a0c?_a0c.value:null;if(_a0c){_a0c.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _a0d=args.url+(args.url.indexOf("?")>-1?"&":"?")+_a06.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_a0d,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _a0e=dfd.ioArgs;var args=_a0e.args;var _a0f=dojo.byId(args.form);if(_a0f){var _a10=_a0e._contentToClean;for(var i=0;i<_a10.length;i++){var key=_a10[i];for(var j=0;j<_a0f.childNodes.length;j++){var _a11=_a0f.childNodes[j];if(_a11.name==key){dojo.destroy(_a11);break;}}}if(_a0e["_originalAction"]){_a0f.setAttribute("action",_a0e._originalAction);}if(_a0e["_originalTarget"]){_a0f.setAttribute("target",_a0e._originalTarget);_a0f.target=_a0e._originalTarget;}}_a0e._finished=true;}};return dojo.io.iframe;});},"dojox/lang/functional/lambda":function(){define("dojox/lang/functional/lambda",["../..","dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(_a12,dojo,lang,arr){var df=lang.getObject("lang.functional",true,_a12);var _a13={};var _a14="ab".split(/a*/).length>1?String.prototype.split:function(sep){var r=this.split.call(this,sep),m=sep.exec(this);if(m&&m.index==0){r.unshift("");}return r;};var _a15=function(s){var args=[],_a16=_a14.call(s,/\s*->\s*/m);if(_a16.length>1){while(_a16.length){s=_a16.pop();args=_a16.pop().split(/\s*,\s*|\s+/m);if(_a16.length){_a16.push("(function("+args+"){return ("+s+")})");}}}else{if(s.match(/\b_\b/)){args=["_"];}else{var l=s.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),r=s.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(l||r){if(l){args.push("$1");s="$1"+s;}if(r){args.push("$2");s=s+"$2";}}else{var vars=s.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],t={};arr.forEach(vars,function(v){if(!(v in t)){args.push(v);t[v]=1;}});}}}return {args:args,body:s};};var _a17=function(a){return a.length?function(){var i=a.length-1,x=df.lambda(a[i]).apply(this,arguments);for(--i;i>=0;--i){x=df.lambda(a[i]).call(this,x);}return x;}:function(x){return x;};};lang.mixin(df,{rawLambda:function(s){return _a15(s);},buildLambda:function(s){s=_a15(s);return "function("+s.args.join(",")+"){return ("+s.body+");}";},lambda:function(s){if(typeof s=="function"){return s;}if(s instanceof Array){return _a17(s);}if(s in _a13){return _a13[s];}s=_a15(s);return _a13[s]=new Function(s.args,"return ("+s.body+");");},clearLambdaCache:function(){_a13={};}});return df;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/sniff","./_base/manager","."],function(_a18,_a19,_a1a,dom,_a1b,_a1c,has,_a1d,_a1e){var _a1f=(_a1e._isElementShown=function(elem){var s=_a1c.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_a1b.get(elem,"type")!="hidden");});_a1e.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _a1b.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _a20=elem.contentDocument;if("designMode" in _a20&&_a20.designMode=="on"){return true;}body=_a20.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _a21=(_a1e.isTabNavigable=function(elem){if(_a1b.get(elem,"disabled")){return false;}else{if(_a1b.has(elem,"tabIndex")){return _a1b.get(elem,"tabIndex")>=0;}else{return _a1e.hasDefaultTabStop(elem);}}});_a1e._getTabNavigable=function(root){var _a22,last,_a23,_a24,_a25,_a26,_a27={};function _a28(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _a29=function(_a2a){for(var _a2b=_a2a.firstChild;_a2b;_a2b=_a2b.nextSibling){if(_a2b.nodeType!=1||(has("ie")&&_a2b.scopeName!=="HTML")||!_a1f(_a2b)){continue;}if(_a21(_a2b)){var _a2c=_a1b.get(_a2b,"tabIndex");if(!_a1b.has(_a2b,"tabIndex")||_a2c==0){if(!_a22){_a22=_a2b;}last=_a2b;}else{if(_a2c>0){if(!_a23||_a2c<_a24){_a24=_a2c;_a23=_a2b;}if(!_a25||_a2c>=_a26){_a26=_a2c;_a25=_a2b;}}}var rn=_a28(_a2b);if(_a1b.get(_a2b,"checked")&&rn){_a27[rn]=_a2b;}}if(_a2b.nodeName.toUpperCase()!="SELECT"){_a29(_a2b);}}};if(_a1f(root)){_a29(root);}function rs(node){return _a27[_a28(node)]||node;};return {first:rs(_a22),last:rs(last),lowest:rs(_a23),highest:rs(_a25)};};_a1e.getFirstInTabbingOrder=function(root){var _a2d=_a1e._getTabNavigable(dom.byId(root));return _a2d.lowest?_a2d.lowest:_a2d.first;};_a1e.getLastInTabbingOrder=function(root){var _a2e=_a1e._getTabNavigable(dom.byId(root));return _a2e.last?_a2e.last:_a2e.highest;};return {hasDefaultTabStop:_a1e.hasDefaultTabStop,isTabNavigable:_a1e.isTabNavigable,_getTabNavigable:_a1e._getTabNavigable,getFirstInTabbingOrder:_a1e.getFirstInTabbingOrder,getLastInTabbingOrder:_a1e.getLastInTabbingOrder};});},"dojox/charting/themes/common":function(){define("dojox/charting/themes/common",["dojo/_base/lang"],function(lang){return lang.getObject("dojox.charting.themes",true);});},"dojox/charting/plot2d/MarkersOnly":function(){define("dojox/charting/plot2d/MarkersOnly",["dojo/_base/declare","./Default"],function(_a2f,_a30){return _a2f("dojox.charting.plot2d.MarkersOnly",_a30,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_a31,_a32,_a33,_a34,_a35,lang,_a36,_a37,_a38,_a39,_a3a,_a3b){function _a3c(){};function _a3d(_a3e){return function(obj,_a3f,_a40,_a41){if(obj&&typeof _a3f=="string"&&obj[_a3f]==_a3c){return obj.on(_a3f.substring(2).toLowerCase(),lang.hitch(_a40,_a41));}return _a3e.apply(_a33,arguments);};};_a31.around(_a33,"connect",_a3d);if(_a35.connect){_a31.around(_a35,"connect",_a3d);}var _a42=_a34("dijit._Widget",[_a39,_a3a,_a3b],{onClick:_a3c,onDblClick:_a3c,onKeyDown:_a3c,onKeyPress:_a3c,onKeyUp:_a3c,onMouseDown:_a3c,onMouseMove:_a3c,onMouseOut:_a3c,onMouseOver:_a3c,onMouseLeave:_a3c,onMouseEnter:_a3c,onMouseUp:_a3c,constructor:function(_a43){this._toConnect={};for(var name in _a43){if(this[name]===_a3c){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_a43[name];delete _a43[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_a3c){return _a33.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,_a44){_a35.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_a44);},attr:function(name,_a45){if(_a32.isDebug){var _a46=arguments.callee._ach||(arguments.callee._ach={}),_a47=(arguments.callee.caller||"unknown caller").toString();if(!_a46[_a47]){_a35.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_a47,"","2.0");_a46[_a47]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_a35.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?_a36("[widgetId]",this.containerNode).map(_a38.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(!_a35.isAsync){_a37(0,function(){var _a48=["dijit/_base"];require(_a48);});}return _a42;});},"dojo/touch":function(){define(["./_base/kernel","./on","./has","./mouse"],function(dojo,on,has,_a49){function _a4a(type){return function(node,_a4b){return on(node,type,_a4b);};};var _a4c=has("touch");dojo.touch={press:_a4a(_a4c?"touchstart":"mousedown"),move:_a4a(_a4c?"touchmove":"mousemove"),release:_a4a(_a4c?"touchend":"mouseup"),cancel:_a4c?_a4a("touchcancel"):_a49.leave};return dojo.touch;});},"esri/dijit/Popup":function(){define(["dijit","dojo","dojox","dojo/require!esri/InfoWindowBase,esri/PopupBase,esri/utils,dijit/_Widget,dijit/_Templated,dojo/number,dojo/date/locale,dojox/charting/Chart2D,dojox/charting/themes/PlotKit/base,dojox/charting/action2d/Tooltip,dojo/i18n"],function(_a4d,dojo,_a4e){dojo.provide("esri.dijit.Popup");dojo.require("esri.InfoWindowBase");dojo.require("esri.PopupBase");dojo.require("esri.utils");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dojo.number");dojo.require("dojo.date.locale");dojo.require("dojox.charting.Chart2D");dojo.require("dojox.charting.themes.PlotKit.base");dojo.require("dojox.charting.action2d.Tooltip");dojo.require("dojo.i18n");(function(){var dc=_a4e.charting,pk=dc.themes.PlotKit;pk.popup=pk.base.clone();pk.popup.chart.fill=pk.popup.plotarea.fill="#e7eef6";pk.popup.colors=["#284B70","#702828","#5F7143","#F6BC0C","#382C6C","#50224F","#1D7554","#4C4C4C","#0271AE","#706E41","#446A73","#0C3E69","#757575","#B7B7B7","#A3A3A3"];pk.popup.series.stroke.width=1;pk.popup.marker.stroke.width=1;}());dojo.declare("esri.dijit.Popup",[esri.InfoWindowBase,esri.PopupBase],{offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:true,constructor:function(_a4f,_a50){this.initialize();dojo.mixin(this,_a4f);this.domNode=dojo.byId(_a50);var nls=this._nls=dojo.mixin({},esri.bundle.widgets.popup);var _a51=this.domNode;dojo.addClass(_a51,"esriPopup");var _a52="<div class='esriPopupWrapper' style='position: absolute;'>"+"<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>"+nls.NLS_zoomTo+"</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer hidden'></div>"+"</div>"+"<div class='outerPointer hidden'></div>";dojo.attr(_a51,"innerHTML",_a52);this._sizers=dojo.query(".sizer",_a51);var _a53=dojo.query(".titlePane",_a51)[0];dojo.setSelectable(_a53,false);this._title=dojo.query(".title",_a53)[0];this._prevFeatureButton=dojo.query(".prev",_a53)[0];this._nextFeatureButton=dojo.query(".next",_a53)[0];this._maxButton=dojo.query(".maximize",_a53)[0];this._spinner=dojo.query(".spinner",_a53)[0];this._contentPane=dojo.query(".contentPane",_a51)[0];this._positioner=dojo.query(".esriPopupWrapper",_a51)[0];this._pointer=dojo.query(".pointer",_a51)[0];this._outerPointer=dojo.query(".outerPointer",_a51)[0];this._actionList=dojo.query(".actionsPane .actionList",_a51)[0];this._eventConnections=[dojo.connect(dojo.query(".close",_a53)[0],"onclick",this,this.hide),dojo.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),dojo.connect(this._nextFeatureButton,"onclick",this,this.selectNext),dojo.connect(this._maxButton,"onclick",this,this._toggleSize),dojo.connect(dojo.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature)];if(esri.isTouchEnabled){var _a54=esri.setScrollable(this._contentPane);this._eventConnections.push(_a54[0],_a54[1]);}this._setVisibility(false);this.isShowing=false;},setMap:function(map){this.inherited(arguments);dojo.place(this.domNode,map.root);if(this.highlight){this.enableHighlight(map);}this._maxHeight=dojo.style(this._contentPane,"maxHeight");},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_a55){if(!esri._isDefined(_a55)||_a55===""){_a55="&nbsp;";}this.destroyDijits(this._title);this.place(_a55,this._title);if(this.isShowing){this.startupDijits(this._title);this.reposition();}},setContent:function(_a56){if(!esri._isDefined(_a56)||_a56===""){_a56="&nbsp;";}this.destroyDijits(this._contentPane);this.place(_a56,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);this.reposition();}},show:function(_a57,_a58){if(!_a57){this._setVisibility(true);this.isShowing=true;return;}var map=this.map,_a59;if(_a57.spatialReference){this._location=_a57;_a59=map.toScreen(_a57);}else{this._location=map.toMap(_a57);_a59=_a57;}var _a5a=map._getFrameWidth();if(_a5a!==-1){_a59.x=_a59.x%_a5a;if(_a59.x<0){_a59.x+=_a5a;}if(map.width>_a5a){var _a5b=(map.width-_a5a)/2;while(_a59.x<_a5b){_a59.x+=_a5a;}}}if(this._maximized){this.restore();}else{this._setPosition(_a59);}if(_a58&&_a58.closestFirst){this.showClosestFirst(this._location);}if(!this.isShowing){this._setVisibility(true);this.isShowing=true;this.onShow();}},hide:function(){if(this.isShowing){this._setVisibility(false);this.isShowing=false;this.onHide();}},resize:function(_a5c,_a5d){this._sizers.style({width:_a5c+"px"});dojo.style(this._contentPane,"maxHeight",_a5d+"px");this._maxHeight=_a5d;if(this.isShowing){this.reposition();}},reposition:function(){if(this.map&&this._location&&!this._maximized&&this.isShowing){this._setPosition(this.map.toScreen(this._location));}},onShow:function(){this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.reposition();this.showHighlight();},onHide:function(){this._unfollowMap();this.hideHighlight();},maximize:function(){var map=this.map;if(!map||this._maximized){return;}this._maximized=true;var max=this._maxButton;dojo.removeClass(max,"maximize");dojo.addClass(max,"restore");dojo.attr(max,"title",this._nls.NLS_restore);var _a5e=this.marginLeft,_a5f=this.marginTop,_a60=map.width-(2*_a5e),_a61=map.height-(2*_a5f),_a62=this.domNode;dojo.style(_a62,{left:_a5e+"px",right:null,top:_a5f+"px",bottom:null});dojo.style(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=dojo.style(this._sizers[0],"width");this._savedHeight=dojo.style(this._contentPane,"maxHeight");this._sizers.style({width:_a60+"px"});dojo.style(this._contentPane,{maxHeight:(_a61-65)+"px",height:(_a61-65)+"px"});this._showPointer("");this._unfollowMap();dojo.addClass(this.domNode,"esriPopupMaximized");this.onMaximize();},restore:function(){var map=this.map;if(!map||!this._maximized){return;}this._maximized=false;var max=this._maxButton;dojo.removeClass(max,"restore");dojo.addClass(max,"maximize");dojo.attr(max,"title",this._nls.NLS_maximize);dojo.style(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();dojo.removeClass(this.domNode,"esriPopupMaximized");this.onRestore();},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);dojo.forEach(this._eventConnections,dojo.disconnect);dojo.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},onSetFeatures:function(){},onClearFeatures:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},onSelectionChange:function(){var ptr=this.selectedIndex;this._updateUI();if(ptr>=0){this.setContent(this.features[ptr].getContent());this.updateHighlight(this.map,this.features[ptr]);if(this.isShowing){this.showHighlight();}}},onDfdComplete:function(){this.inherited(arguments);this._updateUI();},onMaximize:function(){},onRestore:function(){},_setVisibility:function(_a63){dojo.style(this.domNode,"visibility",_a63?"visible":"hidden");},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[dojo.connect(map,"onPanStart",this,this._onPanStart),dojo.connect(map,"onPan",this,this._onPan),dojo.connect(map,"onZoomStart",this,this._onZoomStart),dojo.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _a64=this._handles;if(_a64){dojo.forEach(_a64,dojo.disconnect,dojo);this._handles=null;}},_onPanStart:function(){var _a65=this.domNode.style;this._panOrigin={left:_a65.left,top:_a65.top,right:_a65.right,bottom:_a65.bottom};},_onPan:function(_a66,_a67){var _a68=this._panOrigin,dx=_a67.x,dy=_a67.y,left=_a68.left,top=_a68.top,_a69=_a68.right,_a6a=_a68.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_a69){_a69=(parseFloat(_a69)-dx)+"px";}if(_a6a){_a6a=(parseFloat(_a6a)-dy)+"px";}dojo.style(this.domNode,{left:left,top:top,right:_a69,bottom:_a6a});},_onZoomStart:function(){this._setVisibility(false);},_onExtentChange:function(_a6b,_a6c,_a6d){if(_a6d){this._setVisibility(true);this.show(this._targetLocation||this._location);}this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_a6e){var posX=_a6e.x,posY=_a6e.y,offX=this.offsetX||0,offY=this.offsetY||0,_a6f=0,_a70=0,_a71=dojo.position(this.map.container,true),_a72=_a71.w,_a73=_a71.h,_a74="Left",_a75="bottom",_a76=dojo.contentBox(this._positioner),_a77=_a76.w/2,_a78=_a76.h/2,maxH=dojo.style(this._sizers[0],"height")+this._maxHeight+dojo.style(this._sizers[2],"height"),_a79=maxH/2,xmin=0,ymin=0,xmax=_a72,ymax=_a73,_a7a=posX,_a7b=posY;var _a7c=dojo.getObject("dojo.window.getBox");if(_a7c){_a7c=_a7c();xmin=Math.max(_a7c.l,_a71.x);xmax=Math.min(_a7c.l+_a7c.w,_a71.x+_a71.w);ymin=Math.max(_a7c.t,_a71.y);ymax=Math.min(_a7c.t+_a7c.h,_a71.y+_a71.h);_a7a+=_a71.x;_a7b+=_a71.y;}if(((_a7b-ymin)>_a79)&&((ymax-_a7b)>=_a79)){if((xmax-_a7a)>=_a76.w){_a75="";_a74="Left";}else{if((_a7a-xmin)>=_a76.w){_a75="";_a74="Right";}}}if(_a74&&_a75){if(((_a7a-xmin)>_a77)&&((xmax-_a7a)>=_a77)){if((_a7b-ymin)>=maxH){_a74="";_a75="bottom";}else{if((ymax-_a7b)>=maxH){_a74="";_a75="top";}}}}if(_a74&&_a75){if(_a7a<=xmax/2){_a74="Left";}else{if(_a7a<=xmax){_a74="Right";}}if(_a7b<=ymax/2){_a75="top";}else{if(_a7b<=ymax){_a75="bottom";}}}var _a7d=_a75+_a74;switch(_a7d){case "top":case "bottom":_a70=14;break;case "Left":case "Right":_a6f=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_a70=45;break;}dojo.style(this.domNode,{left:posX+"px",top:posY+"px",right:null,bottom:null});var _a7e={left:null,right:null,top:null,bottom:null};if(_a74){_a7e[_a74.toLowerCase()]=(_a6f+offX)+"px";}else{_a7e.left=(-_a77)+"px";}if(_a75){_a7e[_a75]=(_a70+offY)+"px";}else{_a7e.top=(-_a78)+"px";}dojo.style(this._positioner,_a7e);this._showPointer(_a7d);},_showPointer:function(_a7f){dojo.removeClass(this._pointer,["top","bottom","right","left","topLeft","topRight","bottomRight","bottomLeft","hidden"]);dojo.removeClass(this._outerPointer,["right","left","hidden"]);if(_a7f==="Right"||_a7f==="Left"){_a7f=_a7f.toLowerCase();dojo.addClass(this._outerPointer,_a7f);}else{dojo.addClass(this._pointer,_a7f);}},_setPagerCallbacks:function(_a80,_a81,_a82){if(_a80===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(_a80===this._pagerScope){return;}this._pagerScope=_a80;if(_a80===this){_a81=this.selectPrevious;_a82=this.selectNext;}var _a83=this._eventConnections;dojo.disconnect(_a83[1]);dojo.disconnect(_a83[2]);if(_a81){_a83[1]=dojo.connect(this._prevFeatureButton,"onclick",_a80,_a81);}if(_a82){_a83[2]=dojo.connect(this._nextFeatureButton,"onclick",_a80,_a82);}},_zoomToFeature:function(){var _a84=this.features,ptr=this.selectedIndex,map=this.map;if(_a84){var _a85=_a84[ptr].geometry,_a86,_a87,_a88=0,_a89;if(_a85){switch(_a85.type){case "point":_a86=_a85;break;case "multipoint":_a86=_a85.getPoint(0);_a87=_a85.getExtent();break;case "polyline":_a86=_a85.getPoint(0,0);_a87=_a85.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_a85.paths,function(path){var _a8a={"paths":[path,map.spatialReference]},_a8b=new esri.geometry.Polyline(_a8a),_a8c=_a8b.getExtent(),_a8d=Math.abs(_a8c.ymax-_a8c.ymin),_a8e=Math.abs(_a8c.xmax-_a8c.xmin),_a8f=(_a8e>_a8d)?_a8e:_a8d;if(_a8f>_a88){_a88=_a8f;_a89=_a8c;}});_a89.spatialReference=_a87.spatialReference;_a87=_a89;}break;case "polygon":_a86=_a85.getPoint(0,0);_a87=_a85.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_a85.rings,function(ring){var _a90={"rings":[ring,map.spatialReference]},_a91=new esri.geometry.Polygon(_a90),_a92=_a91.getExtent(),_a93=Math.abs(_a92.ymax-_a92.ymin),_a94=Math.abs(_a92.xmax-_a92.xmin),_a95=(_a94>_a93)?_a94:_a93;if(_a95>_a88){_a88=_a95;_a89=_a92;}});_a89.spatialReference=_a87.spatialReference;_a87=_a89;}break;}}if(!_a86){_a86=this._location;}if(!_a87||!_a87.intersects(this._location)){this._location=_a86;}if(_a87){map.setExtent(_a87,true);}else{var _a96=map.getNumLevels(),_a97=map.getLevel(),last=_a96-1,_a98=this.zoomFactor||1;if(_a96>0){if(_a97===last){return;}var _a99=_a97+_a98;if(_a99>last){_a99=last;}map._scrollZoomHandler({value:(_a99-_a97),mapPoint:_a86},true);}else{map._scrollZoomHandler({value:(1/Math.pow(2,_a98))*2,mapPoint:_a86},true);}}}},_updateUI:function(){var _a9a="&nbsp;",ptr=this.selectedIndex,_a9b=this.features,_a9c=this.deferreds,prev=this._prevFeatureButton,next=this._nextFeatureButton,_a9d=this._spinner,_a9e=this._actionList,nls=this._nls;if(_a9b&&_a9b.length>1){if(nls.NLS_pagingInfo){_a9a=esri.substitute({index:(ptr+1),total:_a9b.length},nls.NLS_pagingInfo);}if(ptr===0){dojo.addClass(prev,"hidden");}else{dojo.removeClass(prev,"hidden");}if(ptr===_a9b.length-1){dojo.addClass(next,"hidden");}else{dojo.removeClass(next,"hidden");}}else{dojo.addClass(prev,"hidden");dojo.addClass(next,"hidden");}this.setTitle(_a9a);if(_a9c&&_a9c.length){if(_a9b){dojo.removeClass(_a9d,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{dojo.addClass(_a9d,"hidden");if(!_a9b||!_a9b.length){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(_a9b&&_a9b.length){dojo.removeClass(_a9e,"hidden");}else{dojo.addClass(_a9e,"hidden");}}});dojo.declare("esri.dijit.PopupTemplate",[esri.PopupInfoTemplate],{chartTheme:"dojox.charting.themes.PlotKit.popup",constructor:function(json,_a9f){dojo.mixin(this,_a9f);this.initialize(json);this._nls=dojo.mixin({},esri.bundle.widgets.popup);},getTitle:function(_aa0){return this.info?this.getComponents(_aa0).title:"";},getContent:function(_aa1){return this.info?new esri.dijit._PopupRenderer({template:this,graphic:_aa1,chartTheme:this.chartTheme,_nls:this._nls},dojo.create("div")).domNode:"";}});dojo.declare("esri.dijit._PopupRenderer",[_a4d._Widget,_a4d._Templated],{templateString:"<div class='esriViewPopup'>"+"<div class='mainSection'>"+"<div class='header' dojoAttachPoint='_title'></div>"+"<div class='hzLine'></div>"+"<div dojoAttachPoint='_description'></div>"+"<div class='break'></div>"+"</div>"+"<div class='attachmentsSection hidden'>"+"<div>${_nls.NLS_attach}:</div>"+"<ul dojoAttachPoint='_attachmentsList'>"+"</ul>"+"<div class='break'></div>"+"</div>"+"<div class='mediaSection hidden'>"+"<div class='header' dojoAttachPoint='_mediaTitle'></div>"+"<div class='hzLine'></div>"+"<div class='caption' dojoAttachPoint='_mediaCaption'></div>"+"<div class='gallery' dojoAttachPoint='_gallery'>"+"<div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div>"+"<div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div>"+"<ul class='summary'>"+"<li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li>"+"<li class='image mediaIcon hidden'></li>"+"<li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li>"+"<li class='chart mediaIcon hidden'></li>"+"</ul>"+"<div class='frame' dojoAttachPoint='_mediaFrame'></div>"+"</div>"+"</div>"+"<div class='editSummarySection hidden' dojoAttachPoint='_editSummarySection'>"+"<div class='break'></div>"+"<div class='break hidden' dojoAttachPoint='_mediaBreak'></div>"+"<div class='editSummary' dojoAttachPoint='_editSummary'></div>"+"</div>"+"</div>",startup:function(){this.inherited(arguments);var _aa2=this.template,_aa3=this.graphic,_aa4=_aa2.getComponents(_aa3),_aa5=_aa4.title,_aa6=_aa4.description,_aa7=_aa4.fields,_aa8=_aa4.mediaInfos,_aa9=this.domNode,nls=this._nls;this._prevMedia.title=nls.NLS_prevMedia;this._nextMedia.title=nls.NLS_nextMedia;dojo.attr(this._title,"innerHTML",_aa5);if(!_aa5){dojo.addClass(this._title,"hidden");}if(!_aa6&&_aa7){_aa6="";dojo.forEach(_aa7,function(row){_aa6+=("<tr valign='top'>");_aa6+=("<td class='attrName'>"+row[0]+"</td>");_aa6+=("<td class='attrValue'>"+row[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>"+nls.NLS_moreInfo+"</a>")+"</td>");_aa6+=("</tr>");});if(_aa6){_aa6="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+_aa6+"</table>";}}dojo.attr(this._description,"innerHTML",_aa6);if(!_aa6){dojo.addClass(this._description,"hidden");}dojo.query("a",this._description).forEach(function(node){dojo.attr(node,"target","_blank");});if(_aa5&&_aa6){dojo.query(".mainSection .hzLine",_aa9).removeClass("hidden");}else{if(_aa5||_aa6){dojo.query(".mainSection .hzLine",_aa9).addClass("hidden");}else{dojo.query(".mainSection",_aa9).addClass("hidden");}}var dfd=(this._dfd=_aa2.getAttachments(_aa3));if(dfd){dfd.addBoth(dojo.hitch(this,this._attListHandler,dfd));dojo.attr(this._attachmentsList,"innerHTML","<li>"+nls.NLS_searching+"...</li>");dojo.query(".attachmentsSection",_aa9).removeClass("hidden");}if(_aa8&&_aa8.length){dojo.query(".mediaSection",_aa9).removeClass("hidden");dojo.setSelectable(this._mediaFrame,false);this._mediaInfos=_aa8;this._mediaPtr=0;this._updateUI();this._displayMedia();}if(_aa4.editSummary){dojo.attr(this._editSummary,"innerHTML",_aa4.editSummary);if(_aa8&&_aa8.length){dojo.removeClass(this._mediaBreak,"hidden");}dojo.removeClass(this._editSummarySection,"hidden");}},destroy:function(){if(this._dfd){this._dfd.cancel();}this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments);},_goToPrevMedia:function(){var ptr=this._mediaPtr-1;if(ptr<0){return;}this._mediaPtr--;this._updateUI();this._displayMedia();},_goToNextMedia:function(){var ptr=this._mediaPtr+1;if(ptr===this._mediaInfos.length){return;}this._mediaPtr++;this._updateUI();this._displayMedia();},_updateUI:function(){var _aaa=this._mediaInfos,_aab=_aaa.length,_aac=this.domNode,_aad=this._prevMedia,_aae=this._nextMedia;if(_aab>1){var _aaf=0,_ab0=0;dojo.forEach(_aaa,function(info){if(info.type==="image"){_aaf++;}else{if(info.type.indexOf("chart")!==-1){_ab0++;}}});if(_aaf){dojo.attr(this._imageCount,"innerHTML",_aaf);dojo.query(".summary .image",_aac).removeClass("hidden");}if(_ab0){dojo.attr(this._chartCount,"innerHTML",_ab0);dojo.query(".summary .chart",_aac).removeClass("hidden");}}else{dojo.query(".summary",_aac).addClass("hidden");dojo.addClass(_aad,"hidden");dojo.addClass(_aae,"hidden");}var ptr=this._mediaPtr;if(ptr===0){dojo.addClass(_aad,"hidden");}else{dojo.removeClass(_aad,"hidden");}if(ptr===_aab-1){dojo.addClass(_aae,"hidden");}else{dojo.removeClass(_aae,"hidden");}this._destroyFrame();},_displayMedia:function(){var info=this._mediaInfos[this._mediaPtr],_ab1=info.title,_ab2=info.caption,_ab3=dojo.query(".mediaSection .hzLine",this.domNode)[0];dojo.attr(this._mediaTitle,"innerHTML",_ab1);dojo[_ab1?"removeClass":"addClass"](this._mediaTitle,"hidden");dojo.attr(this._mediaCaption,"innerHTML",_ab2);dojo[_ab2?"removeClass":"addClass"](this._mediaCaption,"hidden");dojo[(_ab1&&_ab2)?"removeClass":"addClass"](_ab3,"hidden");if(info.type==="image"){this._showImage(info.value);}else{this._showChart(info.type,info.value);}},_showImage:function(_ab4){dojo.addClass(this._mediaFrame,"image");var _ab5=dojo.style(this._gallery,"height"),html="<img src='"+_ab4.sourceURL+"' onload='esri.dijit._PopupRenderer.prototype._imageLoaded(this,"+_ab5+");' />";if(_ab4.linkURL){html="<a target='_blank' href='"+_ab4.linkURL+"'>"+html+"</a>";}dojo.attr(this._mediaFrame,"innerHTML",html);},_showChart:function(type,_ab6){dojo.removeClass(this._mediaFrame,"image");var _ab7=this._chart=new _a4e.charting.Chart2D(dojo.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});var _ab8=_ab6.theme||this.chartTheme||"PlotKit.popup";_ab7.setTheme(dojo.getObject(_ab8)||dojo.getObject("dojox.charting.themes."+_ab8));switch(type){case "piechart":_ab7.addPlot("default",{type:"Pie",labels:false});_ab7.addSeries("Series A",_ab6.fields);break;case "linechart":_ab7.addPlot("default",{type:"Markers"});_ab7.addAxis("x",{min:0,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_ab7.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});dojo.forEach(_ab6.fields,function(info,idx){info.x=idx+1;});_ab7.addSeries("Series A",_ab6.fields);break;case "columnchart":_ab7.addPlot("default",{type:"Columns",gap:3});_ab7.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});_ab7.addSeries("Series A",_ab6.fields);break;case "barchart":_ab7.addPlot("default",{type:"Bars",gap:3});_ab7.addAxis("x",{includeZero:true,fixUpper:"minor",minorLabels:false});_ab7.addAxis("y",{vertical:true,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_ab7.addSeries("Series A",_ab6.fields);break;}this._action=new _a4e.charting.action2d.Tooltip(_ab7);_ab7.render();},_destroyFrame:function(){if(this._chart){this._chart.destroy();this._chart=null;}if(this._action){this._action.destroy();this._action=null;}dojo.attr(this._mediaFrame,"innerHTML","");},_imageLoaded:function(img,_ab9){var _aba=img.height;if(_aba<_ab9){var diff=Math.round((_ab9-_aba)/2);dojo.style(img,"marginTop",diff+"px");}},_attListHandler:function(dfd,_abb){if(dfd===this._dfd){this._dfd=null;var html="";if(!(_abb instanceof Error)&&_abb&&_abb.length){dojo.forEach(_abb,function(info){html+=("<li>");html+=("<a href='"+info.url+"' target='_blank'>"+(info.name||"[No name]")+"</a>");html+=("</li>");});}dojo.attr(this._attachmentsList,"innerHTML",html||"<li>"+this._nls.NLS_noAttach+"</li>");}}});});},"dojox/charting/scaler/common":function(){define("dojox/charting/scaler/common",["dojo/_base/lang"],function(lang){var eq=function(a,b){return Math.abs(a-b)<=0.000001*(Math.abs(a)+Math.abs(b));};var _abc=lang.getObject("dojox.charting.scaler.common",true);var _abd={};return lang.mixin(_abc,{doIfLoaded:function(_abe,_abf,_ac0){if(_abd[_abe]==undefined){try{_abd[_abe]=require(_abe);}catch(e){_abd[_abe]=null;}}if(_abd[_abe]){return _abf(_abd[_abe]);}else{return _ac0();}},findString:function(val,text){val=val.toLowerCase();for(var i=0;i<text.length;++i){if(val==text[i]){return true;}}return false;},getNumericLabel:function(_ac1,_ac2,_ac3){var def="";_abc.doIfLoaded("dojo/number",function(_ac4){def=(_ac3.fixed?_ac4.format(_ac1,{places:_ac2<0?-_ac2:0}):_ac4.format(_ac1))||"";},function(){def=_ac3.fixed?_ac1.toFixed(_ac2<0?-_ac2:0):_ac1.toString();});if(_ac3.labelFunc){var r=_ac3.labelFunc(def,_ac1,_ac2);if(r){return r;}}if(_ac3.labels){var l=_ac3.labels,lo=0,hi=l.length;while(lo<hi){var mid=Math.floor((lo+hi)/2),val=l[mid].value;if(val<_ac1){lo=mid+1;}else{hi=mid;}}if(lo<l.length&&eq(l[lo].value,_ac1)){return l[lo].text;}--lo;if(lo>=0&&lo<l.length&&eq(l[lo].value,_ac1)){return l[lo].text;}lo+=2;if(lo<l.length&&eq(l[lo].value,_ac1)){return l[lo].text;}}return def;}});});},"esri/layers/FeatureLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/graphics,esri/tasks/query,dojo/io/iframe,esri/layers/agscommon,dojo/date/locale"],function(_ac5,dojo,_ac6){dojo.provide("esri.layers.FeatureLayer");dojo.require("esri.layers.graphics");dojo.require("esri.tasks.query");dojo.require("dojo.io.iframe");dojo.require("esri.layers.agscommon");dojo.require("dojo.date.locale");dojo.declare("esri.layers.FeatureLayer",esri.layers.GraphicsLayer,{constructor:function(url,_ac7){this._outFields=_ac7&&_ac7.outFields;this._loadCallback=_ac7&&_ac7.loadCallback;var _ac8=_ac7&&_ac7._usePatch;this._usePatch=(_ac8===null||_ac8===undefined)?true:_ac8;this._trackIdField=_ac7&&_ac7.trackIdField;this.objectIdField=_ac7&&_ac7.objectIdField;this._maxOffset=_ac7&&_ac7.maxAllowableOffset;this._optEditable=_ac7&&_ac7.editable;this._optAutoGen=_ac7&&_ac7.autoGeneralize;this.editSummaryCallback=_ac7&&_ac7.editSummaryCallback;this.userId=_ac7&&_ac7.userId;this.userIsAdmin=_ac7&&_ac7.userIsAdmin;this.useMapTime=(_ac7&&_ac7.hasOwnProperty("useMapTime"))?(!!_ac7.useMapTime):true;this.source=_ac7&&_ac7.source;this.gdbVersion=_ac7&&_ac7.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(esri._isDefined(_ac7&&_ac7.mode)?_ac7.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_ac7&&_ac7.tileWidth)||512;this._tileHeight=(_ac7&&_ac7.tileHeight)||512;this._mode=new esri.layers._OnDemandMode(this);var _ac9=_ac7&&_ac7.latticeTiling;this.latticeTiling=_ac9;break;case ctor.MODE_SELECTION:this._mode=new esri.layers._SelectionMode(this);this._isSelOnly=true;break;}this._initLayer=dojo.hitch(this,this._initLayer);this._selectHandler=dojo.hitch(this,this._selectHandler);this._editable=false;if(dojo.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new esri.tasks.QueryTask(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _aca=this._url.path;this._fserver=false;if(_aca.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _acb=_ac7&&_ac7.resourceInfo;if(_acb){this._initLayer(_acb);}else{if(this.source){var _acc={source:this.source.toJson()};this._url.query=dojo.mixin(this._url.query,{layer:dojo.toJson(_acc)});}if(this.gdbVersion){this._url.query=dojo.mixin(this._url.query,{gdbVersion:this.gdbVersion});}esri.request({url:_aca,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_acd,io){if(_acd||io){this._json=_acd;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_acd&&_acd._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;this._featureSet=_acd.featureSet;this._nextId=_acd.nextObjectId;_acd=_acd.layerDefinition;}if(_acd.hasOwnProperty("capabilities")){var _ace=(this.capabilities=_acd.capabilities);if(_ace&&_ace.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(esri._isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=dojo.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_acd.geometryType==="esriGeometryPolyline")||(_acd.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=esri._isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}this.minScale=_acd.effectiveMinScale||_acd.minScale||0;this.maxScale=_acd.effectiveMaxScale||_acd.maxScale||0;this.layerId=_acd.id;this.name=_acd.name;this.description=_acd.description;this.copyright=_acd.copyrightText;this.type=_acd.type;this.geometryType=_acd.geometryType;this.displayField=_acd.displayField;this.defaultDefinitionExpression=_acd.definitionExpression;this.fullExtent=new esri.geometry.Extent(_acd.extent);this.defaultVisibility=_acd.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_acd.indexedFields;this.maxRecordCount=_acd.maxRecordCount;this.canModifyLayer=_acd.canModifyLayer;this.supportsStatistics=_acd.supportsStatistics;this.supportsAdvancedQueries=_acd.supportsAdvancedQueries;this.hasLabels=_acd.hasLabels;this.canScaleSymbols=_acd.canScaleSymbols;this.supportsRollbackOnFailure=_acd.supportsRollbackOnFailure;this.syncCanReturnChanges=_acd.syncCanReturnChanges;this.isDataVersioned=_acd.isDataVersioned;this.editFieldsInfo=_acd.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_acd.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_acd.relationships;this.allowGeometryUpdates=esri._isDefined(_acd.allowGeometryUpdates)?_acd.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _acf=(this.fields=[]),_ad0=_acd.fields,i;for(i=0;i<_ad0.length;i++){_acf.push(new esri.layers.Field(_ad0[i]));}if(!this.objectIdField){this.objectIdField=_acd.objectIdField;if(!this.objectIdField){_ad0=_acd.fields;for(i=0;i<_ad0.length;i++){var _ad1=_ad0[i];if(_ad1.type==="esriFieldTypeOID"){this.objectIdField=_ad1.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noOIDField));}}if(!esri._isDefined(this._nextId)){var _ad2=this.objectIdField,_ad3=-1;if(this._collection&&_ad2){var fset=this._featureSet,_ad4=fset&&fset.features,il=_ad4?_ad4.length:0,oid,attr;for(i=0;i<il;i++){attr=_ad4[i].attributes;oid=attr&&attr[_ad2];if(oid>_ad3){_ad3=oid;}}}this._nextId=(_ad3+1);}this.globalIdField=_acd.globalIdField;var _ad5=(this.typeIdField=_acd.typeIdField),_ad6;if(_ad5){_ad6=!this._getField(_ad5)&&this._getField(_ad5,true);if(_ad6){this.typeIdField=_ad6.name;}}this.visibilityField=_acd.visibilityField;var _ad7=_acd.defaultSymbol;if(_ad7){this.defaultSymbol=esri.symbol.fromJson(_ad7);}var _ad8=this.types=[],_ad9=_acd.types,_ada,_adb,_adc,_add=this.editFieldsInfo,_ade=_add&&_add.creatorField,_adf=_add&&_add.editorField,fix=(_ade||_adf),_ae0=[];if(_ad9){for(i=0;i<_ad9.length;i++){_ada=new esri.layers.FeatureType(_ad9[i]);_adb=_ada.templates;if(fix&&_adb&&_adb.length){_ae0=_ae0.concat(_adb);}_ad8.push(_ada);}}var _ae1=_acd.templates,_ae2,_ae3=this.templates=[];if(_ae1){for(i=0;i<_ae1.length;i++){_ae2=new esri.layers.FeatureTemplate(_ae1[i]);if(fix){_ae0.push(_ae2);}_ae3.push(_ae2);}}for(i=0;i<_ae0.length;i++){_adc=dojo.getObject("prototype.attributes",false,_ae0[i]);if(_adc){if(_ade){delete _adc[_ade];}if(_adf){delete _adc[_adf];}}}var _ae4=_acd.timeInfo;if(_ae4){this.timeInfo=new esri.layers.TimeInfo(_ae4);this._startTimeField=_ae4.startTimeField;this._endTimeField=_ae4.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_ae4.trackIdField=this._trackIdField;}else{this._trackIdField=_ae4.trackIdField;}}this.hasAttachments=(!this._collection&&_acd.hasAttachments)?true:false;this.htmlPopupType=_acd.htmlPopupType;var _ae5=_acd.drawingInfo,_ae6;if(!this.renderer){if(_ae5&&_ae5.renderer){_ae6=_ae5.renderer;this.setRenderer(esri.renderer.fromJson(_ae6));if(_ae6.type==="classBreaks"){this.renderer._setMaxInclusiveness(true);}if(!this._collection){var _ae7=_ae6.type,_ae8=[];_ae6=this.renderer;switch(_ae7){case "simple":_ae8.push(_ae6.symbol);break;case "uniqueValue":case "classBreaks":_ae8.push(_ae6.defaultSymbol);_ae8=_ae8.concat(dojo.map(_ae6.infos,function(info){return info.symbol;}));break;}_ae8=dojo.filter(_ae8,esri._isDefined);var _ae9=this._url.path+"/images/",_aea=this._getToken();dojo.forEach(_ae8,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_ae9+url;}if(_aea&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_aea);}}});}}else{if(_ad7){_ad9=this.types;if(_ad9.length>0){_ae6=new esri.renderer.UniqueValueRenderer(this.defaultSymbol,this.typeIdField);dojo.forEach(_ad9,function(type){_ae6.addValue(type.id,type.symbol);});}else{_ae6=new esri.renderer.SimpleRenderer(this.defaultSymbol);}this.setRenderer(_ae6);}else{if(!this._isTable){var _aeb;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_aeb=new esri.symbol.SimpleMarkerSymbol();break;case "esriGeometryPolyline":_aeb=new esri.symbol.SimpleLineSymbol();break;case "esriGeometryPolygon":_aeb=new esri.symbol.SimpleFillSymbol();break;}this.setRenderer(_aeb?new esri.renderer.SimpleRenderer(_aeb):null);}}}}var _aec=(_ae5&&_ae5.transparency)||0;if(!esri._isDefined(this.opacity)&&_aec>0){this.opacity=1-(_aec/100);}this.version=_acd.currentVersion;if(!this.version){var ver;if("capabilities" in _acd||"drawingInfo" in _acd||"hasAttachments" in _acd||"htmlPopupType" in _acd||"relationships" in _acd||"timeInfo" in _acd||"typeIdField" in _acd||"types" in _acd){ver=10;}else{ver=9.3;}this.version=ver;}if((dojo.isIE||dojo.isSafari)&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();if(this._collection){this._fireUpdateStart();var _aed=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new esri.tasks.FeatureSet(_aed));this._fcAdded=true;}this.onLoad(this);var _aee=this._loadCallback;if(_aee){delete this._loadCallback;_aee(this);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _aef=this.renderer;if(_aef){this._ager=(_aef.declaredClass.indexOf("TemporalRenderer")!==-1&&_aef.observationAger&&_aef.observationRenderer);var _af0=dojo.filter([_aef,_aef.observationRenderer,_aef.latestObservationRenderer,_aef.trackRenderer],esri._isDefined);var _af1=[];dojo.forEach(_af0,function(rnd){_af1.push(rnd.attributeField);_af1.push(rnd.attributeField2);_af1.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_af1,esri._isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map,_af2){this._map=map;this._toggleTime(true);var div=this.inherited("_setMap",arguments);this.clearSelection();var _af3=this.renderer;if(this.timeInfo){if(this._trackIdField||(_af3&&(_af3.latestObservationRenderer||_af3.trackRenderer))){this._trackManager=new esri.layers._TrackManager(this);this._trackManager.initialize(map);}}this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._zoomHandler);this._zoomHandler();var mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map,_af4){var mode=this._mode;if(mode){mode.destroy();this._mode=null;}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}dojo.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},setEditable:function(_af5){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_af5;return this;}var _af6=this._editable;this._editable=_af5;this._updateCaps();if(_af6!==_af5){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_af7){var _af8={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _af8;}var _af9=_af7&&_af7.feature,_afa=_af7&&_af7.userId,caps=dojo.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),dojo.trim),_afb=dojo.indexOf(caps,"editing")>-1,_afc=_afb&&(dojo.indexOf(caps,"create")>-1),_afd=_afb&&(dojo.indexOf(caps,"update")>-1),_afe=_afb&&(dojo.indexOf(caps,"delete")>-1),_aff=this.ownershipBasedAccessControlForFeatures,_b00=this.editFieldsInfo,_b01=_b00&&_b00.creatorField,_b02=_b00&&_b00.realm,_b03=_af9&&_af9.attributes,_b04=(_b03&&_b01)?_b03[_b01]:undefined,_b05,_b06=!!this.userIsAdmin,_b07=!_aff||_b06||!!(_aff.allowOthersToUpdate||_aff.allowUpdateToOthers),_b08=!_aff||_b06||!!(_aff.allowOthersToDelete||_aff.allowDeleteToOthers);if(_b06||(_afb&&!(_afc||_afd||_afe))){_afc=_afd=_afe=true;}_b05={"canCreate":_afc,"canUpdate":_afd,"canDelete":_afe};if(_b04===null){_b05.canUpdate=_afd&&_b07;_b05.canDelete=_afe&&_b08;}else{if(_b04===""){return _b05;}else{if(_b04){_afa=_afa||this.getUserId();if(_afa&&_b02){_afa=_afa+"@"+_b02;}if(_afa.toLowerCase()===_b04.toLowerCase()){return _b05;}else{_b05.canUpdate=_afd&&_b07;_b05.canDelete=_afe&&_b08;}}}}return _b05;},getUserId:function(){var _b09;if(this.loaded){_b09=(this.credential&&this.credential.userId)||this.userId||"";}return _b09;},setUserIsAdmin:function(_b0a){this.userIsAdmin=_b0a;},setEditSummaryCallback:function(_b0b){this.editSummaryCallback=_b0b;},getEditSummary:function(_b0c,_b0d,_b0e){_b0e=esri._isDefined(_b0e)?_b0e:(new Date()).getTime();var _b0f="",info=this.getEditInfo(_b0c,_b0d,_b0e),_b10=(_b0d&&_b0d.callback)||this.editSummaryCallback;if(_b10){info=_b10(_b0c,info)||"";}if(dojo.isString(info)){_b0f=info;}else{if(info){var _b11=info.action,_b12=info.userId,_b13=info.timeValue,_b14=0;if(_b11){_b14++;}if(_b12){_b14++;}if(esri._isDefined(_b13)){_b14++;}if(_b14>1){_b0f=(_b11==="edit"?"edit":"create")+(_b12?"User":"")+(esri._isDefined(_b13)?info.displayPattern:"");}}_b0f=_b0f&&esri.substitute(info,esri.bundle.layers.FeatureLayer[_b0f]);}return _b0f;},getEditInfo:function(_b15,_b16,_b17){if(!this.loaded){return;}_b17=esri._isDefined(_b17)?_b17:(new Date()).getTime();var _b18=(_b16&&_b16.action)||"last",_b19=this.editFieldsInfo,_b1a=_b19&&_b19.creatorField,_b1b=_b19&&_b19.creationDateField,_b1c=_b19&&_b19.editorField,_b1d=_b19&&_b19.editDateField,_b1e=_b19&&_b19.realm,_b1f=_b15&&_b15.attributes,_b20=(_b1f&&_b1a)?_b1f[_b1a]:undefined,_b21=(_b1f&&_b1b)?_b1f[_b1b]:null,_b22=(_b1f&&_b1c)?_b1f[_b1c]:undefined,_b23=(_b1f&&_b1d)?_b1f[_b1d]:null,_b24=this._getEditData(_b20,_b21,_b17),_b25=this._getEditData(_b22,_b23,_b17),_b26;switch(_b18){case "creation":_b26=_b24;break;case "edit":_b26=_b25;break;case "last":_b26=_b25||_b24;break;}if(_b26){_b26.action=(_b26===_b25)?"edit":"creation";}return _b26;},_getEditData:function(_b27,_b28,_b29){var data,_b2a,_b2b,_b2c=60000,_b2d=3600000,_b2e=2*_b2d,_b2f=24*_b2d,_b30=7*_b2f;if(esri._isDefined(_b28)){_b2a=_b29-_b28;if(_b2a<0){_b2b="Full";}else{if(_b2a<_b2c){_b2b="Seconds";}else{if(_b2a<(2*_b2c)){_b2b="Minute";}else{if(_b2a<_b2d){_b2b="Minutes";}else{if(_b2a<_b2e){_b2b="Hour";}else{if(_b2a<_b2f){_b2b="Hours";}else{if(_b2a<_b30){_b2b="WeekDay";}else{_b2b="Full";}}}}}}}}if((_b27!==undefined)||_b2b){data=data||{};data.userId=_b27;if(_b2b){var _b31=dojo.date.locale.format,_b32=new Date(_b28);data.minutes=Math.floor(_b2a/_b2c);data.hours=Math.floor(_b2a/_b2d);data.weekDay=_b31(_b32,{datePattern:"EEEE",selector:"date"});data.formattedDate=_b31(_b32,{selector:"date"});data.formattedTime=_b31(_b32,{selector:"time"});data.displayPattern=_b2b;data.timeValue=_b28;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_b33){if(!this.isEditable()){this._maxOffset=_b33;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_b34){if(!this.loaded){this._optAutoGen=_b34;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_b34;if(_b34){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setScaleRange:function(_b35,_b36){this.minScale=_b35||0;this.maxScale=_b36||0;if(this._map&&this._map.loaded){this._updateStatus();}},setGDBVersion:function(_b37){if(!this._collection&&(_b37!==this.gdbVersion)&&(_b37||this.gdbVersion)){this.gdbVersion=_b37;this._task.gdbVersion=_b37;this._url.query=dojo.mixin(this._url.query,{gdbVersion:_b37});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_b38){if(this._isSnapshot){this._timeDefn=_b38;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_b39,_b3a){this._timeOffset=_b39;this._timeOffsetUnits=_b3a;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this._suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_b3b,_b3c,_b3d,_b3e){_b3c=_b3c||this.constructor.SELECTION_NEW;var _b3f=this._getShallowClone(_b3b),map=this._map,_b40,dfd=esri._fixDfd(new dojo.Deferred(esri._dfdCanceller));_b3f.outFields=this._getOutFields();_b3f.returnGeometry=true;if(map){_b3f.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_b3f)){_b40={features:[]};this._selectHandler(_b40,_b3c,_b3d,_b3e,dfd);return dfd;}var _b41=this._canDoClientSideQuery(_b3f);if(_b41){_b40={features:this._doQuery(_b3f,_b41)};this._selectHandler(_b40,_b3c,_b3d,_b3e,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_b3e,dfd,true);return dfd;}var self=this;if(this._ts){_b3f._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_b3f);temp.addCallbacks(function(_b42){self._selectHandler(_b42,_b3c,_b3d,_b3e,dfd);},function(err){self._resolve([err],null,_b3e,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _b43=this._selectedFeatures,_b44=[],item;for(item in _b43){if(_b43.hasOwnProperty(item)){_b44.push(_b43[item]);}}return _b44;},clearSelection:function(_b45){var _b46=this._selectedFeatures,mode=this._mode,item;for(item in _b46){if(_b46.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_b45){this.onSelectionClear();}return this;},setSelectionSymbol:function(_b47){this._selectionSymbol=_b47;if(_b47){var _b48=this._selectedFeatures,item;for(item in _b48){if(_b48.hasOwnProperty(item)){_b48[item].setSymbol(_b47);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_b49,_b4a,_b4b,_b4c,_b4d){var _b4e=_b4d.assembly,dfd=_b4d.dfd;this._applyNormalized(adds,_b4e&&_b4e[0]);this._applyNormalized(_b49,_b4e&&_b4e[1]);this.onBeforeApplyEdits(adds,_b49,_b4a);var i,_b4f={},_b50=this.objectIdField,_b51={f:"json"},_b52=false;if(this._collection){var _b53={};_b53.addResults=adds?dojo.map(adds,function(){_b52=true;return {objectId:this._nextId++,success:true};},this):null;_b53.updateResults=_b49?dojo.map(_b49,function(_b54){_b52=true;var oid=_b54.attributes[_b50];_b4f[oid]=_b54;return {objectId:oid,success:true};},this):null;_b53.deleteResults=_b4a?dojo.map(_b4a,function(_b55){_b52=true;return {objectId:_b55.attributes[_b50],success:true};},this):null;if(_b52){this._editHandler(_b53,adds,_b4f,_b4b,_b4c,dfd);}return;}if(adds&&adds.length>0){_b51.adds=this._convertFeaturesToJson(adds,0,1);_b52=true;}if(_b49&&_b49.length>0){for(i=0;i<_b49.length;i++){var _b56=_b49[i];_b4f[_b56.attributes[_b50]]=_b56;}_b51.updates=this._convertFeaturesToJson(_b49,0,0,1);_b52=true;}if(_b4a&&_b4a.length>0){var ids=[];for(i=0;i<_b4a.length;i++){ids.push(_b4a[i].attributes[_b50]);}_b51.deletes=ids.join(",");_b52=true;}if(_b52){var self=this;return esri.request({url:this._url.path+"/applyEdits",content:dojo.mixin(_b51,this._url.query),callbackParamName:"callback",load:function(_b57){self._editHandler(_b57,adds,_b4f,_b4b,_b4c,dfd);},error:function(err){self._resolve([err],null,_b4c,dfd,true);}},{usePost:true});}},queryFeatures:function(_b58,_b59,_b5a){return this._query("execute","onQueryFeaturesComplete",_b58,_b59,_b5a);},queryRelatedFeatures:function(_b5b,_b5c,_b5d){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_b5b,_b5c,_b5d);},queryIds:function(_b5e,_b5f,_b60){return this._query("executeForIds","onQueryIdsComplete",_b5e,_b5f,_b60);},queryCount:function(_b61,_b62,_b63){return this._query("executeForCount","onQueryCountComplete",_b61,_b62,_b63);},queryAttachmentInfos:function(_b64,_b65,_b66){var url=this._url.path+"/"+_b64+"/attachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this;dfd._pendingDfd=esri.request({url:url,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_b67){var _b68=_b67.attachmentInfos,_b69;dojo.forEach(_b68,function(info){_b69=dojo.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_b69?("?"+_b69):"");info.objectId=_b64;});self._resolve([_b68],"onQueryAttachmentInfosComplete",_b65,dfd);},error:function(err){self._resolve([err],null,_b66,dfd,true);}});return dfd;},addAttachment:function(_b6a,_b6b,_b6c,_b6d){return this._sendAttachment("add",_b6a,_b6b,_b6c,_b6d);},updateAttachment:function(_b6e,_b6f,_b70,_b71,_b72){_b70.appendChild(dojo.create("input",{type:"hidden",name:"attachmentId",value:_b6f}));return this._sendAttachment("update",_b6e,_b70,_b71,_b72);},deleteAttachments:function(_b73,_b74,_b75,_b76){var url=this._url.path+"/"+_b73+"/deleteAttachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this,_b77={f:"json",attachmentIds:_b74.join(",")};dfd._pendingDfd=esri.request({url:url,content:dojo.mixin(_b77,this._url.query),callbackParamName:"callback",load:dojo.hitch(this,function(_b78){var _b79=_b78.deleteAttachmentResults;_b79=dojo.map(_b79,function(_b7a){var res=new esri.layers.FeatureEditResult(_b7a);res.attachmentId=res.objectId;res.objectId=_b73;return res;});self._resolve([_b79],"onDeleteAttachmentsComplete",_b75,dfd);}),error:function(err){self._resolve([err],null,_b76,dfd,true);}},{usePost:true});return dfd;},addType:function(_b7b){var _b7c=this.types;if(_b7c){var _b7d=dojo.some(_b7c,function(type){if(type.id==_b7b.id){return true;}return false;});if(_b7d){return false;}else{_b7c.push(_b7b);}}else{this.types=[_b7b];}this._typesDirty=true;return true;},deleteType:function(_b7e){if(!this._collection){return;}var _b7f=this.types;if(_b7f){var _b80=-1;dojo.some(_b7f,function(type,_b81){if(type.id==_b7e){_b80=_b81;return true;}return false;});if(_b80>-1){this._typesDirty=true;return _b7f.splice(_b80,1)[0];}}},toJson:function(){var _b82=this._json,json=dojo.isString(_b82)?dojo.fromJson(_b82):dojo.clone(_b82);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _b83=json.layerDefinition,_b84=this._collection;if(_b84&&this._typesDirty){_b83.types=dojo.map(this.types||[],function(type){return type.toJson();});var _b85=this.renderer,_b86=_b83.drawingInfo;if(_b86&&_b85&&_b85.declaredClass.indexOf("TemporalRenderer")===-1){_b86.renderer=_b85.toJson();}}var _b87=null;if(!(_b84&&!this._fcAdded)){_b87={geometryType:_b83.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=dojo.mixin({},json.featureSet||{},_b87);if(_b84){json.nextObjectId=this._nextId;_b83.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_updateCaps:function(){var _b88=this._editable,_b89=dojo.trim(this.capabilities||""),_b8a=dojo.map((_b89?_b89.split(","):[]),dojo.trim),caps=dojo.map((_b89?_b89.toLowerCase().split(","):[]),dojo.trim),_b8b=dojo.indexOf(caps,"editing"),cap,i,_b8c,_b8d={"Create":dojo.indexOf(caps,"create"),"Update":dojo.indexOf(caps,"update"),"Delete":dojo.indexOf(caps,"delete")};if(_b88&&_b8b===-1){_b8a.push("Editing");}else{if(!_b88&&_b8b>-1){_b8c=[_b8b];for(cap in _b8d){if(_b8d[cap]>-1){_b8c.push(_b8d[cap]);}}_b8c.sort();for(i=_b8c.length-1;i>=0;i--){_b8a.splice(_b8c[i],1);}}}this.capabilities=_b8a.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},_getDesiredStatus:function(){return this.visible&&this._isMapAtVisibleScale();},_isMapAtVisibleScale:function(){if(!this._map){return false;}var _b8e=esri.geometry.getScale(this._map);var _b8f=this.minScale,_b90=this.maxScale,_b91=!_b8f,_b92=!_b90;if(!_b91&&_b8e<=_b8f){_b91=true;}if(!_b92&&_b8e>=_b90){_b92=true;}return (_b91&&_b92)?true:false;},_suspend:function(){this.inherited("_suspend",arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},_resume:function(){this.inherited("_resume",arguments);this._toggleTime(true);var mode=this._mode;if(mode){mode.resume();}},_zoomHandler:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}this._updateStatus();}},_toggleTime:function(_b93){var map=this._map;if(_b93&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=dojo.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;dojo.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_b94){this._mapTimeExtent=_b94;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_b95){var _b96=this._timeOffset,_b97=this._timeOffsetUnits;return (_b95&&_b96&&_b97)?_b95.offset(-1*_b96,_b97):_b95;},_getTimeOverlap:function(_b98,_b99){if(_b98&&_b99){return _b98.intersection(_b99);}else{return _b98||_b99;}},_getTimeFilter:function(_b9a){var _b9b=this.getTimeDefinition(),_b9c=null,_b9d;if(_b9b||_b9c){_b9d=this._getTimeOverlap(_b9b,_b9c);if(!_b9d){return [false];}}if(_b9a){_b9a=_b9d?this._getTimeOverlap(_b9a,_b9d):_b9a;if(!_b9a){return [false];}}else{_b9a=_b9d;}return [true,_b9a];},_getAttributeFilter:function(_b9e){var _b9f=this.getDefinitionExpression();if(_b9e){_b9e=_b9f?"("+_b9f+") AND ("+_b9e+")":_b9e;}else{_b9e=_b9f;}return _b9e;},_applyQueryFilters:function(_ba0){_ba0.where=this._getAttributeFilter(_ba0.where);_ba0.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _ba1=this._getTimeFilter(_ba0.timeExtent);if(!_ba1[0]){return false;}else{_ba0.timeExtent=_ba1[1];}}return true;},_add:function(_ba2){var _ba3=this._selectionSymbol,attr=_ba2.attributes,_ba4=this.visibilityField;if(_ba3&&this._isSelOnly){_ba2.setSymbol(_ba3);}if(_ba4&&attr&&attr.hasOwnProperty(_ba4)){_ba2[attr[_ba4]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_ba5){var _ba6=[],map=this._map;if(this._isTable||!map){return;}if(_ba5.text||(_ba5.where&&_ba5.where!==this.getDefinitionExpression())){return;}var _ba7=this._isSnapshot,_ba8=this._isSelOnly;var _ba9=_ba5.geometry;if(_ba9){if(!_ba8&&_ba5.spatialRelationship===esri.tasks.Query.SPATIAL_REL_INTERSECTS&&(_ba9.type==="extent"&&(_ba7||map.extent.contains(_ba9)))){_ba6.push(1);}else{return;}}var ids=_ba5.objectIds;if(ids){if(_ba7){_ba6.push(2);}else{var len=ids.length,mode=this._mode,_baa=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_baa++;}}if(_baa===len){_ba6.push(2);}else{return;}}}if(this.timeInfo){var _bab=_ba5.timeExtent,_bac=this._mapTimeExtent;if(_ba7){if(_bab){_ba6.push(3);}}else{if(_ba8){if(_bab){return;}}else{if(_bac){if(dojo.indexOf(_ba6,2)!==-1){if(_bab){_ba6.push(3);}}else{return;}}else{if(_ba6.length>0){if(_bab){_ba6.push(3);}}else{if(_bab){return;}}}}}}return _ba6.length>0?_ba6:null;},_doQuery:function(_bad,_bae,_baf){var _bb0=[],mode=this._mode,_bb1=this.objectIdField,i,len,_bb2;if(dojo.indexOf(_bae,2)!==-1){_bb0=[];var ids=_bad.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_bb0.push(obj);}}if(_bb0.length===0){return [];}}if(dojo.indexOf(_bae,1)!==-1){_bb2=_bb0.length>0?_bb0:this.graphics;len=_bb2.length;var _bb3=_bad.geometry._normalize(null,true);_bb0=[];for(i=0;i<len;i++){var _bb4=_bb2[i],_bb5=_bb4.geometry;if(_bb5){if(this.normalization&&_bb3.length){if(_bb3[0].intersects(_bb5)||_bb3[1].intersects(_bb5)){_bb0.push(_bb4);}}else{if(_bb3.intersects(_bb5)){_bb0.push(_bb4);}}}}if(_bb0.length===0){return [];}}if(dojo.indexOf(_bae,3)!==-1){if(this.timeInfo){_bb2=_bb0.length>0?_bb0:this.graphics;var time=_bad.timeExtent,_bb6=this._filterByTime(_bb2,time.startTime,time.endTime);_bb0=_bb6.match;}}if(_baf){return dojo.map(_bb0,function(obj){return obj.attributes[_bb1];},this);}else{return _bb0;}},_filterByTime:function(_bb7,_bb8,_bb9){var _bba=this._startTimeField,_bbb=this._endTimeField,_bbc;if(!this._twoTimeFields){_bbc=_bba||_bbb;}var _bbd=esri._isDefined,yea=[],nay=[],i,len=_bb7.length,_bbe,_bbf;_bb8=_bb8?_bb8.getTime():-Infinity;_bb9=_bb9?_bb9.getTime():Infinity;if(_bbc){for(i=0;i<len;i++){_bbe=_bb7[i];_bbf=_bbe.attributes;var time=_bbf[_bbc];if(time>=_bb8&&time<=_bb9){yea.push(_bbe);}else{nay.push(_bbe);}}}else{for(i=0;i<len;i++){_bbe=_bb7[i];_bbf=_bbe.attributes;var _bc0=_bbf[_bba],end=_bbf[_bbb];_bc0=_bbd(_bc0)?_bc0:-Infinity;end=_bbd(end)?end:Infinity;if((_bc0>=_bb8&&_bc0<=_bb9)||(end>=_bb8&&end<=_bb9)||(_bb8>=_bc0&&_bb9<=end)){yea.push(_bbe);}else{nay.push(_bbe);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_bc1,_bc2,dfd,_bc3){if(_bc1){this[_bc1].apply(this,args);}if(_bc2){_bc2.apply(null,args);}if(dfd){esri._resDfd(dfd,args,_bc3);}},_getShallowClone:function(_bc4){var _bc5=new esri.tasks.Query(),prop;for(prop in _bc4){if(_bc4.hasOwnProperty(prop)){_bc5[prop]=_bc4[prop];}}return _bc5;},_query:function(type,_bc6,_bc7,_bc8,_bc9){var that=this,dfd=new dojo.Deferred(esri._dfdCanceller);var _bca=function(_bcb,_bcc){if(!_bcc&&type==="execute"&&!that._isTable){var _bcd=_bcb.features,mode=that._mode,_bce=that.objectIdField,il=_bcd.length,i;for(i=il-1;i>=0;i--){var oid=_bcd[i].attributes[_bce];var _bcf=mode._getFeature(oid);if(_bcf){_bcd.splice(i,1,_bcf);}}}that._resolve([_bcb],_bc6,_bc8,dfd);};if(type!=="executeRelationshipQuery"){_bc7=this._getShallowClone(_bc7);_bc7.outFields=this._getOutFields();_bc7.returnGeometry=true;var map=this._map,_bd0;if(map){_bc7.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_bc7)){switch(type){case "execute":_bd0=new esri.tasks.FeatureSet({features:[]});break;case "executeForIds":_bd0=[];break;case "executeForCount":_bd0=0;break;}_bca(_bd0,true);return dfd;}var _bd1=this._canDoClientSideQuery(_bc7);if(_bd1){var _bd2=this._doQuery(_bc7,_bd1,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_bd0=new esri.tasks.FeatureSet();_bd0.features=_bd2;break;case "executeForIds":_bd0=_bd2;break;case "executeForCount":_bd0=_bd2.length;break;}_bca(_bd0,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_bc9,dfd,true);return dfd;}if(this._ts){_bc7._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_bc7);temp.addCallbacks(_bca,function(err){that._resolve([err],null,_bc9,dfd,true);});return dfd;},_convertFeaturesToJson:function(_bd3,_bd4,_bd5,_bd6){var json=[],_bd7=this._selectionSymbol,_bd8=this.visibilityField,i,_bd9,_bda=this.objectIdField;if(this.loaded&&(_bd5||_bd6)){_bd9=dojo.filter(this.fields,function(_bdb){return (_bdb.editable===false)&&(!_bd6||(_bdb.name!==_bda));});}for(i=0;i<_bd3.length;i++){var _bdc=_bd3[i],_bdd={},_bde=_bdc.geometry,attr=_bdc.attributes,_bdf=_bdc.symbol;if(_bde&&(!_bd6||!this.loaded||this.allowGeometryUpdates)){_bdd.geometry=_bde.toJson();}if(_bd8){_bdd.attributes=attr=dojo.mixin({},attr);attr[_bd8]=_bdc.visible?1:0;}else{if(attr){_bdd.attributes=dojo.mixin({},attr);}}if(_bdd.attributes&&_bd9&&_bd9.length){dojo.forEach(_bd9,function(_be0){delete _bdd.attributes[_be0.name];});}if(_bdf&&(_bdf!==_bd7)){_bdd.symbol=_bdf.toJson();}json.push(_bdd);}return _bd4?json:dojo.toJson(json);},_selectHandler:function(_be1,_be2,_be3,_be4,dfd){var _be5,ctor=this.constructor;switch(_be2){case ctor.SELECTION_NEW:this.clearSelection(true);_be5=true;break;case ctor.SELECTION_ADD:_be5=true;break;case ctor.SELECTION_SUBTRACT:_be5=false;break;}var i,_be6=_be1.features,mode=this._mode,_be7=[],_be8=this.objectIdField,_be9,oid;if(_be5){for(i=0;i<_be6.length;i++){_be9=_be6[i];oid=_be9.attributes[_be8];var _bea=mode._addFeatureIIf(oid,_be9);_be7.push(_bea);this._selectFeatureIIf(oid,_bea,mode);}}else{for(i=0;i<_be6.length;i++){_be9=_be6[i];oid=_be9.attributes[_be8];this._unSelectFeatureIIf(oid,mode);var _beb=mode._removeFeatureIIf(oid);_be7.push(_beb||_be9);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_be7,_be2,_be1.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_be3,dfd);if(_be1.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_bec,mode){var _bed=this._selectedFeatures,_bee=_bed[oid];if(!_bee){mode._incRefCount(oid);_bed[oid]=_bec;if(!this._isTable){this._setSelectSymbol(_bec);}}return _bee||_bec;},_unSelectFeatureIIf:function(oid,mode){var _bef=this._selectedFeatures[oid];if(_bef){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_bef);}}return _bef;},_isSelected:function(_bf0){},_setSelectSymbol:function(_bf1){var _bf2=this._selectionSymbol;if(_bf2&&!this._isSelOnly){_bf1.setSymbol(_bf2);}},_setUnSelectSymbol:function(_bf3){var _bf4=this._selectionSymbol;if(_bf4&&!this._isSelOnly){if(_bf4===_bf3.symbol){_bf3.setSymbol(null,true);}}},_getOutFields:function(){var _bf5=dojo.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_bf6,_bf7,arr){return !!_bf6&&(dojo.indexOf(arr,_bf6)===_bf7);});var _bf8=dojo.clone(this._outFields);if(_bf8){if(dojo.indexOf(_bf8,"*")!==-1){return _bf8;}dojo.forEach(_bf5,function(_bf9){if(dojo.indexOf(_bf8,_bf9)===-1){_bf8.push(_bf9);}});return _bf8;}else{return _bf5;}},_checkFields:function(_bfa){var _bfb=_bfa||this._getOutFields();dojo.forEach(_bfb,function(_bfc){if(_bfc==="*"){return;}if(!this._getField(_bfc)){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url,field:_bfc},esri.bundle.layers.FeatureLayer.fieldNotFound));}},this);if(!_bfa&&!this._isTable&&!this._fserver&&!this._collection){var _bfd=dojo.some(this.fields,function(_bfe){return (_bfe&&_bfe.type==="esriFieldTypeGeometry")?true:false;});if(!_bfd){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noGeometryField));}}},_fixRendererFields:function(){var _bff=this.renderer;if(_bff&&this.fields.length>0){var _c00=dojo.filter([_bff,_bff.observationRenderer,_bff.latestObservationRenderer,_bff.trackRenderer],esri._isDefined);var _c01=[];dojo.forEach(_c00,function(rnd){var _c02,_c03;_c03=rnd.attributeField;if(_c03){_c02=!this._getField(_c03)&&this._getField(_c03,true);if(_c02){rnd.attributeField=_c02.name;}}_c03=rnd.attributeField2;if(_c03){_c02=!this._getField(_c03)&&this._getField(_c03,true);if(_c02){rnd.attributeField2=_c02.name;}}_c03=rnd.attributeField3;if(_c03){_c02=!this._getField(_c03)&&this._getField(_c03,true);if(_c02){rnd.attributeField3=_c02.name;}}_c01.push(rnd.attributeField);_c01.push(rnd.attributeField2);_c01.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_c01,esri._isDefined);}},_getField:function(_c04,_c05){var _c06=this.fields;if(_c06.length===0){return null;}var _c07;if(_c05){_c04=_c04.toLowerCase();}dojo.some(_c06,function(_c08){var _c09=false;if(_c05){_c09=(_c08&&_c08.name.toLowerCase()===_c04)?true:false;}else{_c09=(_c08&&_c08.name===_c04)?true:false;}if(_c09){_c07=_c08;}return _c09;});return _c07;},_getDateOpts:function(){if(!this._dtOpts){var _c0a=dojo.map(dojo.filter(this.fields,function(_c0b){return !!(_c0b&&_c0b.type==="esriFieldTypeDate");}),function(_c0c){return _c0c.name;});this._dtOpts={properties:_c0a};}return this._dtOpts;},_applyNormalized:function(_c0d,_c0e){if(_c0d&&_c0e){dojo.forEach(_c0d,function(_c0f,_c10){if(_c0f&&_c0e[_c10]){_c0f.setGeometry(_c0e[_c10]);}});}},_editHandler:function(_c11,adds,_c12,_c13,_c14,dfd){var _c15=_c11.addResults,_c16=_c11.updateResults,_c17=_c11.deleteResults,i,_c18,oid,_c19,attr,_c1a=this.objectIdField,mode=this._mode,_c1b=this._isTable;var _c1c=this.editFieldsInfo,_c1d=this._getOutFields()||[],_c1e=_c1c&&_c1c.creatorField,_c1f=_c1c&&_c1c.creationDateField,_c20=_c1c&&_c1c.editorField,_c21=_c1c&&_c1c.editDateField,_c22=_c1c&&_c1c.realm;if(dojo.indexOf(_c1d,"*")===-1){if(_c1e&&dojo.indexOf(_c1d,_c1e)===-1){_c1e=null;}if(_c1f&&dojo.indexOf(_c1d,_c1f)===-1){_c1f=null;}if(_c20&&dojo.indexOf(_c1d,_c20)===-1){_c20=null;}if(_c21&&dojo.indexOf(_c1d,_c21)===-1){_c21=null;}}var _c23=(_c1f||_c21)?(new Date()).getTime():null,_c24=(_c1e||_c20)?this.getUserId():undefined;if(_c24&&_c22){_c24=_c24+"@"+_c22;}if(_c15){for(i=0;i<_c15.length;i++){_c15[i]=new esri.layers.FeatureEditResult(_c15[i]);if(_c1b){continue;}_c18=_c15[i];if(_c18.success){oid=_c18.objectId;_c19=adds[i];var gl=_c19._graphicsLayer;if(gl&&gl!==this){gl.remove(_c19);}attr=_c19.attributes||{};attr[_c1a]=oid;if(_c1e){attr[_c1e]=_c24;}if(_c20){attr[_c20]=_c24;}if(_c1f){attr[_c1f]=_c23;}if(_c21){attr[_c21]=_c23;}_c19.setAttributes(attr);if(mode._init){mode.drawFeature(_c19);}}}}if(_c16){for(i=0;i<_c16.length;i++){_c16[i]=new esri.layers.FeatureEditResult(_c16[i]);if(_c1b){continue;}_c18=_c16[i];if(_c18.success){oid=_c18.objectId;_c19=_c12[oid];var _c25=mode._getFeature(oid);if(_c25){if(_c25.geometry!==_c19.geometry){_c25.setGeometry(esri.geometry.fromJson(_c19.geometry.toJson()));}this._repaint(_c25,oid);}_c19=_c25||_c19;attr=_c19.attributes||{};if(_c20){attr[_c20]=_c24;}if(_c21){attr[_c21]=_c23;}_c19.setAttributes(attr);}}}if(_c17){var _c26=[];for(i=0;i<_c17.length;i++){_c17[i]=new esri.layers.FeatureEditResult(_c17[i]);if(_c1b){continue;}_c18=_c17[i];if(_c18.success){oid=_c18.objectId;_c19=mode._getFeature(oid);if(_c19){if(this._unSelectFeatureIIf(oid,mode)){_c26.push(_c19);}_c19._count=0;mode._removeFeatureIIf(oid);}}}if(_c26.length>0){this.onSelectionComplete(_c26,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_c15,_c16,_c17],"onEditsComplete",_c13,dfd);},_sendAttachment:function(type,_c27,_c28,_c29,_c2a){var _c2b=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_c27+"/"+_c2b,self=this;var dfd=esri.request({url:url,form:_c28,content:dojo.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_c2c){var _c2d=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_c2e=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_c2f=new esri.layers.FeatureEditResult(_c2c[_c2d]);_c2f.attachmentId=_c2f.objectId;_c2f.objectId=_c27;self._resolve([_c2f],_c2e,_c29);return _c2f;}).addErrback(function(_c30){self._resolve([_c30],null,_c2a,null,true);});return dfd;},_repaint:function(_c31,oid,_c32){oid=esri._isDefined(oid)?oid:_c31.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_c31.setSymbol(_c31.symbol,_c32);}},_getKind:function(_c33){var _c34=this._trackManager;if(_c34){return _c34.isLatestObservation(_c33)?1:0;}return 0;}});dojo.mixin(esri.layers.FeatureLayer,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});esri._createWrappers("esri.layers.FeatureLayer");dojo.declare("esri.layers.FeatureType",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.id=json.id;this.name=json.name;var _c35=json.symbol;if(_c35){this.symbol=esri.symbol.fromJson(_c35);}var _c36=json.domains,_c37,i;var _c38=this.domains={};for(_c37 in _c36){if(_c36.hasOwnProperty(_c37)){var _c39=_c36[_c37];switch(_c39.type){case "range":_c38[_c37]=new esri.layers.RangeDomain(_c39);break;case "codedValue":_c38[_c37]=new esri.layers.CodedValueDomain(_c39);break;case "inherited":_c38[_c37]=new esri.layers.InheritedDomain(_c39);break;}}}var _c3a=json.templates;if(_c3a){var _c3b=this.templates=[];for(i=0;i<_c3a.length;i++){_c3b.push(new esri.layers.FeatureTemplate(_c3a[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _c3c,_c3d=this.domains,_c3e=this.templates,_c3f=esri._sanitize;if(_c3d){var _c40=json.domains={};for(_c3c in _c3d){if(_c3d.hasOwnProperty(_c3c)){_c40[_c3c]=_c3d[_c3c]&&_c3d[_c3c].toJson();}}_c3f(_c40);}if(_c3e){json.templates=dojo.map(_c3e,function(_c41){return _c41.toJson();});}return _c3f(json);}});dojo.declare("esri.layers.FeatureTemplate",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _c42=json.prototype;this.prototype=new esri.Graphic(_c42.geometry,null,_c42.attributes);}},toJson:function(){return esri._sanitize({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});dojo.mixin(esri.layers.FeatureTemplate,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});dojo.declare("esri.layers.FeatureEditResult",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});dojo.declare("esri.layers._RenderMode",null,{constructor:function(){this._prefix="jsonp_"+(dojo._scopeName||"dojo")+"IoScript";},initialize:function(map){},propertyChangeHandler:function(type){},destroy:function(){},drawFeature:function(_c43){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _c44=this._featureMap[oid];if(_c44){_c44._count++;}},_decRefCount:function(oid){var _c45=this._featureMap[oid];if(_c45){_c45._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_c46){var fmap=this._featureMap,_c47=fmap[oid],_c48=this.featureLayer;if(!_c47){fmap[oid]=_c46;_c48._add(_c46);_c46._count=0;}return _c47||_c46;},_removeFeatureIIf:function(oid){var _c49=this._featureMap[oid],_c4a=this.featureLayer;if(_c49){if(_c49._count){return;}delete this._featureMap[oid];_c4a._remove(_c49);}return _c49;},_clearIIf:function(){var i,_c4b=this.featureLayer,_c4c=_c4b.graphics,_c4d=_c4b._selectedFeatures,_c4e=_c4b.objectIdField;for(i=_c4c.length-1;i>=0;i--){var _c4f=_c4c[i];var oid=_c4f.attributes[_c4e];if(oid in _c4d){_c4f._count=1;continue;}_c4f._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=dojo.io.script[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||dojo.io.script[this._prefix+id];if(dfd){try{dfd.cancel();dojo.io.script._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){dojo.io.script._validCheck(null);},_toggleVisibility:function(show){var _c50=this.featureLayer,_c51=_c50.graphics,_c52=show?"show":"hide",i,len=_c51.length;show=show&&_c50._ager;for(i=0;i<len;i++){var _c53=_c51[i];_c53[_c52]();if(show){_c50._repaint(_c53);}}},_applyTimeFilter:function(_c54){var _c55=this.featureLayer;if(!_c55.timeInfo||_c55._suspended){return;}if(!_c54){_c55._fireUpdateStart();}var _c56=_c55._trackManager;if(_c56){_c56.clearTracks();}var defn=_c55.getTimeDefinition(),_c57=_c55._getOffsettedTE(_c55._mapTimeExtent);if(_c57){_c57=_c55._getTimeOverlap(defn,_c57);if(_c57){var _c58=_c55._filterByTime(_c55.graphics,_c57.startTime,_c57.endTime);if(_c56){_c56.addFeatures(_c58.match);}dojo.forEach(_c58.match,function(_c59){var _c5a=_c59._shape;if(!_c59.visible){_c59.show();_c5a=_c59._shape;_c5a&&_c5a._moveToFront();}if(_c55._ager&&_c5a){_c55._repaint(_c59);}});dojo.forEach(_c58.noMatch,function(_c5b){if(_c5b.visible){_c5b.hide();}});}else{this._toggleVisibility(false);}}else{if(_c56){_c56.addFeatures(_c55.graphics);}this._toggleVisibility(true);}if(_c56){_c56.moveLatestToFront();_c56.drawTracks();}if(!_c54){_c55._fireUpdateEnd();}}});dojo.declare("esri.layers._SelectionMode",[esri.layers._RenderMode],{constructor:function(_c5c){this.featureLayer=_c5c;this._featureMap={};},initialize:function(map){this.map=map;this._init=true;},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},destroy:function(){this._init=false;},resume:function(){this.propertyChangeHandler(0);}});dojo.declare("esri.layers._SnapshotMode",[esri.layers._RenderMode],{constructor:function(_c5d){this.featureLayer=_c5d;this._featureMap={};this._drawFeatures=dojo.hitch(this,this._drawFeatures);this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;var _c5e=this.featureLayer;if(_c5e._collection){this._applyTimeFilter();}else{this._fetchAll();}this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type){this._fetchAll();}else{this._applyTimeFilter();}}},destroy:function(){this._init=false;},drawFeature:function(_c5f){var _c60=this.featureLayer,_c61=_c60.objectIdField,oid=_c5f.attributes[_c61];this._addFeatureIIf(oid,_c5f);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _c62=this.featureLayer;if(_c62._collection){_c62._fireUpdateStart();_c62._refresh(true);_c62._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_c63){var id="_"+_c63.name+_c63.layerId+_c63._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _c64=this.featureLayer;if(_c64._collection){return;}_c64._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_c65=this.featureLayer,_c66=_c65.getDefinitionExpression();var _c67=new esri.tasks.Query();_c67.outFields=_c65._getOutFields();_c67.where=_c66||"1=1";_c67.returnGeometry=true;_c67.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());_c67.timeExtent=_c65.getTimeDefinition();_c67.maxAllowableOffset=_c65._maxOffset;if(_c65._ts){_c67._ts=(new Date()).getTime();}var _c68;if(_c65._usePatch){_c68=this._getRequestId(_c65);this._cancelPendingRequest(null,_c68);}_c65._task.execute(_c67,this._drawFeatures,this._queryErrorHandler,_c68);},_drawFeatures:function(_c69){this._purgeRequests();var _c6a=_c69.features,_c6b=this.featureLayer,_c6c=_c6b.objectIdField,i,len=_c6a.length,_c6d,oid;for(i=0;i<len;i++){_c6d=_c6a[i];oid=_c6d.attributes[_c6c];this._addFeatureIIf(oid,_c6d);this._incRefCount(oid);}this._applyTimeFilter(true);_c6b._fireUpdateEnd(null,_c69.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_c69.exceededTransferLimit){_c6b.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _c6e=this.featureLayer;_c6e._errorHandler(err);_c6e._fireUpdateEnd(err);}});dojo.declare("esri.layers._OnDemandMode",[esri.layers._RenderMode],{constructor:function(_c6f){this.featureLayer=_c6f;this._featureMap={};this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;this._initialize();this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}}},destroy:function(){this._disableConnectors();this._init=false;},drawFeature:function(_c70){var _c71=this._gridLayer,geom=_c70.geometry,_c72=[];if(!geom){return;}_c72=_c71.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _c73=this._cellMap,i,cell,oid=_c70.attributes[this.featureLayer.objectIdField],_c74,row,col;for(i=0;i<_c72.length;i++){cell=_c72[i];_c74=cell.latticeID;row=cell.row;col=cell.col;if(_c74){cell=(_c73[_c74]=(_c73[_c74]||cell));}else{_c73[row]=_c73[row]||{};cell=(_c73[row][col]=(_c73[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_c70);this._addFeatureIIf(oid,_c70);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_initialize:function(){var map=this.map,_c75=this.featureLayer;var _c76=_c75._srInfo;this._gridLayer=new esri.layers._GridLayout(new esri.geometry.Point(_c76?_c76.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_c75._tileWidth,height:_c75._tileHeight},{width:map.width,height:map.height},_c76);this._ioQueue=[];if(!_c75._suspended){this._zoomHandler();this._enableConnectors();}},_enableConnectors:function(){var map=this.map;this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=dojo.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=dojo.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){dojo.disconnect(this._zoomConnect);dojo.disconnect(this._panConnect);dojo.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _c77=this.featureLayer,map=this.map;if(_c77._suspended){return;}_c77._fireUpdateStart();this._clearIIf();var _c78=_c77._trackManager;if(_c78){_c78.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_c79,cell){var id="_"+_c79.name+_c79.layerId+_c79._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_c7a){this._exceeds=false;var _c7b=this.featureLayer,map=this.map,_c7c=_c7a||map.extent,_c7d=this._gridLayer.getCellsInExtent(_c7c,_c7b.latticeTiling),_c7e=_c7d.cells;if(!_c7b.isEditable()){var _c7f=this._cellMap;_c7e=dojo.filter(_c7e,function(cell){if(cell.lattice){if(_c7f[cell.latticeID]){return false;}}else{if(_c7f[cell.row]&&_c7f[cell.row][cell.col]){return false;}}return true;});}var _c80=_c7b._getOutFields(),_c81=_c7b.getDefinitionExpression(),time=_c7b._getOffsettedTE(_c7b._mapTimeExtent),_c82=_c7b._usePatch,_c83=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_c84,_c85;this._pending=this._pending||0;for(i=0;i<_c7e.length;i++){cell=_c7e[i];_c84=new esri.tasks.Query();_c84.geometry=cell.extent||cell.lattice;_c84.outFields=_c80;_c84.where=_c81;if(_c7b.latticeTiling&&cell.extent){_c84.spatialRelationship=esri.tasks.Query.SPATIAL_REL_CONTAINS;}_c84.returnGeometry=true;_c84.timeExtent=time;_c84.maxAllowableOffset=_c7b._maxOffset;if(_c7b._ts){_c84._ts=(new Date()).getTime();}_c85=null;if(_c82){_c85=this._getRequestId(_c7b,cell);if(this._isPending(_c85)){continue;}}this._pending++;_c83.push(_c7b._task.execute(_c84,function(){var _c86=cell;return function(_c87){func.apply(self,[_c87,_c86]);};}.call(this),this._queryErrorHandler,_c85));}this._removeOldCells(_c7c);this._endCheck();},_drawFeatures:function(_c88,cell){this._exceeds=this._exceeds||_c88.exceededTransferLimit;this._finalizeIO();var _c89=this.featureLayer,map=this.map,_c8a=map.extent,_c8b=cell.extent,row=cell.row,col=cell.col,_c8c=_c89.objectIdField,_c8d=_c88.features,_c8e=this._gridLayer,_c8f=this._cellMap,i,len,_c90=cell.latticeID,_c91=_c90?_c8f[_c90]:(_c8f[row]&&_c8f[row][col]);if((cell.resolution!=_c8e._resolution)||(_c90?(_c90!==_c8e.getLatticeID(_c8a)):(!_c8e.intersects(_c8b,_c8a)))){if(_c91){this._removeCell(row,col,_c90);}}else{if(_c91){this._updateCell(_c91,_c8d);}else{cell.features=_c8d;if(_c90){_c8f[_c90]=cell;}else{_c8f[row]=_c8f[row]||{};_c8f[row][col]=cell;}len=_c8d.length;for(i=0;i<len;i++){var _c92=_c8d[i];var oid=_c92.attributes[_c8c];this._addFeatureIIf(oid,_c92);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_c93){if(this._pending===0){this._processIOQueue();var _c94=this.featureLayer,_c95=_c94._trackManager;if(_c95){_c95.clearTracks();_c95.addFeatures(_c94.graphics);if(_c94._ager){dojo.forEach(_c94.graphics,function(_c96){if(_c96._shape){_c94._repaint(_c96);}});}_c95.moveLatestToFront();_c95.drawTracks();}this.featureLayer._fireUpdateEnd(_c93&&new Error("FeatureLayer: "+esri.bundle.layers.FeatureLayer.updateError),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_c94.onQueryLimitExceeded();}}},_processIOQueue:function(_c97){this._ioQueue=dojo.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_c97){dojo.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_c98){var _c99=this._cellMap,_c9a=this._gridLayer,_c9b,_c9c;for(_c9b in _c99){if(_c99[_c9b]){var row=_c99[_c9b],_c9d=row.latticeID,_c9e=0,_c9f=0;if(_c9d){_c9e++;if(_c9d!==_c9a.getLatticeID(_c98)){this._removeCell(null,null,_c9d);_c9f++;}}else{for(_c9c in row){if(row[_c9c]){_c9e++;var _ca0=row[_c9c].extent;if(!_c9a.intersects(_ca0,_c98)){this._removeCell(_c9b,_c9c);_c9f++;}}}}if(_c9f===_c9e){delete _c99[_c9b];}}}},_updateCell:function(cell,_ca1){var _ca2=this.featureLayer,_ca3=_ca2.objectIdField,_ca4=_ca2._selectedFeatures,i,len=_ca1.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _ca5=_ca1[i];var oid=_ca5.attributes[_ca3];var _ca6=this._addFeatureIIf(oid,_ca5);if(_ca6===_ca5){this._incRefCount(oid);cell.features.push(_ca6);}else{if(!(oid in _ca4)){_ca6.setGeometry(_ca5.geometry);_ca6.setAttributes(_ca5.attributes);}}}},_removeCell:function(row,col,_ca7){var _ca8=this._cellMap,_ca9=this.featureLayer,_caa=_ca9.objectIdField;var cell=_ca7?_ca8[_ca7]:(_ca8[row]&&_ca8[row][col]);if(cell){if(_ca7){delete _ca8[_ca7];}else{delete _ca8[row][col];}var _cab=cell.features,i;for(i=0;i<_cab.length;i++){var _cac=_cab[i];var oid=_cac.attributes[_caa];this._decRefCount(oid);if(oid in _ca9._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});dojo.declare("esri.layers._GridLayout",null,{constructor:function(_cad,_cae,_caf,_cb0){this.origin=_cad;this.cellWidth=_cae.width;this.cellHeight=_cae.height;this.mapWidth=_caf.width;this.mapHeight=_caf.height;this.srInfo=_cb0;},setResolution:function(_cb1){this._resolution=(_cb1.xmax-_cb1.xmin)/this.mapWidth;if(this.srInfo){var _cb2=Math.round((2*this.srInfo.valid[1])/this._resolution),_cb3=Math.round(_cb2/this.cellWidth);this._frameStats=[_cb3,0,_cb3-1];}},getCellCoordinates:function(_cb4){var res=this._resolution,_cb5=this.origin;return {row:Math.floor((_cb5.y-_cb4.y)/(this.cellHeight*res)),col:Math.floor((_cb4.x-_cb5.x)/(this.cellWidth*res))};},normalize:function(col){var _cb6=this._frameStats;if(_cb6){var _cb7=_cb6[0],m180=_cb6[1],p180=_cb6[2];if(col<m180){col=col%_cb7;col=col<m180?col+_cb7:col;}else{if(col>p180){col=col%_cb7;}}}return col;},intersects:function(_cb8,_cb9){var _cba=this.srInfo;if(_cba){return dojo.some(_cb9._getParts(_cba),function(_cbb){return _cb8.intersects(_cbb.extent);});}else{return _cb8.intersects(_cb9);}},getCellExtent:function(row,col){var res=this._resolution,_cbc=this.origin,_cbd=this.cellWidth,_cbe=this.cellHeight;return new esri.geometry.Extent((col*_cbd*res)+_cbc.x,_cbc.y-((row+1)*_cbe*res),((col+1)*_cbd*res)+_cbc.x,_cbc.y-(row*_cbe*res),new esri.SpatialReference(_cbc.spatialReference.toJson()));},getLatticeID:function(_cbf){var _cc0=this.getCellCoordinates({x:_cbf.xmin,y:_cbf.ymax}),_cc1=this.getCellCoordinates({x:_cbf.xmax,y:_cbf.ymin}),_cc2=_cc0.row,_cc3=_cc1.row,_cc4=this.normalize(_cc0.col),_cc5=this.normalize(_cc1.col);return _cc2+"_"+_cc3+"_"+_cc4+"_"+_cc5;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_cc6,_cc7){var _cc8=this.getCellCoordinates({x:_cc6.xmin,y:_cc6.ymax}),_cc9=this.getCellCoordinates({x:_cc6.xmax,y:_cc6.ymin}),_cca=_cc8.row,_ccb=_cc9.row,_ccc=_cc8.col,_ccd=_cc9.col,_cce=[],i,j,nj,_ccf=[],_cd0=[],len,xmin,xmax,ymin,ymax,_cd1=[],_cd2,_cd3;for(i=_cca;i<=_ccb;i++){for(j=_ccc;j<=_ccd;j++){nj=this.normalize(j);_cc6=this.getCellExtent(i,nj);_cce.push({row:i,col:nj,extent:_cc6,resolution:this._resolution});if(_cc7){_ccf.push(_cc6.xmin,_cc6.xmax);_cd0.push(_cc6.ymin,_cc6.ymax);}}}_ccc=this.normalize(_ccc);_ccd=this.normalize(_ccd);_ccf.sort(this.sorter);_cd0.sort(this.sorter);len=_ccf.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_ccf[i]===_ccf[i+1]){_ccf.splice(i,1);}}}len=_cd0.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_cd0[i]===_cd0[i+1]){_cd0.splice(i,1);}}}if(_ccf.length&&_cd0.length){xmin=_ccf[0];xmax=_ccf[_ccf.length-1];ymin=_cd0[0];ymax=_cd0[_cd0.length-1];len=_ccf.length;for(i=0;i<len;i++){_cd1.push([[_ccf[i],ymax],[_ccf[i],ymin]]);}len=_cd0.length;for(i=0;i<len;i++){_cd1.push([[xmin,_cd0[i]],[xmax,_cd0[i]]]);}_cd2=new esri.geometry.Polyline({paths:_cd1,spatialReference:this.origin.spatialReference.toJson()});_cd3=_cca+"_"+_ccb+"_"+_ccc+"_"+_ccd;_cce.push({latticeID:_cd3,lattice:_cd2,resolution:this._resolution});}return {minRow:_cca,maxRow:_ccb,minCol:_ccc,maxCol:_ccd,cells:_cce};}});dojo.declare("esri.layers._TrackManager",null,{constructor:function(_cd4){this.layer=_cd4;this.trackMap={};},initialize:function(map){this.map=map;var _cd5=this.layer,_cd6=_cd5.renderer.trackRenderer;if(_cd6&&(_cd5.geometryType==="esriGeometryPoint")){var _cd7=(this.container=new esri.layers._GraphicsLayer({id:_cd5.id+"_tracks",_child:true}));_cd7._setMap(map,_cd5._div);_cd7.setRenderer(_cd6);}},addFeatures:function(_cd8){var tkid,_cd9=this.trackMap,_cda=this.layer,_cdb=_cda._trackIdField;dojo.forEach(_cd8,function(_cdc){var _cdd=_cdc.attributes;tkid=_cdd[_cdb];var ary=(_cd9[tkid]=(_cd9[tkid]||[]));ary.push(_cdc);});var _cde=_cda._startTimeField,_cdf=_cda.objectIdField;var _ce0=function(a,b){var _ce1=a.attributes[_cde],_ce2=b.attributes[_cde];if(_ce1===_ce2){return (a.attributes[_cdf]<b.attributes[_cdf])?-1:1;}else{return (_ce1<_ce2)?-1:1;}};for(tkid in _cd9){_cd9[tkid].sort(_ce0);}},drawTracks:function(){var _ce3=this.container;if(!_ce3){return;}var _ce4=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_ce5,_ce6=this.layer._trackIdField,_ce7;for(tkid in _ce4){ary=_ce4[tkid];path=[];for(i=ary.length-1;i>=0;i--){_ce5=ary[i].geometry;if(_ce5){path.push([_ce5.x,_ce5.y]);}}_ce7={};_ce7[_ce6]=tkid;if(path.length>0){_ce3.add(new esri.Graphic(new esri.geometry.Polyline({paths:[path],spatialReference:sr}),null,_ce7));}}},moveLatestToFront:function(){dojo.forEach(this.getLatestObservations(),function(_ce8){var _ce9=_ce8._shape;_ce9&&_ce9._moveToFront();this._repaint(_ce8,null,true);},this.layer);},getLatestObservations:function(){var _cea=[];if(!this.layer.renderer.latestObservationRenderer){return _cea;}var _ceb=this.trackMap,tkid;for(tkid in _ceb){var ary=_ceb[tkid];_cea.push(ary[ary.length-1]);}return _cea;},clearTracks:function(){var _cec=this.getLatestObservations();this.trackMap={};var _ced=this.container;if(_ced){_ced.clear();}dojo.forEach(_cec,function(_cee){this._repaint(_cee,null,true);},this.layer);},isLatestObservation:function(_cef){var _cf0=this.layer._trackIdField;var _cf1=this.trackMap[_cef.attributes[_cf0]];if(_cf1){return (_cf1[_cf1.length-1]===_cef);}return false;},destroy:function(){var _cf2=this.container;if(_cf2){_cf2.clear();_cf2._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});});},"esri/virtualearth/VETiledLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/tiled,esri/geometry,dojo/string"],function(_cf3,dojo,_cf4){dojo.provide("esri.virtualearth.VETiledLayer");dojo.require("esri.utils");dojo.require("esri.layers.tiled");dojo.require("esri.geometry");dojo.require("dojo.string");dojo.declare("esri.virtualearth.VETiledLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_cf5){try{_cf5=dojo.mixin({bingMapsKey:null,culture:"en-US"},_cf5||{});var _cf6=window.location.protocol;if(_cf6==="file:"){_cf6="http:";}this.url=_cf6+"//serverapi.arcgisonline.com/veadaptor/production/services/imagery/getmetadata";this._url=esri.urlToObject(this.url);this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176}]});this.initialExtent=(this.fullExtent=new esri.geometry.Extent(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,new esri.SpatialReference({wkid:102100})));dojo.mixin(this,_cf5);this._initLayer=dojo.hitch(this,this._initLayer);this._errorHandler=dojo.hitch(this,this._errorHandler);this._getTileInfo=dojo.hitch(this,this._getTileInfo);if(this.bingMapsKey){this._getTileInfo();}else{throw new Error(esri.bundle.virtualearth.vetiledlayer.bingMapsKeyNotSpecified);}}catch(e){this.onError(e);throw e;}},_unsetMap:function(map,_cf7){this.inherited("_unsetMap",arguments);},_getTileInfo:function(){if(this.bingMapsKey){var info=this.resourceInfo;if(!this.loaded&&info){this._initLayer(info);}else{esri.request({url:this._url.path,content:dojo.mixin({},this._url.query,{token:this.bingMapsKey,style:this.mapStyle,culture:this.culture}),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}}},_initLayer:function(_cf8,io){try{this.resourceInfo=dojo.toJson(_cf8);var _cf9=_cf8.imageUri.replace("{","${");this.tileServers=dojo.map(_cf8.subDomains,function(_cfa){var _cfb=window.location.protocol;if(_cfb==="file:"){_cfb="http:";}return dojo.string.substitute(_cf9,{subdomain:_cfa}).replace("http:",_cfb);});this._tsLength=this.tileServers.length;if(!this.loaded){this.loaded=true;this.onLoad(this);var _cfc=this.loadCallback;if(_cfc){delete this.loadCallback;_cfc(this);}}else{this.refresh();}}catch(e){this.onError(e);}},getTileUrl:function(_cfd,row,col){var _cfe=this.tileServers[row%this._tsLength],_cff=_cfe.replace(/\{/g,"${");return dojo.string.substitute(_cff,{quadkey:this._getQuadKey(_cfd,row,col),culture:this.culture,token:this.bingMapsKey});},_getQuadKey:function(_d00,row,col){var _d01="",_d02,mask,i;for(i=_d00;i>0;i--){_d02="0";mask=1<<(i-1);if((col&mask)!=0){_d02++;}if((row&mask)!=0){_d02++;_d02++;}_d01=_d01+_d02;}return _d01;},setMapStyle:function(_d03){this.mapStyle=_d03;this._getTileInfo();},setCulture:function(_d04){this.culture=_d04;this._getTileInfo();},setBingMapsKey:function(_d05){this.bingMapsKey=_d05;}});dojo.mixin(esri.virtualearth.VETiledLayer,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"});});},"dojox/charting/plot2d/Bubble":function(){define("dojox/charting/plot2d/Bubble",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_d06,arr,Base,dc,df,dfr,du,fx){var _d07=dfr.lambda("item.purgeGroup()");return _d06("dojox.charting.plot2d.Bubble",Base,{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_d08,_d09){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_d09);du.updateWithPattern(this.opt,_d09,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_d0a){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_d0a);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_d07);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_d0b=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var _d0c=t.next("circle",[this.opt,run]),s=run.group,_d0d=arr.map(run.data,function(v,i){return v?{x:ht(v.x)+_d0a.l,y:dim.height-_d0a.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)}:null;},this);var _d0e=null,_d0f=null,_d10=null;if(_d0c.series.shadow){_d10=arr.map(_d0d,function(item){if(item!==null){var _d11=t.addMixin(_d0c,"circle",item,true),_d12=_d11.series.shadow;var _d13=s.createCircle({cx:item.x+_d12.dx,cy:item.y+_d12.dy,r:item.radius}).setStroke(_d12).setFill(_d12.color);if(this.animate){this._animateBubble(_d13,dim.height-_d0a.b,item.radius);}return _d13;}return null;},this);if(_d10.length){run.dyn.shadow=_d10[_d10.length-1].getStroke();}}if(_d0c.series.outline){_d0f=arr.map(_d0d,function(item){if(item!==null){var _d14=t.addMixin(_d0c,"circle",item,true),_d15=dc.makeStroke(_d14.series.outline);_d15.width=2*_d15.width+_d0c.series.stroke.width;var _d16=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_d15);if(this.animate){this._animateBubble(_d16,dim.height-_d0a.b,item.radius);}return _d16;}return null;},this);if(_d0f.length){run.dyn.outline=_d0f[_d0f.length-1].getStroke();}}_d0e=arr.map(_d0d,function(item){if(item!==null){var _d17=t.addMixin(_d0c,"circle",item,true),rect={x:item.x-item.radius,y:item.y-item.radius,width:2*item.radius,height:2*item.radius};var _d18=this._plotFill(_d17.series.fill,dim,_d0a);_d18=this._shapeFill(_d18,rect);var _d19=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setFill(_d18).setStroke(_d17.series.stroke);if(this.animate){this._animateBubble(_d19,dim.height-_d0a.b,item.radius);}return _d19;}return null;},this);if(_d0e.length){run.dyn.fill=_d0e[_d0e.length-1].getFill();run.dyn.stroke=_d0e[_d0e.length-1].getStroke();}if(_d0b){var _d1a=new Array(_d0e.length);arr.forEach(_d0e,function(s,i){if(s!==null){var o={element:"circle",index:i,run:run,shape:s,outline:_d0f&&_d0f[i]||null,shadow:_d10&&_d10[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_d0d[i].x,cy:_d0d[i].y,cr:_d0d[i].radius};this._connectEvents(o);_d1a[i]=o;}},this);this._eventSeries[run.name]=_d1a;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateBubble:function(_d1b,_d1c,size){fx.animateTransform(lang.delegate({shape:_d1b,duration:1200,transform:[{name:"translate",start:[0,_d1c],end:[0,0]},{name:"scale",start:[0,1/size],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"*noref":1}});require(["dojo/i18n"],function(i18n){i18n._preloadLocalizations("esri/arcgis/nls/utils",["nl-nl","en-us","da","fi-fi","pt-pt","hu","sk","sl","pl","ca","sv","zh-tw","ar","en-gb","he-il","de-de","ko-kr","ja-jp","ro","az","nb","ru","es-es","th","cs","it-it","pt-br","fr-fr","el","tr","zh-cn"]);});define("esri/arcgis/utils",["dijit","dojo","dojox","dojo/require!esri/map,esri/layers/agsimageservice,esri/layers/osm,esri/layers/FeatureLayer,esri/layers/KMLLayer,esri/layers/wms,esri/virtualearth/VETiledLayer,esri/tasks/geometry,dojo/DeferredList,esri/dijit/Popup,esri/arcgis/csv"],function(_d1d,dojo,_d1e){dojo.provide("esri.arcgis.utils");dojo.require("esri.map");dojo.require("esri.layers.agsimageservice");dojo.require("esri.layers.osm");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.layers.KMLLayer");dojo.require("esri.layers.wms");dojo.require("esri.virtualearth.VETiledLayer");dojo.require("esri.tasks.geometry");dojo.require("dojo.DeferredList");dojo.require("esri.dijit.Popup");dojo.require("esri.arcgis.csv");(function(){var EAU=esri.arcgis.utils;EAU.arcgisUrl=location.protocol+"//www.arcgis.com/sharing/rest/content/items";String.prototype.endsWith=function(str){return (this.match(str+"$")==str);};EAU.getItem=function(_d1f){if(EAU._arcgisUrl&&EAU._arcgisUrl.length>0){EAU.arcgisUrl=EAU._arcgisUrl;}var url=EAU.arcgisUrl+"/"+_d1f;var _d20={},_d21=new dojo.Deferred();esri.request({url:url,content:{f:"json"},callbackParamName:"callback",load:function(_d22){_d20.item=_d22;esri.request({url:url+"/data",content:{f:"json"},callbackParamName:"callback",load:function(_d23){_d20.itemData=_d23;_d21.callback(_d20);},error:function(_d24){_d21.errback(_d24);}});},error:function(_d25){_d21.errback(_d25);}});return _d21;};EAU.createMap=function(arg1,_d26,_d27){var _d28=new dojo.Deferred();_d27=_d27||{};var _d29=_d27.infoTemplateClass;_d27._clazz=(_d29&&dojo.getObject(_d29))||esri.dijit.PopupTemplate;if(dojo.isString(arg1)){EAU.getItem(arg1).addCallback(function(_d2a){EAU._getItemProps(_d2a,_d27).addCallback(function(_d2b){EAU._getLayers(_d2b.itemData,_d27).addCallback(dojo.hitch(null,EAU._preCreateMap,_d2b,_d26,_d27,_d28));});}).addErrback(dojo.hitch(_d28,_d28.errback));}else{EAU._getItemProps(arg1,_d27).addCallback(function(_d2c){EAU._getLayers(_d2c.itemData,_d27).addCallback(dojo.hitch(null,EAU._preCreateMap,_d2c,_d26,_d27,_d28));});}return _d28;};EAU._arcgisUrl=null;EAU._getItemProps=function(_d2d,_d2e){var _d2f=new dojo.Deferred();var _d30=_d2d.itemData;var _d31=[];var _d32=[];dojo.forEach(_d30.operationalLayers,function(_d33){if(_d33.itemId&&!_d33.type){if(_d33.url.indexOf("/FeatureServer")>-1){_d32.push(_d33);_d31.push(EAU._getItemData(_d33));}else{if(!_d33.layers&&_d33.url.indexOf("/MapServer")>-1&&_d33.url.indexOf("/MapServer/")===-1){_d32.push(_d33);_d31.push(EAU._getItemData(_d33));}}}});if(_d31.length>0){var _d34=new dojo.DeferredList(_d31);_d34.addCallback(function(_d35){dojo.forEach(_d32,function(_d36,i){var _d37=_d35[i][1];if(_d37&&_d37.layers){if(_d36.url.indexOf("/FeatureServer")>-1){dojo.forEach(_d37.layers,function(_d38){if(_d36.url.endsWith("/FeatureServer/"+_d38.id)){_d36.itemProperties=_d38;EAU._processFSItemProperties(_d36);}});}else{_d36.layers=_d37.layers;}}});_d2f.callback(_d2d);});}else{_d2f.callback(_d2d);}return _d2f;};EAU._getItemData=function(_d39){var url=EAU.arcgisUrl+"/"+_d39.itemId+"/data";var _d3a=esri.request({url:url,content:{f:"json"},callbackParamName:"callback"});return _d3a;};EAU._processFSItemProperties=function(_d3b){if(_d3b.itemProperties.layerDefinition){if(_d3b.layerDefinition){if(!_d3b.layerDefinition.drawingInfo){_d3b.layerDefinition.drawingInfo=_d3b.itemProperties.layerDefinition.drawingInfo;}if(!_d3b.layerDefinition.definitionExpression){_d3b.layerDefinition.definitionExpression=_d3b.itemProperties.layerDefinition.definitionExpression;}if(_d3b.layerDefinition.minScale===null){_d3b.layerDefinition.minScale=_d3b.itemProperties.layerDefinition.minScale;}if(_d3b.layerDefinition.maxScale===null){_d3b.layerDefinition.maxScale=_d3b.itemProperties.layerDefinition.maxScale;}}else{_d3b.layerDefinition=_d3b.itemProperties.layerDefinition;}}if(_d3b.itemProperties.popupInfo&&!_d3b.popupInfo&&!_d3b.disablePopup){_d3b.popupInfo=_d3b.itemProperties.popupInfo;}};EAU._getLayers=function(_d3c,_d3d){var _d3e=[];var _d3f=[];var _d40=[];var _d41=new dojo.Deferred();dojo.forEach(_d3c.operationalLayers,function(_d42,_d43){if(_d42.featureCollection){dojo.forEach(_d42.featureCollection.layers,function(_d44,idx){var _d45=true;if(_d42.visibleLayers){if(dojo.indexOf(_d42.visibleLayers,idx)==-1){_d45=false;}}_d44.visibility=(_d42.visibility&&_d45);_d44.opacity=_d42.opacity;_d44.id=(_d42.id||("operational"+_d43))+"_"+idx;_d40.push(_d44);},this);}else{_d40.push(_d42);}});dojo.forEach(_d3c.baseMap.baseMapLayers,function(_d46,_d47){_d46.baseMapLayer=true;_d46.id=_d46.id||("base"+_d47);_d3e.push(_d46);});dojo.forEach(_d40,function(_d48,_d49){_d48.id=_d48.id||("operational"+_d49);_d3e.push(_d48);});dojo.forEach(_d3e,function(_d4a){if(_d4a.url&&!_d4a.type){_d4a.deferredsPos=_d3f.length;_d4a.errors=[];_d3f.push(EAU._getServiceInfo(_d4a.url,_d4a.errors));}else{if(_d4a.url&&_d4a.type=="CSV"){_d4a.deferredsPos=_d3f.length;_d3f.push(esri.arcgis.csv.buildCSVFeatureCollection(_d4a));}}});if(_d3f.length==0){var _d4b=EAU._getMapSR(_d3e);_d3e=EAU._buildLayerObjects(_d3e,_d3d,_d4b);_d41.callback(_d3e);}else{var _d4c=new dojo.DeferredList(_d3f);_d4c.addCallback(function(_d4d){EAU._preBuildLayerObjects(_d4d,_d3e,_d3d,_d3f,_d41);});}return _d41;};EAU._preBuildLayerObjects=function(_d4e,_d4f,_d50,_d51,_d52){dojo.forEach(_d4f,function(_d53,_d54){if(_d53.url&&!_d53.type){_d53.resourceInfo=_d4e[_d53.deferredsPos][1];delete _d53.deferredsPos;}else{if(_d53.url&&_d53.type=="CSV"){_d53.featureCollection=_d51[_d53.deferredsPos].results[0];delete _d53.deferredsPos;}}});var _d55=EAU._getMapSR(_d4f);var _d56=[];var _d57=new dojo.Deferred();dojo.forEach(_d4f,function(_d58){if(_d58.url&&_d58.type=="CSV"){_d58.deferredsPos=_d56.length;_d56.push(esri.arcgis.csv.projectFeatureCollection(_d58.featureCollection,_d55));}});if(_d56.length==0){_d4f=EAU._buildLayerObjects(_d4f,_d50,_d55);_d52.callback(_d4f);}else{var _d59=new dojo.DeferredList(_d56);_d59.addCallback(function(){dojo.forEach(_d4f,function(_d5a){if(_d5a.url&&_d5a.type=="CSV"){_d5a.featureCollection=_d56[_d5a.deferredsPos].results[0];delete _d5a.deferredsPos;}});_d4f=EAU._buildLayerObjects(_d4f,_d50,_d55);_d52.callback(_d4f);});}};EAU._buildLayerObjects=function(_d5b,_d5c,_d5d){dojo.forEach(_d5b,function(_d5e,_d5f){if(_d5e.url&&!_d5e.type){if(_d5f===0||_d5b[0].layerObject){_d5e.layerObject=EAU._initLayer(_d5e,_d5b,_d5c,_d5d);}}else{if(_d5e.url&&_d5e.type=="CSV"){_d5e.layerObject=EAU._initLayer(_d5e,_d5b,_d5c,_d5d);}else{_d5e.layerObject=EAU._initLayer(_d5e,_d5b,_d5c,_d5d);}}});var _d60=dojo.filter(_d5b,function(lyr){return !lyr.isReference;});var _d61=dojo.filter(_d5b,function(lyr){return !!lyr.isReference;});_d5b=_d60.concat(_d61);return _d5b;};EAU._preCreateMap=function(_d62,_d63,_d64,_d65,_d66){try{var _d67=_d64.mapOptions||{};_d64.mapOptions=_d67;var card=_d62.item;var _d68=[];dojo.forEach(_d66,function(_d69){if(dojo.isArray(_d69.layerObject)){dojo.forEach(_d69.layerObject,function(l){_d68.push(l);});}else{_d68.push(_d69.layerObject);}});if(!_d68[0]){_d65.errback(new Error(esri.bundle.arcgis.utils.baseLayerError));return;}_d68=dojo.filter(_d68,esri._isDefined);if(card){if(card.extent){if(!_d67.extent){var _d6a=new esri.geometry.Extent(card.extent[0][0],card.extent[0][1],card.extent[1][0],card.extent[1][1],new esri.SpatialReference({wkid:4326}));var _d6b=_d68[0].spatialReference;if(_d6b.wkid===4326){_d67.extent=_d6a;EAU._createMap(_d68,_d66,_d62,_d63,_d64,_d65);}else{if(_d6b.wkid===102100||_d6b.wkid===102113||_d6b.wkid===3857){_d6a.xmin=Math.max(_d6a.xmin,-180);_d6a.xmax=Math.min(_d6a.xmax,180);_d6a.ymin=Math.max(_d6a.ymin,-89.99);_d6a.ymax=Math.min(_d6a.ymax,89.99);_d67.extent=esri.geometry.geographicToWebMercator(_d6a);EAU._createMap(_d68,_d66,_d62,_d63,_d64,_d65);}else{if(_d64.geometryServiceURL||esri.config.defaults.geometryService){var gs;if(_d64.geometryServiceURL){gs=new esri.tasks.GeometryService(_d64.geometryServiceURL);}else{gs=esri.config.defaults.geometryService;}gs.project([_d6a],_d6b,function(_d6c){var _d6d=_d6c[0];_d67.extent=_d67.extent||_d6d;EAU._createMap(_d68,_d66,_d62,_d63,_d64,_d65);});}else{_d65.errback(new Error(esri.bundle.arcgis.utils.geometryServiceError));}}}}else{EAU._createMap(_d68,_d66,_d62,_d63,_d64,_d65);}}else{EAU._createMap(_d68,_d66,_d62,_d63,_d64,_d65);}}else{EAU._createMap(_d68,_d66,_d62,_d63,_d64,_d65);}}catch(err){_d65.errback(err);}};EAU._getMapSR=function(_d6e){var _d6f=null;var _d70=_d6e[0];if(_d70.url&&!_d70.type){if(_d70.resourceInfo.spatialReference){_d6f=new esri.SpatialReference();if(_d70.resourceInfo.spatialReference.wkid){_d6f.wkid=_d70.resourceInfo.spatialReference.wkid;}if(_d70.resourceInfo.spatialReference.wkt){_d6f.wkt=_d70.resourceInfo.spatialReference.wkt;}}}else{if(_d70.type.indexOf("BingMaps")>-1||_d70.type=="OpenStreetMap"){_d6f=new esri.SpatialReference({wkid:102100});}else{if(_d70.type=="WMS"){_d6f=new esri.SpatialReference({wkid:_d70.spatialReferences[0]});}}}return _d6f;};EAU._createMap=function(_d71,_d72,_d73,_d74,_d75,_d76){var _d77=(_d75.mapOptions||{}),_d78,_d79;if(!_d77.infoWindow){_d78=new esri.dijit.Popup(null,dojo.create("div"));_d77.infoWindow=_d78;}if(!esri._isDefined(_d77.showInfoWindowOnClick)){_d77.showInfoWindowOnClick=false;}var map=new esri.Map(_d74,_d77);if(_d75.ignorePopups){dojo.forEach(_d71,function(_d7a){delete _d7a.infoTemplate;});}if(!(_d75.ignorePopups||_d75.disableClickBehavior)){_d79=dojo.connect(map,"onClick",EAU._showPopup);}dojo.connect(map,"onLayersAddResult",EAU._onLayersAddResult);map.addLayers(_d71);if(!_d75.ignorePopups){EAU._addSelectionLayers(_d71,map,_d75._clazz);}var _d7b=[];dojo.forEach(_d72,function(_d7c){_d7b=_d7b.concat(_d7c.errors);},this);_d76.callback({map:map,itemInfo:_d73,errors:_d7b,clickEventHandle:_d79,clickEventListener:EAU._showPopup});};EAU._addSelectionLayers=function(_d7d,map,_d7e){var _d7f=[];dojo.forEach(_d7d,function(_d80){var _d81=_d80.__popups;if(_d81&&_d81.length>1&&_d80.version>=10){_d80.__deferredsPos=_d7f.length;_d7f.push(EAU._getLayersInfo(_d80));}});var _d82=[];if(_d7f.length>0){var _d83=new dojo.DeferredList(_d7f);_d83.addCallback(function(_d84){dojo.forEach(_d7d,function(_d85){if(_d85.__popups&&_d85.__popups.length>0){if(_d85.__deferredsPos||_d85.__deferredsPos===0){var _d86=_d84[_d85.__deferredsPos][1];_d82=_d82.concat(EAU._createSelectionFeatureLayers(_d85,_d86.layers,_d7e,map));delete _d85.__deferredsPos;}else{_d82=_d82.concat(EAU._createSelectionFeatureLayers(_d85,null,_d7e,map));}}});map.addLayers(_d82);});}else{dojo.forEach(_d7d,function(_d87){if(_d87.__popups&&_d87.__popups.length>0){_d82=_d82.concat(EAU._createSelectionFeatureLayers(_d87,null,_d7e,map));}});map.addLayers(_d82);}};EAU._createSelectionFeatureLayers=function(_d88,_d89,_d8a,map){var url=_d88.url;var _d8b=_d88.__popups;var ids=_d88.__popupIds;var urls=_d88.__popupUrls;var _d8c=_d88.__resourceInfo;var _d8d=[];dojo.forEach(_d8b,function(_d8e,_d8f){var i,_d90=null;if(_d89){for(i=0;i<_d89.length;i++){if(_d89[i].id===ids[_d8f]){_d90=_d89[i];break;}}}var _d91=url+"/"+ids[_d8f];if(urls[_d8f].length){_d91=urls[_d8f];}var _d92=new esri.layers.FeatureLayer(EAU._checkUrl(_d91),{id:_d88.id+"_"+ids[_d8f],outFields:["*"],mode:esri.layers.FeatureLayer.MODE_SELECTION,infoTemplate:_d8e&&new _d8a(_d8e),drawMode:false,visible:_d88.visible,resourceInfo:_d90,autoGeneralize:true});if(_d92.loaded){EAU._updateLayerScaleInfo(_d8c.layers,_d92);}else{dojo.connect(_d92,"onLoad",function(_d93){EAU._updateLayerScaleInfo(_d8c.layers,_d93);});}_d8d.push(_d92);});if(_d8d.length>0){var _d94=function(_d95,_d96){dojo.forEach(_d95,function(_d97){if(_d96){_d97.show();}else{_d97.hide();}});};dojo.connect(_d88,"onVisibilityChange",dojo.hitch(this,_d94,_d8d));var _d98=function(_d99,_d9a,_d9b){if(_d99.id===_d9b.id){dojo.forEach(_d9a,function(_d9c){map.removeLayer(_d9c);});}};dojo.connect(map,"onLayerRemove",dojo.hitch(this,_d98,_d88,_d8d));}delete _d88.__popups;delete _d88.__popupIds;delete _d88.__popupUrls;delete _d88.__resourceInfo;return _d8d;};EAU._getServiceInfo=function(url,_d9d){var url2=EAU._checkUrl(url);return esri.request({url:url2,content:{f:"json"},callbackParamName:"callback",error:function(_d9e,io){if(_d9e.message){_d9e.message+=" [url:"+url2+"]";}else{_d9e.message="[url:"+url2+"]";}_d9d.push(_d9e);esri.config.defaults.io.errorHandler(_d9e,io);}});};EAU._getLayersInfo=function(_d9f){return esri.request({url:EAU._checkUrl(_d9f.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}});};EAU._initLayer=function(_da0,_da1,_da2,_da3){var _da4,_da5=_da2._clazz;if(_da0.type==="OpenStreetMap"){_da4=new esri.layers.OpenStreetMapLayer({id:_da0.id});}else{if(_da0.type==="WMS"){var _da6=[];var _da7=[];dojo.forEach(_da0.layers,function(_da8){_da7.push(new esri.layers.WMSLayerInfo({name:_da8.name,title:_da8.title,legendURL:_da8.legendURL}));_da6.push(_da8.name);},this);if(_da0.visibleLayers){_da6=_da0.visibleLayers;}var _da9=new esri.geometry.Extent(_da0.extent[0][0],_da0.extent[0][1],_da0.extent[1][0],_da0.extent[1][1],new esri.SpatialReference({wkid:4326}));var _daa={extent:_da9,layerInfos:_da7,version:_da0.version,maxWidth:_da0.maxWidth,maxHeight:_da0.maxHeight,getMapUrl:_da0.mapUrl,spatialReferences:_da0.spatialReferences,title:_da0.title,copyright:_da0.copyright};_da4=new esri.layers.WMSLayer(_da0.url,{id:_da0.id,visibleLayers:_da6,format:"png",transparent:_da0.baseMapLayer?false:true,opacity:_da0.opacity,visible:(_da0.visibility!==null)?_da0.visibility:true,resourceInfo:_daa});_da4.spatialReference.wkid=_daa.spatialReferences[0];}else{if(_da0.type==="KML"){_da4=new esri.layers.KMLLayer(_da0.url,{id:_da0.id,visible:(_da0.visibility!==null)?_da0.visibility:true,outSR:_da3});dojo.connect(_da4,"onLoad",function(){var _dab=function(_dac){dojo.forEach(_dac,function(_dad){if(_dad.declaredClass==="esri.layers.FeatureLayer"||_dad.declaredClass==="esri.layers.MapImageLayer"){_dad.setOpacity(_da0.opacity);}else{if(_dad.declaredClass==="esri.layers.KMLLayer"){if(_dad.loaded){_dab(_dad.getLayers());}else{dojo.connect(_dad,"onLoad",dojo.hitch(this,function(lyr){_dab(lyr.getLayers());}));}}}});};if(_da0.opacity!==null){_dab(_da4.getLayers());}if(_da0.visibleFolders){dojo.forEach(_da4.folders,function(_dae){if(dojo.indexOf(_da0.visibleFolders,_dae.id)>-1){_da4.setFolderVisibility(_dae,true);}else{_da4.setFolderVisibility(_dae,false);}},this);}});}else{if(_da0.type=="CSV"&&_da0.url){_da4=new esri.layers.FeatureLayer(_da0.featureCollection,{infoTemplate:new esri.dijit.PopupTemplate(_da0.popupInfo?_da0.popupInfo:esri.arcgis.csv.generateDefaultPopupInfo(_da0.featureCollection)),id:_da0.id?_da0.id:null,outFields:["*"],visible:(_da0.visibility!==null)?_da0.visibility:true,opacity:_da0.opacity?_da0.opacity:1,autoGeneralize:true});}else{if(_da0.layerDefinition&&!_da0.url){var _daf=dojo.fromJson(dojo.toJson(_da0));delete _daf.id;delete _daf.opacity;delete _daf.visibility;_da4=new esri.layers.FeatureLayer(_daf,{id:_da0.id,opacity:_da0.opacity,visible:_da0.visibility,outFields:["*"],infoTemplate:_daf.popupInfo&&new _da5(_daf.popupInfo),autoGeneralize:true});}else{if(_da0.type==="BingMapsAerial"||_da0.type==="BingMapsRoad"||_da0.type==="BingMapsHybrid"){var _db0=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL_WITH_LABELS;if(_da0.type==="BingMapsAerial"){_db0=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL;}else{if(_da0.type==="BingMapsRoad"){_db0=esri.virtualearth.VETiledLayer.MAP_STYLE_ROAD;}}_da4=new esri.virtualearth.VETiledLayer({bingMapsKey:_da2.bingMapsKey,mapStyle:_db0,id:_da0.id});}else{if(_da0.resourceInfo&&_da0.resourceInfo.mapName){if(_da0.resourceInfo.singleFusedMapCache===true){if(!_da0.baseMapLayer){if(EAU._sameSpatialReferenceAsBasemap(_da0,_da1)){if(EAU._sameTilingSchemeAsBasemap(_da0,_da1)){_da4=EAU._loadAsCached(_da0);}else{_da4=EAU._loadAsDynamic(_da0);}}else{_da4=EAU._loadAsDynamic(_da0);}}else{_da4=EAU._loadAsCached(_da0);}}else{_da4=EAU._loadAsDynamic(_da0);}}else{if(_da0.resourceInfo&&_da0.resourceInfo.pixelSizeX){var _db1=new esri.layers.ImageServiceParameters();_db1.bandIds=_da0.bandIds;if(!_da0.bandIds&&_da0.resourceInfo.bandCount&&parseInt(_da0.resourceInfo.bandCount,10)>3){_db1.bandIds=[0,1,2];}_da4=new esri.layers.ArcGISImageServiceLayer(EAU._checkUrl(_da0.url),{resourceInfo:_da0.resourceInfo,opacity:_da0.opacity,visible:_da0.visibility,id:_da0.id,imageServiceParameters:_db1});}else{if(_da0.resourceInfo&&_da0.resourceInfo.type==="Feature Layer"){_da4=new esri.layers.FeatureLayer(EAU._checkUrl(_da0.url),{resourceInfo:_da0.resourceInfo,opacity:_da0.opacity,visible:_da0.visibility,id:_da0.id,mode:esri._isDefined(_da0.mode)?_da0.mode:esri.layers.FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:_da0.popupInfo&&new _da5(_da0.popupInfo),autoGeneralize:true});if(_da0.layerDefinition){if(_da0.layerDefinition.drawingInfo&&_da0.layerDefinition.drawingInfo.renderer){var _db2=esri.renderer.fromJson(_da0.layerDefinition.drawingInfo.renderer);_da4.setRenderer(_db2);}if(_da0.layerDefinition.definitionExpression){_da4.setDefinitionExpression(_da0.layerDefinition.definitionExpression);}if(esri._isDefined(_da0.layerDefinition.minScale)){_da4.minScale=_da0.layerDefinition.minScale;}if(esri._isDefined(_da0.layerDefinition.maxScale)){_da4.maxScale=_da0.layerDefinition.maxScale;}}}}}}}}}}}if(_da4){_da4.arcgisProps={title:_da0.title};}return _da4;};EAU._loadAsCached=function(_db3){var _db4=[];if(!_db3.displayLevels){_db4=dojo.map(_db3.resourceInfo.tileInfo.lods,function(lod){return lod.level;});}var _db5=new esri.layers.ArcGISTiledMapServiceLayer(EAU._checkUrl(_db3.url),{resourceInfo:_db3.resourceInfo,opacity:_db3.opacity,visible:_db3.visibility,displayLevels:_db3.displayLevels||_db4,id:_db3.id});EAU._processPopups(_db5,_db3);return _db5;};EAU._loadAsDynamic=function(_db6){var _db7=new esri.layers.ImageParameters();_db7.format="png24";if(_db6.resourceInfo&&_db6.resourceInfo.supportedImageFormatTypes&&_db6.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")>-1){_db7.format="png32";}var _db8=new esri.layers.ArcGISDynamicMapServiceLayer(EAU._checkUrl(_db6.url),{resourceInfo:_db6.resourceInfo,opacity:_db6.opacity,visible:_db6.visibility,id:_db6.id,imageParameters:_db7});if(!_db6.visibleLayers){var _db9="";var _dba=_db8.layerInfos;dojo.forEach(_dba,function(_dbb){if(_dbb.defaultVisibility){_db9+=(_db9.length>0?",":"")+_dbb.id;}});_db6.visibleLayers=_db9;}var _dbc=EAU._getVisibleFeatureLayers(_db8.layerInfos,_db6.visibleLayers);_db8.setVisibleLayers(_dbc);if(_db6.layers&&_db6.layers.length>0){var _dbd=[];dojo.forEach(_db6.layers,function(_dbe){if(_dbe.layerDefinition&&_dbe.layerDefinition.definitionExpression){_dbd[_dbe.id]=_dbe.layerDefinition.definitionExpression;}},this);if(_dbd.length>0){_db8.setLayerDefinitions(_dbd);}}EAU._processPopups(_db8,_db6);return _db8;};EAU._processPopups=function(_dbf,_dc0){var _dc1=_dbf.layerInfos;var _dc2=_dc0.layers;if(_dc2&&_dc1){var _dc3=[],ids=[],urls=[];dojo.forEach(_dc1,function(_dc4){var id=_dc4.id,i;if(!_dc4.subLayerIds&&dojo.indexOf(_dbf.visibleLayers,id)!==-1){for(i=0;i<_dc2.length;i++){var _dc5=_dc2[i];if(_dc5.id===id){ids.push(id);_dc3.push(_dc5.popupInfo);urls.push(_dc5.layerUrl||"");break;}}}});if(_dc3.length){_dbf.__popups=_dc3;_dbf.__popupIds=ids;_dbf.__popupUrls=urls;_dbf.__resourceInfo=_dc0.resourceInfo;}}};EAU._onLayersAddResult=function(_dc6){dojo.forEach(_dc6,function(_dc7){var _dc8=_dc7.layer;if(_dc8.toJson){var json=_dc8.toJson();if(json.featureSet&&_dc8.name.indexOf("Text")>-1){dojo.forEach(json.featureSet.features,function(_dc9,idx){if(_dc9.attributes.TEXT){var _dca=_dc8.graphics[idx];_dca.symbol.setText(_dc9.attributes.TEXT);if(_dc9.symbol.horizontalAlignment){_dca.symbol.align=_dc9.symbol.horizontalAlignment;}_dca.setSymbol(_dca.symbol);_dca.setAttributes(_dc9.attributes);}},this);}}});};EAU._sameSpatialReferenceAsBasemap=function(_dcb,_dcc){var _dcd=[102113,102100,3857];var sp1=_dcc[0].layerObject.fullExtent.spatialReference;var sp2=new esri.SpatialReference(_dcb.resourceInfo.fullExtent.spatialReference);if(dojo.toJson(sp1.toJson())===dojo.toJson(sp2.toJson())){return true;}else{if(dojo.some(_dcd,function(wkid){return wkid===sp2.wkid;})&&dojo.some(_dcd,function(wkid){return wkid===sp1.wkid;})){return true;}}return false;};EAU._sameTilingSchemeAsBasemap=function(_dce,_dcf){if(!_dcf[0].layerObject.tileInfo){return false;}var _dd0=[];dojo.forEach(_dcf,function(_dd1){if(_dd1.baseMapLayer){if(_dd1.layerObject.tileInfo){_dd0=_dd0.concat(dojo.map(_dd1.layerObject.tileInfo.lods,function(lod){return lod.scale;}));}}});var _dd2=dojo.some(_dce.resourceInfo.tileInfo.lods,function(lod){return dojo.some(_dd0,function(_dd3){return _dd3===lod.scale;});});return _dd2;};EAU._showPopup=function(evt){var map=this,_dd4=map.infoWindow,_dd5=evt.graphic;if(!map.loaded){return;}_dd4.hide();_dd4.clearFeatures();var _dd6=[];dojo.forEach(map.graphicsLayerIds,function(_dd7){var _dd8=map.getLayer(_dd7);if(_dd8&&_dd8.declaredClass.indexOf("FeatureLayer")!==-1&&_dd8.loaded&&_dd8.visible){_dd8.clearSelection();if(_dd8.infoTemplate&&!_dd8._suspended){_dd6.push(_dd8);}}});_dd5=(_dd5&&_dd5._getEffInfoTemplate())?_dd5:null;if(!_dd6.length&&!_dd5){return;}var _dd9=EAU._calculateClickTolerance(_dd6);var _dda=evt.screenPoint,_ddb=map.toMap(new esri.geometry.Point(_dda.x-_dd9,_dda.y+_dd9)),_ddc=map.toMap(new esri.geometry.Point(_dda.x+_dd9,_dda.y-_dd9)),_ddd=new esri.geometry.Extent(_ddb.x,_ddb.y,_ddc.x,_ddc.y,map.spatialReference);var _dde=new esri.tasks.Query();_dde.geometry=_ddd;_dde.timeExtent=map.timeExtent;var _ddf=dojo.map(_dd6,function(_de0){var dfd=_de0.selectFeatures(_dde);dfd.addCallback(function(){var _de1=_de0.getSelectedFeatures();return _de1;});return dfd;});if(_dd5){var dfd=new dojo.Deferred();dfd.callback([_dd5]);_ddf.splice(0,0,dfd);}var _de2=dojo.some(_ddf,function(dfd){return dfd.fired===-1;});if(!_de2){var _de3=_dd5?1:0;dojo.forEach(_dd6,function(_de4){_de3=_de3+_de4.getSelectedFeatures().length;});if(!_de3){return;}}_dd4.setFeatures(_ddf);_dd4.show(evt.mapPoint,{closestFirst:true});};EAU._calculateClickTolerance=function(_de5){var _de6=6;dojo.forEach(_de5,function(_de7){var _de8=_de7.renderer;if(_de8.declaredClass==="esri.renderer.SimpleRenderer"){var _de9=_de8.symbol;if(_de9&&_de9.xoffset){_de6=Math.max(_de6,Math.abs(_de9.xoffset));}if(_de9&&_de9.yoffset){_de6=Math.max(_de6,Math.abs(_de9.yoffset));}}else{if(_de8.declaredClass==="esri.renderer.UniqueValueRenderer"||_de8.declaredClass==="esri.renderer.ClassBreaksRenderer"){dojo.forEach(_de8.infos,function(info){var _dea=info.symbol;if(_dea&&_dea.xoffset){_de6=Math.max(_de6,Math.abs(_dea.xoffset));}if(_dea&&_dea.yoffset){_de6=Math.max(_de6,Math.abs(_dea.yoffset));}});}}});return _de6;};EAU._getVisibleFeatureLayers=function(_deb,_dec){if(!_deb||!_dec||_dec.length===0){return [];}var _ded=","+_dec+",";var _dee=[];var _def="";var k,_df0=",";for(k=0;k<_deb.length;k++){if(_deb[k].subLayerIds!==null){if(_ded.indexOf(","+_deb[k].id+",")===-1||_df0.indexOf(","+_deb[k].id+",")>-1){_df0+=_deb[k].subLayerIds.toString()+",";}}else{if(_ded.indexOf(","+_deb[k].id+",")>-1&&_df0.indexOf(","+_deb[k].id+",")===-1){_dee.push(_deb[k].id);_def=",";}}}return _dee;};EAU._updateLayerScaleInfo=function(_df1,_df2){if(_df2.version<=10.1&&_df1){var i,id=parseInt(_df2.url.substring(_df2.url.lastIndexOf("/")+1,_df2.url.length));for(i=_df1.length-1;i>=0;i--){if(_df1[i].id==id){if(_df2.minScale==0&&_df1[i].minScale>0){_df2.minScale=_df1[i].minScale;}else{if(_df2.minScale>0&&_df1[i].minScale==0){_df2.minScale=_df2.minScale;}else{if(_df2.minScale>0&&_df1[i].minScale>0){_df2.minScale=Math.min(_df2.minScale,_df1[i].minScale);}}}_df2.maxScale=Math.max(_df2.maxScale||0,_df1[i].maxScale||0);if(_df1[i].parentLayerId>-1){id=_df1[i].parentLayerId;}else{break;}}}}};EAU._checkUrl=function(url){if(location.protocol==="https:"&&(EAU._isHostedService(url)||EAU._isAgolService(url))){url=url.replace("http:","https:");}return url;};EAU._isHostedService=function(url){if(!url){return false;}var _df3=".arcgis.com/";var _df4=(new dojo._Url(EAU.arcgisUrl)).authority;return (url.indexOf(_df3)!==-1||url.indexOf(_df4)!==-1);};EAU._isAgolService=function(url){if(!url){return false;}return (url.indexOf("/services.arcgisonline.com/")!==-1||url.indexOf("/server.arcgisonline.com/")!==-1);};}());});
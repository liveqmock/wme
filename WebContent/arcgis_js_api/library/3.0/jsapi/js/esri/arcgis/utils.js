/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"dojox/charting/plot2d/Lines":function(){define("dojox/charting/plot2d/Lines",["dojo/_base/declare","./Default"],function(_1,_2){return _1("dojox.charting.plot2d.Lines",_2,{constructor:function(){this.opt.lines=true;}});});},"dojox/charting/plot2d/ClusteredBars":function(){define("dojox/charting/plot2d/ClusteredBars",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Bars","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils"],function(_3,_4,_5,_6,dc,df,_7,du){var _8=_7.lambda("item.purgeGroup()");return _5("dojox.charting.plot2d.ClusteredBars",_6,{render:function(_9,_a){if(this.zoom&&!this.isDataDirty()){return this.performZoom(_9,_a);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_8);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(_b){_b.cleanGroup(s);});}var t=this.chart.theme,f,_c,_d,_e,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_f=Math.max(0,this._hScaler.bounds.lower),_10=ht(_f),_11=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);_c=f.gap;_d=_e=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i],_12=_e*(this.series.length-i-1);if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _13=t.next("bar",[this.opt,run]),s=run.group,_14=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _15=run.data[j];if(_15!==null){var v=typeof _15=="number"?_15:_15.y,hv=ht(v),_16=hv-_10,w=Math.abs(_16),_17=typeof _15!="number"?t.addMixin(_13,"bar",_15,true):t.post(_13,"bar");if(w>=0&&_d>=1){var _18={x:_a.l+(v<_f?hv:_10),y:_9.height-_a.b-vt(j+1.5)+_c+_12,width:w,height:_d};var _19=this._plotFill(_17.series.fill,_9,_a);_19=this._shapeFill(_19,_18);var _1a=s.createRect(_18).setFill(_19).setStroke(_17.series.stroke);run.dyn.fill=_1a.getFill();run.dyn.stroke=_1a.getStroke();if(_11){var o={element:"bar",index:j,run:run,shape:_1a,x:v,y:j+1.5};this._connectEvents(o);_14[j]=o;}if(this.animate){this._animateBar(_1a,_a.l+_10,-_16);}}}}this._eventSeries[run.name]=_14;run.dirty=false;}this.dirty=false;return this;}});});},"dojox/gfx/utils":function(){define("dojox/gfx/utils",["dojo/_base/kernel","dojo/_base/lang","./_base","dojo/_base/html","dojo/_base/array","dojo/_base/window","dojo/_base/json","dojo/_base/Deferred","dojo/_base/sniff","require","dojo/_base/config"],function(_1b,_1c,g,_1d,arr,win,_1e,_1f,has,_20,_21){var gu=g.utils={};_1c.mixin(gu,{forEach:function(_22,f,o){o=o||win.global;f.call(o,_22);if(_22 instanceof g.Surface||_22 instanceof g.Group){arr.forEach(_22.children,function(_23){gu.forEach(_23,f,o);});}},serialize:function(_24){var t={},v,_25=_24 instanceof g.Surface;if(_25||_24 instanceof g.Group){t.children=arr.map(_24.children,gu.serialize);if(_25){return t.children;}}else{t.shape=_24.getShape();}if(_24.getTransform){v=_24.getTransform();if(v){t.transform=v;}}if(_24.getStroke){v=_24.getStroke();if(v){t.stroke=v;}}if(_24.getFill){v=_24.getFill();if(v){t.fill=v;}}if(_24.getFont){v=_24.getFont();if(v){t.font=v;}}return t;},toJson:function(_26,_27){return _1e.toJson(gu.serialize(_26),_27);},deserialize:function(_28,_29){if(_29 instanceof Array){return arr.map(_29,_1c.hitch(null,gu.deserialize,_28));}var _2a=("shape" in _29)?_28.createShape(_29.shape):_28.createGroup();if("transform" in _29){_2a.setTransform(_29.transform);}if("stroke" in _29){_2a.setStroke(_29.stroke);}if("fill" in _29){_2a.setFill(_29.fill);}if("font" in _29){_2a.setFont(_29.font);}if("children" in _29){arr.forEach(_29.children,_1c.hitch(null,gu.deserialize,_2a));}return _2a;},fromJson:function(_2b,_2c){return gu.deserialize(_2b,_1e.fromJson(_2c));},toSvg:function(_2d){var _2e=new _1f();if(g.renderer==="svg"){try{var svg=gu._cleanSvg(gu._innerXML(_2d.rawNode));_2e.callback(svg);}catch(e){_2e.errback(e);}}else{if(!gu._initSvgSerializerDeferred){gu._initSvgSerializer();}var _2f=gu.toJson(_2d);var _30=function(){try{var _31=_2d.getDimensions();var _32=_31.width;var _33=_31.height;var _34=gu._gfxSvgProxy.document.createElement("div");gu._gfxSvgProxy.document.body.appendChild(_34);win.withDoc(gu._gfxSvgProxy.document,function(){_1d.style(_34,"width",_32);_1d.style(_34,"height",_33);},this);var ts=gu._gfxSvgProxy[dojox._scopeName].gfx.createSurface(_34,_32,_33);var _35=function(_36){try{gu._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(_36,_2f);var svg=gu._cleanSvg(_34.innerHTML);_36.clear();_36.destroy();gu._gfxSvgProxy.document.body.removeChild(_34);_2e.callback(svg);}catch(e){_2e.errback(e);}};ts.whenLoaded(null,_35);}catch(ex){_2e.errback(ex);}};if(gu._initSvgSerializerDeferred.fired>0){_30();}else{gu._initSvgSerializerDeferred.addCallback(_30);}}return _2e;},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){gu._initSvgSerializerDeferred.callback(true);},_initSvgSerializer:function(){if(!gu._initSvgSerializerDeferred){gu._initSvgSerializerDeferred=new _1f();var f=win.doc.createElement("iframe");_1d.style(f,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var _37;if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onreadystatechange=function(){};_37=setInterval(function(){if(f.contentWindow[_1b.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_37);f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);}};}else{f.onload=function(){f.onload=function(){};_37=setInterval(function(){if(f.contentWindow[_1b.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_37);f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);};}var uri=(_21["dojoxGfxSvgProxyFrameUrl"]||_20.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html"));f.setAttribute("src",uri.toString());win.body().appendChild(f);}},_innerXML:function(_38){if(_38.innerXML){return _38.innerXML;}else{if(_38.xml){return _38.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(_38);}}}return null;},_cleanSvg:function(svg){if(svg){if(svg.indexOf("xmlns=\"http://www.w3.org/2000/svg\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns=\"http://www.w3.org/2000/svg\""+svg;}if(svg.indexOf("xmlns:xlink=\"http://www.w3.org/1999/xlink\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\""+svg;}if(svg.indexOf("xlink:href")===-1){svg=svg.replace(/href\s*=/g,"xlink:href=");}svg=svg.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/[=]([^"']+?)(\s|>)/g,"=\"$1\"$2");}return svg;}});return gu;});},"dojox/charting/plot2d/Areas":function(){define("dojox/charting/plot2d/Areas",["dojo/_base/declare","./Default"],function(_39,_3a){return _39("dojox.charting.plot2d.Areas",_3a,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojox/lang/functional/array":function(){define("dojox/lang/functional/array",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","./lambda"],function(_3b,_3c,arr,win,df){var _3d={};_3c.mixin(df,{filter:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t=[],v,i,n;if(_3c.isArray(a)){for(i=0,n=a.length;i<n;++i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){v=a.next();if(f.call(o,v,i++,a)){t.push(v);}}}else{for(i in a){if(!(i in _3d)){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}}}return t;},forEach:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_3c.isArray(a)){for(i=0,n=a.length;i<n;f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();f.call(o,a.next(),i++,a)){}}else{for(i in a){if(!(i in _3d)){f.call(o,a[i],i,a);}}}}return o;},map:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t,n,i;if(_3c.isArray(a)){t=new Array(n=a.length);for(i=0;i<n;t[i]=f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[];for(i=0;a.hasNext();t.push(f.call(o,a.next(),i++,a))){}}else{t=[];for(i in a){if(!(i in _3d)){t.push(f.call(o,a[i],i,a));}}}}return t;},every:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_3c.isArray(a)){for(i=0,n=a.length;i<n;++i){if(!f.call(o,a[i],i,a)){return false;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(!f.call(o,a.next(),i++,a)){return false;}}}else{for(i in a){if(!(i in _3d)){if(!f.call(o,a[i],i,a)){return false;}}}}}return true;},some:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_3c.isArray(a)){for(i=0,n=a.length;i<n;++i){if(f.call(o,a[i],i,a)){return true;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(f.call(o,a.next(),i++,a)){return true;}}}else{for(i in a){if(!(i in _3d)){if(f.call(o,a[i],i,a)){return true;}}}}}return false;}});return df;});},"dojox/charting/Chart2D":function(){define("dojox/charting/Chart2D",["dojo/_base/kernel","dojox","./Chart","./axis2d/Default","./axis2d/Invisible","./plot2d/Default","./plot2d/Lines","./plot2d/Areas","./plot2d/Markers","./plot2d/MarkersOnly","./plot2d/Scatter","./plot2d/Stacked","./plot2d/StackedLines","./plot2d/StackedAreas","./plot2d/Columns","./plot2d/StackedColumns","./plot2d/ClusteredColumns","./plot2d/Bars","./plot2d/StackedBars","./plot2d/ClusteredBars","./plot2d/Grid","./plot2d/Pie","./plot2d/Bubble","./plot2d/Candlesticks","./plot2d/OHLC","./plot2d/Spider"],function(_3e,_3f,_40){_3e.deprecated("dojox.charting.Chart2D","Use dojo.charting.Chart instead and require all other components explicitly","2.0");return _3f.charting.Chart2D=_40;});},"dojox/charting/Series":function(){define("dojox/charting/Series",["dojo/_base/lang","dojo/_base/declare","./Element"],function(_41,_42,_43){return _42("dojox.charting.Series",_43,{constructor:function(_44,_45,_46){_41.mixin(this,_46);if(typeof this.plot!="string"){this.plot="default";}this.update(_45);},clear:function(){this.dyn={};},update:function(_47){if(_41.isArray(_47)){this.data=_47;}else{this.source=_47;this.data=this.source.data;if(this.source.setSeriesObject){this.source.setSeriesObject(this);}}this.dirty=true;this.clear();}});});},"esri/layers/osm":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/tiled"],function(_48,_49,_4a){_49.provide("esri.layers.osm");_49.require("esri.layers.tiled");_49.declare("esri.layers.OpenStreetMapLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_4b){this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_4b&&_4b.tileServers)||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=_4b?_4b.displayLevels:null;this.loaded=true;this.onLoad(this);var _4c=_4b&&_4b.loadCallback;if(_4c){_4c(this);}},getTileUrl:function(_4d,row,col){return esri._getProxiedUrl(this.tileServers[row%this.serversLength]+"/"+_4d+"/"+col+"/"+row+".png");}});});},"esri/layers/KMLLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/layer,esri/layers/MapImageLayer,esri/layers/FeatureLayer,esri/dijit/Popup"],function(_4e,_4f,_50){_4f.provide("esri.layers.KMLLayer");_4f.require("esri.utils");_4f.require("esri.layers.layer");_4f.require("esri.layers.MapImageLayer");_4f.require("esri.layers.FeatureLayer");_4f.require("esri.dijit.Popup");_4f.declare("esri.layers.KMLLayer",[esri.layers.Layer],{serviceUrl:"http://utility.arcgis.com/sharing/kml",constructor:function(url,_51){if(!url){console.log("KMLLayer:constructor - please provide url for the KML file");}this._outSR=(_51&&_51.outSR)||new esri.SpatialReference({wkid:4326});this._options=_51;if(esri.config.defaults.kmlService){this.serviceUrl=esri.config.defaults.kmlService;}var _52=(this.linkInfo=_51&&_51.linkInfo);if(_52){this.visible=!!_52.visibility;this._waitingForMap=!!_52.viewFormat;}if(!_52||(_52&&_52.visibility&&!this._waitingForMap)){this._parseKml();}this.refresh=_4f.hitch(this,this.refresh);},getFeature:function(_53){if(!_53){return;}var _54=_53.type,id=_53.id,_55,i,len;switch(_54){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":var _56=this["_"+_54];if(_56){_55=_4f.getObject("_mode._featureMap."+id,false,_56);}break;case "GroundOverlay":var _57=this._groundLyr;if(_57){var _58=_57.getImages();len=_58.length;for(i=0;i<len;i++){if(_58[i].id===id){_55=_58[i];break;}}}break;case "ScreenOverlay":break;case "NetworkLink":_4f.some(this._links,function(_59){if(_59.linkInfo&&_59.linkInfo.id===id){_55=_59;return true;}else{return false;}});break;case "Folder":var _5a=this.folders;len=_5a?_5a.length:0;for(i=0;i<len;i++){if(_5a[i].id===id){_55=_5a[i];break;}}break;default:console.log("KMLLayer:getFeature - unknown feature type");break;}return _55;},getLayers:function(){var _5b=[];if(this._groundLyr){_5b.push(this._groundLyr);}if(this._fLayers){_5b=_5b.concat(this._fLayers);}if(this._links){_4f.forEach(this._links,function(_5c){if(_5c.declaredClass){_5b.push(_5c);}});}return _5b;},setFolderVisibility:function(_5d,_5e){if(!_5d){return;}this._fireUpdateStart();_5d.visible=_5e;if(_5e){_5e=this._areLocalAncestorsVisible(_5d);}this._setState(_5d,_5e);this._fireUpdateEnd();},onRefresh:function(){},_parseKml:function(map){var _5f=this;this._fireUpdateStart();this._io=esri.request({url:this.serviceUrl,content:{url:this._url.path+this._getQueryParameters(map),model:"simple",folders:"",refresh:this.loaded?true:undefined,outSR:_4f.toJson(this._outSR.toJson())},callbackParamName:"callback",load:function(_60){_5f._io=null;_5f._initLayer(_60);},error:function(err){_5f._io=null;err=_4f.mixin(new Error(),err);err.message="Unable to load KML: "+_5f.url+" "+(err.message||"");_5f._fireUpdateEnd(err);_5f.onError(err);}});},_initLayer:function(_61){if(this.loaded){this._removeInternalLayers();}this.name=_61.name;this.description=_61.description;this.snippet=_61.snippet;this.visibility=_61.visibility;this.featureInfos=_61.featureInfos;var i,len;var _62=(this.folders=_61.folders),_63=[],_64;if(_62){len=_62.length;for(i=0;i<len;i++){_64=(_62[i]=new esri.layers.KMLFolder(_62[i]));if(_64.parentFolderId===-1){_63.push(_64);}}}var _65=(this._links=_61.networkLinks),_66;len=_65?_65.length:0;for(i=0;i<len;i++){if(_65[i].viewRefreshMode&&_65[i].viewRefreshMode.toLowerCase().indexOf("onregion")!==-1){continue;}_66=_4f.mixin({},this._options);_66.linkInfo=_65[i];if(_66.id){_66.id=_66.id+"_"+i;}_65[i]=new esri.layers.KMLLayer(_65[i].href,_66);_65[i]._parentLayer=this;_65[i]._parentFolderId=this._getLinkParentId(_65[i].linkInfo.id);}var _67=_61.groundOverlays;if(_67&&_67.length>0){_66=_4f.mixin({},this._options);if(_66.id){_66.id=_66.id+"_"+"mapImage";}var _68=(this._groundLyr=new esri.layers.MapImageLayer(_66));len=_67.length;for(i=0;i<len;i++){_68.addImage(new esri.layers.KMLGroundOverlay(_67[i]));}}var _69=_4f.getObject("featureCollection.layers",false,_61);if(_69&&_69.length>0){this._fLayers=[];_4f.forEach(_69,function(_6a,i){var _6b=_4f.getObject("featureSet.features",false,_6a),_6c;if(_6b&&_6b.length>0){_66=_4f.mixin({outFields:["*"],infoTemplate:_6a.popupInfo?new esri.dijit.PopupTemplate(_6a.popupInfo):null,editable:false},this._options);if(_66.id){_66.id=_66.id+"_"+i;}_6a.layerDefinition.capabilities="Query,Data";_6c=new esri.layers.FeatureLayer(_6a,_66);if(_6c.geometryType){this["_"+_6c.geometryType]=_6c;}this._fLayers.push(_6c);}},this);if(this._fLayers.length===0){delete this._fLayers;}}len=_63.length;for(i=0;i<len;i++){_64=_63[i];this._setState(_64,_64.visible);}this._fireUpdateEnd();if(this.loaded){this._addInternalLayers();this.onRefresh();}else{this.loaded=true;this.onLoad(this);}},_addInternalLayers:function(){var map=this._map;this._fireUpdateStart();if(this._links){_4f.forEach(this._links,function(_6d){if(_6d.declaredClass){map.addLayer(_6d);if(_6d._waitingForMap){_6d._waitingForMap=null;if(_6d.visible){_6d._parseKml(map);}else{_6d._wMap=map;}}}});}var _6e=map.spatialReference,_6f=this._outSR,_70,_71;if(_6e.wkid){_70=(_6e._isWebMercator()&&_6f._isWebMercator())||(_6e.wkid===_6f.wkid);}else{if(_6e.wkt){_70=(_6e.wkt===_6f.wkt);}else{console.log("KMLLayer:_setMap - map has invalid spatial reference");return;}}if(!_70){if(_6e._isWebMercator()&&_6f.wkid===4326){_71=esri.geometry.geographicToWebMercator;}else{if(_6f._isWebMercator()&&_6e.wkid===4326){_71=esri.geometry.webMercatorToGeographic;}else{console.log("KMLLayer:_setMap - unsupported workflow. Spatial reference of the map and kml layer do not match, and the conversion cannot be done on the client.");return;}}}if(this._groundLyr){if(_71){_4f.forEach(this._groundLyr.getImages(),function(_72){_72.extent=_71(_72.extent);});}map.addLayer(this._groundLyr);}var _73=this._fLayers;if(_73&&_73.length>0){_4f.forEach(_73,function(_74){if(_71){var _75=_74.graphics,i,_76,len=_75?_75.length:0;for(i=0;i<len;i++){_76=_75[i].geometry;if(_76){_75[i].setGeometry(_71(_76));}}}map.addLayer(_74);});}this.onVisibilityChange(this.visible);},_removeInternalLayers:function(){var map=this._map;if(this._links){_4f.forEach(this._links,function(_77){if(_77.declaredClass&&_77._io){_77._io.cancel();}});}if(map){_4f.forEach(this.getLayers(),map.removeLayer,map);}},_setState:function(_78,_79){var _7a=_78.featureInfos,_7b,_7c,i,len=_7a?_7a.length:0,_7d=_79?"show":"hide";for(i=0;i<len;i++){_7b=_7a[i];_7c=this.getFeature(_7b);if(!_7c){continue;}if(_7b.type==="Folder"){this._setState(_7c,_79&&_7c.visible);}else{if(_7b.type==="NetworkLink"){this._setInternalVisibility(_7c,_79);}else{_7c[_7d]();}}}},_areLocalAncestorsVisible:function(_7e){var _7f=_7e.parentFolderId,_80=_7e.visible;while(_80&&_7f!==-1){var _81=this.getFeature({type:"Folder",id:_7f});_80=_80&&_81.visible;_7f=_81.parentFolderId;}return _80;},_setInternalVisibility:function(_82,_83){var _84=_82._parentLayer,_85=_82._parentFolderId;_83=_83&&_82.visible;while(_83&&_84){_83=_83&&_84.visible;if(_85>-1){_83=_83&&_84._areLocalAncestorsVisible(_84.getFeature({type:"Folder",id:_85}));}_85=_84._parentFolderId;_84=_84._parentLayer;}this._setIntState(_82,_83);},_setIntState:function(_86,_87){if(!_86){return;}_4f.forEach(_86.getLayers(),function(_88){if(_88.linkInfo){_86._setIntState(_88,_87&&_88.visible&&_86._areLocalAncestorsVisible(_86.getFeature({type:"Folder",id:_88._parentFolderId})));}else{_88.setVisibility(_87);}});},_getLinkParentId:function(id){var _89=-1;if(this.folders){_4f.some(this.folders,function(_8a){if(_8a.networkLinkIds&&_4f.indexOf(_8a.networkLinkIds,id)!==-1){_89=_8a.id;return true;}return false;});}return _89;},_checkAutoRefresh:function(){var _8b=this.linkInfo;if(_8b){if(this.visible){if(this.loaded&&this._map){var _8c=_8b.refreshMode,_8d=_8b.refreshInterval,_8e=_8b.viewRefreshMode,_8f=_8b.viewRefreshTime;if(_8c&&_8c.toLowerCase().indexOf("oninterval")!==-1&&_8d>0){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,_8d*1000);}if(_8e&&_8e.toLowerCase().indexOf("onstop")!==-1&&_8f>0){if(!this._extChgHandle){this._extChgHandle=_4f.connect(this._map,"onExtentChange",this,this._extentChanged);}}}}else{this._stopAutoRefresh();_4f.disconnect(this._extChgHandle);delete this._extChgHandle;}}},_stopAutoRefresh:function(){clearTimeout(this._timeoutHandle);this._timeoutHandle=null;},_getQueryParameters:function(map){map=map||this._map;var _90={},_91=this.linkInfo,_92=map&&map.extent;if(this._url.query){_4f.mixin(_90,this._url.query);}if(_91){var _93=_91.viewFormat,_94=_91.httpQuery,_95=_91.viewBoundScale;if(_92&&_93){var _96=_92,_97=_92,sr=_92.spatialReference;if(sr){if(sr._isWebMercator()){_96=esri.geometry.webMercatorToGeographic(_92);}else{if(sr.wkid===4326){_97=esri.geometry.geographicToWebMercator(_92);}}}var _98=_96.getCenter(),_99=Math.max(_97.getWidth(),_97.getHeight());if(_95){_96=_96.expand(_95);}_93=_93.replace(/\[bboxWest\]/ig,_96.xmin).replace(/\[bboxEast\]/ig,_96.xmax).replace(/\[bboxSouth\]/ig,_96.ymin).replace(/\[bboxNorth\]/ig,_96.ymax).replace(/\[lookatLon\]/ig,_98.x).replace(/\[lookatLat\]/ig,_98.y).replace(/\[lookatRange\]/ig,_99).replace(/\[lookatTilt\]/ig,0).replace(/\[lookatHeading\]/ig,0).replace(/\[lookatTerrainLon\]/ig,_98.x).replace(/\[lookatTerrainLat\]/ig,_98.y).replace(/\[lookatTerrainAlt\]/ig,0).replace(/\[cameraLon\]/ig,_98.x).replace(/\[cameraLat\]/ig,_98.y).replace(/\[cameraAlt\]/ig,_99).replace(/\[horizFov\]/ig,60).replace(/\[vertFov\]/ig,60).replace(/\[horizPixels\]/ig,map.width).replace(/\[vertPixels\]/ig,map.height).replace(/\[terrainEnabled\]/ig,0);_4f.mixin(_90,_4f.queryToObject(_93));}if(_94){_94=_94.replace(/\[clientVersion\]/ig,esri.version).replace(/\[kmlVersion\]/ig,2.2).replace(/\[clientName\]/ig,"ArcGIS API for JavaScript").replace(/\[language\]/ig,_4f.locale);_4f.mixin(_90,_4f.queryToObject(_94));}}var _9a=[],_9b;for(_9b in _90){if(esri._isDefined(_90[_9b])){_9a.push(_9b+"="+_90[_9b]);}}_9a=_9a.join("&");return _9a?("?"+_9a):"";},_setMap:function(map,_9c){this._map=map;var div=this._div=_4f.create("div",null,_9c);_4f.style(div,"position","absolute");this._addInternalLayers();return div;},_unsetMap:function(map,_9d){if(this._io){this._io.cancel();}this._stopAutoRefresh();_4f.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var div=this._div;if(div){_9d.removeChild(div);_4f.destroy(div);}this._map=this._wMap=this._div=null;},onVisibilityChange:function(_9e){if(!this.loaded){if(this.linkInfo&&_9e){if(!this._waitingForMap){this._parseKml(this._wMap);}}return;}this._fireUpdateStart();this._setInternalVisibility(this,_9e);this._checkAutoRefresh();this._fireUpdateEnd();},refresh:function(){if(!this.loaded||!this._map||this._io){return;}this._parseKml();},_extentChanged:function(){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,this.linkInfo.viewRefreshTime*1000);}});_4f.declare("esri.layers.KMLGroundOverlay",[esri.layers.MapImage],{constructor:function(_9f){if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});_4f.declare("esri.layers.KMLFolder",null,{constructor:function(_a0){_4f.mixin(this,_a0);if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});});},"dojox/charting/plot2d/Spider":function(){define("dojox/charting/plot2d/Spider",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/_base/array","dojo/dom-geometry","dojo/_base/fx","dojo/fx","dojo/_base/sniff","../Element","./_PlotEvents","dojo/_base/Color","dojox/color/_base","./common","../axis2d/common","../scaler/primitive","dojox/gfx","dojox/gfx/matrix","dojox/gfx/fx","dojox/lang/functional","dojox/lang/utils","dojo/fx/easing"],function(_a1,_a2,hub,_a3,arr,_a4,_a5,_a6,has,_a7,_a8,_a9,_aa,dc,da,_ab,g,m,_ac,df,du,_ad){var _ae=0.2;var _af=_a2("dojox.charting.plot2d.Spider",[_a7,_a8],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:true,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:0.2,spiderOrigin:0.16,markerSize:3,spiderType:"polygon",animationType:_ad.backOut,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",fontColor:""},constructor:function(_b0,_b1){this.opt=_a1.clone(this.defaultParams);du.updateWithObject(this.opt,_b1);du.updateWithPattern(this.opt,_b1,this.optionalParams);this.series=[];this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};},clear:function(){this.dirty=true;this.dyn=[];this.series=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this;},setAxis:function(_b2){return this;},addSeries:function(run){var _b3=false;this.series.push(run);for(var key in run.data){var val=run.data[key],_b4=this.datas[key];if(_b4){_b4.vlist.push(val);_b4.min=Math.min(_b4.min,val);_b4.max=Math.max(_b4.max,val);}else{this.datas[key]={min:val,max:val,vlist:[val]};}}if(this.labelKey.length<=0){for(var key in run.data){this.labelKey.push(key);}}return this;},getSeriesStats:function(){return dc.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_b5){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_b5.hmin,_b5.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_ab.buildScaler(_b5.hmin,_b5.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_b5.vmin,_b5.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_ab.buildScaler(_b5.vmin,_b5.vmax,dim.height);}return this;},render:function(dim,_b6){if(!this.dirty){return this;}this.dirty=false;this.cleanGroup();var s=this.group,t=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length){return this;}var o=this.opt,ta=t.axis,rx=(dim.width-_b6.l-_b6.r)/2,ry=(dim.height-_b6.t-_b6.b)/2,r=Math.min(rx,ry),_b7=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font)||"normal normal normal 7pt Tahoma",_b8=o.axisFont||(ta.tick&&ta.tick.titleFont)||"normal normal normal 11pt Tahoma",_b9=o.axisTickFontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"silver",_ba=o.axisFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_bb=o.axisColor||(ta.tick&&ta.tick.axisColor)||"silver",_bc=o.spiderColor||(ta.tick&&ta.tick.spiderColor)||"silver",_bd=o.axisWidth||(ta.stroke&&ta.stroke.width)||2,_be=o.spiderWidth||(ta.stroke&&ta.stroke.width)||2,_bf=o.seriesWidth||(ta.stroke&&ta.stroke.width)||2,_c0=g.normalizedLength(g.splitFontString(_b8).size),_c1=m._degToRad(o.startAngle),_c2=_c1,_c3,_c4,_c5,_c6,_c7,_c8,_c9,_ca,_cb,_cc,_cd,ro=o.spiderOrigin,dv=o.divisions>=3?o.divisions:3,ms=o.markerSize,spt=o.spiderType,at=o.animationType,_ce=o.labelOffset<-10?o.labelOffset:-10,_cf=0.2;if(o.labels){_c6=arr.map(this.series,function(s){return s.name;},this);_c7=df.foldl1(df.map(_c6,function(_d0,i){var _d1=t.series.font;return g._base._getTextBox(_d0,{font:_d1}).w;},this),"Math.max(a, b)")/2;r=Math.min(rx-2*_c7,ry-_c0)+_ce;_c8=r-_ce;}if("radius" in o){r=o.radius;_c8=r-_ce;}r/=(1+_cf);var _d2={cx:_b6.l+rx,cy:_b6.t+ry,r:r};for(var i=this.series.length-1;i>=0;i--){var _d3=this.series[i];if(!this.dirty&&!_d3.dirty){t.skip();continue;}_d3.cleanGroup();var run=_d3.data;if(run!==null){var len=this._getObjectLength(run);if(!_c9||_c9.length<=0){_c9=[],_ca=[],_cd=[];this._buildPoints(_c9,len,_d2,r,_c2,true);this._buildPoints(_ca,len,_d2,r*ro,_c2,true);this._buildPoints(_cd,len,_d2,_c8,_c2);if(dv>2){_cb=[],_cc=[];for(var j=0;j<dv-2;j++){_cb[j]=[];this._buildPoints(_cb[j],len,_d2,r*(ro+(1-ro)*(j+1)/(dv-1)),_c2,true);_cc[j]=r*(ro+(1-ro)*(j+1)/(dv-1));}}}}}var _d4=s.createGroup(),_d5={color:_bb,width:_bd},_d6={color:_bc,width:_be};for(var j=_c9.length-1;j>=0;--j){var _d7=_c9[j],st={x:_d7.x+(_d7.x-_d2.cx)*_cf,y:_d7.y+(_d7.y-_d2.cy)*_cf},nd={x:_d7.x+(_d7.x-_d2.cx)*_cf/2,y:_d7.y+(_d7.y-_d2.cy)*_cf/2};_d4.createLine({x1:_d2.cx,y1:_d2.cy,x2:st.x,y2:st.y}).setStroke(_d5);this._drawArrow(_d4,st,nd,_d5);}var _d8=s.createGroup();for(var j=_cd.length-1;j>=0;--j){var _d7=_cd[j],_d9=g._base._getTextBox(this.labelKey[j],{font:_b8}).w||0,_da=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx",_db=da.createText[_da](this.chart,_d8,(!_a4.isBodyLtr()&&_da=="html")?(_d7.x+_d9-dim.width):_d7.x,_d7.y,"middle",this.labelKey[j],_b8,_ba);if(this.opt.htmlLabels){this.htmlElements.push(_db);}}var _dc=s.createGroup();if(spt=="polygon"){_dc.createPolyline(_c9).setStroke(_d6);_dc.createPolyline(_ca).setStroke(_d6);if(_cb.length>0){for(var j=_cb.length-1;j>=0;--j){_dc.createPolyline(_cb[j]).setStroke(_d6);}}}else{var _dd=this._getObjectLength(this.datas);_dc.createCircle({cx:_d2.cx,cy:_d2.cy,r:r}).setStroke(_d6);_dc.createCircle({cx:_d2.cx,cy:_d2.cy,r:r*ro}).setStroke(_d6);if(_cc.length>0){for(var j=_cc.length-1;j>=0;--j){_dc.createCircle({cx:_d2.cx,cy:_d2.cy,r:_cc[j]}).setStroke(_d6);}}}var _de=s.createGroup(),len=this._getObjectLength(this.datas),k=0;for(var key in this.datas){var _df=this.datas[key],min=_df.min,max=_df.max,_e0=max-min,end=_c2+2*Math.PI*k/len;for(var i=0;i<dv;i++){var _e1=min+_e0*i/(dv-1),_d7=this._getCoordinate(_d2,r*(ro+(1-ro)*i/(dv-1)),end);_e1=this._getLabel(_e1);var _d9=g._base._getTextBox(_e1,{font:_b7}).w||0,_da=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx";if(this.opt.htmlLabels){this.htmlElements.push(da.createText[_da](this.chart,_de,(!_a4.isBodyLtr()&&_da=="html")?(_d7.x+_d9-dim.width):_d7.x,_d7.y,"start",_e1,_b7,_b9));}}k++;}this.chart.seriesShapes={};var _e2=[];for(var i=this.series.length-1;i>=0;i--){var _d3=this.series[i],run=_d3.data;if(run!==null){var _e3=[],k=0,_e4=[];for(var key in run){var _df=this.datas[key],min=_df.min,max=_df.max,_e0=max-min,_e5=run[key],end=_c2+2*Math.PI*k/len,_d7=this._getCoordinate(_d2,r*(ro+(1-ro)*(_e5-min)/_e0),end);_e3.push(_d7);_e4.push({sname:_d3.name,key:key,data:_e5});k++;}_e3[_e3.length]=_e3[0];_e4[_e4.length]=_e4[0];var _e6=this._getBoundary(_e3),_e7=t.next("spider",[o,_d3]),ts=_d3.group,f=g.normalizeColor(_e7.series.fill),sk={color:_e7.series.fill,width:_bf};f.a=o.seriesFillAlpha;_d3.dyn={fill:f,stroke:sk};var _e8=this.oldSeriePoints[_d3.name];var cs=this._createSeriesEntry(ts,(_e8||_ca),_e3,f,sk,r,ro,ms,at);this.chart.seriesShapes[_d3.name]=cs;this.oldSeriePoints[_d3.name]=_e3;var po={element:"spider_poly",index:i,id:"spider_poly_"+_d3.name,run:_d3,plot:this,shape:cs.poly,parent:ts,brect:_e6,cx:_d2.cx,cy:_d2.cy,cr:r,f:f,s:s};this._connectEvents(po);var so={element:"spider_plot",index:i,id:"spider_plot_"+_d3.name,run:_d3,plot:this,shape:_d3.group};this._connectEvents(so);arr.forEach(cs.circles,function(c,i){var _e9=c.getShape(),co={element:"spider_circle",index:i,id:"spider_circle_"+_d3.name+i,run:_d3,plot:this,shape:c,parent:ts,tdata:_e4[i],cx:_e3[i].x,cy:_e3[i].y,f:f,s:s};this._connectEvents(co);},this);}}return this;},_createSeriesEntry:function(ts,_ea,sps,f,sk,r,ro,ms,at){var _eb=ts.createPolyline(_ea).setFill(f).setStroke(sk),_ec=[];for(var j=0;j<_ea.length;j++){var _ed=_ea[j],cr=ms;var _ee=ts.createCircle({cx:_ed.x,cy:_ed.y,r:cr}).setFill(f).setStroke(sk);_ec.push(_ee);}var _ef=arr.map(sps,function(np,j){var sp=_ea[j],_f0=new _a5.Animation({duration:1000,easing:at,curve:[sp.y,np.y]});var spl=_eb,sc=_ec[j];hub.connect(_f0,"onAnimate",function(y){var _f1=spl.getShape();_f1.points[j].y=y;spl.setShape(_f1);var _f2=sc.getShape();_f2.cy=y;sc.setShape(_f2);});return _f0;});var _f3=arr.map(sps,function(np,j){var sp=_ea[j],_f4=new _a5.Animation({duration:1000,easing:at,curve:[sp.x,np.x]});var spl=_eb,sc=_ec[j];hub.connect(_f4,"onAnimate",function(x){var _f5=spl.getShape();_f5.points[j].x=x;spl.setShape(_f5);var _f6=sc.getShape();_f6.cx=x;sc.setShape(_f6);});return _f4;});var _f7=_a6.combine(_ef.concat(_f3));_f7.play();return {group:ts,poly:_eb,circles:_ec};},plotEvent:function(o){var _f8=o.id?o.id:"default",a;if(_f8 in this.animations){a=this.animations[_f8];a.anim&&a.anim.stop(true);}else{a=this.animations[_f8]={};}if(o.element=="spider_poly"){if(!a.color){var _f9=o.shape.getFill();if(!_f9||!(_f9 instanceof _a9)){return;}a.color={start:_f9,end:_fa(_f9)};}var _fb=a.color.start,end=a.color.end;if(o.type=="onmouseout"){var t=_fb;_fb=end;end=t;}a.anim=_ac.animateFill({shape:o.shape,duration:800,easing:_ad.backOut,color:{start:_fb,end:end}});a.anim.play();}else{if(o.element=="spider_circle"){var _fc,_fd,_fe=1.5;if(o.type=="onmouseover"){_fc=m.identity;_fd=_fe;var _ff={type:"rect"};_ff.x=o.cx;_ff.y=o.cy;_ff.width=_ff.height=1;var lt=_a3.coords(this.chart.node,true);_ff.x+=lt.x;_ff.y+=lt.y;_ff.x=Math.round(_ff.x);_ff.y=Math.round(_ff.y);_ff.width=Math.ceil(_ff.width);_ff.height=Math.ceil(_ff.height);this.aroundRect=_ff;var _100=["after","before"];dc.doIfLoaded("dijit/Tooltip",dojo.hitch(this,function(_101){_101.show(o.tdata.sname+"<br/>"+o.tdata.key+"<br/>"+o.tdata.data,this.aroundRect,_100);}));}else{_fc=m.scaleAt(_fe,o.cx,o.cy);_fd=1/_fe;dc.doIfLoaded("dijit/Tooltip",dojo.hitch(this,function(_102){this.aroundRect&&_102.hide(this.aroundRect);}));}var cs=o.shape.getShape(),_fc=m.scaleAt(_fe,cs.cx,cs.cy),_103={shape:o.shape,duration:200,easing:_ad.backOut,transform:[{name:"scaleAt",start:[1,cs.cx,cs.cy],end:[_fd,cs.cx,cs.cy]},_fc]};a.anim=_ac.animateTransform(_103);a.anim.play();}else{if(o.element=="spider_plot"){if(o.type=="onmouseover"&&!has("ie")){o.shape.moveToFront();}}}}},_getBoundary:function(_104){var xmax=_104[0].x,xmin=_104[0].x,ymax=_104[0].y,ymin=_104[0].y;for(var i=0;i<_104.length;i++){var _105=_104[i];xmax=Math.max(_105.x,xmax);ymax=Math.max(_105.y,ymax);xmin=Math.min(_105.x,xmin);ymin=Math.min(_105.y,ymin);}return {x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin};},_drawArrow:function(s,_106,end,_107){var len=Math.sqrt(Math.pow(end.x-_106.x,2)+Math.pow(end.y-_106.y,2)),sin=(end.y-_106.y)/len,cos=(end.x-_106.x)/len,_108={x:end.x+(len/3)*(-sin),y:end.y+(len/3)*cos},_109={x:end.x+(len/3)*sin,y:end.y+(len/3)*(-cos)};s.createPolyline([_106,_108,_109]).setFill(_107.color).setStroke(_107);},_buildPoints:function(_10a,_10b,_10c,_10d,_10e,_10f){for(var i=0;i<_10b;i++){var end=_10e+2*Math.PI*i/_10b;_10a.push(this._getCoordinate(_10c,_10d,end));}if(_10f){_10a.push(this._getCoordinate(_10c,_10d,_10e+2*Math.PI));}},_getCoordinate:function(_110,_111,_112){return {x:_110.cx+_111*Math.cos(_112),y:_110.cy+_111*Math.sin(_112)};},_getObjectLength:function(obj){var _113=0;if(_a1.isObject(obj)){for(var key in obj){_113++;}}return _113;},_getLabel:function(_114){return dc.getLabel(_114,this.opt.fixed,this.opt.precision);}});function _fa(_115){var a=new _aa.Color(_115),x=a.toHsl();if(x.s==0){x.l=x.l<50?100:0;}else{x.s=100;if(x.l<50){x.l=75;}else{if(x.l>75){x.l=50;}else{x.l=x.l-50>75-x.l?50:75;}}}var _115=_aa.fromHsl(x);_115.a=0.7;return _115;};return _af;});},"dojox/charting/Theme":function(){define("dojox/charting/Theme",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/Color","dojox/color/_base","dojox/color/Palette","dojox/lang/utils","dojox/gfx/gradutils"],function(lang,arr,_116,_117,_118,_119,dlu,dgg){var _11a=_116("dojox.charting.Theme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(_11b){_11b=_11b||{};var def=_11a.defaultTheme;arr.forEach(["chart","plotarea","axis","series","marker","indicator"],function(name){this[name]=lang.delegate(def[name],_11b[name]);},this);if(_11b.seriesThemes&&_11b.seriesThemes.length){this.colors=null;this.seriesThemes=_11b.seriesThemes.slice(0);}else{this.seriesThemes=null;this.colors=(_11b.colors||_11a.defaultColors).slice(0);}this.markerThemes=null;if(_11b.markerThemes&&_11b.markerThemes.length){this.markerThemes=_11b.markerThemes.slice(0);}this.markers=_11b.markers?lang.clone(_11b.markers):lang.delegate(_11a.defaultMarkers);this.noGradConv=_11b.noGradConv;this.noRadialConv=_11b.noRadialConv;if(_11b.reverseFills){this.reverseFills();}this._current=0;this._buildMarkerArray();},clone:function(){var _11c=new _11a({chart:this.chart,plotarea:this.plotarea,axis:this.axis,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});arr.forEach(["clone","clear","next","skip","addMixin","post","getTick"],function(name){if(this.hasOwnProperty(name)){_11c[name]=this[name];}},this);return _11c;},clear:function(){this._current=0;},next:function(_11d,_11e,_11f){var _120=dlu.merge,_121,_122;if(this.colors){_121=lang.delegate(this.series);_122=lang.delegate(this.marker);var _123=new _117(this.colors[this._current%this.colors.length]),old;if(_121.stroke&&_121.stroke.color){_121.stroke=lang.delegate(_121.stroke);old=new _117(_121.stroke.color);_121.stroke.color=new _117(_123);_121.stroke.color.a=old.a;}else{_121.stroke={color:_123};}if(_122.stroke&&_122.stroke.color){_122.stroke=lang.delegate(_122.stroke);old=new _117(_122.stroke.color);_122.stroke.color=new _117(_123);_122.stroke.color.a=old.a;}else{_122.stroke={color:_123};}if(!_121.fill||_121.fill.type){_121.fill=_123;}else{old=new _117(_121.fill);_121.fill=new _117(_123);_121.fill.a=old.a;}if(!_122.fill||_122.fill.type){_122.fill=_123;}else{old=new _117(_122.fill);_122.fill=new _117(_123);_122.fill.a=old.a;}}else{_121=this.seriesThemes?_120(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series;_122=this.markerThemes?_120(this.marker,this.markerThemes[this._current%this.markerThemes.length]):_121;}var _124=_122&&_122.symbol||this._markers[this._current%this._markers.length];var _125={series:_121,marker:_122,symbol:_124};++this._current;if(_11e){_125=this.addMixin(_125,_11d,_11e);}if(_11f){_125=this.post(_125,_11d);}return _125;},skip:function(){++this._current;},addMixin:function(_126,_127,_128,_129){if(lang.isArray(_128)){arr.forEach(_128,function(m){_126=this.addMixin(_126,_127,m);},this);}else{var t={};if("color" in _128){if(_127=="line"||_127=="area"){lang.setObject("series.stroke.color",_128.color,t);lang.setObject("marker.stroke.color",_128.color,t);}else{lang.setObject("series.fill",_128.color,t);}}arr.forEach(["stroke","outline","shadow","fill","font","fontColor","labelWiring"],function(name){var _12a="marker"+name.charAt(0).toUpperCase()+name.substr(1),b=_12a in _128;if(name in _128){lang.setObject("series."+name,_128[name],t);if(!b){lang.setObject("marker."+name,_128[name],t);}}if(b){lang.setObject("marker."+name,_128[_12a],t);}});if("marker" in _128){t.symbol=_128.marker;}_126=dlu.merge(_126,t);}if(_129){_126=this.post(_126,_127);}return _126;},post:function(_12b,_12c){var fill=_12b.series.fill,t;if(!this.noGradConv&&this.shapeSpaces[fill.space]&&fill.type=="linear"){if(_12c=="bar"){t={x1:fill.y1,y1:fill.x1,x2:fill.y2,y2:fill.x2};}else{if(!this.noRadialConv&&fill.space=="shape"&&(_12c=="slice"||_12c=="circle")){t={type:"radial",cx:0,cy:0,r:100};}}if(t){return dlu.merge(_12b,{series:{fill:t}});}}return _12b;},getTick:function(name,_12d){var tick=this.axis.tick,_12e=name+"Tick",_12f=dlu.merge;if(tick){if(this.axis[_12e]){tick=_12f(tick,this.axis[_12e]);}}else{tick=this.axis[_12e];}if(_12d){if(tick){if(_12d[_12e]){tick=_12f(tick,_12d[_12e]);}}else{tick=_12d[_12e];}}return tick;},inspectObjects:function(f){arr.forEach(["chart","plotarea","axis","series","marker","indicator"],function(name){f(this[name]);},this);if(this.seriesThemes){arr.forEach(this.seriesThemes,f);}if(this.markerThemes){arr.forEach(this.markerThemes,f);}},reverseFills:function(){this.inspectObjects(function(o){if(o&&o.fill){o.fill=dgg.reverse(o.fill);}});},addMarker:function(name,_130){this.markers[name]=_130;this._buildMarkerArray();},setMarkers:function(obj){this.markers=obj;this._buildMarkerArray();},_buildMarkerArray:function(){this._markers=[];for(var p in this.markers){this._markers.push(this.markers[p]);}}});lang.mixin(_11a,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",titleGap:15,titleFont:"normal normal normal 11pt Tahoma",titleFontColor:"#333",titleOrientation:"axis"},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}},defineColors:function(_131){_131=_131||{};var l,c=[],n=_131.num||5;if(_131.colors){l=_131.colors.length;for(var i=0;i<n;i++){c.push(_131.colors[i%l]);}return c;}if(_131.hue){var s=_131.saturation||100,st=_131.low||30,end=_131.high||90;l=(end+st)/2;return _118.Palette.generate(_118.fromHsv(_131.hue,s,l),"monochromatic").colors;}if(_131.generator){return _118.Palette.generate(_131.base,_131.generator).colors;}return c;},generateGradient:function(_132,_133,_134){var fill=lang.delegate(_132);fill.colors=[{offset:0,color:_133},{offset:1,color:_134}];return fill;},generateHslColor:function(_135,_136){_135=new _117(_135);var hsl=_135.toHsl(),_137=_118.fromHsl(hsl.h,hsl.s,_136);_137.a=_135.a;return _137;},generateHslGradient:function(_138,_139,_13a,_13b){_138=new _117(_138);var hsl=_138.toHsl(),_13c=_118.fromHsl(hsl.h,hsl.s,_13a),_13d=_118.fromHsl(hsl.h,hsl.s,_13b);_13c.a=_13d.a=_138.a;return _11a.generateGradient(_139,_13c,_13d);}});return _11a;});},"dojox/charting/axis2d/Invisible":function(){define("dojox/charting/axis2d/Invisible",["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/gfx","dojox/lang/utils","dojox/lang/functional","dojo/string"],function(lang,_13e,Base,lin,g,du,df,_13f){var _140=du.merge,_141=4,_142=45;return _13e("dojox.charting.axis2d.Invisible",Base,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null},constructor:function(_143,_144){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_144);du.updateWithPattern(this.opt,_144,this.optionalParams);},dependOnData:function(){return !("min" in this.opt)||!("max" in this.opt);},clear:function(){delete this.scaler;delete this.ticks;this.dirty=true;return this;},initialized:function(){return "scaler" in this&&!(this.dirty&&this.dependOnData());},setWindow:function(_145,_146){this.scale=_145;this.offset=_146;return this.clear();},getWindowScale:function(){return "scale" in this?this.scale:1;},getWindowOffset:function(){return "offset" in this?this.offset:0;},_groupLabelWidth:function(_147,font,_148){if(!_147.length){return 0;}if(lang.isObject(_147[0])){_147=df.map(_147,function(_149){return _149.text;});}if(_148){_147=df.map(_147,function(_14a){return lang.trim(_14a).length==0?"":_14a.substring(0,_148)+this.trailingSymbol;},this);}var s=_147.join("<br>");return g._base._getTextBox(s,{font:font}).w||0;},calculate:function(min,max,span,_14b){if(this.initialized()){return this;}var o=this.opt;this.labels="labels" in o?o.labels:_14b;this.scaler=lin.buildScaler(min,max,span,o);var tsb=this.scaler.bounds;if("scale" in this){o.from=tsb.lower+this.offset;o.to=(tsb.upper-tsb.lower)/this.scale+o.from;if(!isFinite(o.from)||isNaN(o.from)||!isFinite(o.to)||isNaN(o.to)||o.to-o.from>=tsb.upper-tsb.lower){delete o.from;delete o.to;delete this.scale;delete this.offset;}else{if(o.from<tsb.lower){o.to+=tsb.lower-o.from;o.from=tsb.lower;}else{if(o.to>tsb.upper){o.from+=tsb.upper-o.to;o.to=tsb.upper;}}this.offset=o.from-tsb.lower;}this.scaler=lin.buildScaler(min,max,span,o);tsb=this.scaler.bounds;if(this.scale==1&&this.offset==0){delete this.scale;delete this.offset;}}var ta=this.chart.theme.axis,_14c=0,_14d=o.rotation%360,_14e=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),size=_14e?g.normalizedLength(g.splitFontString(_14e).size):0,cosr=Math.abs(Math.cos(_14d*Math.PI/180)),sinr=Math.abs(Math.sin(_14d*Math.PI/180));if(_14d<0){_14d+=360;}if(size){if(this.vertical?_14d!=0&&_14d!=180:_14d!=90&&_14d!=270){if(this.labels){_14c=this._groupLabelWidth(this.labels,_14e,o.maxLabelCharCount);}else{var _14f=Math.ceil(Math.log(Math.max(Math.abs(tsb.from),Math.abs(tsb.to)))/Math.LN10),t=[];if(tsb.from<0||tsb.to<0){t.push("-");}t.push(_13f.rep("9",_14f));var _150=Math.floor(Math.log(tsb.to-tsb.from)/Math.LN10);if(_150>0){t.push(".");t.push(_13f.rep("9",_150));}_14c=g._base._getTextBox(t.join(""),{font:_14e}).w;}_14c=o.maxLabelSize?Math.min(o.maxLabelSize,_14c):_14c;}else{_14c=size;}switch(_14d){case 0:case 90:case 180:case 270:break;default:var gap1=Math.sqrt(_14c*_14c+size*size),gap2=this.vertical?size*cosr+_14c*sinr:_14c*cosr+size*sinr;_14c=Math.min(gap1,gap2);break;}}this.scaler.minMinorStep=_14c+_141;this.ticks=lin.buildTicks(this.scaler,o);return this;},getScaler:function(){return this.scaler;},getTicks:function(){return this.ticks;}});});},"esri/layers/MapImageLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/layer,esri/geometry"],function(_151,dojo,_152){dojo.provide("esri.layers.MapImageLayer");dojo.require("esri.utils");dojo.require("esri.layers.layer");dojo.require("esri.geometry");dojo.declare("esri.layers.MapImageLayer",[esri.layers.Layer],{"-chains-":{constructor:"manual"},constructor:function(_153){this.inherited(arguments,[null,_153]);this._mapImages=[];var _154=dojo.hitch;this._panStart=_154(this,this._panStart);this._pan=_154(this,this._pan);this._extentChange=_154(this,this._extentChange);this._zoom=_154(this,this._zoom);this._zoomStart=_154(this,this._zoomStart);this._scale=_154(this,this._scale);this._resize=_154(this,this._resize);this.loaded=true;this.onLoad(this);},opacity:1,_transform:esri._getDOMAccessor("transform"),addImage:function(_155){var _156=this._mapImages.push(_155);_156=_156-1;_155._idx=_156;_155._layer=this;if(this._div){this._createImage(_155,_156);}},removeImage:function(_157){if(_157){var idx=_157._idx,_158=this._mapImages;if(_158[idx]===_157){delete _158[idx];var node=_157._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;if(node.parentNode){node.parentNode.removeChild(node);dojo.destroy(node);}}_157._node=_157._idx=_157._layer=null;}}},removeAllImages:function(){var _159=this._mapImages,i,len=_159.length;for(i=0;i<len;i++){var _15a=_159[i];if(_15a){this.removeImage(_15a);}}this._mapImages=[];},getImages:function(){var _15b=this._mapImages,_15c=[],i,len=_15b.length;for(i=0;i<len;i++){if(_15b[i]){_15c.push(_15b[i]);}}return _15c;},setOpacity:function(_15d){if(this.opacity!=_15d){this.onOpacityChange(this.opacity=_15d);}},onOpacityChange:function(_15e){var div=this._div,i,len,_15f;if(div){if(!dojo.isIE||dojo.isIE>8){dojo.style(div,"opacity",_15e);}else{_15f=div.childNodes;len=_15f.length;for(i=0;i<len;i++){dojo.style(_15f[i],"opacity",_15e);}}}},_createImage:function(_160,idx){var node=dojo.create("img");dojo.style(node,{position:"absolute"});if(dojo.isIE<=8){dojo.style(node,"opacity",this.opacity);}if(_160.rotation){var _161="rotate("+(360-_160.rotation)+"deg)";if(dojo.isIE<9){}else{dojo.style(node,this._transform,_161);dojo.style(node,"transform",_161);}}_160._node=node;node.e_idx=idx;node.e_layer=this;node.e_load=dojo.connect(node,"onload",esri.layers.MapImageLayer.prototype._imageLoaded);node.e_error=dojo.connect(node,"onerror",esri.layers.MapImageLayer.prototype._imageError);node.e_abort=dojo.connect(node,"onabort",esri.layers.MapImageLayer.prototype._imageError);node.src=_160.href;},_imageLoaded:function(evt,img){var node=img||evt.target||evt.currentTarget,self=node.e_layer,_162=self._mapImages[node.e_idx];if(self._map&&(self._map.__zooming||self._map.__panning)){self._standby.push(node);return;}self._clearEvents(node);if(!_162||_162._node!==node){return;}if(self._map){self._attach(_162);}},_imageError:function(evt){var node=evt.target||evt.currentTarget,self=node.e_layer,_163=self._mapImages[node.e_idx];self._clearEvents(node);if(_163){_163._node=null;}},_clearEvents:function(node){var _164=dojo.disconnect;_164(node.e_load);_164(node.e_error);_164(node.e_abort);node.e_load=node.e_error=node.e_abort=node.e_layer=null;},_attach:function(_165){var _166=_165.extent,_167,_168=_166.spatialReference,_169=this._sr,div=this._div,node=_165._node,_16a=new esri.geometry.Point({x:_166.xmin,y:_166.ymin}),_16b=new esri.geometry.Point({x:_166.xmax,y:_166.ymax});if(_169.wkid){_167=(_169._isWebMercator()&&_168._isWebMercator())||(_169.wkid===_168.wkid);}else{if(_169.wkt){_167=(_169.wkt===_168.wkt);}}if(!_167){if(_169._isWebMercator()&&_168.wkid===4326){_16a=esri.geometry.geographicToWebMercator(_16a);_16b=esri.geometry.geographicToWebMercator(_16b);}else{if(_168._isWebMercator()&&_169.wkid===4326){_16a=esri.geometry.webMercatorToGeographic(_16a);_16b=esri.geometry.webMercatorToGeographic(_16b);}}}node.e_bl=_16a;node.e_tr=_16b;if(_165.visible){this._setPos(node,div._left,div._top);(this._active||div).appendChild(node);}},_setPos:function(node,_16c,_16d){var _16e=node.e_bl,_16f=node.e_tr,map=this._map;_16e=map.toScreen(_16e);_16f=map.toScreen(_16f);var left=_16e.x-_16c,top=_16f.y-_16d,_170=Math.abs(_16f.x-_16e.x),_171=Math.abs(_16e.y-_16f.y),css={width:_170+"px",height:_171+"px"},_172=this._mapImages[node.e_idx];if(map.navigationMode==="css-transforms"){css[esri._css.names.transform]=esri._css.translate(left,top)+(_172.rotation?(" "+esri._css.rotate(360-_172.rotation)):"");}else{css.left=left+"px";css.top=top+"px";}dojo.style(node,css);node.e_l=left;node.e_t=top;node.e_w=_170;node.e_h=_171;},_setMap:function(map,_173){this._map=map;this._sr=map.spatialReference;var div=this._div=dojo.create("div",null,_173),_174=esri._css.names,css={position:"absolute"},vd=map.__visibleDelta;if(!dojo.isIE||dojo.isIE>8){css.opacity=this.opacity;}if(map.navigationMode==="css-transforms"){css[_174.transform]=esri._css.translate(vd.x,vd.y);dojo.style(div,css);div._left=vd.x;div._top=vd.y;css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};this._active=dojo.create("div",null,div);dojo.style(this._active,css);this._passive=dojo.create("div",null,div);dojo.style(this._passive,css);}else{div._left=0;div._top=0;dojo.style(div,css);}this._standby=[];var _175=this._mapImages,i,len=_175.length;for(i=0;i<len;i++){var _176=_175[i],node=_176._node;if(!node){this._createImage(_176,_176._idx);}}this.onVisibilityChange(this.visible);return div;},_unsetMap:function(map,_177){this._disconnect();var div=this._div;if(div){var _178=this._mapImages,i,len=_178.length;for(i=0;i<len;i++){var _179=_178[i];if(_179){var node=_179._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;}_179._node=null;}}_177.removeChild(div);dojo.destroy(div);}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;},onVisibilityChange:function(_17a){var div=this._div;if(div){if(_17a){this._redraw();this._connect(this._map);esri.show(div);}else{this._disconnect();esri.hide(div);}}},_connect:function(map){if(!this._connections){var _17b=dojo.connect,_17c=(map.navigationMode==="css-transforms");this._connections=[_17b(map,"onPanStart",this._panStart),_17b(map,"onPan",this._pan),_17b(map,"onExtentChange",this._extentChange),_17c&&_17b(map,"onZoomStart",this._zoomStart),_17c?_17b(map,"onScale",this._scale):_17b(map,"onZoom",this._zoom),_17c&&_17b(map,"onResize",this._resize)];}},_disconnect:function(){if(this._connections){dojo.forEach(this._connections,dojo.disconnect);this._connections=null;}},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top;},_pan:function(_17d,_17e){var div=this._div;div._left=this._panL+_17e.x;div._top=this._panT+_17e.y;if(this._map.navigationMode==="css-transforms"){dojo.style(div,esri._css.names.transform,esri._css.translate(div._left,div._top));}else{dojo.style(div,{left:div._left+"px",top:div._top+"px"});}},_extentChange:function(_17f,_180,_181){if(_181){this._redraw(this._map.navigationMode==="css-transforms");}else{if(_180){this._pan(_17f,_180);}}var i,_182=this._standby;if(_182&&_182.length){for(i=_182.length-1;i>=0;i--){this._imageLoaded(null,_182[i]);_182.splice(i,1);}}},_redraw:function(_183){if(_183){var _184=this._passive,_185=esri._css.names;dojo.style(_184,_185.transition,"none");this._moveImages(_184,this._active);dojo.style(_184,_185.transform,"none");}var div=this._active||this._div,_186=this._div._left,_187=this._div._top,i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];this._setPos(node,_186,_187);}},_zoom:function(_188,_189,_18a){var div=this._div,_18b=div._left,_18c=div._top,i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];var _18d=node.e_w*_189,_18e=node.e_h*_189,_18f=(_18a.x-_18b-node.e_l)*(_18d-node.e_w)/node.e_w,_190=(_18a.y-_18c-node.e_t)*(_18e-node.e_h)/node.e_h;_18f=isNaN(_18f)?0:_18f;_190=isNaN(_190)?0:_190;dojo.style(node,{left:(node.e_l-_18f)+"px",top:(node.e_t-_190)+"px",width:_18d+"px",height:_18e+"px"});}},_zoomStart:function(){this._moveImages(this._active,this._passive);},_moveImages:function(_191,dest){var _192=_191.childNodes,i,len=_192.length;if(len>0){for(i=len-1;i>=0;i--){dest.appendChild(_192[i]);}}},_scale:function(mtx,_193){var css={},_194=esri._css.names,_195=this._passive;dojo.style(_195,_194.transition,_193?"none":(_194.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease"));css[_194.transform]=esri._css.matrix(mtx);dojo.style(_195,_194.transform,esri._css.matrix(mtx));},_resize:function(_196,_197,_198){dojo.style(this._active,{width:_197+"px",height:_198+"px"});dojo.style(this._passive,{width:_197+"px",height:_198+"px"});}});dojo.extend(esri.layers.MapImage,{visible:true,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=true;var node=this._node,_199=this._layer,div;if(node){div=_199&&_199._div;if(div){_199._setPos(node,div._left,div._top);(_199._active||div).appendChild(node);}esri.show(node);}}},hide:function(){if(this.visible){this.visible=false;var node=this._node;if(node){esri.hide(node);if(node.parentNode){node.parentNode.removeChild(node);}}}}});});},"dojox/charting/plot2d/common":function(){define("dojox/charting/plot2d/common",["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(lang,arr,_19a,g,df,sc){var _19b=lang.getObject("dojox.charting.plot2d.common",true);return lang.mixin(_19b,{doIfLoaded:sc.doIfLoaded,makeStroke:function(_19c){if(!_19c){return _19c;}if(typeof _19c=="string"||_19c instanceof _19a){_19c={color:_19c};}return g.makeParameters(g.defaultStroke,_19c);},augmentColor:function(_19d,_19e){var t=new _19a(_19d),c=new _19a(_19e);c.a=t.a;return c;},augmentStroke:function(_19f,_1a0){var s=_19b.makeStroke(_19f);if(s){s.color=_19b.augmentColor(s.color,_1a0);}return s;},augmentFill:function(fill,_1a1){var fc,c=new _19a(_1a1);if(typeof fill=="string"||fill instanceof _19a){return _19b.augmentColor(fill,_1a1);}return fill;},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(_1a2){var _1a3=lang.delegate(_19b.defaultStats);for(var i=0;i<_1a2.length;++i){var run=_1a2[i];for(var j=0;j<run.data.length;j++){if(run.data[j]!==null){if(typeof run.data[j]=="number"){var _1a4=_1a3.vmin,_1a5=_1a3.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x=i+1,y=val;if(isNaN(y)){y=0;}_1a3.hmin=Math.min(_1a3.hmin,x);_1a3.hmax=Math.max(_1a3.hmax,x);_1a3.vmin=Math.min(_1a3.vmin,y);_1a3.vmax=Math.max(_1a3.vmax,y);}});}if("ymin" in run){_1a3.vmin=Math.min(_1a4,run.ymin);}if("ymax" in run){_1a3.vmax=Math.max(_1a5,run.ymax);}}else{var _1a6=_1a3.hmin,_1a7=_1a3.hmax,_1a4=_1a3.vmin,_1a5=_1a3.vmax;if(!("xmin" in run)||!("xmax" in run)||!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x="x" in val?val.x:i+1,y=val.y;if(isNaN(x)){x=0;}if(isNaN(y)){y=0;}_1a3.hmin=Math.min(_1a3.hmin,x);_1a3.hmax=Math.max(_1a3.hmax,x);_1a3.vmin=Math.min(_1a3.vmin,y);_1a3.vmax=Math.max(_1a3.vmax,y);}});}if("xmin" in run){_1a3.hmin=Math.min(_1a6,run.xmin);}if("xmax" in run){_1a3.hmax=Math.max(_1a7,run.xmax);}if("ymin" in run){_1a3.vmin=Math.min(_1a4,run.ymin);}if("ymax" in run){_1a3.vmax=Math.max(_1a5,run.ymax);}}break;}}}return _1a3;},calculateBarSize:function(_1a8,opt,_1a9){if(!_1a9){_1a9=1;}var gap=opt.gap,size=(_1a8-2*gap)/_1a9;if("minBarSize" in opt){size=Math.max(size,opt.minBarSize);}if("maxBarSize" in opt){size=Math.min(size,opt.maxBarSize);}size=Math.max(size,1);gap=(_1a8-size*_1a9)/2;return {size:size,gap:gap};},collectStackedStats:function(_1aa){var _1ab=lang.clone(_19b.defaultStats);if(_1aa.length){_1ab.hmin=Math.min(_1ab.hmin,1);_1ab.hmax=df.foldl(_1aa,"seed, run -> Math.max(seed, run.data.length)",_1ab.hmax);for(var i=0;i<_1ab.hmax;++i){var v=_1aa[0].data[i];v=v&&(typeof v=="number"?v:v.y);if(isNaN(v)){v=0;}_1ab.vmin=Math.min(_1ab.vmin,v);for(var j=1;j<_1aa.length;++j){var t=_1aa[j].data[i];t=t&&(typeof t=="number"?t:t.y);if(isNaN(t)){t=0;}v+=t;}_1ab.vmax=Math.max(_1ab.vmax,v);}}return _1ab;},curve:function(a,_1ac){var _1ad=a.slice(0);if(_1ac=="x"){_1ad[_1ad.length]=arr[0];}var p=arr.map(_1ad,function(item,i){if(i==0){return "M"+item.x+","+item.y;}if(!isNaN(_1ac)){var dx=item.x-_1ad[i-1].x,dy=_1ad[i-1].y;return "C"+(item.x-(_1ac-1)*(dx/_1ac))+","+dy+" "+(item.x-(dx/_1ac))+","+item.y+" "+item.x+","+item.y;}else{if(_1ac=="X"||_1ac=="x"||_1ac=="S"){var p0,p1=_1ad[i-1],p2=_1ad[i],p3;var bz1x,bz1y,bz2x,bz2y;var f=1/6;if(i==1){if(_1ac=="x"){p0=_1ad[_1ad.length-2];}else{p0=p1;}f=1/3;}else{p0=_1ad[i-2];}if(i==(_1ad.length-1)){if(_1ac=="x"){p3=_1ad[1];}else{p3=p2;}f=1/3;}else{p3=_1ad[i+1];}var p1p2=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));var p0p2=Math.sqrt((p2.x-p0.x)*(p2.x-p0.x)+(p2.y-p0.y)*(p2.y-p0.y));var p1p3=Math.sqrt((p3.x-p1.x)*(p3.x-p1.x)+(p3.y-p1.y)*(p3.y-p1.y));var _1ae=p0p2*f;var _1af=p1p3*f;if(_1ae>p1p2/2&&_1af>p1p2/2){_1ae=p1p2/2;_1af=p1p2/2;}else{if(_1ae>p1p2/2){_1ae=p1p2/2;_1af=p1p2/2*p1p3/p0p2;}else{if(_1af>p1p2/2){_1af=p1p2/2;_1ae=p1p2/2*p0p2/p1p3;}}}if(_1ac=="S"){if(p0==p1){_1ae=0;}if(p2==p3){_1af=0;}}bz1x=p1.x+_1ae*(p2.x-p0.x)/p0p2;bz1y=p1.y+_1ae*(p2.y-p0.y)/p0p2;bz2x=p2.x-_1af*(p3.x-p1.x)/p1p3;bz2y=p2.y-_1af*(p3.y-p1.y)/p1p3;}}return "C"+(bz1x+","+bz1y+" "+bz2x+","+bz2y+" "+p2.x+","+p2.y);});return p.join(" ");},getLabel:function(_1b0,_1b1,_1b2){return sc.doIfLoaded("dojo/number",function(_1b3){return (_1b1?_1b3.format(_1b0,{places:_1b2}):_1b3.format(_1b0))||"";},function(){return _1b1?_1b0.toFixed(_1b2):_1b0.toString();});}});});},"dojox/gfx/shape":function(){define("dojox/gfx/shape",["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/window","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(g,lang,_1b4,win,has,_1b5,arr,_1b6,_1b7,_1b8){var _1b9=g.shape={};var _1ba={};var _1bb={};_1b9.register=function(_1bc){var t=_1bc.declaredClass.split(".").pop();var i=t in _1ba?++_1ba[t]:((_1ba[t]=0));var uid=t+i;_1bb[uid]=_1bc;return uid;};_1b9.byId=function(id){return _1bb[id];};_1b9.dispose=function(_1bd){delete _1bb[_1bd.getUID()];};_1b4("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;var uid=_1b9.register(this);this.getUID=function(){return uid;};},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix(),gm=_1b8;return [gm.multiplyPoint(m,b.x,b.y),gm.multiplyPoint(m,b.x+b.width,b.y),gm.multiplyPoint(m,b.x+b.width,b.y+b.height),gm.multiplyPoint(m,b.x,b.y+b.height)];},getEventSource:function(){return this.rawNode;},setShape:function(_1be){this.shape=g.makeParameters(this.shape,_1be);this.bbox=null;return this;},setFill:function(fill){if(!fill){this.fillStyle=null;return this;}var f=null;if(typeof (fill)=="object"&&"type" in fill){switch(fill.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,fill);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,fill);break;case "pattern":f=g.makeParameters(g.defaultPattern,fill);break;}}else{f=g.normalizeColor(fill);}this.fillStyle=f;return this;},setStroke:function(_1bf){if(!_1bf){this.strokeStyle=null;return this;}if(typeof _1bf=="string"||lang.isArray(_1bf)||_1bf instanceof _1b7){_1bf={color:_1bf};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_1bf);s.color=g.normalizeColor(s.color);return this;},setTransform:function(_1c0){this.matrix=_1b8.clone(_1c0?_1b8.normalize(_1c0):_1b8.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_1c1){return _1c1?this.setTransform([this.matrix,_1c1]):this;},applyLeftTransform:function(_1c2){return _1c2?this.setTransform([_1c2,this.matrix]):this;},applyTransform:function(_1c3){return _1c3?this.setTransform([this.matrix,_1c3]):this;},removeShape:function(_1c4){if(this.parent){this.parent.remove(this,_1c4);}return this;},_setParent:function(_1c5,_1c6){this.parent=_1c5;return this._updateParentMatrix(_1c6);},_updateParentMatrix:function(_1c7){this.parentMatrix=_1c7?_1b8.clone(_1c7):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=_1b8.multiply(p.matrix,m);}p=p.parent;}return m;}});_1b9._eventsProcessing={connect:function(name,_1c8,_1c9){return _1b5.connect(this.getEventSource(),name,_1b9.fixCallback(this,g.fixTarget,_1c8,_1c9));},disconnect:function(_1ca){_1b5.disconnect(_1ca);}};_1b9.fixCallback=function(_1cb,_1cc,_1cd,_1ce){if(!_1ce){_1ce=_1cd;_1cd=null;}if(lang.isString(_1ce)){_1cd=_1cd||win.global;if(!_1cd[_1ce]){throw (["dojox.gfx.shape.fixCallback: scope[\"",_1ce,"\"] is null (scope=\"",_1cd,"\")"].join(""));}return function(e){return _1cc(e,_1cb)?_1cd[_1ce].apply(_1cd,arguments||[]):undefined;};}return !_1cd?function(e){return _1cc(e,_1cb)?_1ce.apply(_1cd,arguments):undefined;}:function(e){return _1cc(e,_1cb)?_1ce.apply(_1cd,arguments||[]):undefined;};};lang.extend(_1b9.Shape,_1b9._eventsProcessing);_1b9.Container={_init:function(){this.children=[];},openBatch:function(){},closeBatch:function(){},add:function(_1cf){var _1d0=_1cf.getParent();if(_1d0){_1d0.remove(_1cf,true);}this.children.push(_1cf);return _1cf._setParent(this,this._getRealMatrix());},remove:function(_1d1,_1d2){for(var i=0;i<this.children.length;++i){if(this.children[i]==_1d1){if(_1d2){}else{_1d1.parent=null;_1d1.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){var _1d3;for(var i=0;i<this.children.length;++i){_1d3=this.children[i];_1d3.parent=null;_1d3.parentMatrix=null;}this.children=[];return this;},_moveChildToFront:function(_1d4){for(var i=0;i<this.children.length;++i){if(this.children[i]==_1d4){this.children.splice(i,1);this.children.push(_1d4);break;}}return this;},_moveChildToBack:function(_1d5){for(var i=0;i<this.children.length;++i){if(this.children[i]==_1d5){this.children.splice(i,1);this.children.unshift(_1d5);break;}}return this;}};_1b4("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){arr.forEach(this._nodes,_1b6.destroy);this._nodes=[];arr.forEach(this._events,_1b5.disconnect);this._events=[];this.rawNode=null;if(has("ie")){while(this._parent.lastChild){_1b6.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_1d6){},whenLoaded:function(_1d7,_1d8){var f=lang.hitch(_1d7,_1d8);if(this.isLoaded){f(this);}else{var h=_1b5.connect(this,"onLoad",function(_1d9){_1b5.disconnect(h);f(_1d9);});}}});lang.extend(_1b9.Surface,_1b9._eventsProcessing);_1b4("dojox.gfx.Point",null,{});_1b4("dojox.gfx.Rectangle",null,{});_1b4("dojox.gfx.shape.Rect",_1b9.Shape,{constructor:function(_1da){this.shape=g.getDefault("Rect");this.rawNode=_1da;},getBoundingBox:function(){return this.shape;}});_1b4("dojox.gfx.shape.Ellipse",_1b9.Shape,{constructor:function(_1db){this.shape=g.getDefault("Ellipse");this.rawNode=_1db;},getBoundingBox:function(){if(!this.bbox){var _1dc=this.shape;this.bbox={x:_1dc.cx-_1dc.rx,y:_1dc.cy-_1dc.ry,width:2*_1dc.rx,height:2*_1dc.ry};}return this.bbox;}});_1b4("dojox.gfx.shape.Circle",_1b9.Shape,{constructor:function(_1dd){this.shape=g.getDefault("Circle");this.rawNode=_1dd;},getBoundingBox:function(){if(!this.bbox){var _1de=this.shape;this.bbox={x:_1de.cx-_1de.r,y:_1de.cy-_1de.r,width:2*_1de.r,height:2*_1de.r};}return this.bbox;}});_1b4("dojox.gfx.shape.Line",_1b9.Shape,{constructor:function(_1df){this.shape=g.getDefault("Line");this.rawNode=_1df;},getBoundingBox:function(){if(!this.bbox){var _1e0=this.shape;this.bbox={x:Math.min(_1e0.x1,_1e0.x2),y:Math.min(_1e0.y1,_1e0.y2),width:Math.abs(_1e0.x2-_1e0.x1),height:Math.abs(_1e0.y2-_1e0.y1)};}return this.bbox;}});_1b4("dojox.gfx.shape.Polyline",_1b9.Shape,{constructor:function(_1e1){this.shape=g.getDefault("Polyline");this.rawNode=_1e1;},setShape:function(_1e2,_1e3){if(_1e2&&_1e2 instanceof Array){this.inherited(arguments,[{points:_1e2}]);if(_1e3&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.inherited(arguments,[_1e2]);}return this;},_normalizePoints:function(){var p=this.shape.points,l=p&&p.length;if(l&&typeof p[0]=="number"){var _1e4=[];for(var i=0;i<l;i+=2){_1e4.push({x:p[i],y:p[i+1]});}this.shape.points=_1e4;}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var bbox={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(bbox.l>t.x){bbox.l=t.x;}if(bbox.r<t.x){bbox.r=t.x;}if(bbox.t>t.y){bbox.t=t.y;}if(bbox.b<t.y){bbox.b=t.y;}}this.bbox={x:bbox.l,y:bbox.t,width:bbox.r-bbox.l,height:bbox.b-bbox.t};}return this.bbox;}});_1b4("dojox.gfx.shape.Image",_1b9.Shape,{constructor:function(_1e5){this.shape=g.getDefault("Image");this.rawNode=_1e5;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});_1b4("dojox.gfx.shape.Text",_1b9.Shape,{constructor:function(_1e6){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=_1e6;},getFont:function(){return this.fontStyle;},setFont:function(_1e7){this.fontStyle=typeof _1e7=="string"?g.splitFontString(_1e7):g.makeParameters(g.defaultFont,_1e7);this._setFont();return this;}});_1b9.Creator={createShape:function(_1e8){switch(_1e8.type){case g.defaultPath.type:return this.createPath(_1e8);case g.defaultRect.type:return this.createRect(_1e8);case g.defaultCircle.type:return this.createCircle(_1e8);case g.defaultEllipse.type:return this.createEllipse(_1e8);case g.defaultLine.type:return this.createLine(_1e8);case g.defaultPolyline.type:return this.createPolyline(_1e8);case g.defaultImage.type:return this.createImage(_1e8);case g.defaultText.type:return this.createText(_1e8);case g.defaultTextPath.type:return this.createTextPath(_1e8);}return null;},createGroup:function(){return this.createObject(g.Group);},createRect:function(rect){return this.createObject(g.Rect,rect);},createEllipse:function(_1e9){return this.createObject(g.Ellipse,_1e9);},createCircle:function(_1ea){return this.createObject(g.Circle,_1ea);},createLine:function(line){return this.createObject(g.Line,line);},createPolyline:function(_1eb){return this.createObject(g.Polyline,_1eb);},createImage:function(_1ec){return this.createObject(g.Image,_1ec);},createText:function(text){return this.createObject(g.Text,text);},createPath:function(path){return this.createObject(g.Path,path);},createTextPath:function(text){return this.createObject(g.TextPath,{}).setText(text);},createObject:function(_1ed,_1ee){return null;}};return _1b9;});},"dojox/charting/action2d/Tooltip":function(){define("dojox/charting/action2d/Tooltip",["dojo/_base/kernel","dijit/Tooltip","dojo/_base/lang","dojo/_base/html","dojo/_base/declare","./PlotAction","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/functional/scan","dojox/lang/functional/fold"],function(dojo,_1ef,lang,html,_1f0,_1f1,m,df,dfs,dff){var _1f2=function(o){var t=o.run&&o.run.data&&o.run.data[o.index];if(t&&typeof t!="number"&&(t.tooltip||t.text)){return t.tooltip||t.text;}if(o.element=="candlestick"){return "<table cellpadding=\"1\" cellspacing=\"0\" border=\"0\" style=\"font-size:0.9em;\">"+"<tr><td>Open:</td><td align=\"right\"><strong>"+o.data.open+"</strong></td></tr>"+"<tr><td>High:</td><td align=\"right\"><strong>"+o.data.high+"</strong></td></tr>"+"<tr><td>Low:</td><td align=\"right\"><strong>"+o.data.low+"</strong></td></tr>"+"<tr><td>Close:</td><td align=\"right\"><strong>"+o.data.close+"</strong></td></tr>"+(o.data.mid!==undefined?"<tr><td>Mid:</td><td align=\"right\"><strong>"+o.data.mid+"</strong></td></tr>":"")+"</table>";}return o.element=="bar"?o.x:o.y;};var pi4=Math.PI/4,pi2=Math.PI/2;return _1f0("dojox.charting.action2d.Tooltip",_1f1,{defaultParams:{text:_1f2},optionalParams:{},constructor:function(_1f3,plot,_1f4){this.text=_1f4&&_1f4.text?_1f4.text:_1f2;this.connect();},process:function(o){if(o.type==="onplotreset"||o.type==="onmouseout"){_1ef.hide(this.aroundRect);this.aroundRect=null;if(o.type==="onplotreset"){delete this.angles;}return;}if(!o.shape||o.type!=="onmouseover"){return;}var _1f5={type:"rect"},_1f6=["after","before"];switch(o.element){case "marker":_1f5.x=o.cx;_1f5.y=o.cy;_1f5.w=_1f5.h=1;break;case "circle":_1f5.x=o.cx-o.cr;_1f5.y=o.cy-o.cr;_1f5.w=_1f5.h=2*o.cr;break;case "column":_1f6=["above","below"];case "bar":_1f5=lang.clone(o.shape.getShape());_1f5.w=_1f5.width;_1f5.h=_1f5.height;break;case "candlestick":_1f5.x=o.x;_1f5.y=o.y;_1f5.w=o.width;_1f5.h=o.height;break;default:if(!this.angles){if(typeof o.run.data[0]=="number"){this.angles=df.map(df.scanl(o.run.data,"+",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"+",0));}else{this.angles=df.map(df.scanl(o.run.data,"a + b.y",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"a + b.y",0));}}var _1f7=m._degToRad(o.plot.opt.startAngle),_1f8=(this.angles[o.index]+this.angles[o.index+1])/2+_1f7;_1f5.x=o.cx+o.cr*Math.cos(_1f8);_1f5.y=o.cy+o.cr*Math.sin(_1f8);_1f5.w=_1f5.h=1;if(_1f8<pi4){}else{if(_1f8<pi2+pi4){_1f6=["below","above"];}else{if(_1f8<Math.PI+pi4){_1f6=["before","after"];}else{if(_1f8<2*Math.PI-pi4){_1f6=["above","below"];}}}}break;}var lt=this.chart.getCoords();_1f5.x+=lt.x;_1f5.y+=lt.y;_1f5.x=Math.round(_1f5.x);_1f5.y=Math.round(_1f5.y);_1f5.w=Math.ceil(_1f5.w);_1f5.h=Math.ceil(_1f5.h);this.aroundRect=_1f5;var _1f9=this.text(o);if(this.chart.getTextDir){var _1fa=(html.style(this.chart.node,"direction")=="rtl");var _1fb=(this.chart.getTextDir(_1f9)=="rtl");}if(_1f9){if(_1fb&&!_1fa){_1ef.show("<span dir = 'rtl'>"+_1f9+"</span>",this.aroundRect,_1f6);}else{if(!_1fb&&_1fa){_1ef.show("<span dir = 'ltr'>"+_1f9+"</span>",this.aroundRect,_1f6);}else{_1ef.show(_1f9,this.aroundRect,_1f6);}}}}});});},"dojox/charting/plot2d/Grid":function(){define("dojox/charting/plot2d/Grid",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","../Element","./common","dojox/lang/utils","dojox/gfx/fx"],function(lang,_1fc,hub,arr,_1fd,dc,du,fx){return _1fc("dojox.charting.plot2d.Grid",_1fd,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:true,hMinorLines:false,vMajorLines:true,vMinorLines:false,hStripes:"none",vStripes:"none",animate:null,enableCache:false},optionalParams:{},constructor:function(_1fe,_1ff){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_1ff);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.dirty=true;this.animate=this.opt.animate;this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};if(this.opt.enableCache){this._lineFreePool=[];this._lineUsePool=[];}},clear:function(){this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},initializeScalers:function(){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},performZoom:function(dim,_200){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_201=dim.height-_200.b,_202=this._hAxis.getScaler().bounds,_203=(_202.from-_202.lower)*_202.scale,_204=this._vAxis.getScaler().bounds,_205=(_204.from-_204.lower)*_204.scale,_206=vs/this.lastWindow.vscale,_207=hs/this.lastWindow.hscale,_208=(this.lastWindow.xoffset-_203)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),_209=(_205-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),_20a=this.group,anim=fx.animateTransform(lang.delegate({shape:_20a,duration:1200,transform:[{name:"translate",start:[0,0],end:[_200.l*(1-_207),_201*(1-_206)]},{name:"scale",start:[1,1],end:[_207,_206]},{name:"original"},{name:"translate",start:[0,0],end:[_208,_209]}]},this.zoom));lang.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_203,yoffset:_205});this.zoomQueue.push(anim);hub.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},getRequiredColors:function(){return 0;},cleanGroup:function(){this.inherited(arguments);if(this.opt.enableCache){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];}},createLine:function(_20b,_20c){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_20c);_20b.add(line);}else{line=_20b.createLine(_20c);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_20d){if(this.zoom){return this.performZoom(dim,_20d);}this.dirty=this.isDirty();if(!this.dirty){return this;}this.cleanGroup();var s=this.group,ta=this.chart.theme.axis;try{var _20e=this._vAxis.getScaler(),vt=_20e.scaler.getTransformerFromModel(_20e),_20f=this._vAxis.getTicks();if(_20f!=null){if(this.opt.hMinorLines){arr.forEach(_20f.minor,function(tick){var y=dim.height-_20d.b-vt(tick.value);var _210=this.createLine(s,{x1:_20d.l,y1:y,x2:dim.width-_20d.r,y2:y}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_210,"h",_20d.l,_20d.r+_20d.l-dim.width);}},this);}if(this.opt.hMajorLines){arr.forEach(_20f.major,function(tick){var y=dim.height-_20d.b-vt(tick.value);var _211=this.createLine(s,{x1:_20d.l,y1:y,x2:dim.width-_20d.r,y2:y}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_211,"h",_20d.l,_20d.r+_20d.l-dim.width);}},this);}}}catch(e){}try{var _212=this._hAxis.getScaler(),ht=_212.scaler.getTransformerFromModel(_212),_20f=this._hAxis.getTicks();if(this!=null){if(_20f&&this.opt.vMinorLines){arr.forEach(_20f.minor,function(tick){var x=_20d.l+ht(tick.value);var _213=this.createLine(s,{x1:x,y1:_20d.t,x2:x,y2:dim.height-_20d.b}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_213,"v",dim.height-_20d.b,dim.height-_20d.b-_20d.t);}},this);}if(_20f&&this.opt.vMajorLines){arr.forEach(_20f.major,function(tick){var x=_20d.l+ht(tick.value);var _214=this.createLine(s,{x1:x,y1:_20d.t,x2:x,y2:dim.height-_20d.b}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_214,"v",dim.height-_20d.b,dim.height-_20d.b-_20d.t);}},this);}}}catch(e){}this.dirty=false;return this;},_animateGrid:function(_215,type,_216,size){var _217=type=="h"?[_216,0]:[0,_216];var _218=type=="h"?[1/size,1]:[1,1/size];fx.animateTransform(lang.delegate({shape:_215,duration:1200,transform:[{name:"translate",start:_217,end:[0,0]},{name:"scale",start:_218,end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/plot2d/Markers":function(){define("dojox/charting/plot2d/Markers",["dojo/_base/declare","./Default"],function(_219,_21a){return _219("dojox.charting.plot2d.Markers",_21a,{constructor:function(){this.opt.markers=true;}});});},"dojox/lang/functional/sequence":function(){define("dojox/lang/functional/sequence",["dojo/_base/lang","./lambda"],function(lang,df){lang.mixin(df,{repeat:function(n,f,z,o){o=o||dojo.global;f=df.lambda(f);var t=new Array(n),i=1;t[0]=z;for(;i<n;t[i]=z=f.call(o,z),++i){}return t;},until:function(pr,f,z,o){o=o||dojo.global;f=df.lambda(f);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(z),z=f.call(o,z)){}return t;}});return df;});},"dojox/lang/utils":function(){define("dojox/lang/utils",["..","dojo/_base/lang"],function(_21b,lang){var du=lang.getObject("lang.utils",true,_21b);var _21c={},opts=Object.prototype.toString;var _21d=function(o){if(o){switch(opts.call(o)){case "[object Array]":return o.slice(0);case "[object Object]":return lang.delegate(o);}}return o;};lang.mixin(du,{coerceType:function(_21e,_21f){switch(typeof _21e){case "number":return Number(eval("("+_21f+")"));case "string":return String(_21f);case "boolean":return Boolean(eval("("+_21f+")"));}return eval("("+_21f+")");},updateWithObject:function(_220,_221,conv){if(!_221){return _220;}for(var x in _220){if(x in _221&&!(x in _21c)){var t=_220[x];if(t&&typeof t=="object"){du.updateWithObject(t,_221[x],conv);}else{_220[x]=conv?du.coerceType(t,_221[x]):_21d(_221[x]);}}}return _220;},updateWithPattern:function(_222,_223,_224,conv){if(!_223||!_224){return _222;}for(var x in _224){if(x in _223&&!(x in _21c)){_222[x]=conv?du.coerceType(_224[x],_223[x]):_21d(_223[x]);}}return _222;},merge:function(_225,_226){if(_226){var _227=opts.call(_225),_228=opts.call(_226),t,i,l,m;switch(_228){case "[object Array]":if(_228==_227){t=new Array(Math.max(_225.length,_226.length));for(i=0,l=t.length;i<l;++i){t[i]=du.merge(_225[i],_226[i]);}return t;}return _226.slice(0);case "[object Object]":if(_228==_227&&_225){t=lang.delegate(_225);for(i in _226){if(i in _225){l=_225[i];m=_226[i];if(m!==l){t[i]=du.merge(l,m);}}else{t[i]=lang.clone(_226[i]);}}return t;}return lang.clone(_226);}}return _226;}});return du;});},"dojox/charting/plot2d/Columns":function(){define("dojox/charting/plot2d/Columns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_229,Base,dc,df,dfr,du,fx){var _22a=dfr.lambda("item.purgeGroup()");return _229("dojox.charting.plot2d.Columns",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_22b,_22c){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_22c);du.updateWithPattern(this.opt,_22c,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _22d=dc.collectSimpleStats(this.series);_22d.hmin-=0.5;_22d.hmax+=0.5;return _22d;},createRect:function(run,_22e,_22f){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_22f);_22e.add(rect);}else{rect=_22e.createRect(_22f);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_230){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_230);}var t=this.getSeriesStats();this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_22a);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_231,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_232=Math.max(0,this._vScaler.bounds.lower),_233=vt(_232),min=Math.max(0,Math.floor(this._hScaler.bounds.from-1)),max=Math.ceil(this._hScaler.bounds.to),_234=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_231=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var _235=t.next("column",[this.opt,run]),s=run.group,_236=new Array(run.data.length);var l=Math.min(run.data.length,max);for(var j=min;j<l;++j){var _237=run.data[j];if(_237!==null){var v=typeof _237=="number"?_237:_237.y,vv=vt(v),_238=vv-_233,h=Math.abs(_238),_239=typeof _237!="number"?t.addMixin(_235,"column",_237,true):t.post(_235,"column");if(_231>=1&&h>=0){var rect={x:_230.l+ht(j+0.5)+gap,y:dim.height-_230.b-(v>_232?vv:_233),width:_231,height:h};var _23a=this._plotFill(_239.series.fill,dim,_230);_23a=this._shapeFill(_23a,rect);var _23b=this.createRect(run,s,rect).setFill(_23a).setStroke(_239.series.stroke);run.dyn.fill=_23b.getFill();run.dyn.stroke=_23b.getStroke();if(_234){var o={element:"column",index:j,run:run,shape:_23b,x:j+0.5,y:v};this._connectEvents(o);_236[j]=o;}if(this.animate){this._animateColumn(_23b,dim.height-_230.b-_233,h);}}}}this._eventSeries[run.name]=_236;run.dirty=false;}this.dirty=false;return this;},_animateColumn:function(_23c,_23d,_23e){fx.animateTransform(lang.delegate({shape:_23c,duration:1200,transform:[{name:"translate",start:[0,_23d-(_23d/_23e)],end:[0,0]},{name:"scale",start:[1,1/_23e],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/lang/functional":function(){define("dojox/lang/functional",["./functional/lambda","./functional/array","./functional/object"],function(df){return df;});},"dojox/charting/plot2d/StackedBars":function(){define("dojox/charting/plot2d/StackedBars",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Bars","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,arr,_23f,Bars,dc,df,dfr,dfs){var _240=dfr.lambda("item.purgeGroup()");return _23f("dojox.charting.plot2d.StackedBars",Bars,{getSeriesStats:function(){var _241=dc.collectStackedStats(this.series),t;this._maxRunLength=_241.hmax;_241.hmin-=0.5;_241.hmax+=0.5;t=_241.hmin,_241.hmin=_241.vmin,_241.vmin=t;t=_241.hmax,_241.hmax=_241.vmax,_241.vmax=t;return _241;},render:function(dim,_242){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _243=run.data[j];if(_243!==null){var v=typeof _243=="number"?_243:_243.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_242);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_240);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_244,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_245=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_244=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _246=t.next("bar",[this.opt,run]),s=run.group,_247=new Array(acc.length);for(var j=0;j<acc.length;++j){var _243=run.data[j];if(_243!==null){var v=acc[j],_248=ht(v),_249=typeof _243!="number"?t.addMixin(_246,"bar",_243,true):t.post(_246,"bar");if(_248>=0&&_244>=1){var rect={x:_242.l,y:dim.height-_242.b-vt(j+1.5)+gap,width:_248,height:_244};var _24a=this._plotFill(_249.series.fill,dim,_242);_24a=this._shapeFill(_24a,rect);var _24b=s.createRect(rect).setFill(_24a).setStroke(_249.series.stroke);run.dyn.fill=_24b.getFill();run.dyn.stroke=_24b.getStroke();if(_245){var o={element:"bar",index:j,run:run,shape:_24b,x:v,y:j+1.5};this._connectEvents(o);_247[j]=o;}if(this.animate){this._animateBar(_24b,_242.l,-_248);}}}}this._eventSeries[run.name]=_247;run.dirty=false;for(var j=0;j<run.data.length;++j){var _243=run.data[j];if(_243!==null){var v=typeof _243=="number"?_243:_243.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n></div>\r\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","."],function(_24c,_24d,fx,dom,_24e,_24f,_250,lang,has,win,_251,_252,_253,_254,_255,_256,_257){var _258=_24d("dijit._MasterTooltip",[_253,_254],{duration:_251.defaultDuration,templateString:_256,postCreate:function(){win.body().appendChild(this.domNode);this.bgIframe=new _255(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_259,_25a,_25b,rtl,_25c){if(this.aroundNode&&this.aroundNode===_25a&&this.containerNode.innerHTML==_259){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_259;this.set("textDir",_25c);this.containerNode.align=rtl?"right":"left";var pos=_252.around(this.domNode,_25a,_25b&&_25b.length?_25b:_25d.defaultPosition,!rtl,lang.hitch(this,"orient"));var _25e=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_25e.y+((_25e.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_25e.x+((_25e.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}}_250.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_25a;},orient:function(node,_25f,_260,_261,_262){this.connectorNode.style.top="";var _263=_261.w-this.connectorNode.offsetWidth;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_25f+"-"+_260];this.domNode.style.width="auto";var size=_24f.getContentBox(this.domNode);var _264=Math.min((Math.max(_263,1)),size.w);var _265=_264<size.w;this.domNode.style.width=_264+"px";if(_265){this.containerNode.style.overflow="auto";var _266=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(_266>_264){_266=_266+_250.get(this.domNode,"paddingLeft")+_250.get(this.domNode,"paddingRight");this.domNode.style.width=_266+"px";}}if(_260.charAt(0)=="B"&&_25f.charAt(0)=="B"){var mb=_24f.getMarginBox(node);var _267=this.connectorNode.offsetHeight;if(mb.h>_261.h){var _268=_261.h-((_262.h+_267)>>1);this.connectorNode.style.top=_268+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_262.h/2-_267/2,0),mb.h-_267)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_263);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_269){if(this._onDeck&&this._onDeck[1]==_269){this._onDeck=null;}else{if(this.aroundNode===_269){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_24c.forEach(node.children,function(_26a){this._setAutoTextDir(_26a);},this);},_setTextDirAttr:function(_26b){this._set("textDir",typeof _26b!="undefined"?_26b:"");if(_26b=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_257.showTooltip=function(_26c,_26d,_26e,rtl,_26f){if(_26e){_26e=_24c.map(_26e,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_25d._masterTT){_257._masterTT=_25d._masterTT=new _258();}return _25d._masterTT.show(_26c,_26d,_26e,rtl,_26f);};_257.hideTooltip=function(_270){return _25d._masterTT&&_25d._masterTT.hide(_270);};var _25d=_24d("dijit.Tooltip",_253,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(_271){_24c.forEach(this._connections||[],function(_272){_24c.forEach(_272,lang.hitch(this,"disconnect"));},this);this._connectIds=_24c.filter(lang.isArrayLike(_271)?_271:(_271?[_271]:[]),function(id){return dom.byId(id);});this._connections=_24c.map(this._connectIds,function(id){var node=dom.byId(id);return [this.connect(node,"onmouseenter","_onHover"),this.connect(node,"onmouseleave","_onUnHover"),this.connect(node,"onfocus","_onHover"),this.connect(node,"onblur","_onUnHover")];},this);this._set("connectId",_271);},addTarget:function(node){var id=node.id||node;if(_24c.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_24c.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_24e.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_24c.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onHover:function(e){if(!this._showTimer){var _273=e.target;this._showTimer=setTimeout(lang.hitch(this,function(){this.open(_273);}),this.showDelay);}},_onUnHover:function(){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_274){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}_25d.show(this.label||this.domNode.innerHTML,_274,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_274;this.onShow(_274,this.position);},close:function(){if(this._connectNode){_25d.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});_25d._MasterTooltip=_258;_25d.show=_257.showTooltip;_25d.hide=_257.hideTooltip;_25d.defaultPosition=["after-centered","before-centered"];return _25d;});},"dojox/charting/action2d/Base":function(){define("dojox/charting/action2d/Base",["dojo/_base/lang","dojo/_base/declare"],function(lang,_275){return _275("dojox.charting.action2d.Base",null,{constructor:function(_276,plot){this.chart=_276;this.plot=plot?(lang.isString(plot)?this.chart.getPlot(plot):plot):this.chart.getPlot("default");},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect();}});});},"dojox/charting/plot2d/Stacked":function(){define("dojox/charting/plot2d/Stacked",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Default","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,_277,arr,_278,dc,df,dfr,dfs){var _279=dfr.lambda("item.purgeGroup()");return _277("dojox.charting.plot2d.Stacked",_278,{getSeriesStats:function(){var _27a=dc.collectStackedStats(this.series);this._maxRunLength=_27a.hmax;return _27a;},render:function(dim,_27b){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_27b);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_279);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_27c=this.events(),ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _27d=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_27e,_27f=arr.map(acc,function(v,i){return {x:ht(i+1)+_27b.l,y:dim.height-_27b.b-vt(v)};},this);var _280=this.opt.tension?dc.curve(_27f,this.opt.tension):"";if(this.opt.areas){var _281=lang.clone(_27f);if(this.opt.tension){var p=dc.curve(_281,this.opt.tension);p+=" L"+_27f[_27f.length-1].x+","+(dim.height-_27b.b)+" L"+_27f[0].x+","+(dim.height-_27b.b)+" L"+_27f[0].x+","+_27f[0].y;run.dyn.fill=s.createPath(p).setFill(_27d.series.fill).getFill();}else{_281.push({x:_27f[_27f.length-1].x,y:dim.height-_27b.b});_281.push({x:_27f[0].x,y:dim.height-_27b.b});_281.push(_27f[0]);run.dyn.fill=s.createPolyline(_281).setFill(_27d.series.fill).getFill();}}if(this.opt.lines||this.opt.markers){if(_27d.series.outline){_27e=dc.makeStroke(_27d.series.outline);_27e.width=2*_27e.width+_27d.series.stroke.width;}}if(this.opt.markers){run.dyn.marker=_27d.symbol;}var _282,_283,_284;if(_27d.series.shadow&&_27d.series.stroke){var _285=_27d.series.shadow,_286=arr.map(_27f,function(c){return {x:c.x+_285.dx,y:c.y+_285.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_286,this.opt.tension)).setStroke(_285).getStroke();}else{run.dyn.shadow=s.createPolyline(_286).setStroke(_285).getStroke();}}if(this.opt.markers){_285=_27d.marker.shadow;_284=arr.map(_286,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_27d.symbol).setStroke(_285).setFill(_285.color);},this);}}if(this.opt.lines){if(_27e){if(this.opt.tension){run.dyn.outline=s.createPath(_280).setStroke(_27e).getStroke();}else{run.dyn.outline=s.createPolyline(_27f).setStroke(_27e).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_280).setStroke(_27d.series.stroke).getStroke();}else{run.dyn.stroke=s.createPolyline(_27f).setStroke(_27d.series.stroke).getStroke();}}if(this.opt.markers){_282=new Array(_27f.length);_283=new Array(_27f.length);_27e=null;if(_27d.marker.outline){_27e=dc.makeStroke(_27d.marker.outline);_27e.width=2*_27e.width+(_27d.marker.stroke?_27d.marker.stroke.width:0);}arr.forEach(_27f,function(c,i){var path="M"+c.x+" "+c.y+" "+_27d.symbol;if(_27e){_283[i]=s.createPath(path).setStroke(_27e);}_282[i]=s.createPath(path).setStroke(_27d.marker.stroke).setFill(_27d.marker.fill);},this);if(_27c){var _287=new Array(_282.length);arr.forEach(_282,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_283[i]||null,shadow:_284&&_284[i]||null,cx:_27f[i].x,cy:_27f[i].y,x:i+1,y:run.data[i]};this._connectEvents(o);_287[i]=o;},this);this._eventSeries[run.name]=_287;}else{delete this._eventSeries[run.name];}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojox/charting/plot2d/Pie":function(){define("dojox/charting/plot2d/Pie",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","../Element","./_PlotEvents","./common","../axis2d/common","dojox/gfx","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/utils"],function(lang,arr,_288,_289,_28a,dc,da,g,m,df,du){var _28b=0.2;return _288("dojox.charting.plot2d.Pie",[_289,_28a],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:true,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",labelWiring:{}},constructor:function(_28c,_28d){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_28d);du.updateWithPattern(this.opt,_28d,this.optionalParams);this.run=null;this.dyn=[];},clear:function(){this.dirty=true;this.dyn=[];this.run=null;return this;},setAxis:function(axis){return this;},addSeries:function(run){this.run=run;return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},initializeScalers:function(){return this;},getRequiredColors:function(){return this.run?this.run.data.length:0;},render:function(dim,_28e){if(!this.dirty){return this;}this.resetEvents();this.dirty=false;this._eventSeries={};this.cleanGroup();var s=this.group,t=this.chart.theme;if(!this.run||!this.run.data.length){return this;}var rx=(dim.width-_28e.l-_28e.r)/2,ry=(dim.height-_28e.t-_28e.b)/2,r=Math.min(rx,ry),_28f="font" in this.opt?this.opt.font:t.axis.font,size=_28f?g.normalizedLength(g.splitFontString(_28f).size):0,_290="fontColor" in this.opt?this.opt.fontColor:t.axis.fontColor,_291=m._degToRad(this.opt.startAngle),_292=_291,step,_293,_294,_295,_296,_297,run=this.run.data,_298=this.events();if(typeof run[0]=="number"){_293=df.map(run,"x ? Math.max(x, 0) : 0");if(df.every(_293,"<= 0")){return this;}_294=df.map(_293,"/this",df.foldl(_293,"+",0));if(this.opt.labels){_295=arr.map(_294,function(x){return x>0?this._getLabel(x*100)+"%":"";},this);}}else{_293=df.map(run,"x ? Math.max(x.y, 0) : 0");if(df.every(_293,"<= 0")){return this;}_294=df.map(_293,"/this",df.foldl(_293,"+",0));if(this.opt.labels){_295=arr.map(_294,function(x,i){if(x<=0){return "";}var v=run[i];return "text" in v?v.text:this._getLabel(x*100)+"%";},this);}}var _299=df.map(run,function(v,i){if(v===null||typeof v=="number"){return t.next("slice",[this.opt,this.run],true);}return t.next("slice",[this.opt,this.run,v],true);},this);if(this.opt.labels){_296=df.foldl1(df.map(_295,function(_29a,i){var font=_299[i].series.font;return g._base._getTextBox(_29a,{font:font}).w;},this),"Math.max(a, b)")/2;if(this.opt.labelOffset<0){r=Math.min(rx-2*_296,ry-size)+this.opt.labelOffset;}_297=r-this.opt.labelOffset;}if("radius" in this.opt){r=this.opt.radius;_297=r-this.opt.labelOffset;}var _29b={cx:_28e.l+rx,cy:_28e.t+ry,r:r};this.dyn=[];var _29c=new Array(_294.length);arr.some(_294,function(_29d,i){if(_29d<0){return false;}if(_29d==0){this.dyn.push({fill:null,stroke:null});return false;}var v=run[i],_29e=_299[i],_29f;if(_29d>=1){_29f=this._plotFill(_29e.series.fill,dim,_28e);_29f=this._shapeFill(_29f,{x:_29b.cx-_29b.r,y:_29b.cy-_29b.r,width:2*_29b.r,height:2*_29b.r});_29f=this._pseudoRadialFill(_29f,{x:_29b.cx,y:_29b.cy},_29b.r);var _2a0=s.createCircle(_29b).setFill(_29f).setStroke(_29e.series.stroke);this.dyn.push({fill:_29f,stroke:_29e.series.stroke});if(_298){var o={element:"slice",index:i,run:this.run,shape:_2a0,x:i,y:typeof v=="number"?v:v.y,cx:_29b.cx,cy:_29b.cy,cr:r};this._connectEvents(o);_29c[i]=o;}return true;}var end=_292+_29d*2*Math.PI;if(i+1==_294.length){end=_291+2*Math.PI;}var step=end-_292,x1=_29b.cx+r*Math.cos(_292),y1=_29b.cy+r*Math.sin(_292),x2=_29b.cx+r*Math.cos(end),y2=_29b.cy+r*Math.sin(end);var _2a1=m._degToRad(this.opt.fanSize);if(_29e.series.fill&&_29e.series.fill.type==="radial"&&this.opt.radGrad==="fan"&&step>_2a1){var _2a2=s.createGroup(),_2a3=Math.ceil(step/_2a1),_2a4=step/_2a3;_29f=this._shapeFill(_29e.series.fill,{x:_29b.cx-_29b.r,y:_29b.cy-_29b.r,width:2*_29b.r,height:2*_29b.r});for(var j=0;j<_2a3;++j){var _2a5=j==0?x1:_29b.cx+r*Math.cos(_292+(j-_28b)*_2a4),_2a6=j==0?y1:_29b.cy+r*Math.sin(_292+(j-_28b)*_2a4),_2a7=j==_2a3-1?x2:_29b.cx+r*Math.cos(_292+(j+1+_28b)*_2a4),_2a8=j==_2a3-1?y2:_29b.cy+r*Math.sin(_292+(j+1+_28b)*_2a4),fan=_2a2.createPath().moveTo(_29b.cx,_29b.cy).lineTo(_2a5,_2a6).arcTo(r,r,0,_2a4>Math.PI,true,_2a7,_2a8).lineTo(_29b.cx,_29b.cy).closePath().setFill(this._pseudoRadialFill(_29f,{x:_29b.cx,y:_29b.cy},r,_292+(j+0.5)*_2a4,_292+(j+0.5)*_2a4));}_2a2.createPath().moveTo(_29b.cx,_29b.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_29b.cx,_29b.cy).closePath().setStroke(_29e.series.stroke);_2a0=_2a2;}else{_2a0=s.createPath().moveTo(_29b.cx,_29b.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_29b.cx,_29b.cy).closePath().setStroke(_29e.series.stroke);var _29f=_29e.series.fill;if(_29f&&_29f.type==="radial"){_29f=this._shapeFill(_29f,{x:_29b.cx-_29b.r,y:_29b.cy-_29b.r,width:2*_29b.r,height:2*_29b.r});if(this.opt.radGrad==="linear"){_29f=this._pseudoRadialFill(_29f,{x:_29b.cx,y:_29b.cy},r,_292,end);}}else{if(_29f&&_29f.type==="linear"){_29f=this._plotFill(_29f,dim,_28e);_29f=this._shapeFill(_29f,_2a0.getBoundingBox());}}_2a0.setFill(_29f);}this.dyn.push({fill:_29f,stroke:_29e.series.stroke});if(_298){var o={element:"slice",index:i,run:this.run,shape:_2a0,x:i,y:typeof v=="number"?v:v.y,cx:_29b.cx,cy:_29b.cy,cr:r};this._connectEvents(o);_29c[i]=o;}_292=end;return false;},this);if(this.opt.labels){if(this.opt.labelStyle=="default"){_292=_291;arr.some(_294,function(_2a9,i){if(_2a9<=0){return false;}var _2aa=_299[i];if(_2a9>=1){var v=run[i],elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_29b.cx,_29b.cy+size/2,"middle",_295[i],_2aa.series.font,_2aa.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}return true;}var end=_292+_2a9*2*Math.PI,v=run[i];if(i+1==_294.length){end=_291+2*Math.PI;}var _2ab=(_292+end)/2,x=_29b.cx+_297*Math.cos(_2ab),y=_29b.cy+_297*Math.sin(_2ab)+size/2;var elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,x,y,"middle",_295[i],_2aa.series.font,_2aa.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}_292=end;return false;},this);}else{if(this.opt.labelStyle=="columns"){_292=_291;var _2ac=[];arr.forEach(_294,function(_2ad,i){var end=_292+_2ad*2*Math.PI;if(i+1==_294.length){end=_291+2*Math.PI;}var _2ae=(_292+end)/2;_2ac.push({angle:_2ae,left:Math.cos(_2ae)<0,theme:_299[i],index:i,omit:end-_292<0.001});_292=end;});var _2af=g._base._getTextBox("a",{font:_28f}).h;this._getProperLabelRadius(_2ac,_2af,_29b.r*1.1);arr.forEach(_2ac,function(_2b0,i){if(!_2b0.omit){var _2b1=_29b.cx-_29b.r*2,_2b2=_29b.cx+_29b.r*2,_2b3=g._base._getTextBox(_295[i],{font:_28f}).w,x=_29b.cx+_2b0.labelR*Math.cos(_2b0.angle),y=_29b.cy+_2b0.labelR*Math.sin(_2b0.angle),_2b4=(_2b0.left)?(_2b1+_2b3):(_2b2-_2b3),_2b5=(_2b0.left)?_2b1:_2b4;var _2b6=s.createPath().moveTo(_29b.cx+_29b.r*Math.cos(_2b0.angle),_29b.cy+_29b.r*Math.sin(_2b0.angle));if(Math.abs(_2b0.labelR*Math.cos(_2b0.angle))<_29b.r*2-_2b3){_2b6.lineTo(x,y);}_2b6.lineTo(_2b4,y).setStroke(_2b0.theme.series.labelWiring);var elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_2b5,y,"left",_295[i],_2b0.theme.series.font,_2b0.theme.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}},this);}}}var esi=0;this._eventSeries[this.run.name]=df.map(run,function(v){return v<=0?null:_29c[esi++];});return this;},_getProperLabelRadius:function(_2b7,_2b8,_2b9){var _2ba={},_2bb={},_2bc=1,_2bd=1;if(_2b7.length==1){_2b7[0].labelR=_2b9;return;}for(var i=0;i<_2b7.length;i++){var _2be=Math.abs(Math.sin(_2b7[i].angle));if(_2b7[i].left){if(_2bc>=_2be){_2bc=_2be;_2ba=_2b7[i];}}else{if(_2bd>=_2be){_2bd=_2be;_2bb=_2b7[i];}}}_2ba.labelR=_2bb.labelR=_2b9;this._calculateLabelR(_2ba,_2b7,_2b8);this._calculateLabelR(_2bb,_2b7,_2b8);},_calculateLabelR:function(_2bf,_2c0,_2c1){var i=_2bf.index,_2c2=_2c0.length,_2c3=_2bf.labelR;while(!(_2c0[i%_2c2].left^_2c0[(i+1)%_2c2].left)){if(!_2c0[(i+1)%_2c2].omit){var _2c4=(Math.sin(_2c0[i%_2c2].angle)*_2c3+((_2c0[i%_2c2].left)?(-_2c1):_2c1))/Math.sin(_2c0[(i+1)%_2c2].angle);_2c3=(_2c4<_2bf.labelR)?_2bf.labelR:_2c4;_2c0[(i+1)%_2c2].labelR=_2c3;}i++;}i=_2bf.index;var j=(i==0)?_2c2-1:i-1;while(!(_2c0[i].left^_2c0[j].left)){if(!_2c0[j].omit){var _2c4=(Math.sin(_2c0[i].angle)*_2c3+((_2c0[i].left)?_2c1:(-_2c1)))/Math.sin(_2c0[j].angle);_2c3=(_2c4<_2bf.labelR)?_2bf.labelR:_2c4;_2c0[j].labelR=_2c3;}i--;j--;i=(i<0)?i+_2c0.length:i;j=(j<0)?j+_2c0.length:j;}},_getLabel:function(_2c5){return dc.getLabel(_2c5,this.opt.fixed,this.opt.precision);}});});},"dojox/color/_base":function(){define("dojox/color/_base",["dojo/_base/kernel","../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(dojo,_2c6,lang,_2c7,_2c8){var cx=lang.getObject("dojox.color",true);cx.Color=_2c7;cx.blend=_2c7.blendColors;cx.fromRgb=_2c7.fromRgb;cx.fromHex=_2c7.fromHex;cx.fromArray=_2c7.fromArray;cx.fromString=_2c7.fromString;cx.greyscale=_2c8.makeGrey;lang.mixin(cx,{fromCmy:function(cyan,_2c9,_2ca){if(lang.isArray(cyan)){_2c9=cyan[1],_2ca=cyan[2],cyan=cyan[0];}else{if(lang.isObject(cyan)){_2c9=cyan.m,_2ca=cyan.y,cyan=cyan.c;}}cyan/=100,_2c9/=100,_2ca/=100;var r=1-cyan,g=1-_2c9,b=1-_2ca;return new _2c7({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_2cb,_2cc,_2cd){if(lang.isArray(cyan)){_2cb=cyan[1],_2cc=cyan[2],_2cd=cyan[3],cyan=cyan[0];}else{if(lang.isObject(cyan)){_2cb=cyan.m,_2cc=cyan.y,_2cd=cyan.b,cyan=cyan.c;}}cyan/=100,_2cb/=100,_2cc/=100,_2cd/=100;var r,g,b;r=1-Math.min(1,cyan*(1-_2cd)+_2cd);g=1-Math.min(1,_2cb*(1-_2cd)+_2cd);b=1-Math.min(1,_2cc*(1-_2cd)+_2cd);return new _2c7({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_2ce,_2cf){if(lang.isArray(hue)){_2ce=hue[1],_2cf=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_2ce=hue.s,_2cf=hue.l,hue=hue.h;}}_2ce/=100;_2cf/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_2ce*Math.min(r,1)+(1-_2ce);g=2*_2ce*Math.min(g,1)+(1-_2ce);b=2*_2ce*Math.min(b,1)+(1-_2ce);if(_2cf<0.5){r*=_2cf,g*=_2cf,b*=_2cf;}else{r=(1-_2cf)*r+2*_2cf-1;g=(1-_2cf)*g+2*_2cf-1;b=(1-_2cf)*b+2*_2cf-1;}return new _2c7({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});cx.fromHsv=function(hue,_2d0,_2d1){if(lang.isArray(hue)){_2d0=hue[1],_2d1=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_2d0=hue.s,_2d1=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_2d0/=100;_2d1/=100;var r,g,b;if(_2d0==0){r=_2d1,b=_2d1,g=_2d1;}else{var _2d2=hue/60,i=Math.floor(_2d2),f=_2d2-i;var p=_2d1*(1-_2d0);var q=_2d1*(1-(_2d0*f));var t=_2d1*(1-(_2d0*(1-f)));switch(i){case 0:r=_2d1,g=t,b=p;break;case 1:r=q,g=_2d1,b=p;break;case 2:r=p,g=_2d1,b=t;break;case 3:r=p,g=q,b=_2d1;break;case 4:r=t,g=p,b=_2d1;break;case 5:r=_2d1,g=p,b=q;break;}}return new _2c7({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});};lang.extend(_2c7,{toCmy:function(){var cyan=1-(this.r/255),_2d3=1-(this.g/255),_2d4=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_2d3*100),y:Math.round(_2d4*100)};},toCmyk:function(){var cyan,_2d5,_2d6,_2d7;var r=this.r/255,g=this.g/255,b=this.b/255;_2d7=Math.min(1-r,1-g,1-b);cyan=(1-r-_2d7)/(1-_2d7);_2d5=(1-g-_2d7)/(1-_2d7);_2d6=(1-b-_2d7)/(1-_2d7);return {c:Math.round(cyan*100),m:Math.round(_2d5*100),y:Math.round(_2d6*100),b:Math.round(_2d7*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _2d8=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=_2d8/((l<0.5)?(2*l):(2-2*l));}if(_2d8>0){if(max==r&&max!=g){h+=(g-b)/_2d8;}if(max==g&&max!=b){h+=(2+(b-r)/_2d8);}if(max==b&&max!=r){h+=(4+(r-g)/_2d8);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _2d9=max-min;var h=null,s=(max==0)?0:(_2d9/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/_2d9;}else{if(g==max){h=120+60*(b-r)/_2d9;}else{h=240+60*(r-g)/_2d9;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});return cx;});},"dojox/charting/action2d/PlotAction":function(){define("dojox/charting/action2d/PlotAction",["dojo/_base/connect","dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional","dojox/lang/functional/object"],function(hub,_2da,Base,dfe,df,dlfo){var _2db=400,_2dc=dfe.backOut;return _2da("dojox.charting.action2d.PlotAction",Base,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(_2dd,plot,_2de){this.anim={};if(!_2de){_2de={};}this.duration=_2de.duration?_2de.duration:_2db;this.easing=_2de.easing?_2de.easing:_2dc;},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process");},disconnect:function(){if(this.handle){hub.disconnect(this.handle);this.handle=null;}},reset:function(){},destroy:function(){this.inherited(arguments);df.forIn(this.anim,function(o){df.forIn(o,function(anim){anim.action.stop(true);});});this.anim={};}});});},"dojox/lang/functional/fold":function(){define("dojox/lang/functional/fold",["dojo/_base/lang","dojo/_base/array","dojo/_base/window","./lambda"],function(lang,arr,win,df){var _2df={};lang.mixin(df,{foldl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(lang.isArray(a)){for(i=0,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}else{for(i in a){if(!(i in _2df)){z=f.call(o,z,a[i],i,a);}}}}return z;},foldl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var z,i,n;if(lang.isArray(a)){z=a[0];for(i=1,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){z=a.next();for(i=1;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}}else{var _2e0=true;for(i in a){if(!(i in _2df)){if(_2e0){z=a[i];_2e0=false;}else{z=f.call(o,z,a[i],i,a);}}}}}return z;},foldr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},foldr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var n=a.length,z=a[n-1],i=n-1;for(;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},reduce:function(a,f,z){return arguments.length<3?df.foldl1(a,f):df.foldl(a,f,z);},reduceRight:function(a,f,z){return arguments.length<3?df.foldr1(a,f):df.foldr(a,f,z);},unfold:function(pr,f,g,z,o){o=o||win.global;f=df.lambda(f);g=df.lambda(g);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(f.call(o,z)),z=g.call(o,z)){}return t;}});});},"dojox/charting/plot2d/Bars":function(){define("dojox/charting/plot2d/Bars",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/gfx/fx","dojox/lang/utils","dojox/lang/functional","dojox/lang/functional/reversed"],function(dojo,lang,arr,_2e1,Base,dc,fx,du,df,dfr){var _2e2=dfr.lambda("item.purgeGroup()");return _2e1("dojox.charting.plot2d.Bars",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_2e3,_2e4){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_2e4);du.updateWithPattern(this.opt,_2e4,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _2e5=dc.collectSimpleStats(this.series),t;_2e5.hmin-=0.5;_2e5.hmax+=0.5;t=_2e5.hmin,_2e5.hmin=_2e5.vmin,_2e5.vmin=t;t=_2e5.hmax,_2e5.hmax=_2e5.vmax,_2e5.vmax=t;return _2e5;},createRect:function(run,_2e6,_2e7){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_2e7);_2e6.add(rect);}else{rect=_2e6.createRect(_2e7);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_2e8){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_2e8);}this.dirty=this.isDirty();this.resetEvents();if(this.dirty){arr.forEach(this.series,_2e2);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_2e9,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_2ea=Math.max(0,this._hScaler.bounds.lower),_2eb=ht(_2ea),_2ec=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_2e9=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var _2ed=t.next("bar",[this.opt,run]),s=run.group,_2ee=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _2ef=run.data[j];if(_2ef!==null){var v=typeof _2ef=="number"?_2ef:_2ef.y,hv=ht(v),_2f0=hv-_2eb,w=Math.abs(_2f0),_2f1=typeof _2ef!="number"?t.addMixin(_2ed,"bar",_2ef,true):t.post(_2ed,"bar");if(w>=0&&_2e9>=1){var rect={x:_2e8.l+(v<_2ea?hv:_2eb),y:dim.height-_2e8.b-vt(j+1.5)+gap,width:w,height:_2e9};var _2f2=this._plotFill(_2f1.series.fill,dim,_2e8);_2f2=this._shapeFill(_2f2,rect);var _2f3=this.createRect(run,s,rect).setFill(_2f2).setStroke(_2f1.series.stroke);run.dyn.fill=_2f3.getFill();run.dyn.stroke=_2f3.getStroke();if(_2ec){var o={element:"bar",index:j,run:run,shape:_2f3,x:v,y:j+1.5};this._connectEvents(o);_2ee[j]=o;}if(this.animate){this._animateBar(_2f3,_2e8.l+_2eb,-w);}}}}this._eventSeries[run.name]=_2ee;run.dirty=false;}this.dirty=false;return this;},_animateBar:function(_2f4,_2f5,_2f6){fx.animateTransform(lang.delegate({shape:_2f4,duration:1200,transform:[{name:"translate",start:[_2f5-(_2f5/_2f6),0],end:[0,0]},{name:"scale",start:[1/_2f6,1],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/lang/functional/object":function(){define("dojox/lang/functional/object",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/window","./lambda"],function(dojo,lang,win,df){var _2f7={};lang.mixin(df,{keys:function(obj){var t=[];for(var i in obj){if(!(i in _2f7)){t.push(i);}}return t;},values:function(obj){var t=[];for(var i in obj){if(!(i in _2f7)){t.push(obj[i]);}}return t;},filterIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);var t={},v,i;for(i in obj){if(!(i in _2f7)){v=obj[i];if(f.call(o,v,i,obj)){t[i]=v;}}}return t;},forIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);for(var i in obj){if(!(i in _2f7)){f.call(o,obj[i],i,obj);}}return o;},mapIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);var t={},i;for(i in obj){if(!(i in _2f7)){t[i]=f.call(o,obj[i],i,obj);}}return t;}});return df;});},"esri/arcgis/csv":function(){define(["dijit","dojo","dojox","dojo/require!dojox/data/CsvStore"],function(_2f8,dojo,_2f9){dojo.provide("esri.arcgis.csv");dojo.require("dojox.data.CsvStore");(function(){var EAC=esri.arcgis.csv;EAC.latFieldStrings=["lat","latitude","y","ycenter","latitude83","latdecdeg","POINT-Y"];EAC.longFieldStrings=["lon","lng","long","longitude","x","xcenter","longitude83","longdecdeg","POINT-X"];EAC.buildCSVFeatureCollection=function(_2fa){var _2fb=new dojo.Deferred();var _2fc=function(_2fd){_2fb.callback(_2fd);};var _2fe=esri.request({url:_2fa.url,handleAs:"text",load:function(_2ff){EAC._processCsvData(_2ff,_2fa,dojo.hitch(this,_2fc));},error:function(_300){console.error("error: "+_300);}},{usePost:false});return _2fb;};EAC.projectFeatureCollection=function(_301,_302){var _303=new dojo.Deferred();var _304=function(_305){_303.callback(_305);};EAC._projectFeatureSet(_301,new esri.SpatialReference({wkid:4326}),_302,dojo.hitch(this,_304));return _303;};EAC.generateDefaultPopupInfo=function(_306){var _307=_306.layerDefinition.fields;var _308={"esriFieldTypeDouble":1,"esriFieldTypeSingle":1};var _309={"esriFieldTypeInteger":1,"esriFieldTypeSmallInteger":1};var dt={"esriFieldTypeDate":1};var _30a=null;var _30b=dojo.map(_307,dojo.hitch(this,function(item){if(item.name.toUpperCase()==="NAME"){_30a=item.name;}var _30c=(item.type!=="esriFieldTypeOID"&&item.type!=="esriFieldTypeGlobalID"&&item.type!=="esriFieldTypeGeometry");var _30d=null;if(_30c){var f=item.name.toLowerCase();var _30e=",stretched value,fnode_,tnode_,lpoly_,rpoly_,poly_,subclass,subclass_,rings_ok,rings_nok,";if(_30e.indexOf(","+f+",")>-1||f.indexOf("area")>-1||f.indexOf("length")>-1||f.indexOf("shape")>-1||f.indexOf("perimeter")>-1||f.indexOf("objectid")>-1||f.indexOf("_")===f.length-1||(f.indexOf("_i")===f.length-2&&f.length>1)){_30c=false;}if(item.type in _309){_30d={places:0,digitSeparator:true};}else{if(item.type in _308){_30d={places:2,digitSeparator:true};}else{if(item.type in dt){_30d={dateFormat:"shortDateShortTime"};}}}}return dojo.mixin({},{fieldName:item.name,label:item.alias,isEditable:true,tooltip:"",visible:_30c,format:_30d,stringFieldOption:"textbox"});}));var _30f={title:_30a?"{"+_30a+"}":"",fieldInfos:_30b,description:null,showAttachments:false,mediaInfos:[]};return _30f;};EAC._processCsvData=function(data,_310,_311){var _312=data.indexOf("\n");var _313=dojo.trim(data.substr(0,_312));var _314=_310.columnDelimiter;if(!_314){_314=EAC._getSeparator(_313);}var _315=new _2f9.data.CsvStore({data:data,separator:_314});var _316=(dojo.isIE<9)?750:1001;_315.fetch({start:0,count:_316,onComplete:function(_317,_318){var _319=0;var _31a={"layerDefinition":_310.layerDefinition,"featureSet":{"features":[],"geometryType":"esriGeometryPoint"}};var _31b=_31a.layerDefinition.objectIdField;if(!_31b){if(!dojo.some(_31a.layerDefinition.fields,function(_31c){if(_31c.type=="esriFieldTypeOID"){_31b=_31c.name;return true;}return false;})){_31a.layerDefinition.fields.push({"name":"__OBJECTID","alias":"__OBJECTID","type":"esriFieldTypeOID","editable":false,"domain":null});_31b="__OBJECTID";}}var _31d,_31e;var _31f=_315._attributes;var _320=[];var _321=[];dojo.forEach(_31a.layerDefinition.fields,function(_322,_323){if(_322.type==="esriFieldTypeDate"){_320.push(_322.name);}else{if(_322.type==="esriFieldTypeDouble"||_322.type==="esriFieldTypeInteger"){_321.push(_322.name);}}});if(_310.locationInfo&&_310.locationInfo.locationType==="coordinates"){_31d=_310.locationInfo.latitudeFieldName;_31e=_310.locationInfo.longitudeFieldName;}else{dojo.forEach(_31f,function(_324){var _325;_325=dojo.indexOf(EAC.latFieldStrings,_324.toLowerCase());if(_325!==-1){_31d=_324;}_325=dojo.indexOf(EAC.longFieldStrings,_324.toLowerCase());if(_325!==-1){_31e=_324;}},this);}if(!_31d||!_31e){setTimeout(function(){console.error("File does not seem to contain fields with point coordinates.");},1);return;}var i=0,il=_317.length;for(i;i<il;i++){if(_31a.featureSet.features.length>=1000){setTimeout(function(){console.error("1000 feature limit reached. Unable to load any more data.");},1);break;}var item=_317[i];var _326=_315.getAttributes(item),_327={};dojo.forEach(_326,function(attr,_328){if(attr){var _329=attr;if(attr.length===0){dojo.forEach(_31a.layerDefinition.fields,function(_32a,idx){if(_32a.name==="attribute_"+(idx-1)){attr="attribute_"+(idx-1);}});}if(dojo.some(_320,function(a){return a===attr;})){var val=_315.getValue(item,_329),date=new Date(val);_327[attr]=EAC._isValidDate(date,val)?date.getTime():null;}else{if(dojo.some(_321,function(a){return a===attr;})){var _32b=dojo.number.parse(_315.getValue(item,_329));if((attr==_31d||attr==_31e)&&(isNaN(_32b)||Math.abs(_32b)>181)){_32b=parseFloat(_315.getValue(item,_329));if(isNaN(_32b)){_327[attr]=null;}else{_327[attr]=_32b;}}else{if(isNaN(_32b)){_327[attr]=null;}else{_327[attr]=_32b;}}}else{_327[attr]=_315.getValue(item,_329);}}}});_327[_31b]=_319;_319++;var _32c=_327[_31d];var _32d=_327[_31e];if(_32d==null||_32c==null||isNaN(_32c)||isNaN(_32d)){continue;}var _32e=new esri.geometry.Point(_32d,_32c,new esri.SpatialReference({wkid:4326}));var _32f={"geometry":_32e.toJson(),"attributes":_327};_31a.featureSet.features.push(_32f);}_31a.layerDefinition.name="csv";if(_311){_311(_31a);}},onError:function(_330){console.error("Error fetching items from CSV store: ",_330);}});return true;};EAC._getSeparator=function(_331){var _332=[","," ",";","|","\t"];var _333=0;var _334="";dojo.forEach(_332,function(_335){var _336=_331.split(_335).length;if(_336>_333){_333=_336;_334=_335;}});return _334;};EAC._isValidDate=function(d,_337){if(!d||Object.prototype.toString.call(d)!=="[object Date]"||isNaN(d.getTime())){return false;}var _338=true;if(dojo.isChrome&&/\d+\W*$/.test(_337)){var _339=_337.match(/[a-zA-Z]{2,}/);if(_339){var _33a=false,i=0,len=_339.length,_33b=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i;while(!_33a&&(i<=len)&&!(_33a=!_33b.test(_339[i]))){i++;}_338=!_33a;}}return _338;};EAC._projectFeatureSet=function(_33c,_33d,_33e,_33f){if(!_33c.featureSet||_33c.featureSet.length===0){return;}if(EAC._sameSpatialReference(_33e,_33d)){_33f(_33c);return;}var _340=function(_341){var _342=[];dojo.forEach(_33c.featureSet.features,function(_343,i){if(_341[i]){_343.geometry=_341[i];_342.push(_343);}},this);_33f(_33c);};var _344=function(_345,args){console.error("error projecting featureSet ("+_33c.layerDefinition.name+"). Try one more time.");EAC._projectGeometries(_346,_33c.featureSet.geometryType,_33d,_33e,dojo.hitch(this,_340),dojo.hitch(this,_347));};var _347=function(_348,args){console.error("error projecting featureSet ("+_33c.layerDefinition.name+"). Final try.");_33f(_33c);};if(_33c.featureSet.features&&_33c.featureSet.features.length>0){var _346=[];dojo.forEach(_33c.featureSet.features,function(_349){_346.push(_349.geometry);});EAC._projectGeometries(_346,_33c.featureSet.geometryType,_33d,_33e,dojo.hitch(this,_340),dojo.hitch(this,_344));}else{_33f(_33c);}};EAC._projectGeometries=function(_34a,_34b,inSR,_34c,_34d,_34e){if(_34a.length===0){_34d(null);}var _34f=esri.geometry.getGeometryType(_34b);var _350=[];dojo.forEach(_34a,function(_351){var _352=new _34f(_351);_352.spatialReference=inSR;_350.push(_352);},this);var _353=[102113,102100,3857];if(inSR.wkid&&inSR.wkid===4326&&_34c.wkid&&dojo.indexOf(_353,_34c.wkid)>-1){dojo.forEach(_350,function(_354){if(_354.xmin){_354.xmin=Math.max(_354.xmin,-180);_354.xmax=Math.min(_354.xmax,180);_354.ymin=Math.max(_354.ymin,-89.99);_354.ymax=Math.min(_354.ymax,89.99);}else{if(_354.rings){dojo.forEach(_354.rings,function(ring){dojo.forEach(ring,function(_355){_355[0]=Math.min(Math.max(_355[0],-180),180);_355[1]=Math.min(Math.max(_355[1],-89.99),89.99);},this);},this);}else{if(_354.paths){dojo.forEach(_354.paths,function(path){dojo.forEach(path,function(_356){_356[0]=Math.min(Math.max(_356[0],-180),180);_356[1]=Math.min(Math.max(_356[1],-89.99),89.99);},this);},this);}else{if(_354.x){_354.x=Math.min(Math.max(_354.x,-180),180);_354.y=Math.min(Math.max(_354.y,-89.99),89.99);}}}}},this);_34a=[];dojo.forEach(_350,function(_357){var _358=esri.geometry.geographicToWebMercator(_357);if(_34c.wkid!==102100){_358.spatialReference=_34c;}_34a.push(_358.toJson());},this);_34d(_34a);}else{if(inSR.wkid!==null&&dojo.indexOf(_353,inSR.wkid)>-1&&_34c.wkid!==null&&_34c.wkid===4326){_34a=[];dojo.forEach(_350,function(_359){_34a.push(esri.geometry.webMercatorToGeographic(_359).toJson());},this);_34d(_34a);}else{var _35a=function(_35b,args){if(_35b&&_35b.length===_34a.length){_34a=[];dojo.forEach(_35b,function(_35c){if(_35c&&((_35c.rings&&_35c.rings.length>0&&_35c.rings[0].length>0&&_35c.rings[0][0].length>0&&!isNaN(_35c.rings[0][0][0])&&!isNaN(_35c.rings[0][0][1]))||(_35c.paths&&_35c.paths.length>0&&_35c.paths[0].length>0&&_35c.paths[0][0].length>0&&!isNaN(_35c.paths[0][0][0])&&!isNaN(_35c.paths[0][0][1]))||(_35c.xmin&&!isNaN(_35c.xmin)&&_35c.ymin&&!isNaN(_35c.ymin))||(_35c.x&&!isNaN(_35c.x)&&_35c.y&&!isNaN(_35c.y)))){_34a.push(_35c.toJson());}else{_34a.push(null);}},this);_34d(_34a);}else{_34e(_35b,args);}};if(esri.config.defaults.geometryService){esri.config.defaults.geometryService.project(_350,_34c,dojo.hitch(this,_35a),_34e);}else{_34d(null);}}}};EAC._sameSpatialReference=function(sp1,sp2){var _35d=[102113,102100,3857];if(sp1&&sp2&&sp1.wkid===sp2.wkid&&sp1.wkt===sp2.wkt){return true;}else{if(sp1&&sp2&&sp1.wkid&&sp2.wkid&&dojo.indexOf(_35d,sp1.wkid)>-1&&dojo.indexOf(_35d,sp2.wkid)>-1){return true;}}return false;};}());});},"dojox/charting/scaler/linear":function(){define("dojox/charting/scaler/linear",["dojo/_base/lang","./common"],function(lang,_35e){var _35f=lang.getObject("dojox.charting.scaler.linear",true);var _360=3,_361=_35e.findString,_362=_35e.getNumericLabel;var _363=function(min,max,_364,_365,_366,_367,span){_364=lang.delegate(_364);if(!_365){if(_364.fixUpper=="major"){_364.fixUpper="minor";}if(_364.fixLower=="major"){_364.fixLower="minor";}}if(!_366){if(_364.fixUpper=="minor"){_364.fixUpper="micro";}if(_364.fixLower=="minor"){_364.fixLower="micro";}}if(!_367){if(_364.fixUpper=="micro"){_364.fixUpper="none";}if(_364.fixLower=="micro"){_364.fixLower="none";}}var _368=_361(_364.fixLower,["major"])?Math.floor(_364.min/_365)*_365:_361(_364.fixLower,["minor"])?Math.floor(_364.min/_366)*_366:_361(_364.fixLower,["micro"])?Math.floor(_364.min/_367)*_367:_364.min,_369=_361(_364.fixUpper,["major"])?Math.ceil(_364.max/_365)*_365:_361(_364.fixUpper,["minor"])?Math.ceil(_364.max/_366)*_366:_361(_364.fixUpper,["micro"])?Math.ceil(_364.max/_367)*_367:_364.max;if(_364.useMin){min=_368;}if(_364.useMax){max=_369;}var _36a=(!_365||_364.useMin&&_361(_364.fixLower,["major"]))?min:Math.ceil(min/_365)*_365,_36b=(!_366||_364.useMin&&_361(_364.fixLower,["major","minor"]))?min:Math.ceil(min/_366)*_366,_36c=(!_367||_364.useMin&&_361(_364.fixLower,["major","minor","micro"]))?min:Math.ceil(min/_367)*_367,_36d=!_365?0:(_364.useMax&&_361(_364.fixUpper,["major"])?Math.round((max-_36a)/_365):Math.floor((max-_36a)/_365))+1,_36e=!_366?0:(_364.useMax&&_361(_364.fixUpper,["major","minor"])?Math.round((max-_36b)/_366):Math.floor((max-_36b)/_366))+1,_36f=!_367?0:(_364.useMax&&_361(_364.fixUpper,["major","minor","micro"])?Math.round((max-_36c)/_367):Math.floor((max-_36c)/_367))+1,_370=_366?Math.round(_365/_366):0,_371=_367?Math.round(_366/_367):0,_372=_365?Math.floor(Math.log(_365)/Math.LN10):0,_373=_366?Math.floor(Math.log(_366)/Math.LN10):0,_374=span/(max-min);if(!isFinite(_374)){_374=1;}return {bounds:{lower:_368,upper:_369,from:min,to:max,scale:_374,span:span},major:{tick:_365,start:_36a,count:_36d,prec:_372},minor:{tick:_366,start:_36b,count:_36e,prec:_373},micro:{tick:_367,start:_36c,count:_36f,prec:0},minorPerMajor:_370,microPerMinor:_371,scaler:_35f};};return lang.mixin(_35f,{buildScaler:function(min,max,span,_375){var h={fixUpper:"none",fixLower:"none",natural:false};if(_375){if("fixUpper" in _375){h.fixUpper=String(_375.fixUpper);}if("fixLower" in _375){h.fixLower=String(_375.fixLower);}if("natural" in _375){h.natural=Boolean(_375.natural);}}if("min" in _375){min=_375.min;}if("max" in _375){max=_375.max;}if(_375.includeZero){if(min>0){min=0;}if(max<0){max=0;}}h.min=min;h.useMin=true;h.max=max;h.useMax=true;if("from" in _375){min=_375.from;h.useMin=false;}if("to" in _375){max=_375.to;h.useMax=false;}if(max<=min){return _363(min,max,h,0,0,0,span);}var mag=Math.floor(Math.log(max-min)/Math.LN10),_376=_375&&("majorTickStep" in _375)?_375.majorTickStep:Math.pow(10,mag),_377=0,_378=0,_379;if(_375&&("minorTickStep" in _375)){_377=_375.minorTickStep;}else{do{_377=_376/10;if(!h.natural||_377>0.9){_379=_363(min,max,h,_376,_377,0,span);if(_379.bounds.scale*_379.minor.tick>_360){break;}}_377=_376/5;if(!h.natural||_377>0.9){_379=_363(min,max,h,_376,_377,0,span);if(_379.bounds.scale*_379.minor.tick>_360){break;}}_377=_376/2;if(!h.natural||_377>0.9){_379=_363(min,max,h,_376,_377,0,span);if(_379.bounds.scale*_379.minor.tick>_360){break;}}return _363(min,max,h,_376,0,0,span);}while(false);}if(_375&&("microTickStep" in _375)){_378=_375.microTickStep;_379=_363(min,max,h,_376,_377,_378,span);}else{do{_378=_377/10;if(!h.natural||_378>0.9){_379=_363(min,max,h,_376,_377,_378,span);if(_379.bounds.scale*_379.micro.tick>_360){break;}}_378=_377/5;if(!h.natural||_378>0.9){_379=_363(min,max,h,_376,_377,_378,span);if(_379.bounds.scale*_379.micro.tick>_360){break;}}_378=_377/2;if(!h.natural||_378>0.9){_379=_363(min,max,h,_376,_377,_378,span);if(_379.bounds.scale*_379.micro.tick>_360){break;}}_378=0;}while(false);}return _378?_379:_363(min,max,h,_376,_377,0,span);},buildTicks:function(_37a,_37b){var step,next,tick,_37c=_37a.major.start,_37d=_37a.minor.start,_37e=_37a.micro.start;if(_37b.microTicks&&_37a.micro.tick){step=_37a.micro.tick,next=_37e;}else{if(_37b.minorTicks&&_37a.minor.tick){step=_37a.minor.tick,next=_37d;}else{if(_37a.major.tick){step=_37a.major.tick,next=_37c;}else{return null;}}}var _37f=1/_37a.bounds.scale;if(_37a.bounds.to<=_37a.bounds.from||isNaN(_37f)||!isFinite(_37f)||step<=0||isNaN(step)||!isFinite(step)){return null;}var _380=[],_381=[],_382=[];while(next<=_37a.bounds.to+_37f){if(Math.abs(_37c-next)<step/2){tick={value:_37c};if(_37b.majorLabels){tick.label=_362(_37c,_37a.major.prec,_37b);}_380.push(tick);_37c+=_37a.major.tick;_37d+=_37a.minor.tick;_37e+=_37a.micro.tick;}else{if(Math.abs(_37d-next)<step/2){if(_37b.minorTicks){tick={value:_37d};if(_37b.minorLabels&&(_37a.minMinorStep<=_37a.minor.tick*_37a.bounds.scale)){tick.label=_362(_37d,_37a.minor.prec,_37b);}_381.push(tick);}_37d+=_37a.minor.tick;_37e+=_37a.micro.tick;}else{if(_37b.microTicks){_382.push({value:_37e});}_37e+=_37a.micro.tick;}}next+=step;}return {major:_380,minor:_381,micro:_382};},getTransformerFromModel:function(_383){var _384=_383.bounds.from,_385=_383.bounds.scale;return function(x){return (x-_384)*_385;};},getTransformerFromPlot:function(_386){var _387=_386.bounds.from,_388=_386.bounds.scale;return function(x){return x/_388+_387;};}});});},"dojox/gfx/gradutils":function(){define("dojox/gfx/gradutils",["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(g,lang,m,_389){var _38a=g.gradutils={};function _38b(o,c){if(o<=0){return c[0].color;}var len=c.length;if(o>=1){return c[len-1].color;}for(var i=0;i<len;++i){var stop=c[i];if(stop.offset>=o){if(i){var prev=c[i-1];return _389.blendColors(new _389(prev.color),new _389(stop.color),(o-prev.offset)/(stop.offset-prev.offset));}return stop.color;}}return c[len-1].color;};_38a.getColor=function(fill,pt){var o;if(fill){switch(fill.type){case "linear":var _38c=Math.atan2(fill.y2-fill.y1,fill.x2-fill.x1),_38d=m.rotate(-_38c),_38e=m.project(fill.x2-fill.x1,fill.y2-fill.y1),p=m.multiplyPoint(_38e,pt),pf1=m.multiplyPoint(_38e,fill.x1,fill.y1),pf2=m.multiplyPoint(_38e,fill.x2,fill.y2),_38f=m.multiplyPoint(_38d,pf2.x-pf1.x,pf2.y-pf1.y).x;o=m.multiplyPoint(_38d,p.x-pf1.x,p.y-pf1.y).x/_38f;break;case "radial":var dx=pt.x-fill.cx,dy=pt.y-fill.cy;o=Math.sqrt(dx*dx+dy*dy)/fill.r;break;}return _38b(o,fill.colors);}return new _389(fill||[0,0,0,0]);};_38a.reverse=function(fill){if(fill){switch(fill.type){case "linear":case "radial":fill=lang.delegate(fill);if(fill.colors){var c=fill.colors,l=c.length,i=0,stop,n=fill.colors=new Array(c.length);for(;i<l;++i){stop=c[i];n[i]={offset:1-stop.offset,color:stop.color};}n.sort(function(a,b){return a.offset-b.offset;});}break;}}return fill;};return _38a;});},"dojox/charting/plot2d/Base":function(){define("dojox/charting/plot2d/Base",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","../Element","./_PlotEvents","dojo/_base/array","../scaler/primitive","./common","dojox/gfx/fx"],function(lang,_390,hub,_391,_392,arr,_393,_394,fx){return _390("dojox.charting.plot2d.Base",[_391,_392],{constructor:function(_395,_396){this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};},clear:function(){this.series=[];this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},toPage:function(_397){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromModel(sh),tv=sv.scaler.getTransformerFromModel(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(_398){var r={};r.x=th(_398[ah.name])+c.x+o.l;r.y=c.y+dim.height-o.b-tv(_398[av.name]);return r;};return _397?t(_397):t;},toData:function(_399){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromPlot(sh),tv=sv.scaler.getTransformerFromPlot(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(_39a){var r={};r[ah.name]=th(_39a.x-c.x-o.l);r[av.name]=tv(c.y+dim.height-_39a.y-o.b);return r;};return _399?t(_399):t;},addSeries:function(run){this.series.push(run);return this;},getSeriesStats:function(){return _394.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},isDataDirty:function(){return arr.some(this.series,function(item){return item.dirty;});},performZoom:function(dim,_39b){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_39c=dim.height-_39b.b,_39d=this._hScaler.bounds,_39e=(_39d.from-_39d.lower)*_39d.scale,_39f=this._vScaler.bounds,_3a0=(_39f.from-_39f.lower)*_39f.scale,_3a1=vs/this.lastWindow.vscale,_3a2=hs/this.lastWindow.hscale,_3a3=(this.lastWindow.xoffset-_39e)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),_3a4=(_3a0-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),_3a5=this.group,anim=fx.animateTransform(lang.delegate({shape:_3a5,duration:1200,transform:[{name:"translate",start:[0,0],end:[_39b.l*(1-_3a2),_39c*(1-_3a1)]},{name:"scale",start:[1,1],end:[_3a2,_3a1]},{name:"original"},{name:"translate",start:[0,0],end:[_3a3,_3a4]}]},this.zoom));lang.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_39e,yoffset:_3a0});this.zoomQueue.push(anim);hub.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},render:function(dim,_3a6){return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_3a7){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_3a7.hmin,_3a7.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_393.buildScaler(_3a7.hmin,_3a7.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_3a7.vmin,_3a7.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_393.buildScaler(_3a7.vmin,_3a7.vmax,dim.height);}return this;}});});},"dojox/charting/plot2d/Default":function(){define("dojox/charting/plot2d/Default",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_3a8,arr,Base,dc,df,dfr,du,fx){var _3a9=dfr.lambda("item.purgeGroup()");var _3aa=1200;return _3a8("dojox.charting.plot2d.Default",Base,{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,tension:"",animate:false,enableCache:false},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_3ab,_3ac){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_3ac);du.updateWithPattern(this.opt,_3ac,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},createPath:function(run,_3ad,_3ae){var path;if(this.opt.enableCache&&run._pathFreePool.length>0){path=run._pathFreePool.pop();path.setShape(_3ae);_3ad.add(path);}else{path=_3ad.createPath(_3ae);}if(this.opt.enableCache){run._pathUsePool.push(path);}return path;},render:function(dim,_3af){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_3af);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_3a9);this._eventSeries={};this.cleanGroup();this.group.setTransform(null);var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_3b0,_3b1,_3b2,_3b3=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._pathFreePool=(run._pathFreePool?run._pathFreePool:[]).concat(run._pathUsePool?run._pathUsePool:[]);run._pathUsePool=[];}if(!run.data.length){run.dirty=false;t.skip();continue;}var _3b4=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_3b5=[],_3b6=[],rseg=null,_3b7,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_3b8=this._eventSeries[run.name]=new Array(run.data.length);var _3b9=typeof run.data[0]=="number";var min=_3b9?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,max=_3b9?Math.min(run.data.length,Math.ceil(this._hScaler.bounds.to)):run.data.length;for(var j=min;j<max;j++){if(run.data[j]!=null){if(!rseg){rseg=[];_3b6.push(j);_3b5.push(rseg);}rseg.push(run.data[j]);}else{rseg=null;}}for(var seg=0;seg<_3b5.length;seg++){if(typeof _3b5[seg][0]=="number"){_3b7=arr.map(_3b5[seg],function(v,i){return {x:ht(i+_3b6[seg]+1)+_3af.l,y:dim.height-_3af.b-vt(v)};},this);}else{_3b7=arr.map(_3b5[seg],function(v,i){return {x:ht(v.x)+_3af.l,y:dim.height-_3af.b-vt(v.y)};},this);}var _3ba=this.opt.tension?dc.curve(_3b7,this.opt.tension):"";if(this.opt.areas&&_3b7.length>1){var fill=_3b4.series.fill;var _3bb=lang.clone(_3b7);if(this.opt.tension){var _3bc="L"+_3bb[_3bb.length-1].x+","+(dim.height-_3af.b)+" L"+_3bb[0].x+","+(dim.height-_3af.b)+" L"+_3bb[0].x+","+_3bb[0].y;run.dyn.fill=s.createPath(_3ba+" "+_3bc).setFill(fill).getFill();}else{_3bb.push({x:_3b7[_3b7.length-1].x,y:dim.height-_3af.b});_3bb.push({x:_3b7[0].x,y:dim.height-_3af.b});_3bb.push(_3b7[0]);run.dyn.fill=s.createPolyline(_3bb).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_3b0=_3b4.series.stroke;if(_3b4.series.outline){_3b1=run.dyn.outline=dc.makeStroke(_3b4.series.outline);_3b1.width=2*_3b1.width+_3b0.width;}}if(this.opt.markers){run.dyn.marker=_3b4.symbol;}var _3bd=null,_3be=null,_3bf=null;if(_3b0&&_3b4.series.shadow&&_3b7.length>1){var _3c0=_3b4.series.shadow,_3c1=arr.map(_3b7,function(c){return {x:c.x+_3c0.dx,y:c.y+_3c0.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_3c1,this.opt.tension)).setStroke(_3c0).getStroke();}else{run.dyn.shadow=s.createPolyline(_3c1).setStroke(_3c0).getStroke();}}if(this.opt.markers&&_3b4.marker.shadow){_3c0=_3b4.marker.shadow;_3bf=arr.map(_3c1,function(c){return this.createPath(run,s,"M"+c.x+" "+c.y+" "+_3b4.symbol).setStroke(_3c0).setFill(_3c0.color);},this);}}if(this.opt.lines&&_3b7.length>1){if(_3b1){if(this.opt.tension){run.dyn.outline=s.createPath(_3ba).setStroke(_3b1).getStroke();}else{run.dyn.outline=s.createPolyline(_3b7).setStroke(_3b1).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_3ba).setStroke(_3b0).getStroke();}else{run.dyn.stroke=s.createPolyline(_3b7).setStroke(_3b0).getStroke();}}if(this.opt.markers){_3bd=new Array(_3b7.length);_3be=new Array(_3b7.length);_3b1=null;if(_3b4.marker.outline){_3b1=dc.makeStroke(_3b4.marker.outline);_3b1.width=2*_3b1.width+(_3b4.marker.stroke?_3b4.marker.stroke.width:0);}arr.forEach(_3b7,function(c,i){var path="M"+c.x+" "+c.y+" "+_3b4.symbol;if(_3b1){_3be[i]=this.createPath(run,s,path).setStroke(_3b1);}_3bd[i]=this.createPath(run,s,path).setStroke(_3b4.marker.stroke).setFill(_3b4.marker.fill);},this);run.dyn.markerFill=_3b4.marker.fill;run.dyn.markerStroke=_3b4.marker.stroke;if(_3b3){arr.forEach(_3bd,function(s,i){var o={element:"marker",index:i+_3b6[seg],run:run,shape:s,outline:_3be[i]||null,shadow:_3bf&&_3bf[i]||null,cx:_3b7[i].x,cy:_3b7[i].y};if(typeof _3b5[seg][0]=="number"){o.x=i+_3b6[seg]+1;o.y=_3b5[seg][i];}else{o.x=_3b5[seg][i].x;o.y=_3b5[seg][i].y;}this._connectEvents(o);_3b8[i+_3b6[seg]]=o;},this);}else{delete this._eventSeries[run.name];}}}run.dirty=false;}if(this.animate){var _3c2=this.group;fx.animateTransform(lang.delegate({shape:_3c2,duration:_3aa,transform:[{name:"translate",start:[0,dim.height-_3af.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play();}this.dirty=false;return this;}});});},"dojox/charting/plot2d/StackedLines":function(){define("dojox/charting/plot2d/StackedLines",["dojo/_base/declare","./Stacked"],function(_3c3,_3c4){return _3c3("dojox.charting.plot2d.StackedLines",_3c4,{constructor:function(){this.opt.lines=true;}});});},"dojox/color/Palette":function(){define("dojox/color/Palette",["dojo/_base/kernel","../main","dojo/_base/lang","dojo/_base/array","./_base"],function(dojo,_3c5,lang,arr,dxc){dxc.Palette=function(base){this.colors=[];if(base instanceof dxc.Palette){this.colors=base.colors.slice(0);}else{if(base instanceof dxc.Color){this.colors=[null,null,base,null,null];}else{if(lang.isArray(base)){this.colors=arr.map(base.slice(0),function(item){if(lang.isString(item)){return new dxc.Color(item);}return item;});}else{if(lang.isString(base)){this.colors=[null,null,new dxc.Color(base),null,null];}}}}};function _3c6(p,_3c7,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var r=(_3c7=="dr")?item.r+val:item.r,g=(_3c7=="dg")?item.g+val:item.g,b=(_3c7=="db")?item.b+val:item.b,a=(_3c7=="da")?item.a+val:item.a;ret.colors.push(new dxc.Color({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,b)),a:Math.min(1,Math.max(0,a))}));});return ret;};function tCMY(p,_3c8,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmy(),c=(_3c8=="dc")?o.c+val:o.c,m=(_3c8=="dm")?o.m+val:o.m,y=(_3c8=="dy")?o.y+val:o.y;ret.colors.push(dxc.fromCmy(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y))));});return ret;};function _3c9(p,_3ca,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmyk(),c=(_3ca=="dc")?o.c+val:o.c,m=(_3ca=="dm")?o.m+val:o.m,y=(_3ca=="dy")?o.y+val:o.y,k=(_3ca=="dk")?o.b+val:o.b;ret.colors.push(dxc.fromCmyk(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y)),Math.min(100,Math.max(0,k))));});return ret;};function tHSL(p,_3cb,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsl(),h=(_3cb=="dh")?o.h+val:o.h,s=(_3cb=="ds")?o.s+val:o.s,l=(_3cb=="dl")?o.l+val:o.l;ret.colors.push(dxc.fromHsl(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,l))));});return ret;};function tHSV(p,_3cc,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsv(),h=(_3cc=="dh")?o.h+val:o.h,s=(_3cc=="ds")?o.s+val:o.s,v=(_3cc=="dv")?o.v+val:o.v;ret.colors.push(dxc.fromHsv(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,v))));});return ret;};function _3cd(val,low,high){return high-((high-val)*((high-low)/high));};lang.extend(dxc.Palette,{transform:function(_3ce){var fn=_3c6;if(_3ce.use){var use=_3ce.use.toLowerCase();if(use.indexOf("hs")==0){if(use.charAt(2)=="l"){fn=tHSL;}else{fn=tHSV;}}else{if(use.indexOf("cmy")==0){if(use.charAt(3)=="k"){fn=_3c9;}else{fn=tCMY;}}}}else{if("dc" in _3ce||"dm" in _3ce||"dy" in _3ce){if("dk" in _3ce){fn=_3c9;}else{fn=tCMY;}}else{if("dh" in _3ce||"ds" in _3ce){if("dv" in _3ce){fn=tHSV;}else{fn=tHSL;}}}}var _3cf=this;for(var p in _3ce){if(p=="use"){continue;}_3cf=fn(_3cf,p,_3ce[p]);}return _3cf;},clone:function(){return new dxc.Palette(this);}});lang.mixin(dxc.Palette,{generators:{analogous:function(args){var high=args.high||60,low=args.low||18,base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h=[(hsv.h+low+360)%360,(hsv.h+Math.round(low/2)+360)%360,hsv.h,(hsv.h-Math.round(high/2)+360)%360,(hsv.h-high+360)%360];var s1=Math.max(10,(hsv.s<=95)?hsv.s+5:(100-(hsv.s-95))),s2=(hsv.s>1)?hsv.s-1:21-hsv.s,v1=(hsv.v>=92)?hsv.v-9:Math.max(hsv.v+9,20),v2=(hsv.v<=90)?Math.max(hsv.v+5,20):(95+Math.ceil((hsv.v-90)/2)),s=[s1,s2,hsv.s,s1,s1],v=[v1,v2,hsv.v,v1,v2];return new dxc.Palette(arr.map(h,function(hue,i){return dxc.fromHsv(hue,s[i],v[i]);}));},monochromatic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s1=(hsv.s-30>9)?hsv.s-30:hsv.s+30,s2=hsv.s,v1=_3cd(hsv.v,20,100),v2=(hsv.v-20>20)?hsv.v-20:hsv.v+60,v3=(hsv.v-50>20)?hsv.v-50:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v3),base,dxc.fromHsv(hsv.h,s1,v3),dxc.fromHsv(hsv.h,s2,v2)]);},triadic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=(hsv.h+57+360)%360,h2=(hsv.h-157+360)%360,s1=(hsv.s>20)?hsv.s-10:hsv.s+10,s2=(hsv.s>90)?hsv.s-10:hsv.s+10,s3=(hsv.s>95)?hsv.s-5:hsv.s+5,v1=(hsv.v-20>20)?hsv.v-20:hsv.v+20,v2=(hsv.v-30>20)?hsv.v-30:hsv.v+30,v3=(hsv.v-30>70)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,hsv.v),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h2,s2,v1),dxc.fromHsv(h2,s3,v3)]);},complementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,s1=Math.max(hsv.s-10,0),s2=_3cd(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h1,s3,v2),dxc.fromHsv(h1,hsv.s,hsv.v)]);},splitComplementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,_3d0=args.da||30,hsv=base.toHsv();var _3d1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,h1=(_3d1-_3d0+360)%360,h2=(_3d1+_3d0)%360,s1=Math.max(hsv.s-10,0),s2=_3cd(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v2),dxc.fromHsv(h2,hsv.s,hsv.v)]);},compound:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+18<360)?(hsv.h*2)+18:Math.floor(hsv.h/2)-18,h2=((hsv.h*2)+120<360)?(hsv.h*2)+120:Math.floor(hsv.h/2)-120,h3=((hsv.h*2)+99<360)?(hsv.h*2)+99:Math.floor(hsv.h/2)-99,s1=(hsv.s-40>10)?hsv.s-40:hsv.s+40,s2=(hsv.s-10>80)?hsv.s-10:hsv.s+10,s3=(hsv.s-25>10)?hsv.s-25:hsv.s+25,v1=(hsv.v-40>10)?hsv.v-40:hsv.v+40,v2=(hsv.v-20>80)?hsv.v-20:hsv.v+20,v3=Math.max(hsv.v,20);return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v3),dxc.fromHsv(h3,s2,v2)]);},shades:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s=(hsv.s==100&&hsv.v==0)?0:hsv.s,v1=(hsv.v-50>20)?hsv.v-50:hsv.v+30,v2=(hsv.v-25>=20)?hsv.v-25:hsv.v+55,v3=(hsv.v-75>=20)?hsv.v-75:hsv.v+5,v4=Math.max(hsv.v-10,20);return new dxc.Palette([new dxc.fromHsv(hsv.h,s,v1),new dxc.fromHsv(hsv.h,s,v2),base,new dxc.fromHsv(hsv.h,s,v3),new dxc.fromHsv(hsv.h,s,v4)]);}},generate:function(base,type){if(lang.isFunction(type)){return type({base:base});}else{if(dxc.Palette.generators[type]){return dxc.Palette.generators[type]({base:base});}}throw new Error("dojox.color.Palette.generate: the specified generator ('"+type+"') does not exist.");}});return dxc.Palette;});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n></div>\r\n","dojox/charting/axis2d/common":function(){define("dojox/charting/axis2d/common",["dojo/_base/lang","dojo/_base/html","dojo/_base/window","dojo/dom-geometry","dojox/gfx"],function(lang,html,win,_3d2,g){var _3d3=lang.getObject("dojox.charting.axis2d.common",true);var _3d4=function(s){s.marginLeft="0px";s.marginTop="0px";s.marginRight="0px";s.marginBottom="0px";s.paddingLeft="0px";s.paddingTop="0px";s.paddingRight="0px";s.paddingBottom="0px";s.borderLeftWidth="0px";s.borderTopWidth="0px";s.borderRightWidth="0px";s.borderBottomWidth="0px";};var _3d5=function(n){if(n["getBoundingClientRect"]){var bcr=n.getBoundingClientRect();return bcr.width||(bcr.right-bcr.left);}else{return _3d2.getMarginBox(n).w;}};return lang.mixin(_3d3,{createText:{gfx:function(_3d6,_3d7,x,y,_3d8,text,font,_3d9){return _3d7.createText({x:x,y:y,text:text,align:_3d8}).setFont(font).setFill(_3d9);},html:function(_3da,_3db,x,y,_3dc,text,font,_3dd,_3de){var p=win.doc.createElement("div"),s=p.style,_3df;if(_3da.getTextDir){p.dir=_3da.getTextDir(text);}_3d4(s);s.font=font;p.innerHTML=String(text).replace(/\s/g,"&nbsp;");s.color=_3dd;s.position="absolute";s.left="-10000px";win.body().appendChild(p);var size=g.normalizedLength(g.splitFontString(font).size);if(!_3de){_3df=_3d5(p);}if(p.dir=="rtl"){x+=_3de?_3de:_3df;}win.body().removeChild(p);s.position="relative";if(_3de){s.width=_3de+"px";switch(_3dc){case "middle":s.textAlign="center";s.left=(x-_3de/2)+"px";break;case "end":s.textAlign="right";s.left=(x-_3de)+"px";break;default:s.left=x+"px";s.textAlign="left";break;}}else{switch(_3dc){case "middle":s.left=Math.floor(x-_3df/2)+"px";break;case "end":s.left=Math.floor(x-_3df)+"px";break;default:s.left=Math.floor(x)+"px";break;}}s.top=Math.floor(y-size)+"px";s.whiteSpace="nowrap";var wrap=win.doc.createElement("div"),w=wrap.style;_3d4(w);w.width="0px";w.height="0px";wrap.appendChild(p);_3da.node.insertBefore(wrap,_3da.node.firstChild);return wrap;}}});});},"dojo/fx/easing":function(){define(["../_base/lang"],function(lang){var _3e0={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-_3e0.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return _3e0.bounceIn(n*2)/2;}return (_3e0.bounceOut(n*2-1)/2)+0.5;}};lang.setObject("dojo.fx.easing",_3e0);return _3e0;});},"dojox/charting/plot2d/StackedAreas":function(){define("dojox/charting/plot2d/StackedAreas",["dojo/_base/declare","./Stacked"],function(_3e1,_3e2){return _3e1("dojox.charting.plot2d.StackedAreas",_3e2,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojox/charting/themes/PlotKit/base":function(){define("dojox/charting/themes/PlotKit/base",["dojo/_base/kernel","dojo/_base/lang","../../Theme","../common"],function(dojo,lang,_3e3,_3e4){var pk=lang.getObject("PlotKit",true,_3e4);pk.base=new _3e3({chart:{stroke:null,fill:"yellow"},plotarea:{stroke:null,fill:"yellow"},axis:{stroke:{color:"#fff",width:1},line:{color:"#fff",width:0.5},majorTick:{color:"#fff",width:0.5,length:6},minorTick:{color:"#fff",width:0.5,length:3},tick:{font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#999"}},series:{stroke:{width:2.5,color:"#fff"},fill:"#666",font:"normal normal normal 7.5pt Helvetica,Arial,sans-serif",fontColor:"#666"},marker:{stroke:{width:2},fill:"#333",font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#666"},colors:["red","green","blue"]});pk.base.next=function(_3e5,_3e6,_3e7){var _3e8=_3e3.prototype.next.apply(this,arguments);if(_3e5=="line"){_3e8.marker.outline={width:2,color:"#fff"};_3e8.series.stroke.width=3.5;_3e8.marker.stroke.width=2;}else{if(_3e5=="candlestick"){_3e8.series.stroke.width=1;}else{_3e8.series.stroke.color="#fff";}}return _3e8;};return pk;});},"dojo/data/util/simpleFetch":function(){define(["dojo/_base/lang","dojo/_base/window","./sorter"],function(lang,_3e9,_3ea){var _3eb=lang.getObject("dojo.data.util.simpleFetch",true);_3eb.fetch=function(_3ec){_3ec=_3ec||{};if(!_3ec.store){_3ec.store=this;}var self=this;var _3ed=function(_3ee,_3ef){if(_3ef.onError){var _3f0=_3ef.scope||_3e9.global;_3ef.onError.call(_3f0,_3ee,_3ef);}};var _3f1=function(_3f2,_3f3){var _3f4=_3f3.abort||null;var _3f5=false;var _3f6=_3f3.start?_3f3.start:0;var _3f7=(_3f3.count&&(_3f3.count!==Infinity))?(_3f6+_3f3.count):_3f2.length;_3f3.abort=function(){_3f5=true;if(_3f4){_3f4.call(_3f3);}};var _3f8=_3f3.scope||_3e9.global;if(!_3f3.store){_3f3.store=self;}if(_3f3.onBegin){_3f3.onBegin.call(_3f8,_3f2.length,_3f3);}if(_3f3.sort){_3f2.sort(_3ea.createSortFunction(_3f3.sort,self));}if(_3f3.onItem){for(var i=_3f6;(i<_3f2.length)&&(i<_3f7);++i){var item=_3f2[i];if(!_3f5){_3f3.onItem.call(_3f8,item,_3f3);}}}if(_3f3.onComplete&&!_3f5){var _3f9=null;if(!_3f3.onItem){_3f9=_3f2.slice(_3f6,_3f7);}_3f3.onComplete.call(_3f8,_3f9,_3f3);}};this._fetchItems(_3ec,_3f1,_3ed);return _3ec;};return _3eb;});},"dojox/charting/plot2d/_PlotEvents":function(){define("dojox/charting/plot2d/_PlotEvents",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(lang,arr,_3fa,hub){return _3fa("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={};},destroy:function(){this.resetEvents();this.inherited(arguments);},plotEvent:function(o){},raiseEvent:function(o){this.plotEvent(o);var t=lang.delegate(o);t.originalEvent=o.type;t.originalPlot=o.plot;t.type="onindirect";arr.forEach(this.chart.stack,function(plot){if(plot!==this&&plot.plotEvent){t.plot=plot;plot.plotEvent(t);}},this);},connect:function(_3fb,_3fc){this.dirty=true;return hub.connect(this,"plotEvent",_3fb,_3fc);},events:function(){return !!this.plotEvent.after;},resetEvents:function(){if(this._shapeEvents.length){arr.forEach(this._shapeEvents,function(item){item.shape.disconnect(item.handle);});this._shapeEvents=[];}this.raiseEvent({type:"onplotreset",plot:this});},_connectSingleEvent:function(o,_3fd){this._shapeEvents.push({shape:o.eventMask,handle:o.eventMask.connect(_3fd,this,function(e){o.type=_3fd;o.event=e;this.raiseEvent(o);o.event=null;})});},_connectEvents:function(o){if(o){o.chart=this.chart;o.plot=this;o.hAxis=this.hAxis||null;o.vAxis=this.vAxis||null;o.eventMask=o.eventMask||o.shape;this._connectSingleEvent(o,"onmouseover");this._connectSingleEvent(o,"onmouseout");this._connectSingleEvent(o,"onclick");}},_reconnectEvents:function(_3fe){var a=this._eventSeries[_3fe];if(a){arr.forEach(a,this._connectEvents,this);}},fireEvent:function(_3ff,_400,_401,_402){var s=this._eventSeries[_3ff];if(s&&s.length&&_401<s.length){var o=s[_401];o.type=_400;o.event=_402||null;this.raiseEvent(o);o.event=null;}}});});},"esri/PopupBase":function(){define(["dijit","dojo","dojox"],function(_403,dojo,_404){dojo.provide("esri.PopupBase");dojo.declare("esri.PopupBase",null,{onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){var _405=this._marked;if(_405){this._marked=null;this.showClosestFirst(_405);}},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _406,_407;if(arg[0] instanceof dojo.Deferred){_407=arg;}else{_406=arg;}if(_406){this._updateFeatures(null,_406);}else{this.deferreds=_407;_407=_407.slice(0);dojo.forEach(_407,function(dfd){dfd.addBoth(dojo.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=0;var _408=this.selectedIndex;this.selectedIndex=-1;if(_408>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _409=this.features;if(_409){return _409[this.selectedIndex];}},select:function(_40a){if(_40a<0||_40a>=this.count){return;}this.selectedIndex=_40a;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new esri.Graphic(new esri.geometry.Point(0,0,map.spatialReference)));this._highlighted.hide();var ESYM=esri.symbol;if(!this.markerSymbol){var _40b=(this.markerSymbol=new ESYM.SimpleMarkerSymbol());_40b.setStyle(ESYM.SimpleMarkerSymbol.STYLE_TARGET);_40b._setDim(16,16,7);_40b.setOutline(new ESYM.CartographicLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2,ESYM.CartographicLineSymbol.CAP_ROUND,ESYM.CartographicLineSymbol.JOIN_ROUND));_40b.setColor(new dojo.Color([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new ESYM.SimpleFillSymbol(ESYM.SimpleFillSymbol.STYLE_NULL,new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2),new dojo.Color([0,0,0,0]));}},disableHighlight:function(map){var _40c=this._highlighted;if(_40c){_40c.hide();map.graphics.remove(_40c);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){if(this._highlighted&&this.features&&this.features[this.selectedIndex]){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_40d){var _40e=_40d.geometry,_40f=this._highlighted;if(!_40e||!_40f){return;}_40f.hide();if(!_40f.getLayer()&&map){map.graphics.add(_40f);}_40f.setGeometry(esri.geometry.fromJson(_40e.toJson()));var _410;switch(_40e.type){case "point":case "multipoint":_410=this.markerSymbol;_410.setOffset(0,0);_410.setAngle(0);var lyr=_40d.getLayer();if(lyr){var _411=lyr._getSymbol(_40d),_412,_413,xoff=0,yoff=0,_414=0;if(_411){switch(_411.type){case "simplemarkersymbol":_412=_413=(_411.size||0);break;case "picturemarkersymbol":_412=(_411.width||0);_413=(_411.height||0);break;}xoff=_411.xoffset||0;yoff=_411.yoffset||0;_414=_411.angle||0;}if(_412&&_413){_410._setDim(_412+1,_413+1,7);}_410.setOffset(xoff,yoff);_410.setAngle(_414);}break;case "polyline":_410=this.lineSymbol;break;case "polygon":_410=this.fillSymbol;break;}_40f.setSymbol(_410);},showClosestFirst:function(_415){var _416=this.features;if(_416&&_416.length){if(_416.length>1){var i,_417=Infinity,_418=-1,geom,_419=esri.geometry.getLength,_41a;for(i=_416.length-1;i>=0;i--){geom=_416[i].geometry;_41a=0;try{_41a=(geom.type==="point")?_419(_415,geom):_419(_415,geom.getExtent().getCenter());}catch(e){}if(_41a>0&&_41a<_417){_417=_41a;_418=i;}}if(_418>0){_416.splice(0,0,_416.splice(_418,1)[0]);this.select(0);}}}else{if(this.deferreds){this._marked=_415;}}},_unbind:function(dfd){var _41b=dojo.indexOf(this.deferreds,dfd);if(_41b===-1){return;}this.deferreds.splice(_41b,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_updateFeatures:function(dfd,_41c){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_41c&&_41c instanceof Error){this.onDfdComplete(_41c);if(res===2){this.onSetFeatures();}return;}if(_41c&&_41c.length){if(!this.features){this.features=_41c;this.count=_41c.length;this.selectedIndex=0;this.onDfdComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _41d=dojo.filter(_41c,function(_41e){return dojo.indexOf(this.features,_41e)===-1;},this);this.features=this.features.concat(_41d);this.count=this.features.length;this.onDfdComplete();if(res===2){this.onSetFeatures();}}}else{this.onDfdComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_41c;this.count=_41c.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});dojo.declare("esri.PopupInfoTemplate",[esri.InfoTemplate],{"-chains-":{constructor:"manual"},initialize:function(json){if(!json){return;}this.info=json;this.title=this.getTitle;this.content=this.getContent;var _41f=(this._fieldLabels={}),_420=(this._fieldsMap={});if(json.fieldInfos){dojo.forEach(json.fieldInfos,function(_421){_41f[_421.fieldName]=_421.label;_420[_421.fieldName]=_421;});}},toJson:function(){return dojo.fromJson(dojo.toJson(this.info));},getTitle:function(){},getContent:function(){},getComponents:function(_422){var _423=this.info,_424=_422.getLayer(),_425=dojo.clone(_422.attributes)||{},_426=dojo.clone(_425),_427=_423.fieldInfos,_428="",_429="",_42a,_42b,_42c,_42d=_424&&_424._getDateOpts&&_424._getDateOpts().properties,_42e={dateFormat:{properties:_42d,formatter:"DateFormat"+this._dateFormats["shortDateShortTime"]}};if(_427){dojo.forEach(_427,function(_42f){var _430=_42f.fieldName,val=_426[_430];_426[_430]=this._formatValue(val,_430,_42e);if(_42d&&_42f.format&&_42f.format.dateFormat){var pos=dojo.indexOf(_42d,_430);if(pos>-1){_42d.splice(pos,1);}}},this);}if(_424){var _431=_424.types,_432=_424.typeIdField,_433=_432&&_425[_432];for(_42b in _425){_42c=_425[_42b];if(esri._isDefined(_42c)){var _434=this._getDomainName(_424,_431,_433,_42b,_42c);if(esri._isDefined(_434)){_426[_42b]=_434;}else{if(_42b===_432){var _435=this._getTypeName(_424,_42c);if(esri._isDefined(_435)){_426[_42b]=_435;}}}}}}if(_423.title){_428=dojo.trim(esri.substitute(_426,this._fixTokens(_423.title),_42e)||"");}if(_423.description){_429=dojo.trim(esri.substitute(_426,this._fixTokens(_423.description),_42e)||"");}if(_427){_42a=[];dojo.forEach(_427,function(_436){_42b=_436.fieldName;if(_42b&&_436.visible){_42a.push([_436.label||_42b,esri.substitute(_426,"${"+_42b+"}",_42e)||""]);}});}var _437,_438;if(_423.mediaInfos){_437=[];dojo.forEach(_423.mediaInfos,function(_439){_438=0;_42c=_439.value;switch(_439.type){case "image":var url=_42c.sourceURL;url=url&&dojo.trim(esri.substitute(_425,this._fixTokens(url)));_438=!!url;break;case "piechart":case "linechart":case "columnchart":case "barchart":_438=dojo.some(_42c.fields,function(_43a){return esri._isDefined(_425[_43a]);});break;default:return;}if(_438){_439=dojo.clone(_439);_42c=_439.value;_439.title=_439.title?dojo.trim(esri.substitute(_426,this._fixTokens(_439.title),_42e)||""):"";_439.caption=_439.caption?dojo.trim(esri.substitute(_426,this._fixTokens(_439.caption),_42e)||""):"";if(_439.type==="image"){_42c.sourceURL=esri.substitute(_425,this._fixTokens(_42c.sourceURL));if(_42c.linkURL){_42c.linkURL=dojo.trim(esri.substitute(_425,this._fixTokens(_42c.linkURL))||"");}}else{var _43b=_425[_42c.normalizeField]||0;_42c.fields=dojo.map(_42c.fields,function(_43c){var data=_425[_43c];data=(data===undefined)?null:data;if(data&&_43b){data=data/_43b;}return {y:data,tooltip:(this._fieldLabels[_43c]||_43c)+":<br/>"+this._formatValue(data,_43c,_42e)};},this);}_437.push(_439);}},this);}return {title:_428,description:_429,fields:(_42a&&_42a.length)?_42a:null,mediaInfos:(_437&&_437.length)?_437:null,formatted:_426,editSummary:(_424&&_424.getEditSummary)?_424.getEditSummary(_422):""};},getAttachments:function(_43d){var _43e=_43d.getLayer(),_43f=_43d.attributes;if(this.info.showAttachments&&_43e&&_43e.hasAttachments&&_43e.objectIdField){var oid=_43f&&_43f[_43e.objectIdField];if(oid){return _43e.queryAttachmentInfos(oid);}}},_dateFormats:{"shortDate":"(datePattern: 'M/d/y', selector: 'date')","longMonthDayYear":"(datePattern: 'MMMM d, y', selector: 'date')","dayShortMonthYear":"(datePattern: 'd MMM y', selector: 'date')","longDate":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","shortDateShortTime":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","shortDateShortTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","longMonthYear":"(datePattern: 'MMMM y', selector: 'date')","shortMonthYear":"(datePattern: 'MMM y', selector: 'date')","year":"(datePattern: 'y', selector: 'date')"},_fixTokens:function(_440){return _440.replace(/(\{[^\{\r\n]+\})/g,"$$$1");},_formatValue:function(val,_441,_442){var _443=this._fieldsMap[_441],fmt=_443&&_443.format;if(!esri._isDefined(val)||!_443||!esri._isDefined(fmt)){return val;}var _444="",_445=[],_446=fmt.hasOwnProperty("places")||fmt.hasOwnProperty("digitSeparator"),_447=fmt.hasOwnProperty("digitSeparator")?fmt.digitSeparator:true;if(_446){_444="NumberFormat";_445.push("places: "+(esri._isDefined(fmt.places)?Number(fmt.places):"Infinity"));if(_445.length){_444+=("("+_445.join(",")+")");}}else{if(fmt.dateFormat){_444="DateFormat"+(this._dateFormats[fmt.dateFormat]||this._dateFormats["shortDateShortTime"]);}else{return val;}}var _448=esri.substitute({"myKey":val},"${myKey:"+_444+"}",_442)||"";if(_446&&!_447){var _449=dojo.i18n.getLocalization("dojo.cldr","number");if(_449.group){_448=_448.replace(new RegExp("\\"+_449.group,"g"),"");}}return _448;},_getDomainName:function(_44a,_44b,_44c,_44d,_44e){var _44f,stop;if(_44b&&esri._isDefined(_44c)){dojo.some(_44b,function(_450){if(_450.id==_44c){_44f=_450.domains&&_450.domains[_44d];if(_44f&&_44f.type==="inherited"){_44f=this._getLayerDomain(_44a,_44d);stop=true;}return true;}return false;},this);}if(!stop&&!_44f){_44f=this._getLayerDomain(_44a,_44d);}if(_44f&&_44f.codedValues){var _451;dojo.some(_44f.codedValues,function(_452){if(_452.code==_44e){_451=_452.name;return true;}return false;});return _451;}},_getLayerDomain:function(_453,_454){var _455=_453.fields;if(_455){var _456;dojo.some(_455,function(_457){if(_457.name===_454){_456=_457.domain;return true;}return false;});return _456;}},_getTypeName:function(_458,id){var _459=_458.types;if(_459){var _45a;dojo.some(_459,function(_45b){if(_45b.id==id){_45a=_45b.name;return true;}return false;});return _45a;}}});});},"dojox/charting/Element":function(){define("dojox/charting/Element",["dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/utils","dojox/gfx/shape"],function(lang,arr,_45c,_45d,gfx,_45e,_45f){return _45d("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:true,constructor:function(_460){this.chart=_460;this.group=null;this.htmlElements=[];this.dirty=true;this.trailingSymbol="...";this._events=[];},createGroup:function(_461){if(!_461){_461=this.chart.surface;}if(!this.group){this.group=_461.createGroup();}return this;},purgeGroup:function(){this.destroyHtmlElements();if(this.group){_45e.forEach(this.group,function(_462){_45f.dispose(_462);});this.group.clear();this.group.removeShape();this.group=null;}this.dirty=true;if(this._events.length){arr.forEach(this._events,function(item){item.shape.disconnect(item.handle);});this._events=[];}return this;},cleanGroup:function(_463){this.destroyHtmlElements();if(!_463){_463=this.chart.surface;}if(this.group){this.group.clear();}else{this.group=_463.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){arr.forEach(this.htmlElements,_45c.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();},getTextWidth:function(s,font){return gfx._base._getTextBox(s,{font:font}).w||0;},getTextWithLimitLength:function(s,font,_464,_465){if(!s||s.length<=0){return {text:"",truncated:_465||false};}if(!_464||_464<=0){return {text:s,truncated:_465||false};}var _466=2,_467=0.618,_468=s.substring(0,1)+this.trailingSymbol,_469=this.getTextWidth(_468,font);if(_464<=_469){return {text:_468,truncated:true};}var _46a=this.getTextWidth(s,font);if(_46a<=_464){return {text:s,truncated:_465||false};}else{var _46b=0,end=s.length;while(_46b<end){if(end-_46b<=_466){while(this.getTextWidth(s.substring(0,_46b)+this.trailingSymbol,font)>_464){_46b-=1;}return {text:(s.substring(0,_46b)+this.trailingSymbol),truncated:true};}var _46c=_46b+Math.round((end-_46b)*_467),_46d=this.getTextWidth(s.substring(0,_46c),font);if(_46d<_464){_46b=_46c;end=end;}else{_46b=_46b;end=_46c;}}}},getTextWithLimitCharCount:function(s,font,_46e,_46f){if(!s||s.length<=0){return {text:"",truncated:_46f||false};}if(!_46e||_46e<=0||s.length<=_46e){return {text:s,truncated:_46f||false};}return {text:s.substring(0,_46e)+this.trailingSymbol,truncated:true};},_plotFill:function(fill,dim,_470){if(!fill||!fill.type||!fill.space){return fill;}var _471=fill.space;switch(fill.type){case "linear":if(_471==="plot"||_471==="shapeX"||_471==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_471;if(_471==="plot"||_471==="shapeX"){var span=dim.height-_470.t-_470.b;fill.y1=_470.t+span*fill.y1/100;fill.y2=_470.t+span*fill.y2/100;}if(_471==="plot"||_471==="shapeY"){var span=dim.width-_470.l-_470.r;fill.x1=_470.l+span*fill.x1/100;fill.x2=_470.l+span*fill.x2/100;}}break;case "radial":if(_471==="plot"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_471;var _472=dim.width-_470.l-_470.r,_473=dim.height-_470.t-_470.b;fill.cx=_470.l+_472*fill.cx/100;fill.cy=_470.t+_473*fill.cy/100;fill.r=fill.r*Math.sqrt(_472*_472+_473*_473)/200;}break;case "pattern":if(_471==="plot"||_471==="shapeX"||_471==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_471;if(_471==="plot"||_471==="shapeX"){var span=dim.height-_470.t-_470.b;fill.y=_470.t+span*fill.y/100;fill.height=span*fill.height/100;}if(_471==="plot"||_471==="shapeY"){var span=dim.width-_470.l-_470.r;fill.x=_470.l+span*fill.x/100;fill.width=span*fill.width/100;}}break;}return fill;},_shapeFill:function(fill,bbox){if(!fill||!fill.space){return fill;}var _474=fill.space;switch(fill.type){case "linear":if(_474==="shape"||_474==="shapeX"||_474==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_474;if(_474==="shape"||_474==="shapeX"){var span=bbox.width;fill.x1=bbox.x+span*fill.x1/100;fill.x2=bbox.x+span*fill.x2/100;}if(_474==="shape"||_474==="shapeY"){var span=bbox.height;fill.y1=bbox.y+span*fill.y1/100;fill.y2=bbox.y+span*fill.y2/100;}}break;case "radial":if(_474==="shape"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_474;fill.cx=bbox.x+bbox.width/2;fill.cy=bbox.y+bbox.height/2;fill.r=fill.r*bbox.width/200;}break;case "pattern":if(_474==="shape"||_474==="shapeX"||_474==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_474;if(_474==="shape"||_474==="shapeX"){var span=bbox.width;fill.x=bbox.x+span*fill.x/100;fill.width=span*fill.width/100;}if(_474==="shape"||_474==="shapeY"){var span=bbox.height;fill.y=bbox.y+span*fill.y/100;fill.height=span*fill.height/100;}}break;}return fill;},_pseudoRadialFill:function(fill,_475,_476,_477,end){if(!fill||fill.type!=="radial"||fill.space!=="shape"){return fill;}var _478=fill.space;fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_478;if(arguments.length<4){fill.cx=_475.x;fill.cy=_475.y;fill.r=fill.r*_476/100;return fill;}var _479=arguments.length<5?_477:(end+_477)/2;return {type:"linear",x1:_475.x,y1:_475.y,x2:_475.x+fill.r*_476*Math.cos(_479)/100,y2:_475.y+fill.r*_476*Math.sin(_479)/100,colors:fill.colors};return fill;}});});},"dojox/charting/axis2d/Base":function(){define("dojox/charting/axis2d/Base",["dojo/_base/declare","../Element"],function(_47a,_47b){return _47a("dojox.charting.axis2d.Base",_47b,{constructor:function(_47c,_47d){this.vertical=_47d&&_47d.vertical;},clear:function(){return this;},initialized:function(){return false;},calculate:function(min,max,span){return this;},getScaler:function(){return null;},getTicks:function(){return null;},getOffsets:function(){return {l:0,r:0,t:0,b:0};},render:function(dim,_47e){this.dirty=false;return this;}});});},"dojox/lang/functional/scan":function(){define("dojox/lang/functional/scan",["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(d,_47f,df){var _480={};d.mixin(df,{scanl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array((n=a.length)+1);t[0]=z;for(i=0;i<n;z=f.call(o,z,a[i],i,a),t[++i]=z){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[z];for(i=0;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}else{t=[z];for(i in a){if(!(i in _480)){t.push(z=f.call(o,z,a[i],i,a));}}}}return t;},scanl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,z,_481=true;if(d.isArray(a)){t=new Array(n=a.length);t[0]=z=a[0];for(var i=1;i<n;t[i]=z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){t=[z=a.next()];for(i=1;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}}else{for(i in a){if(!(i in _480)){if(_481){t=[z=a[i]];_481=false;}else{t.push(z=f.call(o,z,a[i],i,a));}}}}}return t;},scanr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n+1),i=n;t[n]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;},scanr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),z=a[n-1],i=n-1;t[i]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;}});});},"esri/layers/wms":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/dynamic,esri/layers/agscommon"],function(_482,dojo,_483){dojo.provide("esri.layers.wms");dojo.require("esri.layers.dynamic");dojo.require("esri.layers.agscommon");dojo.declare("esri.layers.WMSLayer",[esri.layers.DynamicMapServiceLayer],{_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],constructor:function(url,_484){url=this._stripParameters(url,["version","service","request","bbox","format","height","width","layers","srs","crs","styles","transparent","bgcolor","exceptions","time","elevation","sld","wfs"]);this.url=url;this._url=esri.urlToObject(url);this._getCapabilitiesURL=url;this._initLayer=dojo.hitch(this,this._initLayer);this._parseCapabilities=dojo.hitch(this,this._parseCapabilities);this._getCapabilitiesError=dojo.hitch(this,this._getCapabilitiesError);if(_484){this.imageFormat=this._getImageFormat(_484.format);this.imageTransparency=(_484.transparent===false)?false:true;this.visibleLayers=_484.visibleLayers?_484.visibleLayers:[];if(_484.resourceInfo){this._readResourceInfo(_484.resourceInfo);}else{this._getCapabilities();}}else{this.imageFormat="image/png";this.imageTransparency=true;this.visibleLayers=[];this._getCapabilities();}this._blankImageURL=require.toUrl("esri/layers")+"/../../../images/pixel.png";},setVisibleLayers:function(_485){_485=this._checkVisibleLayersList(_485);this.visibleLayers=(_485)?_485:[];this.refresh(true);},setImageFormat:function(_486){this.imageFormat=this._getImageFormat(_486);this.refresh(true);},setImageTransparency:function(_487){this.imageTransparency=_487;this.refresh(true);},getImageUrl:function(_488,_489,_48a,_48b){if(!this.visibleLayers||this.visibleLayers.length===0){_48b(this._blankImageURL);return;}var wkid=_488.spatialReference.wkid;if(dojo.some(this._WEB_MERCATOR,function(el){return el==wkid;})){var _48c=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WEB_MERCATOR,function(el2){return el2==el;}));},this);if(_48c.length==0){_48c=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WORLD_MERCATOR,function(el2){return el2==el;}));},this);}if(_48c.length>0){wkid=_48c[0];}else{wkid=this._WEB_MERCATOR[0];}}var list=dojo.filter(this.spatialReferences,function(el){return el!==wkid;});this.spatialReferences=list;this.spatialReferences.unshift(wkid);var xmin=_488.xmin;var xmax=_488.xmax;var ymin=_488.ymin;var ymax=_488.ymax;var _48d={};_48d.SERVICE="WMS";_48d.REQUEST="GetMap";_48d.FORMAT=this.imageFormat;_48d.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";_48d.STYLES="";_48d.VERSION=this.version;_48d.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;_48d.WIDTH=_489;_48d.HEIGHT=_48a;if(this.maxWidth<_489){_48d.WIDTH=this.maxWidth;}if(this.maxHeight<_48a){_48d.HEIGHT=this.maxHeight;}var _48e=wkid?wkid:NaN;if(!isNaN(_48e)){if(this.version=="1.3.0"){_48d.CRS="EPSG:"+_48e;}else{_48d.SRS="EPSG:"+_48e;}}if(this.version=="1.3.0"&&this._useLatLong(_48e)){_48d.BBOX=ymin+","+xmin+","+ymax+","+xmax;}else{_48d.BBOX=xmin+","+ymin+","+xmax+","+ymax;}var _48f=this.getMapURL;_48f+=(_48f.indexOf("?")==-1)?"?":"";for(var key in _48d){_48f+=(_48f.substring(_48f.length-1,_48f.length)=="?")?"":"&";_48f+=key+"="+_48d[key];}_48b(_48f);},_initLayer:function(_490,io){this.spatialReference=new esri.SpatialReference(this.extent.spatialReference);this.initialExtent=new esri.geometry.Extent(this.extent);this.fullExtent=new esri.geometry.Extent(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);this.loaded=true;this.onLoad(this);var _491=this._loadCallback;if(_491){delete this._loadCallback;_491(this);}},_readResourceInfo:function(_492){if(!_492.extent){console.error("esri.layers.WMSLayer: unable to find the 'extent' property in resourceInfo");return;}if(!_492.layerInfos){console.error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo");return;}this.extent=_492.extent;this.allExtents[0]=_492.extent;this.layerInfos=_492.layerInfos;this.description=_492.description?_492.description:"";this.copyright=_492.copyright?_492.copyright:"";this.title=_492.title?_492.title:"";this.getMapURL=_492.getMapURL?_492.getMapURL:this._getCapabilitiesURL;this.version=_492.version?_492.version:"1.3.0";this.maxWidth=_492.maxWidth?_492.maxWidth:5000;this.maxHeight=_492.maxHeight?_492.maxHeight:5000;this.spatialReferences=_492.spatialReferences?_492.spatialReferences:[];this.imageFormat=this._getImageFormat(_492.format);this._initLayer();},_getCapabilities:function(){var _493=this._url.query?this._url.query:{};_493.SERVICE="WMS";_493.REQUEST="GetCapabilities";var uri=this._url.path+"?";for(var key in _493){uri+=(uri.substring(uri.length-1,uri.length)=="?")?"":"&";uri+=key+"="+_493[key];}var _494=esri.request({url:uri,handleAs:"xml",load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:false});},_parseCapabilities:function(xml){if(!xml){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)");return;}this.version=this._getAttributeValue("WMS_Capabilities","version",xml,null);if(!this.version){this.version=this._getAttributeValue("WMT_MS_Capabilities","version",xml,"1.3.0");}var _495=this._getTag("Service",xml);this.title=this._getTagValue("Title",_495,"");if(!this.title||this.title.length==0){this.title=this._getTagValue("Name",_495,"");}this.copyright=this._getTagValue("AccessConstraints",_495,"");this.description=this._getTagValue("Abstract",_495,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",_495,5000));this.maxHeight=parseInt(this._getTagValue("MaxHeight",_495,5000));var _496=this._getTag("Layer",xml);if(!_496){this._getCapabilitiesError({"error":{"message":"Response does not contain any layers."}});return;}var _497=this._getLayerInfo(_496);if(_497){this.layerInfos=_497.subLayers;if(!this.layerInfos||this.layerInfos.length==0){this.layerInfos=[_497];}this.extent=_497.extent;this.allExtents=_497.allExtents;this.spatialReferences=_497.spatialReferences;if(this.spatialReferences.length==0&&this.layerInfos.length>0){this.spatialReferences=this.layerInfos[0].spatialReferences;}}this.getMapURL=this._getCapabilitiesURL;var _498=dojo.query("DCPType",this._getTag("GetMap",xml));if(_498&&_498.length>0){var _499=dojo.query("HTTP",_498[0]);if(_499&&_499.length>0){var _49a=dojo.query("Get",_499[0]);if(_49a&&_49a.length>0){var _49b=this._getAttributeValue("OnlineResource","xlink:href",_49a[0],null);if(_49b){if(_49b.indexOf("&")==(_49b.length-1)){_49b=_49b.substring(0,_49b.length-1);}this.getMapURL=_49b;}}}}this.getMapFormats=[];if(dojo.query("Operation",xml).length==0){dojo.forEach(dojo.query("Format",this._getTag("GetMap",xml)),function(_49c){this.getMapFormats.push(_49c.text?_49c.text:_49c.textContent);},this);}else{dojo.forEach(dojo.query("Operation",xml),function(_49d){if(_49d.getAttribute("name")=="GetMap"){dojo.forEach(dojo.query("Format",_49d),function(_49e){this.getMapFormats.push(_49e.text?_49e.text:_49e.textContent);},this);}},this);}if(!dojo.some(this.getMapFormats,function(el){return el.indexOf(this.imageFormat)>-1;},this)){this.imageFormat=this.getMapFormats[0];}this._initLayer();},_getCapabilitiesError:function(_49f,io){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+dojo.toJson(_49f)+")");},_getLayerInfo:function(_4a0){if(!_4a0){return null;}var _4a1=new esri.layers.WMSLayerInfo();_4a1.name="";_4a1.title="";_4a1.description="";_4a1.allExtents=[];_4a1.spatialReferences=[];_4a1.subLayers=[];var _4a2=this._getTag("LatLonBoundingBox",_4a0);if(_4a2){_4a1.allExtents[0]=this._getExtent(_4a2,4326);}var _4a3=this._getTag("EX_GeographicBoundingBox",_4a0);if(_4a3){var _4a4=new esri.geometry.Extent(0,0,0,0,new esri.SpatialReference({wkid:4326}));_4a4.xmin=parseFloat(this._getTagValue("westBoundLongitude",_4a3,0));_4a4.ymin=parseFloat(this._getTagValue("southBoundLatitude",_4a3,0));_4a4.xmax=parseFloat(this._getTagValue("eastBoundLongitude",_4a3,0));_4a4.ymax=parseFloat(this._getTagValue("northBoundLatitude",_4a3,0));_4a1.allExtents[0]=_4a4;}_4a1.extent=_4a1.allExtents[0];var _4a5=(dojo.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)>-1)?"SRS":"CRS";dojo.forEach(_4a0.childNodes,function(_4a6){if(_4a6.nodeName=="Name"){_4a1.name=(_4a6.text?_4a6.text:_4a6.textContent)||"";}else{if(_4a6.nodeName=="Title"){_4a1.title=(_4a6.text?_4a6.text:_4a6.textContent)||"";}else{if(_4a6.nodeName=="Abstract"){_4a1.description=(_4a6.text?_4a6.text:_4a6.textContent)||"";}else{if(_4a6.nodeName=="BoundingBox"){srAttr=_4a6.getAttribute(_4a5);if(srAttr&&srAttr.indexOf("EPSG:")===0){wkid=parseInt(srAttr.substring(5));if(wkid!==0&&!isNaN(wkid)){var _4a7;if(this.version=="1.3.0"){_4a7=this._getExtent(_4a6,wkid,this._useLatLong(wkid));}else{_4a7=this._getExtent(_4a6,wkid);}_4a1.allExtents[wkid]=_4a7;if(!_4a1.extent){_4a1.extent=_4a7;}}}else{if(srAttr&&srAttr.indexOf("CRS:")===0){wkid=parseInt(srAttr.substring(4));if(wkid!==0&&!isNaN(wkid)){if(this._CRS_TO_EPSG[wkid]){wkid=this._CRS_TO_EPSG[wkid];}_4a1.allExtents[wkid]=this._getExtent(_4a6,wkid);}}else{wkid=parseInt(srAttr);if(wkid!==0&&!isNaN(wkid)){_4a1.allExtents[wkid]=this._getExtent(_4a6,wkid);}}}}else{if(_4a6.nodeName==_4a5){var _4a8=_4a6.text?_4a6.text:_4a6.textContent;var arr=_4a8.split(" ");dojo.forEach(arr,function(val){if(val.indexOf(":")>-1){val=parseInt(val.split(":")[1]);}else{val=parseInt(val);}if(val!==84&&val!==0&&!isNaN(val)){if(!dojo.some(_4a1.spatialReferences,function(el){return (el==val);})){_4a1.spatialReferences.push(val);}}},this);}else{if(_4a6.nodeName=="Style"){var _4a9=this._getTag("LegendURL",_4a6);if(_4a9){var _4aa=this._getTag("OnlineResource",_4a9);if(_4aa){_4a1.legendURL=_4aa.getAttribute("xlink:href");}}}else{if(_4a6.nodeName==="Layer"){_4a1.subLayers.push(this._getLayerInfo(_4a6));}}}}}}}},this);return _4a1;},_getImageFormat:function(_4ab){var _4ac=_4ab?_4ab.toLowerCase():"";switch(_4ac){case "jpg":return "image/jpeg";case "bmp":return "image/bmp";case "gif":return "image/gif";case "svg":return "image/svg+xml";default:return "image/png";}},getImageFormat:function(){var _4ad=this.imageFormat?this.imageFormat.toLowerCase():"";switch(_4ad){case "image/jpeg":return "jpg";case "image/bmp":return "bmp";case "image/gif":return "gif";case "image/svg+xml":return "svg";default:return "png";}},_getExtent:function(_4ae,wkid,_4af){var _4b0;if(_4ae){_4b0=new esri.geometry.Extent();var minx=parseFloat(_4ae.getAttribute("minx"));var miny=parseFloat(_4ae.getAttribute("miny"));var maxx=parseFloat(_4ae.getAttribute("maxx"));var maxy=parseFloat(_4ae.getAttribute("maxy"));if(_4af){_4b0.xmin=isNaN(miny)?((-1)*Number.MAX_VALUE):miny;_4b0.ymin=isNaN(minx)?((-1)*Number.MAX_VALUE):minx;_4b0.xmax=isNaN(maxy)?Number.MAX_VALUE:maxy;_4b0.ymax=isNaN(maxx)?Number.MAX_VALUE:maxx;}else{_4b0.xmin=isNaN(minx)?((-1)*Number.MAX_VALUE):minx;_4b0.ymin=isNaN(miny)?((-1)*Number.MAX_VALUE):miny;_4b0.xmax=isNaN(maxx)?Number.MAX_VALUE:maxx;_4b0.ymax=isNaN(maxy)?Number.MAX_VALUE:maxy;}_4b0.spatialReference=new esri.SpatialReference({wkid:wkid});}return _4b0;},_useLatLong:function(wkid){var _4b1;for(var i=0;i<this._REVERSED_LAT_LONG_RANGES.length;i++){var _4b2=this._REVERSED_LAT_LONG_RANGES[i];if(wkid>=_4b2[0]&&wkid<=_4b2[1]){_4b1=true;break;}}return _4b1;},_getTag:function(_4b3,xml){var tags=dojo.query(_4b3,xml);if(tags&&tags.length>0){return tags[0];}else{return null;}},_getTagValue:function(_4b4,xml,_4b5){var _4b6=dojo.query(_4b4,xml);if(_4b6&&_4b6.length>0){if(_4b6[0].text){return _4b6[0].text;}else{return _4b6[0].textContent;}}else{return _4b5;}},_getAttributeValue:function(_4b7,_4b8,xml,_4b9){var _4ba=dojo.query(_4b7,xml);if(_4ba&&_4ba.length>0){return _4ba[0].getAttribute(_4b8);}else{return _4b9;}},_checkVisibleLayersList:function(_4bb){if(_4bb&&_4bb.length>0&&this.layerInfos&&this.layerInfos.length>0){if((typeof _4bb[0])=="number"){var list=[];dojo.forEach(_4bb,function(pos){if(pos<this.layerInfos.length){list.push(this.layerInfos[pos].name);}},this);_4bb=list;}}return _4bb;},_stripParameters:function(url,_4bc){var obj=esri.urlToObject(url);qs=[];for(var prop in obj.query){if(dojo.indexOf(_4bc,prop.toLowerCase())===-1){qs.push(prop+"="+obj.query[prop]);}}return obj.path+(qs.length?("?"+qs.join("&")):"");}});dojo.declare("esri.layers.WMSLayerInfo",null,{name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],constructor:function(_4bd){if(_4bd){this.name=_4bd.name;this.title=_4bd.title;this.description=_4bd.description;this.extent=_4bd.extent;this.legendURL=_4bd.legendURL;this.subLayers=_4bd.subLayers?_4bd.subLayers:[];this.allExtents=_4bd.allExtents?_4bd.allExtents:[];this.spatialReferences=_4bd.spatialReferences?_4bd.spatialReferences:[];}},clone:function(){var info={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL};if(this.extent){info.extent=this.extent.getExtent();}info.subLayers=[];dojo.forEach(this.subLayers,function(_4be){info.subLayers.push(_4be.clone());});info.allExtents=[];for(var wkid in this.allExtents){wkid=parseInt(wkid);if(!isNaN(wkid)){info.allExtents[wkid]=this.allExtents[wkid].getExtent();}}info.spatialReferences=[];dojo.forEach(this.spatialReferences,function(wkid){info.spatialReferences.push(wkid);});return info;}});});},"dojox/charting/scaler/primitive":function(){define("dojox/charting/scaler/primitive",["dojo/_base/lang"],function(lang){var _4bf=lang.getObject("dojox.charting.scaler.primitive",true);return lang.mixin(_4bf,{buildScaler:function(min,max,span,_4c0){if(min==max){min-=0.5;max+=0.5;}return {bounds:{lower:min,upper:max,from:min,to:max,scale:span/(max-min),span:span},scaler:_4bf};},buildTicks:function(_4c1,_4c2){return {major:[],minor:[],micro:[]};},getTransformerFromModel:function(_4c3){var _4c4=_4c3.bounds.from,_4c5=_4c3.bounds.scale;return function(x){return (x-_4c4)*_4c5;};},getTransformerFromPlot:function(_4c6){var _4c7=_4c6.bounds.from,_4c8=_4c6.bounds.scale;return function(x){return x/_4c8+_4c7;};}});});},"dojox/gfx/fx":function(){define("dojox/gfx/fx",["dojo/_base/lang","./_base","./matrix","dojo/_base/Color","dojo/_base/array","dojo/_base/fx","dojo/_base/connect"],function(lang,g,m,_4c9,arr,fx,Hub){var fxg=g.fx={};function _4ca(_4cb,end){this.start=_4cb,this.end=end;};_4ca.prototype.getValue=function(r){return (this.end-this.start)*r+this.start;};function _4cc(_4cd,end,_4ce){this.start=_4cd,this.end=end;this.units=_4ce;};_4cc.prototype.getValue=function(r){return (this.end-this.start)*r+this.start+this.units;};function _4cf(_4d0,end){this.start=_4d0,this.end=end;this.temp=new _4c9();};_4cf.prototype.getValue=function(r){return _4c9.blendColors(this.start,this.end,r,this.temp);};function _4d1(_4d2){this.values=_4d2;this.length=_4d2.length;};_4d1.prototype.getValue=function(r){return this.values[Math.min(Math.floor(r*this.length),this.length-1)];};function _4d3(_4d4,def){this.values=_4d4;this.def=def?def:{};};_4d3.prototype.getValue=function(r){var ret=lang.clone(this.def);for(var i in this.values){ret[i]=this.values[i].getValue(r);}return ret;};function _4d5(_4d6,_4d7){this.stack=_4d6;this.original=_4d7;};_4d5.prototype.getValue=function(r){var ret=[];arr.forEach(this.stack,function(t){if(t instanceof m.Matrix2D){ret.push(t);return;}if(t.name=="original"&&this.original){ret.push(this.original);return;}if(!(t.name in m)){return;}var f=m[t.name];if(typeof f!="function"){ret.push(f);return;}var val=arr.map(t.start,function(v,i){return (t.end[i]-v)*r+v;}),_4d8=f.apply(m,val);if(_4d8 instanceof m.Matrix2D){ret.push(_4d8);}},this);return ret;};var _4d9=new _4c9(0,0,0,0);function _4da(prop,obj,name,def){if(prop.values){return new _4d1(prop.values);}var _4db,_4dc,end;if(prop.start){_4dc=g.normalizeColor(prop.start);}else{_4dc=_4db=obj?(name?obj[name]:obj):def;}if(prop.end){end=g.normalizeColor(prop.end);}else{if(!_4db){_4db=obj?(name?obj[name]:obj):def;}end=_4db;}return new _4cf(_4dc,end);};function _4dd(prop,obj,name,def){if(prop.values){return new _4d1(prop.values);}var _4de,_4df,end;if(prop.start){_4df=prop.start;}else{_4df=_4de=obj?obj[name]:def;}if(prop.end){end=prop.end;}else{if(typeof _4de!="number"){_4de=obj?obj[name]:def;}end=_4de;}return new _4ca(_4df,end);};fxg.animateStroke=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_4e0=args.shape,_4e1;Hub.connect(anim,"beforeBegin",anim,function(){_4e1=_4e0.getStroke();var prop=args.color,_4e2={},_4e3,_4e4,end;if(prop){_4e2.color=_4da(prop,_4e1,"color",_4d9);}prop=args.style;if(prop&&prop.values){_4e2.style=new _4d1(prop.values);}prop=args.width;if(prop){_4e2.width=_4dd(prop,_4e1,"width",1);}prop=args.cap;if(prop&&prop.values){_4e2.cap=new _4d1(prop.values);}prop=args.join;if(prop){if(prop.values){_4e2.join=new _4d1(prop.values);}else{_4e4=prop.start?prop.start:(_4e1&&_4e1.join||0);end=prop.end?prop.end:(_4e1&&_4e1.join||0);if(typeof _4e4=="number"&&typeof end=="number"){_4e2.join=new _4ca(_4e4,end);}}}this.curve=new _4d3(_4e2,_4e1);});Hub.connect(anim,"onAnimate",_4e0,"setStroke");return anim;};fxg.animateFill=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_4e5=args.shape,fill;Hub.connect(anim,"beforeBegin",anim,function(){fill=_4e5.getFill();var prop=args.color,_4e6={};if(prop){this.curve=_4da(prop,fill,"",_4d9);}});Hub.connect(anim,"onAnimate",_4e5,"setFill");return anim;};fxg.animateFont=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_4e7=args.shape,font;Hub.connect(anim,"beforeBegin",anim,function(){font=_4e7.getFont();var prop=args.style,_4e8={},_4e9,_4ea,end;if(prop&&prop.values){_4e8.style=new _4d1(prop.values);}prop=args.variant;if(prop&&prop.values){_4e8.variant=new _4d1(prop.values);}prop=args.weight;if(prop&&prop.values){_4e8.weight=new _4d1(prop.values);}prop=args.family;if(prop&&prop.values){_4e8.family=new _4d1(prop.values);}prop=args.size;if(prop&&prop.units){_4ea=parseFloat(prop.start?prop.start:(_4e7.font&&_4e7.font.size||"0"));end=parseFloat(prop.end?prop.end:(_4e7.font&&_4e7.font.size||"0"));_4e8.size=new _4cc(_4ea,end,prop.units);}this.curve=new _4d3(_4e8,font);});Hub.connect(anim,"onAnimate",_4e7,"setFont");return anim;};fxg.animateTransform=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_4eb=args.shape,_4ec;Hub.connect(anim,"beforeBegin",anim,function(){_4ec=_4eb.getTransform();this.curve=new _4d5(args.transform,_4ec);});Hub.connect(anim,"onAnimate",_4eb,"setTransform");return anim;};return fxg;});},"dojox/charting/plot2d/StackedColumns":function(){define("dojox/charting/plot2d/StackedColumns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Columns","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,arr,_4ed,_4ee,dc,df,dfr,dfs){var _4ef=dfr.lambda("item.purgeGroup()");return _4ed("dojox.charting.plot2d.StackedColumns",_4ee,{getSeriesStats:function(){var _4f0=dc.collectStackedStats(this.series);this._maxRunLength=_4f0.hmax;_4f0.hmin-=0.5;_4f0.hmax+=0.5;return _4f0;},render:function(dim,_4f1){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _4f2=run.data[j];if(_4f2!==null){var v=typeof _4f2=="number"?_4f2:_4f2.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_4f1);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_4ef);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_4f3,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_4f4=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_4f3=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _4f5=t.next("column",[this.opt,run]),s=run.group,_4f6=new Array(acc.length);for(var j=0;j<acc.length;++j){var _4f2=run.data[j];if(_4f2!==null){var v=acc[j],_4f7=vt(v),_4f8=typeof _4f2!="number"?t.addMixin(_4f5,"column",_4f2,true):t.post(_4f5,"column");if(_4f3>=1&&_4f7>=0){var rect={x:_4f1.l+ht(j+0.5)+gap,y:dim.height-_4f1.b-vt(v),width:_4f3,height:_4f7};var _4f9=this._plotFill(_4f8.series.fill,dim,_4f1);_4f9=this._shapeFill(_4f9,rect);var _4fa=s.createRect(rect).setFill(_4f9).setStroke(_4f8.series.stroke);run.dyn.fill=_4fa.getFill();run.dyn.stroke=_4fa.getStroke();if(_4f4){var o={element:"column",index:j,run:run,shape:_4fa,x:j+0.5,y:v};this._connectEvents(o);_4f6[j]=o;}if(this.animate){this._animateColumn(_4fa,dim.height-_4f1.b,_4f7);}}}}this._eventSeries[run.name]=_4f6;run.dirty=false;for(var j=0;j<run.data.length;++j){var _4f2=run.data[j];if(_4f2!==null){var v=typeof _4f2=="number"?_4f2:_4f2.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojo/data/util/filter":function(){define(["dojo/_base/lang"],function(lang){var _4fb=lang.getObject("dojo.data.util.filter",true);_4fb.patternToRegExp=function(_4fc,_4fd){var rxp="^";var c=null;for(var i=0;i<_4fc.length;i++){c=_4fc.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_4fc.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_4fd){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _4fb;});},"dojox/charting/plot2d/OHLC":function(){define("dojox/charting/plot2d/OHLC",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_4fe,Base,dc,df,dfr,du,fx){var _4ff=dfr.lambda("item.purgeGroup()");return _4fe("dojox.charting.plot2d.OHLC",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_500,_501){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_501);du.updateWithPattern(this.opt,_501,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_502){var _503=lang.delegate(dc.defaultStats);for(var i=0;i<_502.length;i++){var run=_502[i];if(!run.data.length){continue;}var _504=_503.vmin,_505=_503.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_503.hmin=Math.min(_503.hmin,x);_503.hmax=Math.max(_503.hmax,x);_503.vmin=Math.min(_503.vmin,val.open,val.close,val.high,val.low);_503.vmax=Math.max(_503.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_503.vmin=Math.min(_504,run.ymin);}if("ymax" in run){_503.vmax=Math.max(_505,run.ymax);}}return _503;},getSeriesStats:function(){var _506=this.collectStats(this.series);_506.hmin-=0.5;_506.hmax+=0.5;return _506;},render:function(dim,_507){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_507);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_4ff);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_508,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_509=Math.max(0,this._vScaler.bounds.lower),_50a=vt(_509),_50b=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_508=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _50c=t.next("candlestick",[this.opt,run]),s=run.group,_50d=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _50e=t.addMixin(_50c,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_507.l+gap,y=dim.height-_507.b,open=vt(v.open),_50f=vt(v.close),high=vt(v.high),low=vt(v.low);if(low>high){var tmp=high;high=low;low=tmp;}if(_508>=1){var hl={x1:_508/2,x2:_508/2,y1:y-high,y2:y-low},op={x1:0,x2:((_508/2)+((_50e.series.stroke.width||1)/2)),y1:y-open,y2:y-open},cl={x1:((_508/2)-((_50e.series.stroke.width||1)/2)),x2:_508,y1:y-_50f,y2:y-_50f};var _510=s.createGroup();_510.setTransform({dx:x,dy:0});var _511=_510.createGroup();_511.createLine(hl).setStroke(_50e.series.stroke);_511.createLine(op).setStroke(_50e.series.stroke);_511.createLine(cl).setStroke(_50e.series.stroke);run.dyn.stroke=_50e.series.stroke;if(_50b){var o={element:"candlestick",index:j,run:run,shape:_511,x:x,y:y-Math.max(open,_50f),cx:_508/2,cy:(y-Math.max(open,_50f))+(Math.max(open>_50f?open-_50f:_50f-open,1)/2),width:_508,height:Math.max(open>_50f?open-_50f:_50f-open,1),data:v};this._connectEvents(o);_50d[j]=o;}}if(this.animate){this._animateOHLC(_510,y-low,high-low);}}}this._eventSeries[run.name]=_50d;run.dirty=false;}this.dirty=false;return this;},_animateOHLC:function(_512,_513,_514){fx.animateTransform(lang.delegate({shape:_512,duration:1200,transform:[{name:"translate",start:[0,_513-(_513/_514)],end:[0,0]},{name:"scale",start:[1,1/_514],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojo/data/util/sorter":function(){define(["dojo/_base/lang"],function(lang){var _515=lang.getObject("dojo.data.util.sorter",true);_515.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_515.createSortFunction=function(_516,_517){var _518=[];function _519(attr,dir,comp,s){return function(_51a,_51b){var a=s.getValue(_51a,attr);var b=s.getValue(_51b,attr);return dir*comp(a,b);};};var _51c;var map=_517.comparatorMap;var bc=_515.basicComparator;for(var i=0;i<_516.length;i++){_51c=_516[i];var attr=_51c.attribute;if(attr){var dir=(_51c.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_518.push(_519(attr,dir,comp,_517));}}return function(rowA,rowB){var i=0;while(i<_518.length){var ret=_518[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _515;});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_51d,_51e){var _51f=lang.getObject("dojo.colors",true);var _520=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_51d.fromRgb=function(_521,obj){var m=_521.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_51e.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _51d.fromArray(a,obj);}return _51d.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_520(m1,m2,H+1/3)*256,_520(m1,m2,H)*256,_520(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _51d.fromArray(a,obj);}}return null;};var _522=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_51d.prototype.sanitize=function(){var t=this;t.r=Math.round(_522(t.r,0,255));t.g=Math.round(_522(t.g,0,255));t.b=Math.round(_522(t.b,0,255));t.a=_522(t.a,0,1);return this;};_51f.makeGrey=_51d.makeGrey=function(g,a){return _51d.fromArray([g,g,g,a]);};lang.mixin(_51d.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _51d;});},"dojox/lang/functional/reversed":function(){define("dojox/lang/functional/reversed",["dojo/_base/lang","dojo/_base/window","./lambda"],function(lang,win,df){lang.mixin(df,{filterRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t=[],v,i=a.length-1;for(;i>=0;--i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}return t;},forEachRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;f.call(o,a[i],i,a),--i){}},mapRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var n=a.length,t=new Array(n),i=n-1,j=0;for(;i>=0;t[j++]=f.call(o,a[i],i,a),--i){}return t;},everyRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(!f.call(o,a[i],i,a)){return false;}}return true;},someRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(f.call(o,a[i],i,a)){return true;}}return false;}});return df;});},"dojox/charting/Chart":function(){define("dojox/charting/Chart",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/html","dojo/dom","dojo/dom-geometry","dojo/dom-construct","dojo/_base/Color","dojo/_base/sniff","./Element","./Theme","./Series","./axis2d/common","dojox/gfx","dojox/lang/functional","dojox/lang/functional/fold","dojox/lang/functional/reversed"],function(lang,arr,_523,html,dom,_524,_525,_526,has,_527,_528,_529,_52a,g,func,_52b,_52c){var dc=dojox.charting,_52d=func.lambda("item.clear()"),_52e=func.lambda("item.purgeGroup()"),_52f=func.lambda("item.destroy()"),_530=func.lambda("item.dirty = false"),_531=func.lambda("item.dirty = true"),_532=func.lambda("item.name");_523("dojox.charting.Chart",null,{constructor:function(node,_533){if(!_533){_533={};}this.margins=_533.margins?_533.margins:{l:10,t:10,r:10,b:10};this.stroke=_533.stroke;this.fill=_533.fill;this.delayInMs=_533.delayInMs||200;this.title=_533.title;this.titleGap=_533.titleGap;this.titlePos=_533.titlePos;this.titleFont=_533.titleFont;this.titleFontColor=_533.titleFontColor;this.chartTitle=null;this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=true;this.coords=null;this.node=dom.byId(node);var box=_524.getMarginBox(node);this.surface=g.createSurface(this.node,box.w||400,box.h||300);},destroy:function(){arr.forEach(this.series,_52f);arr.forEach(this.stack,_52f);func.forIn(this.axes,_52f);if(this.chartTitle&&this.chartTitle.tagName){_525.destroy(this.chartTitle);}this.surface.destroy();},getCoords:function(){return html.coords(this.node,true);},setTheme:function(_534){this.theme=_534.clone();this.dirty=true;return this;},addAxis:function(name,_535){var axis,_536=_535&&_535.type||"Default";if(typeof _536=="string"){if(!dc.axis2d||!dc.axis2d[_536]){throw Error("Can't find axis: "+_536+" - Check "+"require() dependencies.");}axis=new dc.axis2d[_536](this,_535);}else{axis=new _536(this,_535);}axis.name=name;axis.dirty=true;if(name in this.axes){this.axes[name].destroy();}this.axes[name]=axis;this.dirty=true;return this;},getAxis:function(name){return this.axes[name];},removeAxis:function(name){if(name in this.axes){this.axes[name].destroy();delete this.axes[name];this.dirty=true;}return this;},addPlot:function(name,_537){var plot,_538=_537&&_537.type||"Default";if(typeof _538=="string"){if(!dc.plot2d||!dc.plot2d[_538]){throw Error("Can't find plot: "+_538+" - didn't you forget to dojo"+".require() it?");}plot=new dc.plot2d[_538](this,_537);}else{plot=new _538(this,_537);}plot.name=name;plot.dirty=true;if(name in this.plots){this.stack[this.plots[name]].destroy();this.stack[this.plots[name]]=plot;}else{this.plots[name]=this.stack.length;this.stack.push(plot);}this.dirty=true;return this;},getPlot:function(name){return this.stack[this.plots[name]];},removePlot:function(name){if(name in this.plots){var _539=this.plots[name];delete this.plots[name];this.stack[_539].destroy();this.stack.splice(_539,1);func.forIn(this.plots,function(idx,name,_53a){if(idx>_539){_53a[name]=idx-1;}});var ns=arr.filter(this.series,function(run){return run.plot!=name;});if(ns.length<this.series.length){arr.forEach(this.series,function(run){if(run.plot==name){run.destroy();}});this.runs={};arr.forEach(ns,function(run,_53b){this.runs[run.plot]=_53b;},this);this.series=ns;}this.dirty=true;}return this;},getPlotOrder:function(){return func.map(this.stack,_532);},setPlotOrder:function(_53c){var _53d={},_53e=func.filter(_53c,function(name){if(!(name in this.plots)||(name in _53d)){return false;}_53d[name]=1;return true;},this);if(_53e.length<this.stack.length){func.forEach(this.stack,function(plot){var name=plot.name;if(!(name in _53d)){_53e.push(name);}});}var _53f=func.map(_53e,function(name){return this.stack[this.plots[name]];},this);func.forEach(_53f,function(plot,i){this.plots[plot.name]=i;},this);this.stack=_53f;this.dirty=true;return this;},movePlotToFront:function(name){if(name in this.plots){var _540=this.plots[name];if(_540){var _541=this.getPlotOrder();_541.splice(_540,1);_541.unshift(name);return this.setPlotOrder(_541);}}return this;},movePlotToBack:function(name){if(name in this.plots){var _542=this.plots[name];if(_542<this.stack.length-1){var _543=this.getPlotOrder();_543.splice(_542,1);_543.push(name);return this.setPlotOrder(_543);}}return this;},addSeries:function(name,data,_544){var run=new _529(this,data,_544);run.name=name;if(name in this.runs){this.series[this.runs[name]].destroy();this.series[this.runs[name]]=run;}else{this.runs[name]=this.series.length;this.series.push(run);}this.dirty=true;if(!("ymin" in run)&&"min" in run){run.ymin=run.min;}if(!("ymax" in run)&&"max" in run){run.ymax=run.max;}return this;},getSeries:function(name){return this.series[this.runs[name]];},removeSeries:function(name){if(name in this.runs){var _545=this.runs[name];delete this.runs[name];this.series[_545].destroy();this.series.splice(_545,1);func.forIn(this.runs,function(idx,name,runs){if(idx>_545){runs[name]=idx-1;}});this.dirty=true;}return this;},updateSeries:function(name,data){if(name in this.runs){var run=this.series[this.runs[name]];run.update(data);this._invalidateDependentPlots(run.plot,false);this._invalidateDependentPlots(run.plot,true);}return this;},getSeriesOrder:function(_546){return func.map(func.filter(this.series,function(run){return run.plot==_546;}),_532);},setSeriesOrder:function(_547){var _548,_549={},_54a=func.filter(_547,function(name){if(!(name in this.runs)||(name in _549)){return false;}var run=this.series[this.runs[name]];if(_548){if(run.plot!=_548){return false;}}else{_548=run.plot;}_549[name]=1;return true;},this);func.forEach(this.series,function(run){var name=run.name;if(!(name in _549)&&run.plot==_548){_54a.push(name);}});var _54b=func.map(_54a,function(name){return this.series[this.runs[name]];},this);this.series=_54b.concat(func.filter(this.series,function(run){return run.plot!=_548;}));func.forEach(this.series,function(run,i){this.runs[run.name]=i;},this);this.dirty=true;return this;},moveSeriesToFront:function(name){if(name in this.runs){var _54c=this.runs[name],_54d=this.getSeriesOrder(this.series[_54c].plot);if(name!=_54d[0]){_54d.splice(_54c,1);_54d.unshift(name);return this.setSeriesOrder(_54d);}}return this;},moveSeriesToBack:function(name){if(name in this.runs){var _54e=this.runs[name],_54f=this.getSeriesOrder(this.series[_54e].plot);if(name!=_54f[_54f.length-1]){_54f.splice(_54e,1);_54f.push(name);return this.setSeriesOrder(_54f);}}return this;},resize:function(_550,_551){var box;switch(arguments.length){case 1:box=lang.mixin({},_550);_524.setMarginBox(this.node,box);break;case 2:box={w:_550,h:_551};_524.setMarginBox(this.node,box);break;}box=_524.getMarginBox(this.node);var d=this.surface.getDimensions();if(d.width!=box.w||d.height!=box.h){this.surface.setDimensions(box.w,box.h);this.dirty=true;return this.render();}else{return this;}},getGeometry:function(){var ret={};func.forIn(this.axes,function(axis){if(axis.initialized()){ret[axis.name]={name:axis.name,vertical:axis.vertical,scaler:axis.scaler,ticks:axis.ticks};}});return ret;},setAxisWindow:function(name,_552,_553,zoom){var axis=this.axes[name];if(axis){axis.setWindow(_552,_553);arr.forEach(this.stack,function(plot){if(plot.hAxis==name||plot.vAxis==name){plot.zoom=zoom;}});}return this;},setWindow:function(sx,sy,dx,dy,zoom){if(!("plotArea" in this)){this.calculateGeometry();}func.forIn(this.axes,function(axis){var _554,_555,_556=axis.getScaler().bounds,s=_556.span/(_556.upper-_556.lower);if(axis.vertical){_554=sy;_555=dy/s/_554;}else{_554=sx;_555=dx/s/_554;}axis.setWindow(_554,_555);});arr.forEach(this.stack,function(plot){plot.zoom=zoom;});return this;},zoomIn:function(name,_557){var axis=this.axes[name];if(axis){var _558,_559,_55a=axis.getScaler().bounds;var _55b=Math.min(_557[0],_557[1]);var _55c=Math.max(_557[0],_557[1]);_55b=_557[0]<_55a.lower?_55a.lower:_55b;_55c=_557[1]>_55a.upper?_55a.upper:_55c;_558=(_55a.upper-_55a.lower)/(_55c-_55b);_559=_55b-_55a.lower;this.setAxisWindow(name,_558,_559);this.render();}},calculateGeometry:function(){if(this.dirty){return this.fullGeometry();}var _55d=arr.filter(this.stack,function(plot){return plot.dirty||(plot.hAxis&&this.axes[plot.hAxis].dirty)||(plot.vAxis&&this.axes[plot.vAxis].dirty);},this);_55e(_55d,this.plotArea);return this;},fullGeometry:function(){this._makeDirty();arr.forEach(this.stack,_52d);if(!this.theme){this.setTheme(new _528(dojox.charting._def));}arr.forEach(this.series,function(run){if(!(run.plot in this.plots)){if(!dc.plot2d||!dc.plot2d.Default){throw Error("Can't find plot: Default - didn't you forget to dojo"+".require() it?");}var plot=new dc.plot2d.Default(this,{});plot.name=run.plot;this.plots[run.plot]=this.stack.length;this.stack.push(plot);}this.stack[this.plots[run.plot]].addSeries(run);},this);arr.forEach(this.stack,function(plot){if(plot.hAxis){plot.setAxis(this.axes[plot.hAxis]);}if(plot.vAxis){plot.setAxis(this.axes[plot.vAxis]);}},this);var dim=this.dim=this.surface.getDimensions();dim.width=g.normalizedLength(dim.width);dim.height=g.normalizedLength(dim.height);func.forIn(this.axes,_52d);_55e(this.stack,dim);var _55f=this.offsets={l:0,r:0,t:0,b:0};func.forIn(this.axes,function(axis){func.forIn(axis.getOffsets(),function(o,i){_55f[i]+=o;});});if(this.title){this.titleGap=(this.titleGap==0)?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var _560=g.normalizedLength(g.splitFontString(this.titleFont).size);_55f[this.titlePos=="top"?"t":"b"]+=(_560+this.titleGap);}func.forIn(this.margins,function(o,i){_55f[i]+=o;});this.plotArea={width:dim.width-_55f.l-_55f.r,height:dim.height-_55f.t-_55f.b};func.forIn(this.axes,_52d);_55e(this.stack,this.plotArea);return this;},render:function(){if(this.theme){this.theme.clear();}if(this.dirty){return this.fullRender();}this.calculateGeometry();func.forEachRev(this.stack,function(plot){plot.render(this.dim,this.offsets);},this);func.forIn(this.axes,function(axis){axis.render(this.dim,this.offsets);},this);this._makeClean();if(this.surface.render){this.surface.render();}return this;},fullRender:function(){this.fullGeometry();var _561=this.offsets,dim=this.dim,rect;arr.forEach(this.series,_52e);func.forIn(this.axes,_52e);arr.forEach(this.stack,_52e);if(this.chartTitle&&this.chartTitle.tagName){_525.destroy(this.chartTitle);}this.surface.clear();this.chartTitle=null;var t=this.theme,fill=t.plotarea&&t.plotarea.fill,_562=t.plotarea&&t.plotarea.stroke,w=Math.max(0,dim.width-_561.l-_561.r),h=Math.max(0,dim.height-_561.t-_561.b),rect={x:_561.l-1,y:_561.t-1,width:w+2,height:h+2};if(fill){fill=_527.prototype._shapeFill(_527.prototype._plotFill(fill,dim,_561),rect);this.surface.createRect(rect).setFill(fill);}if(_562){this.surface.createRect({x:_561.l,y:_561.t,width:w+1,height:h+1}).setStroke(_562);}func.foldr(this.stack,function(z,plot){return plot.render(dim,_561),0;},0);fill=this.fill!==undefined?this.fill:(t.chart&&t.chart.fill);_562=this.stroke!==undefined?this.stroke:(t.chart&&t.chart.stroke);if(fill=="inherit"){var node=this.node,fill=new _526(html.style(node,"backgroundColor"));while(fill.a==0&&node!=document.documentElement){fill=new _526(html.style(node,"backgroundColor"));node=node.parentNode;}}if(fill){fill=_527.prototype._plotFill(fill,dim,_561);if(_561.l){rect={width:_561.l,height:dim.height+1};this.surface.createRect(rect).setFill(_527.prototype._shapeFill(fill,rect));}if(_561.r){rect={x:dim.width-_561.r,width:_561.r+1,height:dim.height+2};this.surface.createRect(rect).setFill(_527.prototype._shapeFill(fill,rect));}if(_561.t){rect={width:dim.width+1,height:_561.t};this.surface.createRect(rect).setFill(_527.prototype._shapeFill(fill,rect));}if(_561.b){rect={y:dim.height-_561.b,width:dim.width+1,height:_561.b+2};this.surface.createRect(rect).setFill(_527.prototype._shapeFill(fill,rect));}}if(_562){this.surface.createRect({width:dim.width-1,height:dim.height-1}).setStroke(_562);}if(this.title){var _563=(g.renderer=="canvas"),_564=_563||!has("ie")&&!has("opera")?"html":"gfx",_565=g.normalizedLength(g.splitFontString(this.titleFont).size);this.chartTitle=_52a.createText[_564](this,this.surface,dim.width/2,this.titlePos=="top"?_565+this.margins.t:dim.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);}func.forIn(this.axes,function(axis){axis.render(dim,_561);});this._makeClean();if(this.surface.render){this.surface.render();}return this;},delayedRender:function(){if(!this._delayedRenderHandle){this._delayedRenderHandle=setTimeout(lang.hitch(this,function(){clearTimeout(this._delayedRenderHandle);this._delayedRenderHandle=null;this.render();}),this.delayInMs);}return this;},connectToPlot:function(name,_566,_567){return name in this.plots?this.stack[this.plots[name]].connect(_566,_567):null;},fireEvent:function(_568,_569,_56a){if(_568 in this.runs){var _56b=this.series[this.runs[_568]].plot;if(_56b in this.plots){var plot=this.stack[this.plots[_56b]];if(plot){plot.fireEvent(_568,_569,_56a);}}}return this;},_makeClean:function(){arr.forEach(this.axes,_530);arr.forEach(this.stack,_530);arr.forEach(this.series,_530);this.dirty=false;},_makeDirty:function(){arr.forEach(this.axes,_531);arr.forEach(this.stack,_531);arr.forEach(this.series,_531);this.dirty=true;},_invalidateDependentPlots:function(_56c,_56d){if(_56c in this.plots){var plot=this.stack[this.plots[_56c]],axis,_56e=_56d?"vAxis":"hAxis";if(plot[_56e]){axis=this.axes[plot[_56e]];if(axis&&axis.dependOnData()){axis.dirty=true;arr.forEach(this.stack,function(p){if(p[_56e]&&p[_56e]==plot[_56e]){p.dirty=true;}});}}else{plot.dirty=true;}}}});function _56f(_570){return {min:_570.hmin,max:_570.hmax};};function _571(_572){return {min:_572.vmin,max:_572.vmax};};function _573(_574,h){_574.hmin=h.min;_574.hmax=h.max;};function _575(_576,v){_576.vmin=v.min;_576.vmax=v.max;};function _577(_578,_579){if(_578&&_579){_578.min=Math.min(_578.min,_579.min);_578.max=Math.max(_578.max,_579.max);}return _578||_579;};function _55e(_57a,_57b){var _57c={},axes={};arr.forEach(_57a,function(plot){var _57d=_57c[plot.name]=plot.getSeriesStats();if(plot.hAxis){axes[plot.hAxis]=_577(axes[plot.hAxis],_56f(_57d));}if(plot.vAxis){axes[plot.vAxis]=_577(axes[plot.vAxis],_571(_57d));}});arr.forEach(_57a,function(plot){var _57e=_57c[plot.name];if(plot.hAxis){_573(_57e,axes[plot.hAxis]);}if(plot.vAxis){_575(_57e,axes[plot.vAxis]);}plot.initializeScalers(_57b,_57e);});};return dojox.charting.Chart;});},"dojox/charting/plot2d/Candlesticks":function(){define("dojox/charting/plot2d/Candlesticks",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_57f,arr,Base,dc,df,dfr,du,fx){var _580=dfr.lambda("item.purgeGroup()");return _57f("dojox.charting.plot2d.Candlesticks",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_581,_582){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_582);du.updateWithPattern(this.opt,_582,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_583){var _584=lang.delegate(dc.defaultStats);for(var i=0;i<_583.length;i++){var run=_583[i];if(!run.data.length){continue;}var _585=_584.vmin,_586=_584.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_584.hmin=Math.min(_584.hmin,x);_584.hmax=Math.max(_584.hmax,x);_584.vmin=Math.min(_584.vmin,val.open,val.close,val.high,val.low);_584.vmax=Math.max(_584.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_584.vmin=Math.min(_585,run.ymin);}if("ymax" in run){_584.vmax=Math.max(_586,run.ymax);}}return _584;},getSeriesStats:function(){var _587=this.collectStats(this.series);_587.hmin-=0.5;_587.hmax+=0.5;return _587;},render:function(dim,_588){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_588);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_580);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_589,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_58a=Math.max(0,this._vScaler.bounds.lower),_58b=vt(_58a),_58c=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_589=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _58d=t.next("candlestick",[this.opt,run]),s=run.group,_58e=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _58f=t.addMixin(_58d,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_588.l+gap,y=dim.height-_588.b,open=vt(v.open),_590=vt(v.close),high=vt(v.high),low=vt(v.low);if("mid" in v){var mid=vt(v.mid);}if(low>high){var tmp=high;high=low;low=tmp;}if(_589>=1){var _591=open>_590;var line={x1:_589/2,x2:_589/2,y1:y-high,y2:y-low},rect={x:0,y:y-Math.max(open,_590),width:_589,height:Math.max(_591?open-_590:_590-open,1)};var _592=s.createGroup();_592.setTransform({dx:x,dy:0});var _593=_592.createGroup();_593.createLine(line).setStroke(_58f.series.stroke);_593.createRect(rect).setStroke(_58f.series.stroke).setFill(_591?_58f.series.fill:"white");if("mid" in v){_593.createLine({x1:(_58f.series.stroke.width||1),x2:_589-(_58f.series.stroke.width||1),y1:y-mid,y2:y-mid}).setStroke(_591?"white":_58f.series.stroke);}run.dyn.fill=_58f.series.fill;run.dyn.stroke=_58f.series.stroke;if(_58c){var o={element:"candlestick",index:j,run:run,shape:_593,x:x,y:y-Math.max(open,_590),cx:_589/2,cy:(y-Math.max(open,_590))+(Math.max(_591?open-_590:_590-open,1)/2),width:_589,height:Math.max(_591?open-_590:_590-open,1),data:v};this._connectEvents(o);_58e[j]=o;}}if(this.animate){this._animateCandlesticks(_592,y-low,high-low);}}}this._eventSeries[run.name]=_58e;run.dirty=false;}this.dirty=false;return this;},_animateCandlesticks:function(_594,_595,_596){fx.animateTransform(lang.delegate({shape:_594,duration:1200,transform:[{name:"translate",start:[0,_595-(_595/_596)],end:[0,0]},{name:"scale",start:[1,1/_596],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/axis2d/Default":function(){define("dojox/charting/axis2d/Default",["dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/dom-geometry","./Invisible","../scaler/common","../scaler/linear","./common","dojox/gfx","dojox/lang/utils"],function(lang,arr,has,_597,_598,html,_599,_59a,_59b,lin,_59c,g,du){var _59d=4,_59e=45;return _597("dojox.charting.axis2d.Default",_59a,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0,htmlLabels:true,enableCache:false},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(_59f,_5a0){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_5a0);du.updateWithPattern(this.opt,_5a0,this.optionalParams);if(this.opt.enableCache){this._textFreePool=[];this._lineFreePool=[];this._textUsePool=[];this._lineUsePool=[];}},getOffsets:function(){var s=this.scaler,_5a1={l:0,r:0,t:0,b:0};if(!s){return _5a1;}var o=this.opt,_5a2=0,a,b,c,d,gl=_59b.getNumericLabel,_5a3=0,ma=s.major,mi=s.minor,ta=this.chart.theme.axis,_5a4=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_5a5=o.titleFont||(ta.tick&&ta.tick.titleFont),_5a6=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_5a7=this.chart.theme.getTick("major",o),_5a8=this.chart.theme.getTick("minor",o),size=_5a4?g.normalizedLength(g.splitFontString(_5a4).size):0,_5a9=_5a5?g.normalizedLength(g.splitFontString(_5a5).size):0,_5aa=o.rotation%360,_5ab=o.leftBottom,cosr=Math.abs(Math.cos(_5aa*Math.PI/180)),sinr=Math.abs(Math.sin(_5aa*Math.PI/180));this.trailingSymbol=(o.trailingSymbol===undefined||o.trailingSymbol===null)?this.trailingSymbol:o.trailingSymbol;if(_5aa<0){_5aa+=360;}if(size){if(this.labels){_5a2=this._groupLabelWidth(this.labels,_5a4,o.maxLabelCharCount);}else{_5a2=this._groupLabelWidth([gl(ma.start,ma.prec,o),gl(ma.start+ma.count*ma.tick,ma.prec,o),gl(mi.start,mi.prec,o),gl(mi.start+mi.count*mi.tick,mi.prec,o)],_5a4,o.maxLabelCharCount);}_5a2=o.maxLabelSize?Math.min(o.maxLabelSize,_5a2):_5a2;if(this.vertical){var side=_5ab?"l":"r";switch(_5aa){case 0:case 180:_5a1[side]=_5a2;_5a1.t=_5a1.b=size/2;break;case 90:case 270:_5a1[side]=size;_5a1.t=_5a1.b=_5a2/2;break;default:if(_5aa<=_59e||(180<_5aa&&_5aa<=(180+_59e))){_5a1[side]=size*sinr/2+_5a2*cosr;_5a1[_5ab?"t":"b"]=size*cosr/2+_5a2*sinr;_5a1[_5ab?"b":"t"]=size*cosr/2;}else{if(_5aa>(360-_59e)||(180>_5aa&&_5aa>(180-_59e))){_5a1[side]=size*sinr/2+_5a2*cosr;_5a1[_5ab?"b":"t"]=size*cosr/2+_5a2*sinr;_5a1[_5ab?"t":"b"]=size*cosr/2;}else{if(_5aa<90||(180<_5aa&&_5aa<270)){_5a1[side]=size*sinr+_5a2*cosr;_5a1[_5ab?"t":"b"]=size*cosr+_5a2*sinr;}else{_5a1[side]=size*sinr+_5a2*cosr;_5a1[_5ab?"b":"t"]=size*cosr+_5a2*sinr;}}}break;}_5a1[side]+=_59d+Math.max(_5a7.length,_5a8.length)+(o.title?(_5a9+_5a6):0);}else{var side=_5ab?"b":"t";switch(_5aa){case 0:case 180:_5a1[side]=size;_5a1.l=_5a1.r=_5a2/2;break;case 90:case 270:_5a1[side]=_5a2;_5a1.l=_5a1.r=size/2;break;default:if((90-_59e)<=_5aa&&_5aa<=90||(270-_59e)<=_5aa&&_5aa<=270){_5a1[side]=size*sinr/2+_5a2*cosr;_5a1[_5ab?"r":"l"]=size*cosr/2+_5a2*sinr;_5a1[_5ab?"l":"r"]=size*cosr/2;}else{if(90<=_5aa&&_5aa<=(90+_59e)||270<=_5aa&&_5aa<=(270+_59e)){_5a1[side]=size*sinr/2+_5a2*cosr;_5a1[_5ab?"l":"r"]=size*cosr/2+_5a2*sinr;_5a1[_5ab?"r":"l"]=size*cosr/2;}else{if(_5aa<_59e||(180<_5aa&&_5aa<(180-_59e))){_5a1[side]=size*sinr+_5a2*cosr;_5a1[_5ab?"r":"l"]=size*cosr+_5a2*sinr;}else{_5a1[side]=size*sinr+_5a2*cosr;_5a1[_5ab?"l":"r"]=size*cosr+_5a2*sinr;}}}break;}_5a1[side]+=_59d+Math.max(_5a7.length,_5a8.length)+(o.title?(_5a9+_5a6):0);}}if(_5a2){this._cachedLabelWidth=_5a2;}return _5a1;},cleanGroup:function(_5ac){if(this.opt.enableCache&&this.group){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];this._textFreePool=this._textFreePool.concat(this._textUsePool);this._textUsePool=[];}this.inherited(arguments);},createText:function(_5ad,_5ae,x,y,_5af,_5b0,font,_5b1,_5b2){if(!this.opt.enableCache||_5ad=="html"){return _59c.createText[_5ad](this.chart,_5ae,x,y,_5af,_5b0,font,_5b1,_5b2);}var text;if(this._textFreePool.length>0){text=this._textFreePool.pop();text.setShape({x:x,y:y,text:_5b0,align:_5af});_5ae.add(text);}else{text=_59c.createText[_5ad](this.chart,_5ae,x,y,_5af,_5b0,font,_5b1,_5b2);}this._textUsePool.push(text);return text;},createLine:function(_5b3,_5b4){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_5b4);_5b3.add(line);}else{line=_5b3.createLine(_5b4);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_5b5){if(!this.dirty){return this;}var o=this.opt,ta=this.chart.theme.axis,_5b6=o.leftBottom,_5b7=o.rotation%360,_5b8,stop,_5b9,_5ba=0,_5bb,_5bc,_5bd,_5be,_5bf,_5c0,_5c1=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_5c2=o.titleFont||(ta.tick&&ta.tick.titleFont),_5c3=o.fontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"black",_5c4=o.titleFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_5c5=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_5c6=o.titleOrientation||(ta.tick&&ta.tick.titleOrientation)||"axis",_5c7=this.chart.theme.getTick("major",o),_5c8=this.chart.theme.getTick("minor",o),_5c9=this.chart.theme.getTick("micro",o),_5ca=Math.max(_5c7.length,_5c8.length,_5c9.length),_5cb="stroke" in o?o.stroke:ta.stroke,size=_5c1?g.normalizedLength(g.splitFontString(_5c1).size):0,cosr=Math.abs(Math.cos(_5b7*Math.PI/180)),sinr=Math.abs(Math.sin(_5b7*Math.PI/180)),_5cc=_5c2?g.normalizedLength(g.splitFontString(_5c2).size):0;if(_5b7<0){_5b7+=360;}if(this.vertical){_5b8={y:dim.height-_5b5.b};stop={y:_5b5.t};_5b9={y:(dim.height-_5b5.b+_5b5.t)/2};_5bb=size*sinr+(this._cachedLabelWidth||0)*cosr+_59d+Math.max(_5c7.length,_5c8.length)+_5cc+_5c5;_5bc={x:0,y:-1};_5bf={x:0,y:0};_5bd={x:1,y:0};_5be={x:_59d,y:0};switch(_5b7){case 0:_5c0="end";_5bf.y=size*0.4;break;case 90:_5c0="middle";_5bf.x=-size;break;case 180:_5c0="start";_5bf.y=-size*0.4;break;case 270:_5c0="middle";break;default:if(_5b7<_59e){_5c0="end";_5bf.y=size*0.4;}else{if(_5b7<90){_5c0="end";_5bf.y=size*0.4;}else{if(_5b7<(180-_59e)){_5c0="start";}else{if(_5b7<(180+_59e)){_5c0="start";_5bf.y=-size*0.4;}else{if(_5b7<270){_5c0="start";_5bf.x=_5b6?0:size*0.4;}else{if(_5b7<(360-_59e)){_5c0="end";_5bf.x=_5b6?0:size*0.4;}else{_5c0="end";_5bf.y=size*0.4;}}}}}}}if(_5b6){_5b8.x=stop.x=_5b5.l;_5ba=(_5c6&&_5c6=="away")?90:270;_5b9.x=_5b5.l-_5bb+(_5ba==270?_5cc:0);_5bd.x=-1;_5be.x=-_5be.x;}else{_5b8.x=stop.x=dim.width-_5b5.r;_5ba=(_5c6&&_5c6=="axis")?90:270;_5b9.x=dim.width-_5b5.r+_5bb-(_5ba==270?0:_5cc);switch(_5c0){case "start":_5c0="end";break;case "end":_5c0="start";break;case "middle":_5bf.x+=size;break;}}}else{_5b8={x:_5b5.l};stop={x:dim.width-_5b5.r};_5b9={x:(dim.width-_5b5.r+_5b5.l)/2};_5bb=size*cosr+(this._cachedLabelWidth||0)*sinr+_59d+Math.max(_5c7.length,_5c8.length)+_5cc+_5c5;_5bc={x:1,y:0};_5bf={x:0,y:0};_5bd={x:0,y:1};_5be={x:0,y:_59d};switch(_5b7){case 0:_5c0="middle";_5bf.y=size;break;case 90:_5c0="start";_5bf.x=-size*0.4;break;case 180:_5c0="middle";break;case 270:_5c0="end";_5bf.x=size*0.4;break;default:if(_5b7<(90-_59e)){_5c0="start";_5bf.y=_5b6?size:0;}else{if(_5b7<(90+_59e)){_5c0="start";_5bf.x=-size*0.4;}else{if(_5b7<180){_5c0="start";_5bf.y=_5b6?0:-size;}else{if(_5b7<(270-_59e)){_5c0="end";_5bf.y=_5b6?0:-size;}else{if(_5b7<(270+_59e)){_5c0="end";_5bf.y=_5b6?size*0.4:0;}else{_5c0="end";_5bf.y=_5b6?size:0;}}}}}}if(_5b6){_5b8.y=stop.y=dim.height-_5b5.b;_5ba=(_5c6&&_5c6=="axis")?180:0;_5b9.y=dim.height-_5b5.b+_5bb-(_5ba?_5cc:0);}else{_5b8.y=stop.y=_5b5.t;_5ba=(_5c6&&_5c6=="away")?180:0;_5b9.y=_5b5.t-_5bb+(_5ba?0:_5cc);_5bd.y=-1;_5be.y=-_5be.y;switch(_5c0){case "start":_5c0="end";break;case "end":_5c0="start";break;case "middle":_5bf.y-=size;break;}}}this.cleanGroup();try{var s=this.group,c=this.scaler,t=this.ticks,_5cd,f=lin.getTransformerFromModel(this.scaler),_5ce=(!o.title||!_5ba)&&!_5b7&&this.opt.htmlLabels&&!has("ie")&&!has("opera")?"html":"gfx",dx=_5bd.x*_5c7.length,dy=_5bd.y*_5c7.length;s.createLine({x1:_5b8.x,y1:_5b8.y,x2:stop.x,y2:stop.y}).setStroke(_5cb);if(o.title){var _5cf=_59c.createText[_5ce](this.chart,s,_5b9.x,_5b9.y,"middle",o.title,_5c2,_5c4);if(_5ce=="html"){this.htmlElements.push(_5cf);}else{_5cf.setTransform(g.matrix.rotategAt(_5ba,_5b9.x,_5b9.y));}}if(t==null){this.dirty=false;return this;}arr.forEach(t.major,function(tick){var _5d0=f(tick.value),elem,x=_5b8.x+_5bc.x*_5d0,y=_5b8.y+_5bc.y*_5d0;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_5c7);if(tick.label){var _5d1=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_5c1,o.maxLabelCharCount):{text:tick.label,truncated:false};_5d1=o.maxLabelSize?this.getTextWithLimitLength(_5d1.text,_5c1,o.maxLabelSize,_5d1.truncated):_5d1;elem=this.createText(_5ce,s,x+dx+_5be.x+(_5b7?0:_5bf.x),y+dy+_5be.y+(_5b7?0:_5bf.y),_5c0,_5d1.text,_5c1,_5c3);if(this.chart.truncateBidi&&_5d1.truncated){this.chart.truncateBidi(elem,tick.label,_5ce);}_5d1.truncated&&this.labelTooltip(elem,this.chart,tick.label,_5d1.text,_5c1,_5ce);if(_5ce=="html"){this.htmlElements.push(elem);}else{if(_5b7){elem.setTransform([{dx:_5bf.x,dy:_5bf.y},g.matrix.rotategAt(_5b7,x+dx+_5be.x,y+dy+_5be.y)]);}}}},this);dx=_5bd.x*_5c8.length;dy=_5bd.y*_5c8.length;_5cd=c.minMinorStep<=c.minor.tick*c.bounds.scale;arr.forEach(t.minor,function(tick){var _5d2=f(tick.value),elem,x=_5b8.x+_5bc.x*_5d2,y=_5b8.y+_5bc.y*_5d2;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_5c8);if(_5cd&&tick.label){var _5d3=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_5c1,o.maxLabelCharCount):{text:tick.label,truncated:false};_5d3=o.maxLabelSize?this.getTextWithLimitLength(_5d3.text,_5c1,o.maxLabelSize,_5d3.truncated):_5d3;elem=this.createText(_5ce,s,x+dx+_5be.x+(_5b7?0:_5bf.x),y+dy+_5be.y+(_5b7?0:_5bf.y),_5c0,_5d3.text,_5c1,_5c3);if(this.chart.getTextDir&&_5d3.truncated){this.chart.truncateBidi(elem,tick.label,_5ce);}_5d3.truncated&&this.labelTooltip(elem,this.chart,tick.label,_5d3.text,_5c1,_5ce);if(_5ce=="html"){this.htmlElements.push(elem);}else{if(_5b7){elem.setTransform([{dx:_5bf.x,dy:_5bf.y},g.matrix.rotategAt(_5b7,x+dx+_5be.x,y+dy+_5be.y)]);}}}},this);dx=_5bd.x*_5c9.length;dy=_5bd.y*_5c9.length;arr.forEach(t.micro,function(tick){var _5d4=f(tick.value),elem,x=_5b8.x+_5bc.x*_5d4,y=_5b8.y+_5bc.y*_5d4;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_5c9);},this);}catch(e){}this.dirty=false;return this;},labelTooltip:function(elem,_5d5,_5d6,_5d7,font,_5d8){var _5d9=["dijit/Tooltip"];var _5da={type:"rect"},_5db=["above","below"],_5dc=g._base._getTextBox(_5d7,{font:font}).w||0,_5dd=font?g.normalizedLength(g.splitFontString(font).size):0;if(_5d8=="html"){lang.mixin(_5da,html.coords(elem.firstChild,true));_5da.width=Math.ceil(_5dc);_5da.height=Math.ceil(_5dd);this._events.push({shape:dojo,handle:_598.connect(elem.firstChild,"onmouseover",this,function(e){require(_5d9,function(_5de){_5de.show(_5d6,_5da,_5db);});})});this._events.push({shape:dojo,handle:_598.connect(elem.firstChild,"onmouseout",this,function(e){require(_5d9,function(_5df){_5df.hide(_5da);});})});}else{var shp=elem.getShape(),lt=html.coords(_5d5.node,true);_5da=lang.mixin(_5da,{x:shp.x-_5dc/2,y:shp.y});_5da.x+=lt.x;_5da.y+=lt.y;_5da.x=Math.round(_5da.x);_5da.y=Math.round(_5da.y);_5da.width=Math.ceil(_5dc);_5da.height=Math.ceil(_5dd);this._events.push({shape:elem,handle:elem.connect("onmouseenter",this,function(e){require(_5d9,function(_5e0){_5e0.show(_5d6,_5da,_5db);});})});this._events.push({shape:elem,handle:elem.connect("onmouseleave",this,function(e){require(_5d9,function(_5e1){_5e1.hide(_5da);});})});}}});});},"dojox/charting/plot2d/Scatter":function(){define("dojox/charting/plot2d/Scatter",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(lang,arr,_5e2,Base,dc,df,dfr,du,fx,_5e3){var _5e4=dfr.lambda("item.purgeGroup()");return _5e2("dojox.charting.plot2d.Scatter",Base,{defaultParams:{hAxis:"x",vAxis:"y",shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_5e5,_5e6){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_5e6);du.updateWithPattern(this.opt,_5e6,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_5e7){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_5e7);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_5e4);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_5e8=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}var _5e9=t.next("marker",[this.opt,run]),s=run.group,_5ea,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){_5ea=arr.map(run.data,function(v,i){return {x:ht(i+1)+_5e7.l,y:dim.height-_5e7.b-vt(v)};},this);}else{_5ea=arr.map(run.data,function(v,i){return {x:ht(v.x)+_5e7.l,y:dim.height-_5e7.b-vt(v.y)};},this);}var _5eb=new Array(_5ea.length),_5ec=new Array(_5ea.length),_5ed=new Array(_5ea.length);arr.forEach(_5ea,function(c,i){var _5ee=typeof run.data[i]=="number"?t.post(_5e9,"marker"):t.addMixin(_5e9,"marker",run.data[i],true),path="M"+c.x+" "+c.y+" "+_5ee.symbol;if(_5ee.marker.shadow){_5eb[i]=s.createPath("M"+(c.x+_5ee.marker.shadow.dx)+" "+(c.y+_5ee.marker.shadow.dy)+" "+_5ee.symbol).setStroke(_5ee.marker.shadow).setFill(_5ee.marker.shadow.color);if(this.animate){this._animateScatter(_5eb[i],dim.height-_5e7.b);}}if(_5ee.marker.outline){var _5ef=dc.makeStroke(_5ee.marker.outline);_5ef.width=2*_5ef.width+_5ee.marker.stroke.width;_5ed[i]=s.createPath(path).setStroke(_5ef);if(this.animate){this._animateScatter(_5ed[i],dim.height-_5e7.b);}}var _5f0=dc.makeStroke(_5ee.marker.stroke),fill=this._plotFill(_5ee.marker.fill,dim,_5e7);if(fill&&(fill.type==="linear"||fill.type=="radial")){var _5f1=_5e3.getColor(fill,{x:c.x,y:c.y});if(_5f0){_5f0.color=_5f1;}_5ec[i]=s.createPath(path).setStroke(_5f0).setFill(_5f1);}else{_5ec[i]=s.createPath(path).setStroke(_5f0).setFill(fill);}if(this.animate){this._animateScatter(_5ec[i],dim.height-_5e7.b);}},this);if(_5ec.length){run.dyn.stroke=_5ec[_5ec.length-1].getStroke();run.dyn.fill=_5ec[_5ec.length-1].getFill();}if(_5e8){var _5f2=new Array(_5ec.length);arr.forEach(_5ec,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_5ed&&_5ed[i]||null,shadow:_5eb&&_5eb[i]||null,cx:_5ea[i].x,cy:_5ea[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(o);_5f2[i]=o;},this);this._eventSeries[run.name]=_5f2;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateScatter:function(_5f3,_5f4){fx.animateTransform(lang.delegate({shape:_5f3,duration:1200,transform:[{name:"translate",start:[0,_5f4],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/data/CsvStore":function(){define("dojox/data/CsvStore",["dojo/_base/lang","dojo/_base/declare","dojo/_base/xhr","dojo/_base/window","dojo/data/util/filter","dojo/data/util/simpleFetch"],function(lang,_5f5,xhr,_5f6,_5f7,_5f8){var _5f9=_5f5("dojox.data.CsvStore",null,{constructor:function(_5fa){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=[];this._loadFinished=false;if(_5fa.url){this.url=_5fa.url;}this._csvData=_5fa.data;if(_5fa.label){this.label=_5fa.label;}else{if(this.label===""){this.label=undefined;}}this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._loadInProgress=false;this._queuedFetches=[];this.identifier=_5fa.identifier;if(this.identifier===""){delete this.identifier;}else{this._idMap={};}if("separator" in _5fa){this.separator=_5fa.separator;}if("urlPreventCache" in _5fa){this.urlPreventCache=_5fa.urlPreventCache?true:false;}},url:"",label:"",identifier:"",separator:",",urlPreventCache:false,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": a function was passed an item argument that was not an item");}},_getIndex:function(item){var idx=this.getIdentity(item);if(this.identifier){idx=this._idMap[idx];}return idx;},getValue:function(item,_5fb,_5fc){this._assertIsItem(item);var _5fd=_5fc;if(typeof _5fb==="string"){var ai=this._attributeIndexes[_5fb];if(ai!=null){var _5fe=this._dataArray[this._getIndex(item)];_5fd=_5fe[ai]||_5fc;}}else{throw new Error(this.declaredClass+": a function was passed an attribute argument that was not a string");}return _5fd;},getValues:function(item,_5ff){var _600=this.getValue(item,_5ff);return (_600?[_600]:[]);},getAttributes:function(item){this._assertIsItem(item);var _601=[];var _602=this._dataArray[this._getIndex(item)];for(var i=0;i<_602.length;i++){if(_602[i]!==""){_601.push(this._attributes[i]);}}return _601;},hasAttribute:function(item,_603){this._assertIsItem(item);if(typeof _603==="string"){var _604=this._attributeIndexes[_603];var _605=this._dataArray[this._getIndex(item)];return (typeof _604!=="undefined"&&_604<_605.length&&_605[_604]!=="");}else{throw new Error(this.declaredClass+": a function was passed an attribute argument that was not a string");}},containsValue:function(item,_606,_607){var _608=undefined;if(typeof _607==="string"){_608=_5f7.patternToRegExp(_607,false);}return this._containsValue(item,_606,_607,_608);},_containsValue:function(item,_609,_60a,_60b){var _60c=this.getValues(item,_609);for(var i=0;i<_60c.length;++i){var _60d=_60c[i];if(typeof _60d==="string"&&_60b){return (_60d.match(_60b)!==null);}else{if(_60a===_60d){return true;}}}return false;},isItem:function(_60e){if(_60e&&_60e[this._storeProp]===this){var _60f=_60e[this._idProp];if(this.identifier){var data=this._dataArray[this._idMap[_60f]];if(data){return true;}}else{if(_60f>=0&&_60f<this._dataArray.length){return true;}}}return false;},isItemLoaded:function(_610){return this.isItem(_610);},loadItem:function(item){},getFeatures:function(){return this._features;},getLabel:function(item){if(this.label&&this.isItem(item)){return this.getValue(item,this.label);}return undefined;},getLabelAttributes:function(item){if(this.label){return [this.label];}return null;},_fetchItems:function(_611,_612,_613){var self=this;var _614=function(_615,_616){var _617=null;if(_615.query){var key,_618;_617=[];var _619=_615.queryOptions?_615.queryOptions.ignoreCase:false;var _61a={};for(key in _615.query){_618=_615.query[key];if(typeof _618==="string"){_61a[key]=_5f7.patternToRegExp(_618,_619);}}for(var i=0;i<_616.length;++i){var _61b=true;var _61c=_616[i];for(key in _615.query){_618=_615.query[key];if(!self._containsValue(_61c,key,_618,_61a[key])){_61b=false;}}if(_61b){_617.push(_61c);}}}else{_617=_616.slice(0,_616.length);}_612(_617,_615);};if(this._loadFinished){_614(_611,this._arrayOfAllItems);}else{if(this.url!==""){if(this._loadInProgress){this._queuedFetches.push({args:_611,filter:_614});}else{this._loadInProgress=true;var _61d={url:self.url,handleAs:"text",preventCache:self.urlPreventCache};var _61e=xhr.get(_61d);_61e.addCallback(function(data){try{self._processData(data);_614(_611,self._arrayOfAllItems);self._handleQueuedFetches();}catch(e){_613(e,_611);}});_61e.addErrback(function(_61f){self._loadInProgress=false;if(_613){_613(_61f,_611);}else{throw _61f;}});var _620=null;if(_611.abort){_620=_611.abort;}_611.abort=function(){var df=_61e;if(df&&df.fired===-1){df.cancel();df=null;}if(_620){_620.call(_611);}};}}else{if(this._csvData){try{this._processData(this._csvData);this._csvData=null;_614(_611,this._arrayOfAllItems);}catch(e){_613(e,_611);}}else{var _621=new Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");if(_613){_613(_621,_611);}else{throw _621;}}}}},close:function(_622){},_getArrayOfArraysFromCsvFileContents:function(_623){if(lang.isString(_623)){var _624=new RegExp("^\\s+","g");var _625=new RegExp("\\s+$","g");var _626=new RegExp("\"\"","g");var _627=[];var i;var _628=this._splitLines(_623);for(i=0;i<_628.length;++i){var _629=_628[i];if(_629.length>0){var _62a=_629.split(this.separator);var j=0;while(j<_62a.length){var _62b=_62a[j];var _62c=_62b.replace(_624,"");var _62d=_62c.replace(_625,"");var _62e=_62d.charAt(0);var _62f=_62d.charAt(_62d.length-1);var _630=_62d.charAt(_62d.length-2);var _631=_62d.charAt(_62d.length-3);if(_62d.length===2&&_62d=="\"\""){_62a[j]="";}else{if((_62e=="\"")&&((_62f!="\"")||((_62f=="\"")&&(_630=="\"")&&(_631!="\"")))){if(j+1===_62a.length){return;}var _632=_62a[j+1];_62a[j]=_62c+this.separator+_632;_62a.splice(j+1,1);}else{if((_62e=="\"")&&(_62f=="\"")){_62d=_62d.slice(1,(_62d.length-1));_62d=_62d.replace(_626,"\"");}_62a[j]=_62d;j+=1;}}}_627.push(_62a);}}this._attributes=_627.shift();for(i=0;i<this._attributes.length;i++){this._attributeIndexes[this._attributes[i]]=i;}this._dataArray=_627;}},_splitLines:function(_633){var _634=[];var i;var line="";var _635=false;for(i=0;i<_633.length;i++){var c=_633.charAt(i);switch(c){case "\"":_635=!_635;line+=c;break;case "\r":if(_635){line+=c;}else{_634.push(line);line="";if(i<(_633.length-1)&&_633.charAt(i+1)=="\n"){i++;}}break;case "\n":if(_635){line+=c;}else{_634.push(line);line="";}break;default:line+=c;}}if(line!==""){_634.push(line);}return _634;},_processData:function(data){this._getArrayOfArraysFromCsvFileContents(data);this._arrayOfAllItems=[];if(this.identifier){if(this._attributeIndexes[this.identifier]===undefined){throw new Error(this.declaredClass+": Identity specified is not a column header in the data set.");}}for(var i=0;i<this._dataArray.length;i++){var id=i;if(this.identifier){var _636=this._dataArray[i];id=_636[this._attributeIndexes[this.identifier]];this._idMap[id]=i;}this._arrayOfAllItems.push(this._createItemFromIdentity(id));}this._loadFinished=true;this._loadInProgress=false;},_createItemFromIdentity:function(_637){var item={};item[this._storeProp]=this;item[this._idProp]=_637;return item;},getIdentity:function(item){if(this.isItem(item)){return item[this._idProp];}return null;},fetchItemByIdentity:function(_638){var item;var _639=_638.scope?_638.scope:_5f6.global;if(!this._loadFinished){var self=this;if(this.url!==""){if(this._loadInProgress){this._queuedFetches.push({args:_638});}else{this._loadInProgress=true;var _63a={url:self.url,handleAs:"text"};var _63b=xhr.get(_63a);_63b.addCallback(function(data){try{self._processData(data);var item=self._createItemFromIdentity(_638.identity);if(!self.isItem(item)){item=null;}if(_638.onItem){_638.onItem.call(_639,item);}self._handleQueuedFetches();}catch(error){if(_638.onError){_638.onError.call(_639,error);}}});_63b.addErrback(function(_63c){this._loadInProgress=false;if(_638.onError){_638.onError.call(_639,_63c);}});}}else{if(this._csvData){try{self._processData(self._csvData);self._csvData=null;item=self._createItemFromIdentity(_638.identity);if(!self.isItem(item)){item=null;}if(_638.onItem){_638.onItem.call(_639,item);}}catch(e){if(_638.onError){_638.onError.call(_639,e);}}}}}else{item=this._createItemFromIdentity(_638.identity);if(!this.isItem(item)){item=null;}if(_638.onItem){_638.onItem.call(_639,item);}}},getIdentityAttributes:function(item){if(this.identifier){return [this.identifier];}else{return null;}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _63d=this._queuedFetches[i];var _63e=_63d.filter;var _63f=_63d.args;if(_63e){_63e(_63f,this._arrayOfAllItems);}else{this.fetchItemByIdentity(_63d.args);}}this._queuedFetches=[];}}});lang.extend(_5f9,_5f8);return _5f9;});},"dojox/charting/plot2d/ClusteredColumns":function(){define("dojox/charting/plot2d/ClusteredColumns",["dojo/_base/array","dojo/_base/declare","./Columns","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils"],function(arr,_640,_641,dc,df,dfr,du){var _642=dfr.lambda("item.purgeGroup()");return _640("dojox.charting.plot2d.ClusteredColumns",_641,{render:function(dim,_643){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_643);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_642);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_644,_645,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_646=Math.max(0,this._vScaler.bounds.lower),_647=vt(_646),_648=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_644=_645=f.size;for(var i=0;i<this.series.length;++i){var run=this.series[i],_649=_645*i;if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _64a=t.next("column",[this.opt,run]),s=run.group,_64b=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _64c=run.data[j];if(_64c!==null){var v=typeof _64c=="number"?_64c:_64c.y,vv=vt(v),_64d=vv-_647,h=Math.abs(_64d),_64e=typeof _64c!="number"?t.addMixin(_64a,"column",_64c,true):t.post(_64a,"column");if(_644>=1&&h>=0){var rect={x:_643.l+ht(j+0.5)+gap+_649,y:dim.height-_643.b-(v>_646?vv:_647),width:_644,height:h};var _64f=this._plotFill(_64e.series.fill,dim,_643);_64f=this._shapeFill(_64f,rect);var _650=s.createRect(rect).setFill(_64f).setStroke(_64e.series.stroke);run.dyn.fill=_650.getFill();run.dyn.stroke=_650.getStroke();if(_648){var o={element:"column",index:j,run:run,shape:_650,x:j+0.5,y:v};this._connectEvents(o);_64b[j]=o;}if(this.animate){this._animateColumn(_650,dim.height-_643.b-_647,h);}}}}this._eventSeries[run.name]=_64b;run.dirty=false;}this.dirty=false;return this;}});});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_651,_652){dojo.DeferredList=function(list,_653,_654,_655,_656){var _657=[];_651.call(this);var self=this;if(list.length===0&&!_653){this.resolve([0,[]]);}var _658=0;_652.forEach(list,function(item,i){item.then(function(_659){if(_653){self.resolve([i,_659]);}else{_65a(true,_659);}},function(_65b){if(_654){self.reject(_65b);}else{_65a(false,_65b);}if(_655){return null;}throw _65b;});function _65a(_65c,_65d){_657[i]=[_65c,_65d];_658++;if(_658===list.length){self.resolve(_657);}};});};dojo.DeferredList.prototype=new _651();dojo.DeferredList.prototype.gatherResults=function(_65e){var d=new dojo.DeferredList(_65e,false,true,false);d.addCallback(function(_65f){var ret=[];_652.forEach(_65f,function(_660){ret.push(_660[1]);});return ret;});return d;};return dojo.DeferredList;});},"dojo/io/iframe":function(){define(["../main","require"],function(dojo,_661){dojo.getObject("io",true,dojo);dojo.io.iframe={create:function(_662,_663,uri){if(window[_662]){return window[_662];}if(window.frames[_662]){return window.frames[_662];}var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||_661.toUrl("../resources/blank.html"));}var _664=dojo.place("<iframe id=\""+_662+"\" name=\""+_662+"\" src=\""+turi+"\" onload=\""+_663+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",dojo.body());window[_662]=_664;return _664;},setSrc:function(_665,src,_666){try{if(!_666){if(dojo.isWebKit){_665.location=src;}else{frames[_665.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit){idoc=_665.contentWindow.document;}else{idoc=_665.contentWindow;}if(!idoc){_665.location=src;}else{idoc.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_667){return _667.contentDocument||(((_667.name)&&(_667.document)&&(dojo.doc.getElementsByTagName("iframe")[_667.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_667.name].contentWindow.document)))||((_667.name)&&(dojo.doc.frames[_667.name])&&(dojo.doc.frames[_667.name].document))||null;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _668=null;try{var _669=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _66a=_669.handleAs;_668=ifd;if(_66a!="html"){if(_66a=="xml"){if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _66b=(dii._frame.contentWindow.document).documentElement.innerText;_66b=_66b.replace(/>\s+</g,"><");_66b=dojo.trim(_66b);var _66c={responseText:_66b};_668=dojo._contentHandlers["xml"](_66c);}}else{_668=ifd.getElementsByTagName("textarea")[0].value;if(_66a=="json"){_668=dojo.fromJson(_668);}else{if(_66a=="javascript"){_668=dojo.eval(_668);}}}}}catch(e){_668=e;}finally{_669._callNext();}return _668;},function(_66d,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _66d;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _66e=dfd.ioArgs;var args=_66e.args;_66e._contentToClean=[];var fn=dojo.byId(args["form"]);var _66f=args["content"]||{};if(fn){if(_66f){var _670=function(name,_671){dojo.create("input",{type:"hidden",name:name,value:_671},fn);_66e._contentToClean.push(name);};for(var x in _66f){var val=_66f[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_670(x,val[i]);}}else{if(!fn[x]){_670(x,val);}else{fn[x].value=val;}}}}var _672=fn.getAttributeNode("action");var _673=fn.getAttributeNode("method");var _674=fn.getAttributeNode("target");if(args["url"]){_66e._originalAction=_672?_672.value:null;if(_672){_672.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_673||!_673.value){if(_673){_673.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_66e._originalTarget=_674?_674.value:null;if(_674){_674.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _675=args.url+(args.url.indexOf("?")>-1?"&":"?")+_66e.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_675,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _676=dfd.ioArgs;var args=_676.args;var _677=dojo.byId(args.form);if(_677){var _678=_676._contentToClean;for(var i=0;i<_678.length;i++){var key=_678[i];for(var j=0;j<_677.childNodes.length;j++){var _679=_677.childNodes[j];if(_679.name==key){dojo.destroy(_679);break;}}}if(_676["_originalAction"]){_677.setAttribute("action",_676._originalAction);}if(_676["_originalTarget"]){_677.setAttribute("target",_676._originalTarget);_677.target=_676._originalTarget;}}_676._finished=true;}};return dojo.io.iframe;});},"dojox/lang/functional/lambda":function(){define("dojox/lang/functional/lambda",["../..","dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(_67a,dojo,lang,arr){var df=lang.getObject("lang.functional",true,_67a);var _67b={};var _67c="ab".split(/a*/).length>1?String.prototype.split:function(sep){var r=this.split.call(this,sep),m=sep.exec(this);if(m&&m.index==0){r.unshift("");}return r;};var _67d=function(s){var args=[],_67e=_67c.call(s,/\s*->\s*/m);if(_67e.length>1){while(_67e.length){s=_67e.pop();args=_67e.pop().split(/\s*,\s*|\s+/m);if(_67e.length){_67e.push("(function("+args+"){return ("+s+")})");}}}else{if(s.match(/\b_\b/)){args=["_"];}else{var l=s.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),r=s.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(l||r){if(l){args.push("$1");s="$1"+s;}if(r){args.push("$2");s=s+"$2";}}else{var vars=s.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],t={};arr.forEach(vars,function(v){if(!(v in t)){args.push(v);t[v]=1;}});}}}return {args:args,body:s};};var _67f=function(a){return a.length?function(){var i=a.length-1,x=df.lambda(a[i]).apply(this,arguments);for(--i;i>=0;--i){x=df.lambda(a[i]).call(this,x);}return x;}:function(x){return x;};};lang.mixin(df,{rawLambda:function(s){return _67d(s);},buildLambda:function(s){s=_67d(s);return "function("+s.args.join(",")+"){return ("+s.body+");}";},lambda:function(s){if(typeof s=="function"){return s;}if(s instanceof Array){return _67f(s);}if(s in _67b){return _67b[s];}s=_67d(s);return _67b[s]=new Function(s.args,"return ("+s.body+");");},clearLambdaCache:function(){_67b={};}});return df;});},"dojox/charting/themes/common":function(){define("dojox/charting/themes/common",["dojo/_base/lang"],function(lang){return lang.getObject("dojox.charting.themes",true);});},"dojox/charting/plot2d/MarkersOnly":function(){define("dojox/charting/plot2d/MarkersOnly",["dojo/_base/declare","./Default"],function(_680,_681){return _680("dojox.charting.plot2d.MarkersOnly",_681,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});});},"esri/dijit/Popup":function(){define(["dijit","dojo","dojox","dojo/require!esri/InfoWindowBase,esri/PopupBase,esri/utils,dijit/_Widget,dijit/_Templated,dojo/number,dojo/date/locale,dojox/charting/Chart2D,dojox/charting/themes/PlotKit/base,dojox/charting/action2d/Tooltip,dojo/i18n"],function(_682,dojo,_683){dojo.provide("esri.dijit.Popup");dojo.require("esri.InfoWindowBase");dojo.require("esri.PopupBase");dojo.require("esri.utils");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dojo.number");dojo.require("dojo.date.locale");dojo.require("dojox.charting.Chart2D");dojo.require("dojox.charting.themes.PlotKit.base");dojo.require("dojox.charting.action2d.Tooltip");dojo.require("dojo.i18n");(function(){var dc=_683.charting,pk=dc.themes.PlotKit;pk.popup=pk.base.clone();pk.popup.chart.fill=pk.popup.plotarea.fill="#e7eef6";pk.popup.colors=["#284B70","#702828","#5F7143","#F6BC0C","#382C6C","#50224F","#1D7554","#4C4C4C","#0271AE","#706E41","#446A73","#0C3E69","#757575","#B7B7B7","#A3A3A3"];pk.popup.series.stroke.width=1;pk.popup.marker.stroke.width=1;}());dojo.declare("esri.dijit.Popup",[esri.InfoWindowBase,esri.PopupBase],{offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:true,constructor:function(_684,_685){this.initialize();dojo.mixin(this,_684);this.domNode=dojo.byId(_685);var nls=this._nls=dojo.mixin({},esri.bundle.widgets.popup);var _686=this.domNode;dojo.addClass(_686,"esriPopup");var _687="<div class='esriPopupWrapper' style='position: absolute;'>"+"<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>"+nls.NLS_zoomTo+"</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer hidden'></div>"+"</div>"+"<div class='outerPointer hidden'></div>";dojo.attr(_686,"innerHTML",_687);this._sizers=dojo.query(".sizer",_686);var _688=dojo.query(".titlePane",_686)[0];dojo.setSelectable(_688,false);this._title=dojo.query(".title",_688)[0];this._prevFeatureButton=dojo.query(".prev",_688)[0];this._nextFeatureButton=dojo.query(".next",_688)[0];this._maxButton=dojo.query(".maximize",_688)[0];this._spinner=dojo.query(".spinner",_688)[0];this._contentPane=dojo.query(".contentPane",_686)[0];this._positioner=dojo.query(".esriPopupWrapper",_686)[0];this._pointer=dojo.query(".pointer",_686)[0];this._outerPointer=dojo.query(".outerPointer",_686)[0];this._actionList=dojo.query(".actionsPane .actionList",_686)[0];this._eventConnections=[dojo.connect(dojo.query(".close",_688)[0],"onclick",this,this.hide),dojo.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),dojo.connect(this._nextFeatureButton,"onclick",this,this.selectNext),dojo.connect(this._maxButton,"onclick",this,this._toggleSize),dojo.connect(dojo.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature)];if(esri.isTouchEnabled){var _689=esri.setScrollable(this._contentPane);this._eventConnections.push(_689[0],_689[1]);}this._setVisibility(false);this.isShowing=false;},setMap:function(map){this.inherited(arguments);dojo.place(this.domNode,map.root);if(this.highlight){this.enableHighlight(map);}this._maxHeight=dojo.style(this._contentPane,"maxHeight");},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_68a){if(!esri._isDefined(_68a)||_68a===""){_68a="&nbsp;";}this.destroyDijits(this._title);this.place(_68a,this._title);if(this.isShowing){this.startupDijits(this._title);this.reposition();}},setContent:function(_68b){if(!esri._isDefined(_68b)||_68b===""){_68b="&nbsp;";}this.destroyDijits(this._contentPane);this.place(_68b,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);this.reposition();}},show:function(_68c,_68d){if(!_68c){this._setVisibility(true);this.isShowing=true;return;}var map=this.map,_68e;if(_68c.spatialReference){this._location=_68c;_68e=map.toScreen(_68c);}else{this._location=map.toMap(_68c);_68e=_68c;}var _68f=map._getFrameWidth();if(_68f!==-1){_68e.x=_68e.x%_68f;if(_68e.x<0){_68e.x+=_68f;}if(map.width>_68f){var _690=(map.width-_68f)/2;while(_68e.x<_690){_68e.x+=_68f;}}}if(this._maximized){this.restore();}else{this._setPosition(_68e);}if(_68d&&_68d.closestFirst){this.showClosestFirst(this._location);}if(!this.isShowing){this._setVisibility(true);this.isShowing=true;this.onShow();}},hide:function(){if(this.isShowing){this._setVisibility(false);this.isShowing=false;this.onHide();}},resize:function(_691,_692){this._sizers.style({width:_691+"px"});dojo.style(this._contentPane,"maxHeight",_692+"px");this._maxHeight=_692;if(this.isShowing){this.reposition();}},reposition:function(){if(this.map&&this._location&&!this._maximized&&this.isShowing){this._setPosition(this.map.toScreen(this._location));}},onShow:function(){this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.reposition();this.showHighlight();},onHide:function(){this._unfollowMap();this.hideHighlight();},maximize:function(){var map=this.map;if(!map||this._maximized){return;}this._maximized=true;var max=this._maxButton;dojo.removeClass(max,"maximize");dojo.addClass(max,"restore");dojo.attr(max,"title",this._nls.NLS_restore);var _693=this.marginLeft,_694=this.marginTop,_695=map.width-(2*_693),_696=map.height-(2*_694),_697=this.domNode;dojo.style(_697,{left:_693+"px",right:null,top:_694+"px",bottom:null});dojo.style(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=dojo.style(this._sizers[0],"width");this._savedHeight=dojo.style(this._contentPane,"maxHeight");this._sizers.style({width:_695+"px"});dojo.style(this._contentPane,{maxHeight:(_696-65)+"px",height:(_696-65)+"px"});this._showPointer("");this._unfollowMap();dojo.addClass(this.domNode,"esriPopupMaximized");this.onMaximize();},restore:function(){var map=this.map;if(!map||!this._maximized){return;}this._maximized=false;var max=this._maxButton;dojo.removeClass(max,"restore");dojo.addClass(max,"maximize");dojo.attr(max,"title",this._nls.NLS_maximize);dojo.style(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();dojo.removeClass(this.domNode,"esriPopupMaximized");this.onRestore();},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);dojo.forEach(this._eventConnections,dojo.disconnect);dojo.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},onSetFeatures:function(){},onClearFeatures:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},onSelectionChange:function(){var ptr=this.selectedIndex;this._updateUI();if(ptr>=0){this.setContent(this.features[ptr].getContent());this.updateHighlight(this.map,this.features[ptr]);if(this.isShowing){this.showHighlight();}}},onDfdComplete:function(){this.inherited(arguments);this._updateUI();},onMaximize:function(){},onRestore:function(){},_setVisibility:function(_698){dojo.style(this.domNode,"visibility",_698?"visible":"hidden");},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[dojo.connect(map,"onPanStart",this,this._onPanStart),dojo.connect(map,"onPan",this,this._onPan),dojo.connect(map,"onZoomStart",this,this._onZoomStart),dojo.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _699=this._handles;if(_699){dojo.forEach(_699,dojo.disconnect,dojo);this._handles=null;}},_onPanStart:function(){var _69a=this.domNode.style;this._panOrigin={left:_69a.left,top:_69a.top,right:_69a.right,bottom:_69a.bottom};},_onPan:function(_69b,_69c){var _69d=this._panOrigin,dx=_69c.x,dy=_69c.y,left=_69d.left,top=_69d.top,_69e=_69d.right,_69f=_69d.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_69e){_69e=(parseFloat(_69e)-dx)+"px";}if(_69f){_69f=(parseFloat(_69f)-dy)+"px";}dojo.style(this.domNode,{left:left,top:top,right:_69e,bottom:_69f});},_onZoomStart:function(){this._setVisibility(false);},_onExtentChange:function(_6a0,_6a1,_6a2){if(_6a2){this._setVisibility(true);this.show(this._targetLocation||this._location);}this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_6a3){var posX=_6a3.x,posY=_6a3.y,offX=this.offsetX||0,offY=this.offsetY||0,_6a4=0,_6a5=0,_6a6=dojo.position(this.map.container,true),_6a7=_6a6.w,_6a8=_6a6.h,_6a9="Left",_6aa="bottom",_6ab=dojo.contentBox(this._positioner),_6ac=_6ab.w/2,_6ad=_6ab.h/2,maxH=dojo.style(this._sizers[0],"height")+this._maxHeight+dojo.style(this._sizers[2],"height"),_6ae=maxH/2,xmin=0,ymin=0,xmax=_6a7,ymax=_6a8,_6af=posX,_6b0=posY;var _6b1=dojo.getObject("dojo.window.getBox");if(_6b1){_6b1=_6b1();xmin=Math.max(_6b1.l,_6a6.x);xmax=Math.min(_6b1.l+_6b1.w,_6a6.x+_6a6.w);ymin=Math.max(_6b1.t,_6a6.y);ymax=Math.min(_6b1.t+_6b1.h,_6a6.y+_6a6.h);_6af+=_6a6.x;_6b0+=_6a6.y;}if(((_6b0-ymin)>_6ae)&&((ymax-_6b0)>=_6ae)){if((xmax-_6af)>=_6ab.w){_6aa="";_6a9="Left";}else{if((_6af-xmin)>=_6ab.w){_6aa="";_6a9="Right";}}}if(_6a9&&_6aa){if(((_6af-xmin)>_6ac)&&((xmax-_6af)>=_6ac)){if((_6b0-ymin)>=maxH){_6a9="";_6aa="bottom";}else{if((ymax-_6b0)>=maxH){_6a9="";_6aa="top";}}}}if(_6a9&&_6aa){if(_6af<=xmax/2){_6a9="Left";}else{if(_6af<=xmax){_6a9="Right";}}if(_6b0<=ymax/2){_6aa="top";}else{if(_6b0<=ymax){_6aa="bottom";}}}var _6b2=_6aa+_6a9;switch(_6b2){case "top":case "bottom":_6a5=14;break;case "Left":case "Right":_6a4=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_6a5=45;break;}dojo.style(this.domNode,{left:posX+"px",top:posY+"px",right:null,bottom:null});var _6b3={left:null,right:null,top:null,bottom:null};if(_6a9){_6b3[_6a9.toLowerCase()]=(_6a4+offX)+"px";}else{_6b3.left=(-_6ac)+"px";}if(_6aa){_6b3[_6aa]=(_6a5+offY)+"px";}else{_6b3.top=(-_6ad)+"px";}dojo.style(this._positioner,_6b3);this._showPointer(_6b2);},_showPointer:function(_6b4){dojo.removeClass(this._pointer,["top","bottom","right","left","topLeft","topRight","bottomRight","bottomLeft","hidden"]);dojo.removeClass(this._outerPointer,["right","left","hidden"]);if(_6b4==="Right"||_6b4==="Left"){_6b4=_6b4.toLowerCase();dojo.addClass(this._outerPointer,_6b4);}else{dojo.addClass(this._pointer,_6b4);}},_setPagerCallbacks:function(_6b5,_6b6,_6b7){if(_6b5===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(_6b5===this._pagerScope){return;}this._pagerScope=_6b5;if(_6b5===this){_6b6=this.selectPrevious;_6b7=this.selectNext;}var _6b8=this._eventConnections;dojo.disconnect(_6b8[1]);dojo.disconnect(_6b8[2]);if(_6b6){_6b8[1]=dojo.connect(this._prevFeatureButton,"onclick",_6b5,_6b6);}if(_6b7){_6b8[2]=dojo.connect(this._nextFeatureButton,"onclick",_6b5,_6b7);}},_zoomToFeature:function(){var _6b9=this.features,ptr=this.selectedIndex,map=this.map;if(_6b9){var _6ba=_6b9[ptr].geometry,_6bb,_6bc,_6bd=0,_6be;if(_6ba){switch(_6ba.type){case "point":_6bb=_6ba;break;case "multipoint":_6bb=_6ba.getPoint(0);_6bc=_6ba.getExtent();break;case "polyline":_6bb=_6ba.getPoint(0,0);_6bc=_6ba.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_6ba.paths,function(path){var _6bf={"paths":[path,map.spatialReference]},_6c0=new esri.geometry.Polyline(_6bf),_6c1=_6c0.getExtent(),_6c2=Math.abs(_6c1.ymax-_6c1.ymin),_6c3=Math.abs(_6c1.xmax-_6c1.xmin),_6c4=(_6c3>_6c2)?_6c3:_6c2;if(_6c4>_6bd){_6bd=_6c4;_6be=_6c1;}});_6be.spatialReference=_6bc.spatialReference;_6bc=_6be;}break;case "polygon":_6bb=_6ba.getPoint(0,0);_6bc=_6ba.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_6ba.rings,function(ring){var _6c5={"rings":[ring,map.spatialReference]},_6c6=new esri.geometry.Polygon(_6c5),_6c7=_6c6.getExtent(),_6c8=Math.abs(_6c7.ymax-_6c7.ymin),_6c9=Math.abs(_6c7.xmax-_6c7.xmin),_6ca=(_6c9>_6c8)?_6c9:_6c8;if(_6ca>_6bd){_6bd=_6ca;_6be=_6c7;}});_6be.spatialReference=_6bc.spatialReference;_6bc=_6be;}break;}}if(!_6bb){_6bb=this._location;}if(!_6bc||!_6bc.intersects(this._location)){this._location=_6bb;}if(_6bc){map.setExtent(_6bc,true);}else{var _6cb=map.getNumLevels(),_6cc=map.getLevel(),last=_6cb-1,_6cd=this.zoomFactor||1;if(_6cb>0){if(_6cc===last){return;}var _6ce=_6cc+_6cd;if(_6ce>last){_6ce=last;}map._scrollZoomHandler({value:(_6ce-_6cc),mapPoint:_6bb},true);}else{map._scrollZoomHandler({value:(1/Math.pow(2,_6cd))*2,mapPoint:_6bb},true);}}}},_updateUI:function(){var _6cf="&nbsp;",ptr=this.selectedIndex,_6d0=this.features,_6d1=this.deferreds,prev=this._prevFeatureButton,next=this._nextFeatureButton,_6d2=this._spinner,_6d3=this._actionList,nls=this._nls;if(_6d0&&_6d0.length>1){if(nls.NLS_pagingInfo){_6cf=esri.substitute({index:(ptr+1),total:_6d0.length},nls.NLS_pagingInfo);}if(ptr===0){dojo.addClass(prev,"hidden");}else{dojo.removeClass(prev,"hidden");}if(ptr===_6d0.length-1){dojo.addClass(next,"hidden");}else{dojo.removeClass(next,"hidden");}}else{dojo.addClass(prev,"hidden");dojo.addClass(next,"hidden");}this.setTitle(_6cf);if(_6d1&&_6d1.length){if(_6d0){dojo.removeClass(_6d2,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{dojo.addClass(_6d2,"hidden");if(!_6d0||!_6d0.length){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(_6d0&&_6d0.length){dojo.removeClass(_6d3,"hidden");}else{dojo.addClass(_6d3,"hidden");}}});dojo.declare("esri.dijit.PopupTemplate",[esri.PopupInfoTemplate],{chartTheme:"dojox.charting.themes.PlotKit.popup",constructor:function(json,_6d4){dojo.mixin(this,_6d4);this.initialize(json);this._nls=dojo.mixin({},esri.bundle.widgets.popup);},getTitle:function(_6d5){return this.info?this.getComponents(_6d5).title:"";},getContent:function(_6d6){return this.info?new esri.dijit._PopupRenderer({template:this,graphic:_6d6,chartTheme:this.chartTheme,_nls:this._nls},dojo.create("div")).domNode:"";}});dojo.declare("esri.dijit._PopupRenderer",[_682._Widget,_682._Templated],{templateString:"<div class='esriViewPopup'>"+"<div class='mainSection'>"+"<div class='header' dojoAttachPoint='_title'></div>"+"<div class='hzLine'></div>"+"<div dojoAttachPoint='_description'></div>"+"<div class='break'></div>"+"</div>"+"<div class='attachmentsSection hidden'>"+"<div>${_nls.NLS_attach}:</div>"+"<ul dojoAttachPoint='_attachmentsList'>"+"</ul>"+"<div class='break'></div>"+"</div>"+"<div class='mediaSection hidden'>"+"<div class='header' dojoAttachPoint='_mediaTitle'></div>"+"<div class='hzLine'></div>"+"<div class='caption' dojoAttachPoint='_mediaCaption'></div>"+"<div class='gallery' dojoAttachPoint='_gallery'>"+"<div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div>"+"<div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div>"+"<ul class='summary'>"+"<li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li>"+"<li class='image mediaIcon hidden'></li>"+"<li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li>"+"<li class='chart mediaIcon hidden'></li>"+"</ul>"+"<div class='frame' dojoAttachPoint='_mediaFrame'></div>"+"</div>"+"</div>"+"<div class='editSummarySection hidden' dojoAttachPoint='_editSummarySection'>"+"<div class='break'></div>"+"<div class='break hidden' dojoAttachPoint='_mediaBreak'></div>"+"<div class='editSummary' dojoAttachPoint='_editSummary'></div>"+"</div>"+"</div>",startup:function(){this.inherited(arguments);var _6d7=this.template,_6d8=this.graphic,_6d9=_6d7.getComponents(_6d8),_6da=_6d9.title,_6db=_6d9.description,_6dc=_6d9.fields,_6dd=_6d9.mediaInfos,_6de=this.domNode,nls=this._nls;this._prevMedia.title=nls.NLS_prevMedia;this._nextMedia.title=nls.NLS_nextMedia;dojo.attr(this._title,"innerHTML",_6da);if(!_6da){dojo.addClass(this._title,"hidden");}if(!_6db&&_6dc){_6db="";dojo.forEach(_6dc,function(row){_6db+=("<tr valign='top'>");_6db+=("<td class='attrName'>"+row[0]+"</td>");_6db+=("<td class='attrValue'>"+row[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>"+nls.NLS_moreInfo+"</a>")+"</td>");_6db+=("</tr>");});if(_6db){_6db="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+_6db+"</table>";}}dojo.attr(this._description,"innerHTML",_6db);if(!_6db){dojo.addClass(this._description,"hidden");}dojo.query("a",this._description).forEach(function(node){dojo.attr(node,"target","_blank");});if(_6da&&_6db){dojo.query(".mainSection .hzLine",_6de).removeClass("hidden");}else{if(_6da||_6db){dojo.query(".mainSection .hzLine",_6de).addClass("hidden");}else{dojo.query(".mainSection",_6de).addClass("hidden");}}var dfd=(this._dfd=_6d7.getAttachments(_6d8));if(dfd){dfd.addBoth(dojo.hitch(this,this._attListHandler,dfd));dojo.attr(this._attachmentsList,"innerHTML","<li>"+nls.NLS_searching+"...</li>");dojo.query(".attachmentsSection",_6de).removeClass("hidden");}if(_6dd&&_6dd.length){dojo.query(".mediaSection",_6de).removeClass("hidden");dojo.setSelectable(this._mediaFrame,false);this._mediaInfos=_6dd;this._mediaPtr=0;this._updateUI();this._displayMedia();}if(_6d9.editSummary){dojo.attr(this._editSummary,"innerHTML",_6d9.editSummary);if(_6dd&&_6dd.length){dojo.removeClass(this._mediaBreak,"hidden");}dojo.removeClass(this._editSummarySection,"hidden");}},destroy:function(){if(this._dfd){this._dfd.cancel();}this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments);},_goToPrevMedia:function(){var ptr=this._mediaPtr-1;if(ptr<0){return;}this._mediaPtr--;this._updateUI();this._displayMedia();},_goToNextMedia:function(){var ptr=this._mediaPtr+1;if(ptr===this._mediaInfos.length){return;}this._mediaPtr++;this._updateUI();this._displayMedia();},_updateUI:function(){var _6df=this._mediaInfos,_6e0=_6df.length,_6e1=this.domNode,_6e2=this._prevMedia,_6e3=this._nextMedia;if(_6e0>1){var _6e4=0,_6e5=0;dojo.forEach(_6df,function(info){if(info.type==="image"){_6e4++;}else{if(info.type.indexOf("chart")!==-1){_6e5++;}}});if(_6e4){dojo.attr(this._imageCount,"innerHTML",_6e4);dojo.query(".summary .image",_6e1).removeClass("hidden");}if(_6e5){dojo.attr(this._chartCount,"innerHTML",_6e5);dojo.query(".summary .chart",_6e1).removeClass("hidden");}}else{dojo.query(".summary",_6e1).addClass("hidden");dojo.addClass(_6e2,"hidden");dojo.addClass(_6e3,"hidden");}var ptr=this._mediaPtr;if(ptr===0){dojo.addClass(_6e2,"hidden");}else{dojo.removeClass(_6e2,"hidden");}if(ptr===_6e0-1){dojo.addClass(_6e3,"hidden");}else{dojo.removeClass(_6e3,"hidden");}this._destroyFrame();},_displayMedia:function(){var info=this._mediaInfos[this._mediaPtr],_6e6=info.title,_6e7=info.caption,_6e8=dojo.query(".mediaSection .hzLine",this.domNode)[0];dojo.attr(this._mediaTitle,"innerHTML",_6e6);dojo[_6e6?"removeClass":"addClass"](this._mediaTitle,"hidden");dojo.attr(this._mediaCaption,"innerHTML",_6e7);dojo[_6e7?"removeClass":"addClass"](this._mediaCaption,"hidden");dojo[(_6e6&&_6e7)?"removeClass":"addClass"](_6e8,"hidden");if(info.type==="image"){this._showImage(info.value);}else{this._showChart(info.type,info.value);}},_showImage:function(_6e9){dojo.addClass(this._mediaFrame,"image");var _6ea=dojo.style(this._gallery,"height"),html="<img src='"+_6e9.sourceURL+"' onload='esri.dijit._PopupRenderer.prototype._imageLoaded(this,"+_6ea+");' />";if(_6e9.linkURL){html="<a target='_blank' href='"+_6e9.linkURL+"'>"+html+"</a>";}dojo.attr(this._mediaFrame,"innerHTML",html);},_showChart:function(type,_6eb){dojo.removeClass(this._mediaFrame,"image");var _6ec=this._chart=new _683.charting.Chart2D(dojo.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});var _6ed=_6eb.theme||this.chartTheme||"PlotKit.popup";_6ec.setTheme(dojo.getObject(_6ed)||dojo.getObject("dojox.charting.themes."+_6ed));switch(type){case "piechart":_6ec.addPlot("default",{type:"Pie",labels:false});_6ec.addSeries("Series A",_6eb.fields);break;case "linechart":_6ec.addPlot("default",{type:"Markers"});_6ec.addAxis("x",{min:0,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_6ec.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});dojo.forEach(_6eb.fields,function(info,idx){info.x=idx+1;});_6ec.addSeries("Series A",_6eb.fields);break;case "columnchart":_6ec.addPlot("default",{type:"Columns",gap:3});_6ec.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});_6ec.addSeries("Series A",_6eb.fields);break;case "barchart":_6ec.addPlot("default",{type:"Bars",gap:3});_6ec.addAxis("x",{includeZero:true,fixUpper:"minor",minorLabels:false});_6ec.addAxis("y",{vertical:true,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_6ec.addSeries("Series A",_6eb.fields);break;}this._action=new _683.charting.action2d.Tooltip(_6ec);_6ec.render();},_destroyFrame:function(){if(this._chart){this._chart.destroy();this._chart=null;}if(this._action){this._action.destroy();this._action=null;}dojo.attr(this._mediaFrame,"innerHTML","");},_imageLoaded:function(img,_6ee){var _6ef=img.height;if(_6ef<_6ee){var diff=Math.round((_6ee-_6ef)/2);dojo.style(img,"marginTop",diff+"px");}},_attListHandler:function(dfd,_6f0){if(dfd===this._dfd){this._dfd=null;var html="";if(!(_6f0 instanceof Error)&&_6f0&&_6f0.length){dojo.forEach(_6f0,function(info){html+=("<li>");html+=("<a href='"+info.url+"' target='_blank'>"+(info.name||"[No name]")+"</a>");html+=("</li>");});}dojo.attr(this._attachmentsList,"innerHTML",html||"<li>"+this._nls.NLS_noAttach+"</li>");}}});});},"dojox/charting/scaler/common":function(){define("dojox/charting/scaler/common",["dojo/_base/lang"],function(lang){var eq=function(a,b){return Math.abs(a-b)<=0.000001*(Math.abs(a)+Math.abs(b));};var _6f1=lang.getObject("dojox.charting.scaler.common",true);var _6f2={};return lang.mixin(_6f1,{doIfLoaded:function(_6f3,_6f4,_6f5){if(_6f2[_6f3]==undefined){try{_6f2[_6f3]=require(_6f3);}catch(e){_6f2[_6f3]=null;}}if(_6f2[_6f3]){return _6f4(_6f2[_6f3]);}else{return _6f5();}},findString:function(val,text){val=val.toLowerCase();for(var i=0;i<text.length;++i){if(val==text[i]){return true;}}return false;},getNumericLabel:function(_6f6,_6f7,_6f8){var def="";_6f1.doIfLoaded("dojo/number",function(_6f9){def=(_6f8.fixed?_6f9.format(_6f6,{places:_6f7<0?-_6f7:0}):_6f9.format(_6f6))||"";},function(){def=_6f8.fixed?_6f6.toFixed(_6f7<0?-_6f7:0):_6f6.toString();});if(_6f8.labelFunc){var r=_6f8.labelFunc(def,_6f6,_6f7);if(r){return r;}}if(_6f8.labels){var l=_6f8.labels,lo=0,hi=l.length;while(lo<hi){var mid=Math.floor((lo+hi)/2),val=l[mid].value;if(val<_6f6){lo=mid+1;}else{hi=mid;}}if(lo<l.length&&eq(l[lo].value,_6f6)){return l[lo].text;}--lo;if(lo>=0&&lo<l.length&&eq(l[lo].value,_6f6)){return l[lo].text;}lo+=2;if(lo<l.length&&eq(l[lo].value,_6f6)){return l[lo].text;}}return def;}});});},"esri/layers/FeatureLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/graphics,esri/tasks/query,dojo/io/iframe,esri/layers/agscommon,dojo/date/locale"],function(_6fa,dojo,_6fb){dojo.provide("esri.layers.FeatureLayer");dojo.require("esri.layers.graphics");dojo.require("esri.tasks.query");dojo.require("dojo.io.iframe");dojo.require("esri.layers.agscommon");dojo.require("dojo.date.locale");dojo.declare("esri.layers.FeatureLayer",esri.layers.GraphicsLayer,{constructor:function(url,_6fc){this._outFields=_6fc&&_6fc.outFields;this._loadCallback=_6fc&&_6fc.loadCallback;var _6fd=_6fc&&_6fc._usePatch;this._usePatch=(_6fd===null||_6fd===undefined)?true:_6fd;this._trackIdField=_6fc&&_6fc.trackIdField;this.objectIdField=_6fc&&_6fc.objectIdField;this._maxOffset=_6fc&&_6fc.maxAllowableOffset;this._optEditable=_6fc&&_6fc.editable;this._optAutoGen=_6fc&&_6fc.autoGeneralize;this.editSummaryCallback=_6fc&&_6fc.editSummaryCallback;this.userId=_6fc&&_6fc.userId;this.userIsAdmin=_6fc&&_6fc.userIsAdmin;this.useMapTime=(_6fc&&_6fc.hasOwnProperty("useMapTime"))?(!!_6fc.useMapTime):true;this.source=_6fc&&_6fc.source;this.gdbVersion=_6fc&&_6fc.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(esri._isDefined(_6fc&&_6fc.mode)?_6fc.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_6fc&&_6fc.tileWidth)||512;this._tileHeight=(_6fc&&_6fc.tileHeight)||512;this._mode=new esri.layers._OnDemandMode(this);var _6fe=_6fc&&_6fc.latticeTiling;this.latticeTiling=_6fe;break;case ctor.MODE_SELECTION:this._mode=new esri.layers._SelectionMode(this);this._isSelOnly=true;break;}this._initLayer=dojo.hitch(this,this._initLayer);this._selectHandler=dojo.hitch(this,this._selectHandler);this._editable=false;if(dojo.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new esri.tasks.QueryTask(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _6ff=this._url.path;this._fserver=false;if(_6ff.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _700=_6fc&&_6fc.resourceInfo;if(_700){this._initLayer(_700);}else{if(this.source){var _701={source:this.source.toJson()};this._url.query=dojo.mixin(this._url.query,{layer:dojo.toJson(_701)});}if(this.gdbVersion){this._url.query=dojo.mixin(this._url.query,{gdbVersion:this.gdbVersion});}esri.request({url:_6ff,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_702,io){if(_702||io){this._json=_702;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_702&&_702._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;this._featureSet=_702.featureSet;this._nextId=_702.nextObjectId;_702=_702.layerDefinition;}if(_702.hasOwnProperty("capabilities")){var _703=(this.capabilities=_702.capabilities);if(_703&&_703.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(esri._isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=dojo.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_702.geometryType==="esriGeometryPolyline")||(_702.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=esri._isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}this.minScale=_702.effectiveMinScale||_702.minScale||0;this.maxScale=_702.effectiveMaxScale||_702.maxScale||0;this.layerId=_702.id;this.name=_702.name;this.description=_702.description;this.copyright=_702.copyrightText;this.type=_702.type;this.geometryType=_702.geometryType;this.displayField=_702.displayField;this.defaultDefinitionExpression=_702.definitionExpression;this.fullExtent=new esri.geometry.Extent(_702.extent);this.defaultVisibility=_702.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_702.indexedFields;this.maxRecordCount=_702.maxRecordCount;this.canModifyLayer=_702.canModifyLayer;this.supportsStatistics=_702.supportsStatistics;this.supportsAdvancedQueries=_702.supportsAdvancedQueries;this.hasLabels=_702.hasLabels;this.canScaleSymbols=_702.canScaleSymbols;this.supportsRollbackOnFailure=_702.supportsRollbackOnFailure;this.syncCanReturnChanges=_702.syncCanReturnChanges;this.isDataVersioned=_702.isDataVersioned;this.editFieldsInfo=_702.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_702.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_702.relationships;this.allowGeometryUpdates=esri._isDefined(_702.allowGeometryUpdates)?_702.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _704=(this.fields=[]),_705=_702.fields,i;for(i=0;i<_705.length;i++){_704.push(new esri.layers.Field(_705[i]));}if(!this.objectIdField){this.objectIdField=_702.objectIdField;if(!this.objectIdField){_705=_702.fields;for(i=0;i<_705.length;i++){var _706=_705[i];if(_706.type==="esriFieldTypeOID"){this.objectIdField=_706.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noOIDField));}}if(!esri._isDefined(this._nextId)){var _707=this.objectIdField,_708=-1;if(this._collection&&_707){var fset=this._featureSet,_709=fset&&fset.features,il=_709?_709.length:0,oid,attr;for(i=0;i<il;i++){attr=_709[i].attributes;oid=attr&&attr[_707];if(oid>_708){_708=oid;}}}this._nextId=(_708+1);}this.globalIdField=_702.globalIdField;var _70a=(this.typeIdField=_702.typeIdField),_70b;if(_70a){_70b=!this._getField(_70a)&&this._getField(_70a,true);if(_70b){this.typeIdField=_70b.name;}}this.visibilityField=_702.visibilityField;var _70c=_702.defaultSymbol;if(_70c){this.defaultSymbol=esri.symbol.fromJson(_70c);}var _70d=this.types=[],_70e=_702.types,_70f,_710,_711,_712=this.editFieldsInfo,_713=_712&&_712.creatorField,_714=_712&&_712.editorField,fix=(_713||_714),_715=[];if(_70e){for(i=0;i<_70e.length;i++){_70f=new esri.layers.FeatureType(_70e[i]);_710=_70f.templates;if(fix&&_710&&_710.length){_715=_715.concat(_710);}_70d.push(_70f);}}var _716=_702.templates,_717,_718=this.templates=[];if(_716){for(i=0;i<_716.length;i++){_717=new esri.layers.FeatureTemplate(_716[i]);if(fix){_715.push(_717);}_718.push(_717);}}for(i=0;i<_715.length;i++){_711=dojo.getObject("prototype.attributes",false,_715[i]);if(_711){if(_713){delete _711[_713];}if(_714){delete _711[_714];}}}var _719=_702.timeInfo;if(_719){this.timeInfo=new esri.layers.TimeInfo(_719);this._startTimeField=_719.startTimeField;this._endTimeField=_719.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_719.trackIdField=this._trackIdField;}else{this._trackIdField=_719.trackIdField;}}this.hasAttachments=(!this._collection&&_702.hasAttachments)?true:false;this.htmlPopupType=_702.htmlPopupType;var _71a=_702.drawingInfo,_71b;if(!this.renderer){if(_71a&&_71a.renderer){_71b=_71a.renderer;this.setRenderer(esri.renderer.fromJson(_71b));if(_71b.type==="classBreaks"){this.renderer._setMaxInclusiveness(true);}if(!this._collection){var _71c=_71b.type,_71d=[];_71b=this.renderer;switch(_71c){case "simple":_71d.push(_71b.symbol);break;case "uniqueValue":case "classBreaks":_71d.push(_71b.defaultSymbol);_71d=_71d.concat(dojo.map(_71b.infos,function(info){return info.symbol;}));break;}_71d=dojo.filter(_71d,esri._isDefined);var _71e=this._url.path+"/images/",_71f=this._getToken();dojo.forEach(_71d,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_71e+url;}if(_71f&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_71f);}}});}}else{if(_70c){_70e=this.types;if(_70e.length>0){_71b=new esri.renderer.UniqueValueRenderer(this.defaultSymbol,this.typeIdField);dojo.forEach(_70e,function(type){_71b.addValue(type.id,type.symbol);});}else{_71b=new esri.renderer.SimpleRenderer(this.defaultSymbol);}this.setRenderer(_71b);}else{if(!this._isTable){var _720;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_720=new esri.symbol.SimpleMarkerSymbol();break;case "esriGeometryPolyline":_720=new esri.symbol.SimpleLineSymbol();break;case "esriGeometryPolygon":_720=new esri.symbol.SimpleFillSymbol();break;}this.setRenderer(_720?new esri.renderer.SimpleRenderer(_720):null);}}}}var _721=(_71a&&_71a.transparency)||0;if(!esri._isDefined(this.opacity)&&_721>0){this.opacity=1-(_721/100);}this.version=_702.currentVersion;if(!this.version){var ver;if("capabilities" in _702||"drawingInfo" in _702||"hasAttachments" in _702||"htmlPopupType" in _702||"relationships" in _702||"timeInfo" in _702||"typeIdField" in _702||"types" in _702){ver=10;}else{ver=9.3;}this.version=ver;}if((dojo.isIE||dojo.isSafari)&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();if(this._collection){this._fireUpdateStart();var _722=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new esri.tasks.FeatureSet(_722));this._fcAdded=true;}this.onLoad(this);var _723=this._loadCallback;if(_723){delete this._loadCallback;_723(this);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _724=this.renderer;if(_724){this._ager=(_724.declaredClass.indexOf("TemporalRenderer")!==-1&&_724.observationAger&&_724.observationRenderer);var _725=dojo.filter([_724,_724.observationRenderer,_724.latestObservationRenderer,_724.trackRenderer],esri._isDefined);var _726=[];dojo.forEach(_725,function(rnd){_726.push(rnd.attributeField);_726.push(rnd.attributeField2);_726.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_726,esri._isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map,_727){this._map=map;this._toggleTime(true);var div=this.inherited("_setMap",arguments);this.clearSelection();var _728=this.renderer;if(this.timeInfo){if(this._trackIdField||(_728&&(_728.latestObservationRenderer||_728.trackRenderer))){this._trackManager=new esri.layers._TrackManager(this);this._trackManager.initialize(map);}}this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._zoomHandler);this._zoomHandler();var mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map,_729){var mode=this._mode;if(mode){mode.destroy();this._mode=null;}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}dojo.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},setEditable:function(_72a){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_72a;return this;}var _72b=this._editable;this._editable=_72a;this._updateCaps();if(_72b!==_72a){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_72c){var _72d={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _72d;}var _72e=_72c&&_72c.feature,_72f=_72c&&_72c.userId,caps=dojo.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),dojo.trim),_730=dojo.indexOf(caps,"editing")>-1,_731=_730&&(dojo.indexOf(caps,"create")>-1),_732=_730&&(dojo.indexOf(caps,"update")>-1),_733=_730&&(dojo.indexOf(caps,"delete")>-1),_734=this.ownershipBasedAccessControlForFeatures,_735=this.editFieldsInfo,_736=_735&&_735.creatorField,_737=_735&&_735.realm,_738=_72e&&_72e.attributes,_739=(_738&&_736)?_738[_736]:undefined,_73a,_73b=!!this.userIsAdmin,_73c=!_734||_73b||!!(_734.allowOthersToUpdate||_734.allowUpdateToOthers),_73d=!_734||_73b||!!(_734.allowOthersToDelete||_734.allowDeleteToOthers);if(_73b||(_730&&!(_731||_732||_733))){_731=_732=_733=true;}_73a={"canCreate":_731,"canUpdate":_732,"canDelete":_733};if(_739===null){_73a.canUpdate=_732&&_73c;_73a.canDelete=_733&&_73d;}else{if(_739===""){return _73a;}else{if(_739){_72f=_72f||this.getUserId();if(_72f&&_737){_72f=_72f+"@"+_737;}if(_72f.toLowerCase()===_739.toLowerCase()){return _73a;}else{_73a.canUpdate=_732&&_73c;_73a.canDelete=_733&&_73d;}}}}return _73a;},getUserId:function(){var _73e;if(this.loaded){_73e=(this.credential&&this.credential.userId)||this.userId||"";}return _73e;},setUserIsAdmin:function(_73f){this.userIsAdmin=_73f;},setEditSummaryCallback:function(_740){this.editSummaryCallback=_740;},getEditSummary:function(_741,_742,_743){_743=esri._isDefined(_743)?_743:(new Date()).getTime();var _744="",info=this.getEditInfo(_741,_742,_743),_745=(_742&&_742.callback)||this.editSummaryCallback;if(_745){info=_745(_741,info)||"";}if(dojo.isString(info)){_744=info;}else{if(info){var _746=info.action,_747=info.userId,_748=info.timeValue,_749=0;if(_746){_749++;}if(_747){_749++;}if(esri._isDefined(_748)){_749++;}if(_749>1){_744=(_746==="edit"?"edit":"create")+(_747?"User":"")+(esri._isDefined(_748)?info.displayPattern:"");}}_744=_744&&esri.substitute(info,esri.bundle.layers.FeatureLayer[_744]);}return _744;},getEditInfo:function(_74a,_74b,_74c){if(!this.loaded){return;}_74c=esri._isDefined(_74c)?_74c:(new Date()).getTime();var _74d=(_74b&&_74b.action)||"last",_74e=this.editFieldsInfo,_74f=_74e&&_74e.creatorField,_750=_74e&&_74e.creationDateField,_751=_74e&&_74e.editorField,_752=_74e&&_74e.editDateField,_753=_74e&&_74e.realm,_754=_74a&&_74a.attributes,_755=(_754&&_74f)?_754[_74f]:undefined,_756=(_754&&_750)?_754[_750]:null,_757=(_754&&_751)?_754[_751]:undefined,_758=(_754&&_752)?_754[_752]:null,_759=this._getEditData(_755,_756,_74c),_75a=this._getEditData(_757,_758,_74c),_75b;switch(_74d){case "creation":_75b=_759;break;case "edit":_75b=_75a;break;case "last":_75b=_75a||_759;break;}if(_75b){_75b.action=(_75b===_75a)?"edit":"creation";}return _75b;},_getEditData:function(_75c,_75d,_75e){var data,_75f,_760,_761=60000,_762=3600000,_763=2*_762,_764=24*_762,_765=7*_764;if(esri._isDefined(_75d)){_75f=_75e-_75d;if(_75f<0){_760="Full";}else{if(_75f<_761){_760="Seconds";}else{if(_75f<(2*_761)){_760="Minute";}else{if(_75f<_762){_760="Minutes";}else{if(_75f<_763){_760="Hour";}else{if(_75f<_764){_760="Hours";}else{if(_75f<_765){_760="WeekDay";}else{_760="Full";}}}}}}}}if((_75c!==undefined)||_760){data=data||{};data.userId=_75c;if(_760){var _766=dojo.date.locale.format,_767=new Date(_75d);data.minutes=Math.floor(_75f/_761);data.hours=Math.floor(_75f/_762);data.weekDay=_766(_767,{datePattern:"EEEE",selector:"date"});data.formattedDate=_766(_767,{selector:"date"});data.formattedTime=_766(_767,{selector:"time"});data.displayPattern=_760;data.timeValue=_75d;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_768){if(!this.isEditable()){this._maxOffset=_768;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_769){if(!this.loaded){this._optAutoGen=_769;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_769;if(_769){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setScaleRange:function(_76a,_76b){this.minScale=_76a||0;this.maxScale=_76b||0;if(this._map&&this._map.loaded){this._updateStatus();}},setGDBVersion:function(_76c){if(!this._collection&&(_76c!==this.gdbVersion)&&(_76c||this.gdbVersion)){this.gdbVersion=_76c;this._task.gdbVersion=_76c;this._url.query=dojo.mixin(this._url.query,{gdbVersion:_76c});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_76d){if(this._isSnapshot){this._timeDefn=_76d;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_76e,_76f){this._timeOffset=_76e;this._timeOffsetUnits=_76f;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this._suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_770,_771,_772,_773){_771=_771||this.constructor.SELECTION_NEW;var _774=this._getShallowClone(_770),map=this._map,_775,dfd=esri._fixDfd(new dojo.Deferred(esri._dfdCanceller));_774.outFields=this._getOutFields();_774.returnGeometry=true;if(map){_774.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_774)){_775={features:[]};this._selectHandler(_775,_771,_772,_773,dfd);return dfd;}var _776=this._canDoClientSideQuery(_774);if(_776){_775={features:this._doQuery(_774,_776)};this._selectHandler(_775,_771,_772,_773,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_773,dfd,true);return dfd;}var self=this;if(this._ts){_774._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_774);temp.addCallbacks(function(_777){self._selectHandler(_777,_771,_772,_773,dfd);},function(err){self._resolve([err],null,_773,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _778=this._selectedFeatures,_779=[],item;for(item in _778){if(_778.hasOwnProperty(item)){_779.push(_778[item]);}}return _779;},clearSelection:function(_77a){var _77b=this._selectedFeatures,mode=this._mode,item;for(item in _77b){if(_77b.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_77a){this.onSelectionClear();}return this;},setSelectionSymbol:function(_77c){this._selectionSymbol=_77c;if(_77c){var _77d=this._selectedFeatures,item;for(item in _77d){if(_77d.hasOwnProperty(item)){_77d[item].setSymbol(_77c);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_77e,_77f,_780,_781,_782){var _783=_782.assembly,dfd=_782.dfd;this._applyNormalized(adds,_783&&_783[0]);this._applyNormalized(_77e,_783&&_783[1]);this.onBeforeApplyEdits(adds,_77e,_77f);var i,_784={},_785=this.objectIdField,_786={f:"json"},_787=false;if(this._collection){var _788={};_788.addResults=adds?dojo.map(adds,function(){_787=true;return {objectId:this._nextId++,success:true};},this):null;_788.updateResults=_77e?dojo.map(_77e,function(_789){_787=true;var oid=_789.attributes[_785];_784[oid]=_789;return {objectId:oid,success:true};},this):null;_788.deleteResults=_77f?dojo.map(_77f,function(_78a){_787=true;return {objectId:_78a.attributes[_785],success:true};},this):null;if(_787){this._editHandler(_788,adds,_784,_780,_781,dfd);}return;}if(adds&&adds.length>0){_786.adds=this._convertFeaturesToJson(adds,0,1);_787=true;}if(_77e&&_77e.length>0){for(i=0;i<_77e.length;i++){var _78b=_77e[i];_784[_78b.attributes[_785]]=_78b;}_786.updates=this._convertFeaturesToJson(_77e,0,0,1);_787=true;}if(_77f&&_77f.length>0){var ids=[];for(i=0;i<_77f.length;i++){ids.push(_77f[i].attributes[_785]);}_786.deletes=ids.join(",");_787=true;}if(_787){var self=this;return esri.request({url:this._url.path+"/applyEdits",content:dojo.mixin(_786,this._url.query),callbackParamName:"callback",load:function(_78c){self._editHandler(_78c,adds,_784,_780,_781,dfd);},error:function(err){self._resolve([err],null,_781,dfd,true);}},{usePost:true});}},queryFeatures:function(_78d,_78e,_78f){return this._query("execute","onQueryFeaturesComplete",_78d,_78e,_78f);},queryRelatedFeatures:function(_790,_791,_792){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_790,_791,_792);},queryIds:function(_793,_794,_795){return this._query("executeForIds","onQueryIdsComplete",_793,_794,_795);},queryCount:function(_796,_797,_798){return this._query("executeForCount","onQueryCountComplete",_796,_797,_798);},queryAttachmentInfos:function(_799,_79a,_79b){var url=this._url.path+"/"+_799+"/attachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this;dfd._pendingDfd=esri.request({url:url,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_79c){var _79d=_79c.attachmentInfos,_79e;dojo.forEach(_79d,function(info){_79e=dojo.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_79e?("?"+_79e):"");info.objectId=_799;});self._resolve([_79d],"onQueryAttachmentInfosComplete",_79a,dfd);},error:function(err){self._resolve([err],null,_79b,dfd,true);}});return dfd;},addAttachment:function(_79f,_7a0,_7a1,_7a2){return this._sendAttachment("add",_79f,_7a0,_7a1,_7a2);},updateAttachment:function(_7a3,_7a4,_7a5,_7a6,_7a7){_7a5.appendChild(dojo.create("input",{type:"hidden",name:"attachmentId",value:_7a4}));return this._sendAttachment("update",_7a3,_7a5,_7a6,_7a7);},deleteAttachments:function(_7a8,_7a9,_7aa,_7ab){var url=this._url.path+"/"+_7a8+"/deleteAttachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this,_7ac={f:"json",attachmentIds:_7a9.join(",")};dfd._pendingDfd=esri.request({url:url,content:dojo.mixin(_7ac,this._url.query),callbackParamName:"callback",load:dojo.hitch(this,function(_7ad){var _7ae=_7ad.deleteAttachmentResults;_7ae=dojo.map(_7ae,function(_7af){var res=new esri.layers.FeatureEditResult(_7af);res.attachmentId=res.objectId;res.objectId=_7a8;return res;});self._resolve([_7ae],"onDeleteAttachmentsComplete",_7aa,dfd);}),error:function(err){self._resolve([err],null,_7ab,dfd,true);}},{usePost:true});return dfd;},addType:function(_7b0){var _7b1=this.types;if(_7b1){var _7b2=dojo.some(_7b1,function(type){if(type.id==_7b0.id){return true;}return false;});if(_7b2){return false;}else{_7b1.push(_7b0);}}else{this.types=[_7b0];}this._typesDirty=true;return true;},deleteType:function(_7b3){if(!this._collection){return;}var _7b4=this.types;if(_7b4){var _7b5=-1;dojo.some(_7b4,function(type,_7b6){if(type.id==_7b3){_7b5=_7b6;return true;}return false;});if(_7b5>-1){this._typesDirty=true;return _7b4.splice(_7b5,1)[0];}}},toJson:function(){var _7b7=this._json,json=dojo.isString(_7b7)?dojo.fromJson(_7b7):dojo.clone(_7b7);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _7b8=json.layerDefinition,_7b9=this._collection;if(_7b9&&this._typesDirty){_7b8.types=dojo.map(this.types||[],function(type){return type.toJson();});var _7ba=this.renderer,_7bb=_7b8.drawingInfo;if(_7bb&&_7ba&&_7ba.declaredClass.indexOf("TemporalRenderer")===-1){_7bb.renderer=_7ba.toJson();}}var _7bc=null;if(!(_7b9&&!this._fcAdded)){_7bc={geometryType:_7b8.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=dojo.mixin({},json.featureSet||{},_7bc);if(_7b9){json.nextObjectId=this._nextId;_7b8.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_updateCaps:function(){var _7bd=this._editable,_7be=dojo.trim(this.capabilities||""),_7bf=dojo.map((_7be?_7be.split(","):[]),dojo.trim),caps=dojo.map((_7be?_7be.toLowerCase().split(","):[]),dojo.trim),_7c0=dojo.indexOf(caps,"editing"),cap,i,_7c1,_7c2={"Create":dojo.indexOf(caps,"create"),"Update":dojo.indexOf(caps,"update"),"Delete":dojo.indexOf(caps,"delete")};if(_7bd&&_7c0===-1){_7bf.push("Editing");}else{if(!_7bd&&_7c0>-1){_7c1=[_7c0];for(cap in _7c2){if(_7c2[cap]>-1){_7c1.push(_7c2[cap]);}}_7c1.sort();for(i=_7c1.length-1;i>=0;i--){_7bf.splice(_7c1[i],1);}}}this.capabilities=_7bf.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},_getDesiredStatus:function(){return this.visible&&this._isMapAtVisibleScale();},_isMapAtVisibleScale:function(){if(!this._map){return false;}var _7c3=esri.geometry.getScale(this._map);var _7c4=this.minScale,_7c5=this.maxScale,_7c6=!_7c4,_7c7=!_7c5;if(!_7c6&&_7c3<=_7c4){_7c6=true;}if(!_7c7&&_7c3>=_7c5){_7c7=true;}return (_7c6&&_7c7)?true:false;},_suspend:function(){this.inherited("_suspend",arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},_resume:function(){this.inherited("_resume",arguments);this._toggleTime(true);var mode=this._mode;if(mode){mode.resume();}},_zoomHandler:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}this._updateStatus();}},_toggleTime:function(_7c8){var map=this._map;if(_7c8&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=dojo.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;dojo.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_7c9){this._mapTimeExtent=_7c9;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_7ca){var _7cb=this._timeOffset,_7cc=this._timeOffsetUnits;return (_7ca&&_7cb&&_7cc)?_7ca.offset(-1*_7cb,_7cc):_7ca;},_getTimeOverlap:function(_7cd,_7ce){if(_7cd&&_7ce){return _7cd.intersection(_7ce);}else{return _7cd||_7ce;}},_getTimeFilter:function(_7cf){var _7d0=this.getTimeDefinition(),_7d1=null,_7d2;if(_7d0||_7d1){_7d2=this._getTimeOverlap(_7d0,_7d1);if(!_7d2){return [false];}}if(_7cf){_7cf=_7d2?this._getTimeOverlap(_7cf,_7d2):_7cf;if(!_7cf){return [false];}}else{_7cf=_7d2;}return [true,_7cf];},_getAttributeFilter:function(_7d3){var _7d4=this.getDefinitionExpression();if(_7d3){_7d3=_7d4?"("+_7d4+") AND ("+_7d3+")":_7d3;}else{_7d3=_7d4;}return _7d3;},_applyQueryFilters:function(_7d5){_7d5.where=this._getAttributeFilter(_7d5.where);_7d5.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _7d6=this._getTimeFilter(_7d5.timeExtent);if(!_7d6[0]){return false;}else{_7d5.timeExtent=_7d6[1];}}return true;},_add:function(_7d7){var _7d8=this._selectionSymbol,attr=_7d7.attributes,_7d9=this.visibilityField;if(_7d8&&this._isSelOnly){_7d7.setSymbol(_7d8);}if(_7d9&&attr&&attr.hasOwnProperty(_7d9)){_7d7[attr[_7d9]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_7da){var _7db=[],map=this._map;if(this._isTable||!map){return;}if(_7da.text||(_7da.where&&_7da.where!==this.getDefinitionExpression())){return;}var _7dc=this._isSnapshot,_7dd=this._isSelOnly;var _7de=_7da.geometry;if(_7de){if(!_7dd&&_7da.spatialRelationship===esri.tasks.Query.SPATIAL_REL_INTERSECTS&&(_7de.type==="extent"&&(_7dc||map.extent.contains(_7de)))){_7db.push(1);}else{return;}}var ids=_7da.objectIds;if(ids){if(_7dc){_7db.push(2);}else{var len=ids.length,mode=this._mode,_7df=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_7df++;}}if(_7df===len){_7db.push(2);}else{return;}}}if(this.timeInfo){var _7e0=_7da.timeExtent,_7e1=this._mapTimeExtent;if(_7dc){if(_7e0){_7db.push(3);}}else{if(_7dd){if(_7e0){return;}}else{if(_7e1){if(dojo.indexOf(_7db,2)!==-1){if(_7e0){_7db.push(3);}}else{return;}}else{if(_7db.length>0){if(_7e0){_7db.push(3);}}else{if(_7e0){return;}}}}}}return _7db.length>0?_7db:null;},_doQuery:function(_7e2,_7e3,_7e4){var _7e5=[],mode=this._mode,_7e6=this.objectIdField,i,len,_7e7;if(dojo.indexOf(_7e3,2)!==-1){_7e5=[];var ids=_7e2.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_7e5.push(obj);}}if(_7e5.length===0){return [];}}if(dojo.indexOf(_7e3,1)!==-1){_7e7=_7e5.length>0?_7e5:this.graphics;len=_7e7.length;var _7e8=_7e2.geometry._normalize(null,true);_7e5=[];for(i=0;i<len;i++){var _7e9=_7e7[i],_7ea=_7e9.geometry;if(_7ea){if(this.normalization&&_7e8.length){if(_7e8[0].intersects(_7ea)||_7e8[1].intersects(_7ea)){_7e5.push(_7e9);}}else{if(_7e8.intersects(_7ea)){_7e5.push(_7e9);}}}}if(_7e5.length===0){return [];}}if(dojo.indexOf(_7e3,3)!==-1){if(this.timeInfo){_7e7=_7e5.length>0?_7e5:this.graphics;var time=_7e2.timeExtent,_7eb=this._filterByTime(_7e7,time.startTime,time.endTime);_7e5=_7eb.match;}}if(_7e4){return dojo.map(_7e5,function(obj){return obj.attributes[_7e6];},this);}else{return _7e5;}},_filterByTime:function(_7ec,_7ed,_7ee){var _7ef=this._startTimeField,_7f0=this._endTimeField,_7f1;if(!this._twoTimeFields){_7f1=_7ef||_7f0;}var _7f2=esri._isDefined,yea=[],nay=[],i,len=_7ec.length,_7f3,_7f4;_7ed=_7ed?_7ed.getTime():-Infinity;_7ee=_7ee?_7ee.getTime():Infinity;if(_7f1){for(i=0;i<len;i++){_7f3=_7ec[i];_7f4=_7f3.attributes;var time=_7f4[_7f1];if(time>=_7ed&&time<=_7ee){yea.push(_7f3);}else{nay.push(_7f3);}}}else{for(i=0;i<len;i++){_7f3=_7ec[i];_7f4=_7f3.attributes;var _7f5=_7f4[_7ef],end=_7f4[_7f0];_7f5=_7f2(_7f5)?_7f5:-Infinity;end=_7f2(end)?end:Infinity;if((_7f5>=_7ed&&_7f5<=_7ee)||(end>=_7ed&&end<=_7ee)||(_7ed>=_7f5&&_7ee<=end)){yea.push(_7f3);}else{nay.push(_7f3);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_7f6,_7f7,dfd,_7f8){if(_7f6){this[_7f6].apply(this,args);}if(_7f7){_7f7.apply(null,args);}if(dfd){esri._resDfd(dfd,args,_7f8);}},_getShallowClone:function(_7f9){var _7fa=new esri.tasks.Query(),prop;for(prop in _7f9){if(_7f9.hasOwnProperty(prop)){_7fa[prop]=_7f9[prop];}}return _7fa;},_query:function(type,_7fb,_7fc,_7fd,_7fe){var that=this,dfd=new dojo.Deferred(esri._dfdCanceller);var _7ff=function(_800,_801){if(!_801&&type==="execute"&&!that._isTable){var _802=_800.features,mode=that._mode,_803=that.objectIdField,il=_802.length,i;for(i=il-1;i>=0;i--){var oid=_802[i].attributes[_803];var _804=mode._getFeature(oid);if(_804){_802.splice(i,1,_804);}}}that._resolve([_800],_7fb,_7fd,dfd);};if(type!=="executeRelationshipQuery"){_7fc=this._getShallowClone(_7fc);_7fc.outFields=this._getOutFields();_7fc.returnGeometry=true;var map=this._map,_805;if(map){_7fc.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_7fc)){switch(type){case "execute":_805=new esri.tasks.FeatureSet({features:[]});break;case "executeForIds":_805=[];break;case "executeForCount":_805=0;break;}_7ff(_805,true);return dfd;}var _806=this._canDoClientSideQuery(_7fc);if(_806){var _807=this._doQuery(_7fc,_806,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_805=new esri.tasks.FeatureSet();_805.features=_807;break;case "executeForIds":_805=_807;break;case "executeForCount":_805=_807.length;break;}_7ff(_805,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_7fe,dfd,true);return dfd;}if(this._ts){_7fc._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_7fc);temp.addCallbacks(_7ff,function(err){that._resolve([err],null,_7fe,dfd,true);});return dfd;},_convertFeaturesToJson:function(_808,_809,_80a,_80b){var json=[],_80c=this._selectionSymbol,_80d=this.visibilityField,i,_80e,_80f=this.objectIdField;if(this.loaded&&(_80a||_80b)){_80e=dojo.filter(this.fields,function(_810){return (_810.editable===false)&&(!_80b||(_810.name!==_80f));});}for(i=0;i<_808.length;i++){var _811=_808[i],_812={},_813=_811.geometry,attr=_811.attributes,_814=_811.symbol;if(_813&&(!_80b||!this.loaded||this.allowGeometryUpdates)){_812.geometry=_813.toJson();}if(_80d){_812.attributes=attr=dojo.mixin({},attr);attr[_80d]=_811.visible?1:0;}else{if(attr){_812.attributes=dojo.mixin({},attr);}}if(_812.attributes&&_80e&&_80e.length){dojo.forEach(_80e,function(_815){delete _812.attributes[_815.name];});}if(_814&&(_814!==_80c)){_812.symbol=_814.toJson();}json.push(_812);}return _809?json:dojo.toJson(json);},_selectHandler:function(_816,_817,_818,_819,dfd){var _81a,ctor=this.constructor;switch(_817){case ctor.SELECTION_NEW:this.clearSelection(true);_81a=true;break;case ctor.SELECTION_ADD:_81a=true;break;case ctor.SELECTION_SUBTRACT:_81a=false;break;}var i,_81b=_816.features,mode=this._mode,_81c=[],_81d=this.objectIdField,_81e,oid;if(_81a){for(i=0;i<_81b.length;i++){_81e=_81b[i];oid=_81e.attributes[_81d];var _81f=mode._addFeatureIIf(oid,_81e);_81c.push(_81f);this._selectFeatureIIf(oid,_81f,mode);}}else{for(i=0;i<_81b.length;i++){_81e=_81b[i];oid=_81e.attributes[_81d];this._unSelectFeatureIIf(oid,mode);var _820=mode._removeFeatureIIf(oid);_81c.push(_820||_81e);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_81c,_817,_816.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_818,dfd);if(_816.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_821,mode){var _822=this._selectedFeatures,_823=_822[oid];if(!_823){mode._incRefCount(oid);_822[oid]=_821;if(!this._isTable){this._setSelectSymbol(_821);}}return _823||_821;},_unSelectFeatureIIf:function(oid,mode){var _824=this._selectedFeatures[oid];if(_824){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_824);}}return _824;},_isSelected:function(_825){},_setSelectSymbol:function(_826){var _827=this._selectionSymbol;if(_827&&!this._isSelOnly){_826.setSymbol(_827);}},_setUnSelectSymbol:function(_828){var _829=this._selectionSymbol;if(_829&&!this._isSelOnly){if(_829===_828.symbol){_828.setSymbol(null,true);}}},_getOutFields:function(){var _82a=dojo.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_82b,_82c,arr){return !!_82b&&(dojo.indexOf(arr,_82b)===_82c);});var _82d=dojo.clone(this._outFields);if(_82d){if(dojo.indexOf(_82d,"*")!==-1){return _82d;}dojo.forEach(_82a,function(_82e){if(dojo.indexOf(_82d,_82e)===-1){_82d.push(_82e);}});return _82d;}else{return _82a;}},_checkFields:function(_82f){var _830=_82f||this._getOutFields();dojo.forEach(_830,function(_831){if(_831==="*"){return;}if(!this._getField(_831)){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url,field:_831},esri.bundle.layers.FeatureLayer.fieldNotFound));}},this);if(!_82f&&!this._isTable&&!this._fserver&&!this._collection){var _832=dojo.some(this.fields,function(_833){return (_833&&_833.type==="esriFieldTypeGeometry")?true:false;});if(!_832){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noGeometryField));}}},_fixRendererFields:function(){var _834=this.renderer;if(_834&&this.fields.length>0){var _835=dojo.filter([_834,_834.observationRenderer,_834.latestObservationRenderer,_834.trackRenderer],esri._isDefined);var _836=[];dojo.forEach(_835,function(rnd){var _837,_838;_838=rnd.attributeField;if(_838){_837=!this._getField(_838)&&this._getField(_838,true);if(_837){rnd.attributeField=_837.name;}}_838=rnd.attributeField2;if(_838){_837=!this._getField(_838)&&this._getField(_838,true);if(_837){rnd.attributeField2=_837.name;}}_838=rnd.attributeField3;if(_838){_837=!this._getField(_838)&&this._getField(_838,true);if(_837){rnd.attributeField3=_837.name;}}_836.push(rnd.attributeField);_836.push(rnd.attributeField2);_836.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_836,esri._isDefined);}},_getField:function(_839,_83a){var _83b=this.fields;if(_83b.length===0){return null;}var _83c;if(_83a){_839=_839.toLowerCase();}dojo.some(_83b,function(_83d){var _83e=false;if(_83a){_83e=(_83d&&_83d.name.toLowerCase()===_839)?true:false;}else{_83e=(_83d&&_83d.name===_839)?true:false;}if(_83e){_83c=_83d;}return _83e;});return _83c;},_getDateOpts:function(){if(!this._dtOpts){var _83f=dojo.map(dojo.filter(this.fields,function(_840){return !!(_840&&_840.type==="esriFieldTypeDate");}),function(_841){return _841.name;});this._dtOpts={properties:_83f};}return this._dtOpts;},_applyNormalized:function(_842,_843){if(_842&&_843){dojo.forEach(_842,function(_844,_845){if(_844&&_843[_845]){_844.setGeometry(_843[_845]);}});}},_editHandler:function(_846,adds,_847,_848,_849,dfd){var _84a=_846.addResults,_84b=_846.updateResults,_84c=_846.deleteResults,i,_84d,oid,_84e,attr,_84f=this.objectIdField,mode=this._mode,_850=this._isTable;var _851=this.editFieldsInfo,_852=this._getOutFields()||[],_853=_851&&_851.creatorField,_854=_851&&_851.creationDateField,_855=_851&&_851.editorField,_856=_851&&_851.editDateField,_857=_851&&_851.realm;if(dojo.indexOf(_852,"*")===-1){if(_853&&dojo.indexOf(_852,_853)===-1){_853=null;}if(_854&&dojo.indexOf(_852,_854)===-1){_854=null;}if(_855&&dojo.indexOf(_852,_855)===-1){_855=null;}if(_856&&dojo.indexOf(_852,_856)===-1){_856=null;}}var _858=(_854||_856)?(new Date()).getTime():null,_859=(_853||_855)?this.getUserId():undefined;if(_859&&_857){_859=_859+"@"+_857;}if(_84a){for(i=0;i<_84a.length;i++){_84a[i]=new esri.layers.FeatureEditResult(_84a[i]);if(_850){continue;}_84d=_84a[i];if(_84d.success){oid=_84d.objectId;_84e=adds[i];var gl=_84e._graphicsLayer;if(gl&&gl!==this){gl.remove(_84e);}attr=_84e.attributes||{};attr[_84f]=oid;if(_853){attr[_853]=_859;}if(_855){attr[_855]=_859;}if(_854){attr[_854]=_858;}if(_856){attr[_856]=_858;}_84e.setAttributes(attr);if(mode._init){mode.drawFeature(_84e);}}}}if(_84b){for(i=0;i<_84b.length;i++){_84b[i]=new esri.layers.FeatureEditResult(_84b[i]);if(_850){continue;}_84d=_84b[i];if(_84d.success){oid=_84d.objectId;_84e=_847[oid];var _85a=mode._getFeature(oid);if(_85a){if(_85a.geometry!==_84e.geometry){_85a.setGeometry(esri.geometry.fromJson(_84e.geometry.toJson()));}this._repaint(_85a,oid);}_84e=_85a||_84e;attr=_84e.attributes||{};if(_855){attr[_855]=_859;}if(_856){attr[_856]=_858;}_84e.setAttributes(attr);}}}if(_84c){var _85b=[];for(i=0;i<_84c.length;i++){_84c[i]=new esri.layers.FeatureEditResult(_84c[i]);if(_850){continue;}_84d=_84c[i];if(_84d.success){oid=_84d.objectId;_84e=mode._getFeature(oid);if(_84e){if(this._unSelectFeatureIIf(oid,mode)){_85b.push(_84e);}_84e._count=0;mode._removeFeatureIIf(oid);}}}if(_85b.length>0){this.onSelectionComplete(_85b,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_84a,_84b,_84c],"onEditsComplete",_848,dfd);},_sendAttachment:function(type,_85c,_85d,_85e,_85f){var _860=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_85c+"/"+_860,self=this;var dfd=esri.request({url:url,form:_85d,content:dojo.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_861){var _862=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_863=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_864=new esri.layers.FeatureEditResult(_861[_862]);_864.attachmentId=_864.objectId;_864.objectId=_85c;self._resolve([_864],_863,_85e);return _864;}).addErrback(function(_865){self._resolve([_865],null,_85f,null,true);});return dfd;},_repaint:function(_866,oid,_867){oid=esri._isDefined(oid)?oid:_866.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_866.setSymbol(_866.symbol,_867);}},_getKind:function(_868){var _869=this._trackManager;if(_869){return _869.isLatestObservation(_868)?1:0;}return 0;}});dojo.mixin(esri.layers.FeatureLayer,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});esri._createWrappers("esri.layers.FeatureLayer");dojo.declare("esri.layers.FeatureType",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.id=json.id;this.name=json.name;var _86a=json.symbol;if(_86a){this.symbol=esri.symbol.fromJson(_86a);}var _86b=json.domains,_86c,i;var _86d=this.domains={};for(_86c in _86b){if(_86b.hasOwnProperty(_86c)){var _86e=_86b[_86c];switch(_86e.type){case "range":_86d[_86c]=new esri.layers.RangeDomain(_86e);break;case "codedValue":_86d[_86c]=new esri.layers.CodedValueDomain(_86e);break;case "inherited":_86d[_86c]=new esri.layers.InheritedDomain(_86e);break;}}}var _86f=json.templates;if(_86f){var _870=this.templates=[];for(i=0;i<_86f.length;i++){_870.push(new esri.layers.FeatureTemplate(_86f[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _871,_872=this.domains,_873=this.templates,_874=esri._sanitize;if(_872){var _875=json.domains={};for(_871 in _872){if(_872.hasOwnProperty(_871)){_875[_871]=_872[_871]&&_872[_871].toJson();}}_874(_875);}if(_873){json.templates=dojo.map(_873,function(_876){return _876.toJson();});}return _874(json);}});dojo.declare("esri.layers.FeatureTemplate",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _877=json.prototype;this.prototype=new esri.Graphic(_877.geometry,null,_877.attributes);}},toJson:function(){return esri._sanitize({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});dojo.mixin(esri.layers.FeatureTemplate,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});dojo.declare("esri.layers.FeatureEditResult",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});dojo.declare("esri.layers._RenderMode",null,{constructor:function(){this._prefix="jsonp_"+(dojo._scopeName||"dojo")+"IoScript";},initialize:function(map){},propertyChangeHandler:function(type){},destroy:function(){},drawFeature:function(_878){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _879=this._featureMap[oid];if(_879){_879._count++;}},_decRefCount:function(oid){var _87a=this._featureMap[oid];if(_87a){_87a._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_87b){var fmap=this._featureMap,_87c=fmap[oid],_87d=this.featureLayer;if(!_87c){fmap[oid]=_87b;_87d._add(_87b);_87b._count=0;}return _87c||_87b;},_removeFeatureIIf:function(oid){var _87e=this._featureMap[oid],_87f=this.featureLayer;if(_87e){if(_87e._count){return;}delete this._featureMap[oid];_87f._remove(_87e);}return _87e;},_clearIIf:function(){var i,_880=this.featureLayer,_881=_880.graphics,_882=_880._selectedFeatures,_883=_880.objectIdField;for(i=_881.length-1;i>=0;i--){var _884=_881[i];var oid=_884.attributes[_883];if(oid in _882){_884._count=1;continue;}_884._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=dojo.io.script[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||dojo.io.script[this._prefix+id];if(dfd){try{dfd.cancel();dojo.io.script._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){dojo.io.script._validCheck(null);},_toggleVisibility:function(show){var _885=this.featureLayer,_886=_885.graphics,_887=show?"show":"hide",i,len=_886.length;show=show&&_885._ager;for(i=0;i<len;i++){var _888=_886[i];_888[_887]();if(show){_885._repaint(_888);}}},_applyTimeFilter:function(_889){var _88a=this.featureLayer;if(!_88a.timeInfo||_88a._suspended){return;}if(!_889){_88a._fireUpdateStart();}var _88b=_88a._trackManager;if(_88b){_88b.clearTracks();}var defn=_88a.getTimeDefinition(),_88c=_88a._getOffsettedTE(_88a._mapTimeExtent);if(_88c){_88c=_88a._getTimeOverlap(defn,_88c);if(_88c){var _88d=_88a._filterByTime(_88a.graphics,_88c.startTime,_88c.endTime);if(_88b){_88b.addFeatures(_88d.match);}dojo.forEach(_88d.match,function(_88e){var _88f=_88e._shape;if(!_88e.visible){_88e.show();_88f=_88e._shape;_88f&&_88f._moveToFront();}if(_88a._ager&&_88f){_88a._repaint(_88e);}});dojo.forEach(_88d.noMatch,function(_890){if(_890.visible){_890.hide();}});}else{this._toggleVisibility(false);}}else{if(_88b){_88b.addFeatures(_88a.graphics);}this._toggleVisibility(true);}if(_88b){_88b.moveLatestToFront();_88b.drawTracks();}if(!_889){_88a._fireUpdateEnd();}}});dojo.declare("esri.layers._SelectionMode",[esri.layers._RenderMode],{constructor:function(_891){this.featureLayer=_891;this._featureMap={};},initialize:function(map){this.map=map;this._init=true;},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},destroy:function(){this._init=false;},resume:function(){this.propertyChangeHandler(0);}});dojo.declare("esri.layers._SnapshotMode",[esri.layers._RenderMode],{constructor:function(_892){this.featureLayer=_892;this._featureMap={};this._drawFeatures=dojo.hitch(this,this._drawFeatures);this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;var _893=this.featureLayer;if(_893._collection){this._applyTimeFilter();}else{this._fetchAll();}this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type){this._fetchAll();}else{this._applyTimeFilter();}}},destroy:function(){this._init=false;},drawFeature:function(_894){var _895=this.featureLayer,_896=_895.objectIdField,oid=_894.attributes[_896];this._addFeatureIIf(oid,_894);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _897=this.featureLayer;if(_897._collection){_897._fireUpdateStart();_897._refresh(true);_897._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_898){var id="_"+_898.name+_898.layerId+_898._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _899=this.featureLayer;if(_899._collection){return;}_899._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_89a=this.featureLayer,_89b=_89a.getDefinitionExpression();var _89c=new esri.tasks.Query();_89c.outFields=_89a._getOutFields();_89c.where=_89b||"1=1";_89c.returnGeometry=true;_89c.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());_89c.timeExtent=_89a.getTimeDefinition();_89c.maxAllowableOffset=_89a._maxOffset;if(_89a._ts){_89c._ts=(new Date()).getTime();}var _89d;if(_89a._usePatch){_89d=this._getRequestId(_89a);this._cancelPendingRequest(null,_89d);}_89a._task.execute(_89c,this._drawFeatures,this._queryErrorHandler,_89d);},_drawFeatures:function(_89e){this._purgeRequests();var _89f=_89e.features,_8a0=this.featureLayer,_8a1=_8a0.objectIdField,i,len=_89f.length,_8a2,oid;for(i=0;i<len;i++){_8a2=_89f[i];oid=_8a2.attributes[_8a1];this._addFeatureIIf(oid,_8a2);this._incRefCount(oid);}this._applyTimeFilter(true);_8a0._fireUpdateEnd(null,_89e.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_89e.exceededTransferLimit){_8a0.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _8a3=this.featureLayer;_8a3._errorHandler(err);_8a3._fireUpdateEnd(err);}});dojo.declare("esri.layers._OnDemandMode",[esri.layers._RenderMode],{constructor:function(_8a4){this.featureLayer=_8a4;this._featureMap={};this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;this._initialize();this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}}},destroy:function(){this._disableConnectors();this._init=false;},drawFeature:function(_8a5){var _8a6=this._gridLayer,geom=_8a5.geometry,_8a7=[];if(!geom){return;}_8a7=_8a6.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _8a8=this._cellMap,i,cell,oid=_8a5.attributes[this.featureLayer.objectIdField],_8a9,row,col;for(i=0;i<_8a7.length;i++){cell=_8a7[i];_8a9=cell.latticeID;row=cell.row;col=cell.col;if(_8a9){cell=(_8a8[_8a9]=(_8a8[_8a9]||cell));}else{_8a8[row]=_8a8[row]||{};cell=(_8a8[row][col]=(_8a8[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_8a5);this._addFeatureIIf(oid,_8a5);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_initialize:function(){var map=this.map,_8aa=this.featureLayer;var _8ab=_8aa._srInfo;this._gridLayer=new esri.layers._GridLayout(new esri.geometry.Point(_8ab?_8ab.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_8aa._tileWidth,height:_8aa._tileHeight},{width:map.width,height:map.height},_8ab);this._ioQueue=[];if(!_8aa._suspended){this._zoomHandler();this._enableConnectors();}},_enableConnectors:function(){var map=this.map;this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=dojo.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=dojo.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){dojo.disconnect(this._zoomConnect);dojo.disconnect(this._panConnect);dojo.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _8ac=this.featureLayer,map=this.map;if(_8ac._suspended){return;}_8ac._fireUpdateStart();this._clearIIf();var _8ad=_8ac._trackManager;if(_8ad){_8ad.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_8ae,cell){var id="_"+_8ae.name+_8ae.layerId+_8ae._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_8af){this._exceeds=false;var _8b0=this.featureLayer,map=this.map,_8b1=_8af||map.extent,_8b2=this._gridLayer.getCellsInExtent(_8b1,_8b0.latticeTiling),_8b3=_8b2.cells;if(!_8b0.isEditable()){var _8b4=this._cellMap;_8b3=dojo.filter(_8b3,function(cell){if(cell.lattice){if(_8b4[cell.latticeID]){return false;}}else{if(_8b4[cell.row]&&_8b4[cell.row][cell.col]){return false;}}return true;});}var _8b5=_8b0._getOutFields(),_8b6=_8b0.getDefinitionExpression(),time=_8b0._getOffsettedTE(_8b0._mapTimeExtent),_8b7=_8b0._usePatch,_8b8=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_8b9,_8ba;this._pending=this._pending||0;for(i=0;i<_8b3.length;i++){cell=_8b3[i];_8b9=new esri.tasks.Query();_8b9.geometry=cell.extent||cell.lattice;_8b9.outFields=_8b5;_8b9.where=_8b6;if(_8b0.latticeTiling&&cell.extent){_8b9.spatialRelationship=esri.tasks.Query.SPATIAL_REL_CONTAINS;}_8b9.returnGeometry=true;_8b9.timeExtent=time;_8b9.maxAllowableOffset=_8b0._maxOffset;if(_8b0._ts){_8b9._ts=(new Date()).getTime();}_8ba=null;if(_8b7){_8ba=this._getRequestId(_8b0,cell);if(this._isPending(_8ba)){continue;}}this._pending++;_8b8.push(_8b0._task.execute(_8b9,function(){var _8bb=cell;return function(_8bc){func.apply(self,[_8bc,_8bb]);};}.call(this),this._queryErrorHandler,_8ba));}this._removeOldCells(_8b1);this._endCheck();},_drawFeatures:function(_8bd,cell){this._exceeds=this._exceeds||_8bd.exceededTransferLimit;this._finalizeIO();var _8be=this.featureLayer,map=this.map,_8bf=map.extent,_8c0=cell.extent,row=cell.row,col=cell.col,_8c1=_8be.objectIdField,_8c2=_8bd.features,_8c3=this._gridLayer,_8c4=this._cellMap,i,len,_8c5=cell.latticeID,_8c6=_8c5?_8c4[_8c5]:(_8c4[row]&&_8c4[row][col]);if((cell.resolution!=_8c3._resolution)||(_8c5?(_8c5!==_8c3.getLatticeID(_8bf)):(!_8c3.intersects(_8c0,_8bf)))){if(_8c6){this._removeCell(row,col,_8c5);}}else{if(_8c6){this._updateCell(_8c6,_8c2);}else{cell.features=_8c2;if(_8c5){_8c4[_8c5]=cell;}else{_8c4[row]=_8c4[row]||{};_8c4[row][col]=cell;}len=_8c2.length;for(i=0;i<len;i++){var _8c7=_8c2[i];var oid=_8c7.attributes[_8c1];this._addFeatureIIf(oid,_8c7);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_8c8){if(this._pending===0){this._processIOQueue();var _8c9=this.featureLayer,_8ca=_8c9._trackManager;if(_8ca){_8ca.clearTracks();_8ca.addFeatures(_8c9.graphics);if(_8c9._ager){dojo.forEach(_8c9.graphics,function(_8cb){if(_8cb._shape){_8c9._repaint(_8cb);}});}_8ca.moveLatestToFront();_8ca.drawTracks();}this.featureLayer._fireUpdateEnd(_8c8&&new Error("FeatureLayer: "+esri.bundle.layers.FeatureLayer.updateError),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_8c9.onQueryLimitExceeded();}}},_processIOQueue:function(_8cc){this._ioQueue=dojo.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_8cc){dojo.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_8cd){var _8ce=this._cellMap,_8cf=this._gridLayer,_8d0,_8d1;for(_8d0 in _8ce){if(_8ce[_8d0]){var row=_8ce[_8d0],_8d2=row.latticeID,_8d3=0,_8d4=0;if(_8d2){_8d3++;if(_8d2!==_8cf.getLatticeID(_8cd)){this._removeCell(null,null,_8d2);_8d4++;}}else{for(_8d1 in row){if(row[_8d1]){_8d3++;var _8d5=row[_8d1].extent;if(!_8cf.intersects(_8d5,_8cd)){this._removeCell(_8d0,_8d1);_8d4++;}}}}if(_8d4===_8d3){delete _8ce[_8d0];}}}},_updateCell:function(cell,_8d6){var _8d7=this.featureLayer,_8d8=_8d7.objectIdField,_8d9=_8d7._selectedFeatures,i,len=_8d6.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _8da=_8d6[i];var oid=_8da.attributes[_8d8];var _8db=this._addFeatureIIf(oid,_8da);if(_8db===_8da){this._incRefCount(oid);cell.features.push(_8db);}else{if(!(oid in _8d9)){_8db.setGeometry(_8da.geometry);_8db.setAttributes(_8da.attributes);}}}},_removeCell:function(row,col,_8dc){var _8dd=this._cellMap,_8de=this.featureLayer,_8df=_8de.objectIdField;var cell=_8dc?_8dd[_8dc]:(_8dd[row]&&_8dd[row][col]);if(cell){if(_8dc){delete _8dd[_8dc];}else{delete _8dd[row][col];}var _8e0=cell.features,i;for(i=0;i<_8e0.length;i++){var _8e1=_8e0[i];var oid=_8e1.attributes[_8df];this._decRefCount(oid);if(oid in _8de._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});dojo.declare("esri.layers._GridLayout",null,{constructor:function(_8e2,_8e3,_8e4,_8e5){this.origin=_8e2;this.cellWidth=_8e3.width;this.cellHeight=_8e3.height;this.mapWidth=_8e4.width;this.mapHeight=_8e4.height;this.srInfo=_8e5;},setResolution:function(_8e6){this._resolution=(_8e6.xmax-_8e6.xmin)/this.mapWidth;if(this.srInfo){var _8e7=Math.round((2*this.srInfo.valid[1])/this._resolution),_8e8=Math.round(_8e7/this.cellWidth);this._frameStats=[_8e8,0,_8e8-1];}},getCellCoordinates:function(_8e9){var res=this._resolution,_8ea=this.origin;return {row:Math.floor((_8ea.y-_8e9.y)/(this.cellHeight*res)),col:Math.floor((_8e9.x-_8ea.x)/(this.cellWidth*res))};},normalize:function(col){var _8eb=this._frameStats;if(_8eb){var _8ec=_8eb[0],m180=_8eb[1],p180=_8eb[2];if(col<m180){col=col%_8ec;col=col<m180?col+_8ec:col;}else{if(col>p180){col=col%_8ec;}}}return col;},intersects:function(_8ed,_8ee){var _8ef=this.srInfo;if(_8ef){return dojo.some(_8ee._getParts(_8ef),function(_8f0){return _8ed.intersects(_8f0.extent);});}else{return _8ed.intersects(_8ee);}},getCellExtent:function(row,col){var res=this._resolution,_8f1=this.origin,_8f2=this.cellWidth,_8f3=this.cellHeight;return new esri.geometry.Extent((col*_8f2*res)+_8f1.x,_8f1.y-((row+1)*_8f3*res),((col+1)*_8f2*res)+_8f1.x,_8f1.y-(row*_8f3*res),new esri.SpatialReference(_8f1.spatialReference.toJson()));},getLatticeID:function(_8f4){var _8f5=this.getCellCoordinates({x:_8f4.xmin,y:_8f4.ymax}),_8f6=this.getCellCoordinates({x:_8f4.xmax,y:_8f4.ymin}),_8f7=_8f5.row,_8f8=_8f6.row,_8f9=this.normalize(_8f5.col),_8fa=this.normalize(_8f6.col);return _8f7+"_"+_8f8+"_"+_8f9+"_"+_8fa;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_8fb,_8fc){var _8fd=this.getCellCoordinates({x:_8fb.xmin,y:_8fb.ymax}),_8fe=this.getCellCoordinates({x:_8fb.xmax,y:_8fb.ymin}),_8ff=_8fd.row,_900=_8fe.row,_901=_8fd.col,_902=_8fe.col,_903=[],i,j,nj,_904=[],_905=[],len,xmin,xmax,ymin,ymax,_906=[],_907,_908;for(i=_8ff;i<=_900;i++){for(j=_901;j<=_902;j++){nj=this.normalize(j);_8fb=this.getCellExtent(i,nj);_903.push({row:i,col:nj,extent:_8fb,resolution:this._resolution});if(_8fc){_904.push(_8fb.xmin,_8fb.xmax);_905.push(_8fb.ymin,_8fb.ymax);}}}_901=this.normalize(_901);_902=this.normalize(_902);_904.sort(this.sorter);_905.sort(this.sorter);len=_904.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_904[i]===_904[i+1]){_904.splice(i,1);}}}len=_905.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_905[i]===_905[i+1]){_905.splice(i,1);}}}if(_904.length&&_905.length){xmin=_904[0];xmax=_904[_904.length-1];ymin=_905[0];ymax=_905[_905.length-1];len=_904.length;for(i=0;i<len;i++){_906.push([[_904[i],ymax],[_904[i],ymin]]);}len=_905.length;for(i=0;i<len;i++){_906.push([[xmin,_905[i]],[xmax,_905[i]]]);}_907=new esri.geometry.Polyline({paths:_906,spatialReference:this.origin.spatialReference.toJson()});_908=_8ff+"_"+_900+"_"+_901+"_"+_902;_903.push({latticeID:_908,lattice:_907,resolution:this._resolution});}return {minRow:_8ff,maxRow:_900,minCol:_901,maxCol:_902,cells:_903};}});dojo.declare("esri.layers._TrackManager",null,{constructor:function(_909){this.layer=_909;this.trackMap={};},initialize:function(map){this.map=map;var _90a=this.layer,_90b=_90a.renderer.trackRenderer;if(_90b&&(_90a.geometryType==="esriGeometryPoint")){var _90c=(this.container=new esri.layers._GraphicsLayer({id:_90a.id+"_tracks",_child:true}));_90c._setMap(map,_90a._div);_90c.setRenderer(_90b);}},addFeatures:function(_90d){var tkid,_90e=this.trackMap,_90f=this.layer,_910=_90f._trackIdField;dojo.forEach(_90d,function(_911){var _912=_911.attributes;tkid=_912[_910];var ary=(_90e[tkid]=(_90e[tkid]||[]));ary.push(_911);});var _913=_90f._startTimeField,_914=_90f.objectIdField;var _915=function(a,b){var _916=a.attributes[_913],_917=b.attributes[_913];if(_916===_917){return (a.attributes[_914]<b.attributes[_914])?-1:1;}else{return (_916<_917)?-1:1;}};for(tkid in _90e){_90e[tkid].sort(_915);}},drawTracks:function(){var _918=this.container;if(!_918){return;}var _919=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_91a,_91b=this.layer._trackIdField,_91c;for(tkid in _919){ary=_919[tkid];path=[];for(i=ary.length-1;i>=0;i--){_91a=ary[i].geometry;if(_91a){path.push([_91a.x,_91a.y]);}}_91c={};_91c[_91b]=tkid;if(path.length>0){_918.add(new esri.Graphic(new esri.geometry.Polyline({paths:[path],spatialReference:sr}),null,_91c));}}},moveLatestToFront:function(){dojo.forEach(this.getLatestObservations(),function(_91d){var _91e=_91d._shape;_91e&&_91e._moveToFront();this._repaint(_91d,null,true);},this.layer);},getLatestObservations:function(){var _91f=[];if(!this.layer.renderer.latestObservationRenderer){return _91f;}var _920=this.trackMap,tkid;for(tkid in _920){var ary=_920[tkid];_91f.push(ary[ary.length-1]);}return _91f;},clearTracks:function(){var _921=this.getLatestObservations();this.trackMap={};var _922=this.container;if(_922){_922.clear();}dojo.forEach(_921,function(_923){this._repaint(_923,null,true);},this.layer);},isLatestObservation:function(_924){var _925=this.layer._trackIdField;var _926=this.trackMap[_924.attributes[_925]];if(_926){return (_926[_926.length-1]===_924);}return false;},destroy:function(){var _927=this.container;if(_927){_927.clear();_927._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});});},"dojox/charting/plot2d/Bubble":function(){define("dojox/charting/plot2d/Bubble",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_928,arr,Base,dc,df,dfr,du,fx){var _929=dfr.lambda("item.purgeGroup()");return _928("dojox.charting.plot2d.Bubble",Base,{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_92a,_92b){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_92b);du.updateWithPattern(this.opt,_92b,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_92c){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_92c);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_929);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_92d=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var _92e=t.next("circle",[this.opt,run]),s=run.group,_92f=arr.map(run.data,function(v,i){return v?{x:ht(v.x)+_92c.l,y:dim.height-_92c.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)}:null;},this);var _930=null,_931=null,_932=null;if(_92e.series.shadow){_932=arr.map(_92f,function(item){if(item!==null){var _933=t.addMixin(_92e,"circle",item,true),_934=_933.series.shadow;var _935=s.createCircle({cx:item.x+_934.dx,cy:item.y+_934.dy,r:item.radius}).setStroke(_934).setFill(_934.color);if(this.animate){this._animateBubble(_935,dim.height-_92c.b,item.radius);}return _935;}return null;},this);if(_932.length){run.dyn.shadow=_932[_932.length-1].getStroke();}}if(_92e.series.outline){_931=arr.map(_92f,function(item){if(item!==null){var _936=t.addMixin(_92e,"circle",item,true),_937=dc.makeStroke(_936.series.outline);_937.width=2*_937.width+_92e.series.stroke.width;var _938=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_937);if(this.animate){this._animateBubble(_938,dim.height-_92c.b,item.radius);}return _938;}return null;},this);if(_931.length){run.dyn.outline=_931[_931.length-1].getStroke();}}_930=arr.map(_92f,function(item){if(item!==null){var _939=t.addMixin(_92e,"circle",item,true),rect={x:item.x-item.radius,y:item.y-item.radius,width:2*item.radius,height:2*item.radius};var _93a=this._plotFill(_939.series.fill,dim,_92c);_93a=this._shapeFill(_93a,rect);var _93b=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setFill(_93a).setStroke(_939.series.stroke);if(this.animate){this._animateBubble(_93b,dim.height-_92c.b,item.radius);}return _93b;}return null;},this);if(_930.length){run.dyn.fill=_930[_930.length-1].getFill();run.dyn.stroke=_930[_930.length-1].getStroke();}if(_92d){var _93c=new Array(_930.length);arr.forEach(_930,function(s,i){if(s!==null){var o={element:"circle",index:i,run:run,shape:s,outline:_931&&_931[i]||null,shadow:_932&&_932[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_92f[i].x,cy:_92f[i].y,cr:_92f[i].radius};this._connectEvents(o);_93c[i]=o;}},this);this._eventSeries[run.name]=_93c;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateBubble:function(_93d,_93e,size){fx.animateTransform(lang.delegate({shape:_93d,duration:1200,transform:[{name:"translate",start:[0,_93e],end:[0,0]},{name:"scale",start:[0,1/size],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"*noref":1}});require(["dojo/i18n"],function(i18n){i18n._preloadLocalizations("esri/arcgis/nls/utils",[]);});define("esri/arcgis/utils",["dijit","dojo","dojox","dojo/require!esri/map,esri/layers/agsimageservice,esri/layers/osm,esri/layers/FeatureLayer,esri/layers/KMLLayer,esri/layers/wms,esri/virtualearth/VETiledLayer,esri/tasks/geometry,dojo/DeferredList,esri/dijit/Popup,esri/arcgis/csv"],function(_93f,dojo,_940){dojo.provide("esri.arcgis.utils");dojo.require("esri.map");dojo.require("esri.layers.agsimageservice");dojo.require("esri.layers.osm");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.layers.KMLLayer");dojo.require("esri.layers.wms");dojo.require("esri.virtualearth.VETiledLayer");dojo.require("esri.tasks.geometry");dojo.require("dojo.DeferredList");dojo.require("esri.dijit.Popup");dojo.require("esri.arcgis.csv");(function(){var EAU=esri.arcgis.utils;EAU.arcgisUrl=location.protocol+"//www.arcgis.com/sharing/rest/content/items";String.prototype.endsWith=function(str){return (this.match(str+"$")==str);};EAU.getItem=function(_941){if(EAU._arcgisUrl&&EAU._arcgisUrl.length>0){EAU.arcgisUrl=EAU._arcgisUrl;}var url=EAU.arcgisUrl+"/"+_941;var _942={},_943=new dojo.Deferred();esri.request({url:url,content:{f:"json"},callbackParamName:"callback",load:function(_944){_942.item=_944;esri.request({url:url+"/data",content:{f:"json"},callbackParamName:"callback",load:function(_945){_942.itemData=_945;_943.callback(_942);},error:function(_946){_943.errback(_946);}});},error:function(_947){_943.errback(_947);}});return _943;};EAU.createMap=function(arg1,_948,_949){var _94a=new dojo.Deferred();_949=_949||{};var _94b=_949.infoTemplateClass;_949._clazz=(_94b&&dojo.getObject(_94b))||esri.dijit.PopupTemplate;if(dojo.isString(arg1)){EAU.getItem(arg1).addCallback(function(_94c){EAU._getItemProps(_94c,_949).addCallback(function(_94d){EAU._getLayers(_94d.itemData,_949).addCallback(dojo.hitch(null,EAU._preCreateMap,_94d,_948,_949,_94a));});}).addErrback(dojo.hitch(_94a,_94a.errback));}else{EAU._getItemProps(arg1,_949).addCallback(function(_94e){EAU._getLayers(_94e.itemData,_949).addCallback(dojo.hitch(null,EAU._preCreateMap,_94e,_948,_949,_94a));});}return _94a;};EAU._arcgisUrl=null;EAU._getItemProps=function(_94f,_950){var _951=new dojo.Deferred();var _952=_94f.itemData;var _953=[];var _954=[];dojo.forEach(_952.operationalLayers,function(_955){if(_955.itemId&&!_955.type){if(_955.url.indexOf("/FeatureServer")>-1){_954.push(_955);_953.push(EAU._getItemData(_955));}else{if(!_955.layers&&_955.url.indexOf("/MapServer")>-1&&_955.url.indexOf("/MapServer/")===-1){_954.push(_955);_953.push(EAU._getItemData(_955));}}}});if(_953.length>0){var _956=new dojo.DeferredList(_953);_956.addCallback(function(_957){dojo.forEach(_954,function(_958,i){var _959=_957[i][1];if(_959&&_959.layers){if(_958.url.indexOf("/FeatureServer")>-1){dojo.forEach(_959.layers,function(_95a){if(_958.url.endsWith("/FeatureServer/"+_95a.id)){_958.itemProperties=_95a;EAU._processFSItemProperties(_958);}});}else{_958.layers=_959.layers;}}});_951.callback(_94f);});}else{_951.callback(_94f);}return _951;};EAU._getItemData=function(_95b){var url=EAU.arcgisUrl+"/"+_95b.itemId+"/data";var _95c=esri.request({url:url,content:{f:"json"},callbackParamName:"callback"});return _95c;};EAU._processFSItemProperties=function(_95d){if(_95d.itemProperties.layerDefinition){if(_95d.layerDefinition){if(!_95d.layerDefinition.drawingInfo){_95d.layerDefinition.drawingInfo=_95d.itemProperties.layerDefinition.drawingInfo;}if(!_95d.layerDefinition.definitionExpression){_95d.layerDefinition.definitionExpression=_95d.itemProperties.layerDefinition.definitionExpression;}if(_95d.layerDefinition.minScale===null){_95d.layerDefinition.minScale=_95d.itemProperties.layerDefinition.minScale;}if(_95d.layerDefinition.maxScale===null){_95d.layerDefinition.maxScale=_95d.itemProperties.layerDefinition.maxScale;}}else{_95d.layerDefinition=_95d.itemProperties.layerDefinition;}}if(_95d.itemProperties.popupInfo&&!_95d.popupInfo&&!_95d.disablePopup){_95d.popupInfo=_95d.itemProperties.popupInfo;}};EAU._getLayers=function(_95e,_95f){var _960=[];var _961=[];var _962=[];var _963=new dojo.Deferred();dojo.forEach(_95e.operationalLayers,function(_964,_965){if(_964.featureCollection){dojo.forEach(_964.featureCollection.layers,function(_966,idx){var _967=true;if(_964.visibleLayers){if(dojo.indexOf(_964.visibleLayers,idx)==-1){_967=false;}}_966.visibility=(_964.visibility&&_967);_966.opacity=_964.opacity;_966.id=(_964.id||("operational"+_965))+"_"+idx;_962.push(_966);},this);}else{_962.push(_964);}});dojo.forEach(_95e.baseMap.baseMapLayers,function(_968,_969){_968.baseMapLayer=true;_968.id=_968.id||("base"+_969);_960.push(_968);});dojo.forEach(_962,function(_96a,_96b){_96a.id=_96a.id||("operational"+_96b);_960.push(_96a);});dojo.forEach(_960,function(_96c){if(_96c.url&&!_96c.type){_96c.deferredsPos=_961.length;_96c.errors=[];_961.push(EAU._getServiceInfo(_96c.url,_96c.errors));}else{if(_96c.url&&_96c.type=="CSV"){_96c.deferredsPos=_961.length;_961.push(esri.arcgis.csv.buildCSVFeatureCollection(_96c));}}});if(_961.length==0){var _96d=EAU._getMapSR(_960);_960=EAU._buildLayerObjects(_960,_95f,_96d);_963.callback(_960);}else{var _96e=new dojo.DeferredList(_961);_96e.addCallback(function(_96f){EAU._preBuildLayerObjects(_96f,_960,_95f,_961,_963);});}return _963;};EAU._preBuildLayerObjects=function(_970,_971,_972,_973,_974){dojo.forEach(_971,function(_975,_976){if(_975.url&&!_975.type){_975.resourceInfo=_970[_975.deferredsPos][1];delete _975.deferredsPos;}else{if(_975.url&&_975.type=="CSV"){_975.featureCollection=_973[_975.deferredsPos].results[0];delete _975.deferredsPos;}}});var _977=EAU._getMapSR(_971);var _978=[];var _979=new dojo.Deferred();dojo.forEach(_971,function(_97a){if(_97a.url&&_97a.type=="CSV"){_97a.deferredsPos=_978.length;_978.push(esri.arcgis.csv.projectFeatureCollection(_97a.featureCollection,_977));}});if(_978.length==0){_971=EAU._buildLayerObjects(_971,_972,_977);_974.callback(_971);}else{var _97b=new dojo.DeferredList(_978);_97b.addCallback(function(){dojo.forEach(_971,function(_97c){if(_97c.url&&_97c.type=="CSV"){_97c.featureCollection=_978[_97c.deferredsPos].results[0];delete _97c.deferredsPos;}});_971=EAU._buildLayerObjects(_971,_972,_977);_974.callback(_971);});}};EAU._buildLayerObjects=function(_97d,_97e,_97f){dojo.forEach(_97d,function(_980,_981){if(_980.url&&!_980.type){if(_981===0||_97d[0].layerObject){_980.layerObject=EAU._initLayer(_980,_97d,_97e,_97f);}}else{if(_980.url&&_980.type=="CSV"){_980.layerObject=EAU._initLayer(_980,_97d,_97e,_97f);}else{_980.layerObject=EAU._initLayer(_980,_97d,_97e,_97f);}}});var _982=dojo.filter(_97d,function(lyr){return !lyr.isReference;});var _983=dojo.filter(_97d,function(lyr){return !!lyr.isReference;});_97d=_982.concat(_983);return _97d;};EAU._preCreateMap=function(_984,_985,_986,_987,_988){try{var _989=_986.mapOptions||{};_986.mapOptions=_989;var card=_984.item;var _98a=[];dojo.forEach(_988,function(_98b){if(dojo.isArray(_98b.layerObject)){dojo.forEach(_98b.layerObject,function(l){_98a.push(l);});}else{_98a.push(_98b.layerObject);}});if(!_98a[0]){_987.errback(new Error(esri.bundle.arcgis.utils.baseLayerError));return;}_98a=dojo.filter(_98a,esri._isDefined);if(card){if(card.extent){if(!_989.extent){var _98c=new esri.geometry.Extent(card.extent[0][0],card.extent[0][1],card.extent[1][0],card.extent[1][1],new esri.SpatialReference({wkid:4326}));var _98d=_98a[0].spatialReference;if(_98d.wkid===4326){_989.extent=_98c;EAU._createMap(_98a,_988,_984,_985,_986,_987);}else{if(_98d.wkid===102100||_98d.wkid===102113||_98d.wkid===3857){_98c.xmin=Math.max(_98c.xmin,-180);_98c.xmax=Math.min(_98c.xmax,180);_98c.ymin=Math.max(_98c.ymin,-89.99);_98c.ymax=Math.min(_98c.ymax,89.99);_989.extent=esri.geometry.geographicToWebMercator(_98c);EAU._createMap(_98a,_988,_984,_985,_986,_987);}else{if(_986.geometryServiceURL||esri.config.defaults.geometryService){var gs;if(_986.geometryServiceURL){gs=new esri.tasks.GeometryService(_986.geometryServiceURL);}else{gs=esri.config.defaults.geometryService;}gs.project([_98c],_98d,function(_98e){var _98f=_98e[0];_989.extent=_989.extent||_98f;EAU._createMap(_98a,_988,_984,_985,_986,_987);});}else{_987.errback(new Error(esri.bundle.arcgis.utils.geometryServiceError));}}}}else{EAU._createMap(_98a,_988,_984,_985,_986,_987);}}else{EAU._createMap(_98a,_988,_984,_985,_986,_987);}}else{EAU._createMap(_98a,_988,_984,_985,_986,_987);}}catch(err){_987.errback(err);}};EAU._getMapSR=function(_990){var _991=null;var _992=_990[0];if(_992.url&&!_992.type){if(_992.resourceInfo.spatialReference){_991=new esri.SpatialReference();if(_992.resourceInfo.spatialReference.wkid){_991.wkid=_992.resourceInfo.spatialReference.wkid;}if(_992.resourceInfo.spatialReference.wkt){_991.wkt=_992.resourceInfo.spatialReference.wkt;}}}else{if(_992.type.indexOf("BingMaps")>-1||_992.type=="OpenStreetMap"){_991=new esri.SpatialReference({wkid:102100});}else{if(_992.type=="WMS"){_991=new esri.SpatialReference({wkid:_992.spatialReferences[0]});}}}return _991;};EAU._createMap=function(_993,_994,_995,_996,_997,_998){var _999=(_997.mapOptions||{}),_99a,_99b;if(!_999.infoWindow){_99a=new esri.dijit.Popup(null,dojo.create("div"));_999.infoWindow=_99a;}if(!esri._isDefined(_999.showInfoWindowOnClick)){_999.showInfoWindowOnClick=false;}var map=new esri.Map(_996,_999);if(_997.ignorePopups){dojo.forEach(_993,function(_99c){delete _99c.infoTemplate;});}if(!(_997.ignorePopups||_997.disableClickBehavior)){_99b=dojo.connect(map,"onClick",EAU._showPopup);}dojo.connect(map,"onLayersAddResult",EAU._onLayersAddResult);map.addLayers(_993);if(!_997.ignorePopups){EAU._addSelectionLayers(_993,map,_997._clazz);}var _99d=[];dojo.forEach(_994,function(_99e){_99d=_99d.concat(_99e.errors);},this);_998.callback({map:map,itemInfo:_995,errors:_99d,clickEventHandle:_99b,clickEventListener:EAU._showPopup});};EAU._addSelectionLayers=function(_99f,map,_9a0){var _9a1=[];dojo.forEach(_99f,function(_9a2){var _9a3=_9a2.__popups;if(_9a3&&_9a3.length>1&&_9a2.version>=10){_9a2.__deferredsPos=_9a1.length;_9a1.push(EAU._getLayersInfo(_9a2));}});var _9a4=[];if(_9a1.length>0){var _9a5=new dojo.DeferredList(_9a1);_9a5.addCallback(function(_9a6){dojo.forEach(_99f,function(_9a7){if(_9a7.__popups&&_9a7.__popups.length>0){if(_9a7.__deferredsPos||_9a7.__deferredsPos===0){var _9a8=_9a6[_9a7.__deferredsPos][1];_9a4=_9a4.concat(EAU._createSelectionFeatureLayers(_9a7,_9a8.layers,_9a0,map));delete _9a7.__deferredsPos;}else{_9a4=_9a4.concat(EAU._createSelectionFeatureLayers(_9a7,null,_9a0,map));}}});map.addLayers(_9a4);});}else{dojo.forEach(_99f,function(_9a9){if(_9a9.__popups&&_9a9.__popups.length>0){_9a4=_9a4.concat(EAU._createSelectionFeatureLayers(_9a9,null,_9a0,map));}});map.addLayers(_9a4);}};EAU._createSelectionFeatureLayers=function(_9aa,_9ab,_9ac,map){var url=_9aa.url;var _9ad=_9aa.__popups;var ids=_9aa.__popupIds;var urls=_9aa.__popupUrls;var _9ae=_9aa.__resourceInfo;var _9af=[];dojo.forEach(_9ad,function(_9b0,_9b1){var i,_9b2=null;if(_9ab){for(i=0;i<_9ab.length;i++){if(_9ab[i].id===ids[_9b1]){_9b2=_9ab[i];break;}}}var _9b3=url+"/"+ids[_9b1];if(urls[_9b1].length){_9b3=urls[_9b1];}var _9b4=new esri.layers.FeatureLayer(EAU._checkUrl(_9b3),{id:_9aa.id+"_"+ids[_9b1],outFields:["*"],mode:esri.layers.FeatureLayer.MODE_SELECTION,infoTemplate:_9b0&&new _9ac(_9b0),drawMode:false,visible:_9aa.visible,resourceInfo:_9b2,autoGeneralize:true});if(_9b4.loaded){EAU._updateLayerScaleInfo(_9ae.layers,_9b4);}else{dojo.connect(_9b4,"onLoad",function(_9b5){EAU._updateLayerScaleInfo(_9ae.layers,_9b5);});}_9af.push(_9b4);});if(_9af.length>0){var _9b6=function(_9b7,_9b8){dojo.forEach(_9b7,function(_9b9){if(_9b8){_9b9.show();}else{_9b9.hide();}});};dojo.connect(_9aa,"onVisibilityChange",dojo.hitch(this,_9b6,_9af));var _9ba=function(_9bb,_9bc,_9bd){if(_9bb.id===_9bd.id){dojo.forEach(_9bc,function(_9be){map.removeLayer(_9be);});}};dojo.connect(map,"onLayerRemove",dojo.hitch(this,_9ba,_9aa,_9af));}delete _9aa.__popups;delete _9aa.__popupIds;delete _9aa.__popupUrls;delete _9aa.__resourceInfo;return _9af;};EAU._getServiceInfo=function(url,_9bf){var url2=EAU._checkUrl(url);return esri.request({url:url2,content:{f:"json"},callbackParamName:"callback",error:function(_9c0,io){if(_9c0.message){_9c0.message+=" [url:"+url2+"]";}else{_9c0.message="[url:"+url2+"]";}_9bf.push(_9c0);esri.config.defaults.io.errorHandler(_9c0,io);}});};EAU._getLayersInfo=function(_9c1){return esri.request({url:EAU._checkUrl(_9c1.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}});};EAU._initLayer=function(_9c2,_9c3,_9c4,_9c5){var _9c6,_9c7=_9c4._clazz;if(_9c2.type==="OpenStreetMap"){_9c6=new esri.layers.OpenStreetMapLayer({id:_9c2.id});}else{if(_9c2.type==="WMS"){var _9c8=[];var _9c9=[];dojo.forEach(_9c2.layers,function(_9ca){_9c9.push(new esri.layers.WMSLayerInfo({name:_9ca.name,title:_9ca.title,legendURL:_9ca.legendURL}));_9c8.push(_9ca.name);},this);if(_9c2.visibleLayers){_9c8=_9c2.visibleLayers;}var _9cb=new esri.geometry.Extent(_9c2.extent[0][0],_9c2.extent[0][1],_9c2.extent[1][0],_9c2.extent[1][1],new esri.SpatialReference({wkid:4326}));var _9cc={extent:_9cb,layerInfos:_9c9,version:_9c2.version,maxWidth:_9c2.maxWidth,maxHeight:_9c2.maxHeight,getMapUrl:_9c2.mapUrl,spatialReferences:_9c2.spatialReferences,title:_9c2.title,copyright:_9c2.copyright};_9c6=new esri.layers.WMSLayer(_9c2.url,{id:_9c2.id,visibleLayers:_9c8,format:"png",transparent:_9c2.baseMapLayer?false:true,opacity:_9c2.opacity,visible:(_9c2.visibility!==null)?_9c2.visibility:true,resourceInfo:_9cc});_9c6.spatialReference.wkid=_9cc.spatialReferences[0];}else{if(_9c2.type==="KML"){_9c6=new esri.layers.KMLLayer(_9c2.url,{id:_9c2.id,visible:(_9c2.visibility!==null)?_9c2.visibility:true,outSR:_9c5});dojo.connect(_9c6,"onLoad",function(){var _9cd=function(_9ce){dojo.forEach(_9ce,function(_9cf){if(_9cf.declaredClass==="esri.layers.FeatureLayer"||_9cf.declaredClass==="esri.layers.MapImageLayer"){_9cf.setOpacity(_9c2.opacity);}else{if(_9cf.declaredClass==="esri.layers.KMLLayer"){if(_9cf.loaded){_9cd(_9cf.getLayers());}else{dojo.connect(_9cf,"onLoad",dojo.hitch(this,function(lyr){_9cd(lyr.getLayers());}));}}}});};if(_9c2.opacity!==null){_9cd(_9c6.getLayers());}if(_9c2.visibleFolders){dojo.forEach(_9c6.folders,function(_9d0){if(dojo.indexOf(_9c2.visibleFolders,_9d0.id)>-1){_9c6.setFolderVisibility(_9d0,true);}else{_9c6.setFolderVisibility(_9d0,false);}},this);}});}else{if(_9c2.type=="CSV"&&_9c2.url){_9c6=new esri.layers.FeatureLayer(_9c2.featureCollection,{infoTemplate:new esri.dijit.PopupTemplate(_9c2.popupInfo?_9c2.popupInfo:esri.arcgis.csv.generateDefaultPopupInfo(_9c2.featureCollection)),id:_9c2.id?_9c2.id:null,outFields:["*"],visible:(_9c2.visibility!==null)?_9c2.visibility:true,opacity:_9c2.opacity?_9c2.opacity:1,autoGeneralize:true});}else{if(_9c2.layerDefinition&&!_9c2.url){var _9d1=dojo.fromJson(dojo.toJson(_9c2));delete _9d1.id;delete _9d1.opacity;delete _9d1.visibility;_9c6=new esri.layers.FeatureLayer(_9d1,{id:_9c2.id,opacity:_9c2.opacity,visible:_9c2.visibility,outFields:["*"],infoTemplate:_9d1.popupInfo&&new _9c7(_9d1.popupInfo),autoGeneralize:true});}else{if(_9c2.type==="BingMapsAerial"||_9c2.type==="BingMapsRoad"||_9c2.type==="BingMapsHybrid"){var _9d2=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL_WITH_LABELS;if(_9c2.type==="BingMapsAerial"){_9d2=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL;}else{if(_9c2.type==="BingMapsRoad"){_9d2=esri.virtualearth.VETiledLayer.MAP_STYLE_ROAD;}}_9c6=new esri.virtualearth.VETiledLayer({bingMapsKey:_9c4.bingMapsKey,mapStyle:_9d2,id:_9c2.id});}else{if(_9c2.resourceInfo&&_9c2.resourceInfo.mapName){if(_9c2.resourceInfo.singleFusedMapCache===true){if(!_9c2.baseMapLayer){if(EAU._sameSpatialReferenceAsBasemap(_9c2,_9c3)){if(EAU._sameTilingSchemeAsBasemap(_9c2,_9c3)){_9c6=EAU._loadAsCached(_9c2);}else{_9c6=EAU._loadAsDynamic(_9c2);}}else{_9c6=EAU._loadAsDynamic(_9c2);}}else{_9c6=EAU._loadAsCached(_9c2);}}else{_9c6=EAU._loadAsDynamic(_9c2);}}else{if(_9c2.resourceInfo&&_9c2.resourceInfo.pixelSizeX){var _9d3=new esri.layers.ImageServiceParameters();_9d3.bandIds=_9c2.bandIds;if(!_9c2.bandIds&&_9c2.resourceInfo.bandCount&&parseInt(_9c2.resourceInfo.bandCount,10)>3){_9d3.bandIds=[0,1,2];}_9c6=new esri.layers.ArcGISImageServiceLayer(EAU._checkUrl(_9c2.url),{resourceInfo:_9c2.resourceInfo,opacity:_9c2.opacity,visible:_9c2.visibility,id:_9c2.id,imageServiceParameters:_9d3});}else{if(_9c2.resourceInfo&&_9c2.resourceInfo.type==="Feature Layer"){_9c6=new esri.layers.FeatureLayer(EAU._checkUrl(_9c2.url),{resourceInfo:_9c2.resourceInfo,opacity:_9c2.opacity,visible:_9c2.visibility,id:_9c2.id,mode:esri._isDefined(_9c2.mode)?_9c2.mode:esri.layers.FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:_9c2.popupInfo&&new _9c7(_9c2.popupInfo),autoGeneralize:true});if(_9c2.layerDefinition){if(_9c2.layerDefinition.drawingInfo&&_9c2.layerDefinition.drawingInfo.renderer){var _9d4=esri.renderer.fromJson(_9c2.layerDefinition.drawingInfo.renderer);_9c6.setRenderer(_9d4);}if(_9c2.layerDefinition.definitionExpression){_9c6.setDefinitionExpression(_9c2.layerDefinition.definitionExpression);}if(esri._isDefined(_9c2.layerDefinition.minScale)){_9c6.minScale=_9c2.layerDefinition.minScale;}if(esri._isDefined(_9c2.layerDefinition.maxScale)){_9c6.maxScale=_9c2.layerDefinition.maxScale;}}}}}}}}}}}if(_9c6){_9c6.arcgisProps={title:_9c2.title};}return _9c6;};EAU._loadAsCached=function(_9d5){var _9d6=[];if(!_9d5.displayLevels){_9d6=dojo.map(_9d5.resourceInfo.tileInfo.lods,function(lod){return lod.level;});}var _9d7=new esri.layers.ArcGISTiledMapServiceLayer(EAU._checkUrl(_9d5.url),{resourceInfo:_9d5.resourceInfo,opacity:_9d5.opacity,visible:_9d5.visibility,displayLevels:_9d5.displayLevels||_9d6,id:_9d5.id});EAU._processPopups(_9d7,_9d5);return _9d7;};EAU._loadAsDynamic=function(_9d8){var _9d9=new esri.layers.ImageParameters();_9d9.format="png24";if(_9d8.resourceInfo&&_9d8.resourceInfo.supportedImageFormatTypes&&_9d8.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")>-1){_9d9.format="png32";}var _9da=new esri.layers.ArcGISDynamicMapServiceLayer(EAU._checkUrl(_9d8.url),{resourceInfo:_9d8.resourceInfo,opacity:_9d8.opacity,visible:_9d8.visibility,id:_9d8.id,imageParameters:_9d9});if(!_9d8.visibleLayers){var _9db="";var _9dc=_9da.layerInfos;dojo.forEach(_9dc,function(_9dd){if(_9dd.defaultVisibility){_9db+=(_9db.length>0?",":"")+_9dd.id;}});_9d8.visibleLayers=_9db;}var _9de=EAU._getVisibleFeatureLayers(_9da.layerInfos,_9d8.visibleLayers);_9da.setVisibleLayers(_9de);if(_9d8.layers&&_9d8.layers.length>0){var _9df=[];dojo.forEach(_9d8.layers,function(_9e0){if(_9e0.layerDefinition&&_9e0.layerDefinition.definitionExpression){_9df[_9e0.id]=_9e0.layerDefinition.definitionExpression;}},this);if(_9df.length>0){_9da.setLayerDefinitions(_9df);}}EAU._processPopups(_9da,_9d8);return _9da;};EAU._processPopups=function(_9e1,_9e2){var _9e3=_9e1.layerInfos;var _9e4=_9e2.layers;if(_9e4&&_9e3){var _9e5=[],ids=[],urls=[];dojo.forEach(_9e3,function(_9e6){var id=_9e6.id,i;if(!_9e6.subLayerIds&&dojo.indexOf(_9e1.visibleLayers,id)!==-1){for(i=0;i<_9e4.length;i++){var _9e7=_9e4[i];if(_9e7.id===id){ids.push(id);_9e5.push(_9e7.popupInfo);urls.push(_9e7.layerUrl||"");break;}}}});if(_9e5.length){_9e1.__popups=_9e5;_9e1.__popupIds=ids;_9e1.__popupUrls=urls;_9e1.__resourceInfo=_9e2.resourceInfo;}}};EAU._onLayersAddResult=function(_9e8){dojo.forEach(_9e8,function(_9e9){var _9ea=_9e9.layer;if(_9ea.toJson){var json=_9ea.toJson();if(json.featureSet&&_9ea.name.indexOf("Text")>-1){dojo.forEach(json.featureSet.features,function(_9eb,idx){if(_9eb.attributes.TEXT){var _9ec=_9ea.graphics[idx];_9ec.symbol.setText(_9eb.attributes.TEXT);if(_9eb.symbol.horizontalAlignment){_9ec.symbol.align=_9eb.symbol.horizontalAlignment;}_9ec.setSymbol(_9ec.symbol);_9ec.setAttributes(_9eb.attributes);}},this);}}});};EAU._sameSpatialReferenceAsBasemap=function(_9ed,_9ee){var _9ef=[102113,102100,3857];var sp1=_9ee[0].layerObject.fullExtent.spatialReference;var sp2=new esri.SpatialReference(_9ed.resourceInfo.fullExtent.spatialReference);if(dojo.toJson(sp1.toJson())===dojo.toJson(sp2.toJson())){return true;}else{if(dojo.some(_9ef,function(wkid){return wkid===sp2.wkid;})&&dojo.some(_9ef,function(wkid){return wkid===sp1.wkid;})){return true;}}return false;};EAU._sameTilingSchemeAsBasemap=function(_9f0,_9f1){if(!_9f1[0].layerObject.tileInfo){return false;}var _9f2=[];dojo.forEach(_9f1,function(_9f3){if(_9f3.baseMapLayer){if(_9f3.layerObject.tileInfo){_9f2=_9f2.concat(dojo.map(_9f3.layerObject.tileInfo.lods,function(lod){return lod.scale;}));}}});var _9f4=dojo.some(_9f0.resourceInfo.tileInfo.lods,function(lod){return dojo.some(_9f2,function(_9f5){return _9f5===lod.scale;});});return _9f4;};EAU._showPopup=function(evt){var map=this,_9f6=map.infoWindow,_9f7=evt.graphic;if(!map.loaded){return;}_9f6.hide();_9f6.clearFeatures();var _9f8=[];dojo.forEach(map.graphicsLayerIds,function(_9f9){var _9fa=map.getLayer(_9f9);if(_9fa&&_9fa.declaredClass.indexOf("FeatureLayer")!==-1&&_9fa.loaded&&_9fa.visible){_9fa.clearSelection();if(_9fa.infoTemplate&&!_9fa._suspended){_9f8.push(_9fa);}}});_9f7=(_9f7&&_9f7._getEffInfoTemplate())?_9f7:null;if(!_9f8.length&&!_9f7){return;}var _9fb=EAU._calculateClickTolerance(_9f8);var _9fc=evt.screenPoint,_9fd=map.toMap(new esri.geometry.Point(_9fc.x-_9fb,_9fc.y+_9fb)),_9fe=map.toMap(new esri.geometry.Point(_9fc.x+_9fb,_9fc.y-_9fb)),_9ff=new esri.geometry.Extent(_9fd.x,_9fd.y,_9fe.x,_9fe.y,map.spatialReference);var _a00=new esri.tasks.Query();_a00.geometry=_9ff;_a00.timeExtent=map.timeExtent;var _a01=dojo.map(_9f8,function(_a02){var dfd=_a02.selectFeatures(_a00);dfd.addCallback(function(){var _a03=_a02.getSelectedFeatures();return _a03;});return dfd;});if(_9f7){var dfd=new dojo.Deferred();dfd.callback([_9f7]);_a01.splice(0,0,dfd);}var _a04=dojo.some(_a01,function(dfd){return dfd.fired===-1;});if(!_a04){var _a05=_9f7?1:0;dojo.forEach(_9f8,function(_a06){_a05=_a05+_a06.getSelectedFeatures().length;});if(!_a05){return;}}_9f6.setFeatures(_a01);_9f6.show(evt.mapPoint,{closestFirst:true});};EAU._calculateClickTolerance=function(_a07){var _a08=6;dojo.forEach(_a07,function(_a09){var _a0a=_a09.renderer;if(_a0a.declaredClass==="esri.renderer.SimpleRenderer"){var _a0b=_a0a.symbol;if(_a0b&&_a0b.xoffset){_a08=Math.max(_a08,Math.abs(_a0b.xoffset));}if(_a0b&&_a0b.yoffset){_a08=Math.max(_a08,Math.abs(_a0b.yoffset));}}else{if(_a0a.declaredClass==="esri.renderer.UniqueValueRenderer"||_a0a.declaredClass==="esri.renderer.ClassBreaksRenderer"){dojo.forEach(_a0a.infos,function(info){var _a0c=info.symbol;if(_a0c&&_a0c.xoffset){_a08=Math.max(_a08,Math.abs(_a0c.xoffset));}if(_a0c&&_a0c.yoffset){_a08=Math.max(_a08,Math.abs(_a0c.yoffset));}});}}});return _a08;};EAU._getVisibleFeatureLayers=function(_a0d,_a0e){if(!_a0d||!_a0e||_a0e.length===0){return [];}var _a0f=","+_a0e+",";var _a10=[];var _a11="";var k,_a12=",";for(k=0;k<_a0d.length;k++){if(_a0d[k].subLayerIds!==null){if(_a0f.indexOf(","+_a0d[k].id+",")===-1||_a12.indexOf(","+_a0d[k].id+",")>-1){_a12+=_a0d[k].subLayerIds.toString()+",";}}else{if(_a0f.indexOf(","+_a0d[k].id+",")>-1&&_a12.indexOf(","+_a0d[k].id+",")===-1){_a10.push(_a0d[k].id);_a11=",";}}}return _a10;};EAU._updateLayerScaleInfo=function(_a13,_a14){if(_a14.version<=10.1&&_a13){var i,id=parseInt(_a14.url.substring(_a14.url.lastIndexOf("/")+1,_a14.url.length));for(i=_a13.length-1;i>=0;i--){if(_a13[i].id==id){if(_a14.minScale==0&&_a13[i].minScale>0){_a14.minScale=_a13[i].minScale;}else{if(_a14.minScale>0&&_a13[i].minScale==0){_a14.minScale=_a14.minScale;}else{if(_a14.minScale>0&&_a13[i].minScale>0){_a14.minScale=Math.min(_a14.minScale,_a13[i].minScale);}}}_a14.maxScale=Math.max(_a14.maxScale||0,_a13[i].maxScale||0);if(_a13[i].parentLayerId>-1){id=_a13[i].parentLayerId;}else{break;}}}}};EAU._checkUrl=function(url){if(location.protocol==="https:"&&(EAU._isHostedService(url)||EAU._isAgolService(url))){url=url.replace("http:","https:");}return url;};EAU._isHostedService=function(url){if(!url){return false;}var _a15=".arcgis.com/";var _a16=(new dojo._Url(EAU.arcgisUrl)).authority;return (url.indexOf(_a15)!==-1||url.indexOf(_a16)!==-1);};EAU._isAgolService=function(url){if(!url){return false;}return (url.indexOf("/services.arcgisonline.com/")!==-1||url.indexOf("/server.arcgisonline.com/")!==-1);};}());});